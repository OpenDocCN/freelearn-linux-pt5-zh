- en: 1 Running Linux in a Virtual Environment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1 在虚拟环境中运行 Linux
- en: Join our book community on Discord
  id: totrans-1
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 加入我们在 Discord 上的书籍社区
- en: '[https://packt.link/SecNet](https://packt.link/SecNet)'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://packt.link/SecNet](https://packt.link/SecNet)'
- en: '![](img/file0.png)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
  zh: '![](img/file0.png)'
- en: 'So, you may be asking yourself: *Why do I need to study Linux security? Isn''t
    Linux already secure? After all, it''s not Windows*. But the fact is, there are
    many reasons.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，你可能会问自己：*为什么我要学习 Linux 安全？难道 Linux 不是已经很安全了吗？毕竟，它不像 Windows*。但事实是，有很多原因。
- en: 'It''s true that Linux has certain advantages over Windows when it comes to
    security. These include the following:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 确实，Linux 在安全性方面相较于 Windows 有一些优势。这些优势包括以下几点：
- en: Unlike Windows, Linux was designed from the ground up as a multiuser operating
    system. So, user security tends to be a bit better on a Linux system.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 Windows 不同，Linux 从一开始就被设计为多用户操作系统。因此，Linux 系统中的用户安全通常比其他系统要好一些。
- en: Linux offers a better separation between administrative users and unprivileged
    users. This makes it a bit harder for intruders, and it also makes it a bit harder
    for a user to accidentally infect a Linux machine with something nasty.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux 提供了更好的管理用户与非特权用户之间的隔离。这使得入侵者更难进入系统，同时也使得用户不小心将恶意软件传染到 Linux 系统的可能性更小。
- en: Linux is much more resistant to viruses and malware infections than Windows
    is. Certain Linux distributions come with built-in mechanisms, such as SELinux
    in Red Hat and its free-of-charge clones, and AppArmor in Ubuntu and SUSE, that
    help prevent intruders from taking control of a system.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux 对病毒和恶意软件的感染比 Windows 更具抵抗力。某些 Linux 发行版自带内建机制，例如 Red Hat 及其免费克隆中的 SELinux，以及
    Ubuntu 和 SUSE 中的 AppArmor，它们帮助防止入侵者控制系统。
- en: Linux is free and open source software. This allows anyone who has the skill
    to audit Linux code to hunt for bugs or backdoors.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux 是免费和开源的软件。这允许任何有能力审核 Linux 代码的人寻找漏洞或后门。
- en: But even with those advantages, Linux is just like everything else that's been
    created by mankind. That is, it isn't perfect.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 但即使有这些优势，Linux 和人类创造的其他一切一样。也就是说，它并不完美。
- en: 'Here are the topics that we''ll cover in this chapter:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们将在本章中讨论的主题：
- en: Looking at the threat landscape
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 观察威胁形势
- en: Why every Linux administrator needs to learn about Linux security
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么每个 Linux 管理员都需要了解 Linux 安全
- en: A bit about the threat landscape, with some examples of how attackers have,
    at times, been able to breach Linux systems
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于威胁形势的一些介绍，以及攻击者在某些时候如何能够突破 Linux 系统的几个例子
- en: Resources for keeping up with IT security news
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跟进 IT 安全新闻的资源
- en: Differences between physical, virtual, and cloud setups
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 物理、虚拟和云环境的差异
- en: Setting up Ubuntu Server and Red Hat-type virtual machines with VirtualBox,
    and installing the **Extra Packages for Enterprise Linux** (**EPEL**) repository
    in the Red Hat-type virtual machines
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 VirtualBox 上设置 Ubuntu Server 和 Red Hat 类型的虚拟机，并在 Red Hat 类型虚拟机中安装 **企业 Linux
    附加包**（**EPEL**）库
- en: Creating virtual machine snapshots
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建虚拟机快照
- en: Installing Cygwin on a Windows host so that Windows users can connect to a virtual
    machine from their Windows hosts
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Windows 主机上安装 Cygwin，以便 Windows 用户可以从其 Windows 主机连接到虚拟机
- en: Using the Windows 10/11 Bash shell to access Linux systems
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Windows 10/11 的 Bash shell 访问 Linux 系统
- en: How to keep your Linux systems updated
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何保持你的 Linux 系统更新
- en: Let’s begin by talking about threats.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从谈论威胁开始。
- en: Looking at the threat landscape
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 观察威胁形势
- en: 'If you''ve kept up with IT technology news over the past few years, you''ll
    likely have seen at least a few articles about how attackers have compromised
    Linux servers. For example, while it''s true that Linux isn''t really susceptible
    to virus infections, there have been several cases where attackers have planted
    other types of malware on Linux servers. Here are some examples:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你过去几年一直关注 IT 技术新闻，你可能至少看到过几篇关于攻击者入侵 Linux 服务器的文章。例如，虽然 Linux 并不容易感染病毒，但确实发生过几起攻击者在
    Linux 服务器上植入其他类型恶意软件的案件。以下是一些例子：
- en: '**Botnet malware**: This causes a server to join a botnet that is controlled
    by a remote attacker. One of the more famous cases involved joining Linux servers
    to a botnet that launched **denial-of-service** (**DoS**) attacks against other
    networks.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**僵尸网络恶意软件**：这使得服务器加入一个由远程攻击者控制的僵尸网络。一个比较著名的案例是将 Linux 服务器加入一个僵尸网络，并发起 **拒绝服务**（**DoS**）攻击，攻击其他网络。'
- en: '**Ransomware**: This is designed to encrypt user data until the server owner
    pays a ransom fee. But even after paying the fee, there''s no guarantee that the
    data can be recovered.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**勒索软件**：这种软件旨在加密用户数据，直到服务器所有者支付赎金。但即使支付了赎金，也不能保证数据能够恢复。'
- en: '**Cryptocoin mining software**: This causes the CPUs of the server on which
    it''s planted to work extra hard and consume more energy. Cryptocoins that get
    mined go to the accounts of the attackers who planted the software.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加密货币挖矿软件**：这会导致安装该软件的服务器的CPU超负荷工作并消耗更多的能量。被挖掘的加密货币会进入攻击者的账户，这些攻击者是植入软件的人。'
- en: And, of course, there have been plenty of breaches that don't involve malware,
    such as where attackers have found a way to steal user credentials, credit card
    data, or other sensitive information.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，也有许多安全漏洞并不涉及恶意软件，例如攻击者通过某种方式窃取用户凭证、信用卡数据或其他敏感信息。
- en: 'Some security breaches come about because of plain carelessness. Here''s an
    example of where a careless Adobe administrator placed the company''s private
    security key on a public security blog: [https://arstechnica.com/information-technology/2017/09/in-spectacular-fail-adobe-security-team-posts-private-pgp-key-on-blog/](https://arstechnica.com/information-technology/2017/09/in-spectacular-fail-adobe-security-team-posts-private-pgp-key-on-blog/).'
  id: totrans-29
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一些安全漏洞是由于单纯的疏忽所致。这里有一个例子，说明一位粗心的Adobe管理员将公司的私密安全密钥放在了一个公开的安全博客上：[https://arstechnica.com/information-technology/2017/09/in-spectacular-fail-adobe-security-team-posts-private-pgp-key-on-blog/](https://arstechnica.com/information-technology/2017/09/in-spectacular-fail-adobe-security-team-posts-private-pgp-key-on-blog/)。
- en: Now, let’s talk a bit more about security breaches.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们再多谈一些关于安全漏洞的事情。
- en: Why do security breaches happen?
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么会发生安全漏洞？
- en: Regardless of whether you're running Linux, Windows, or whatever else, the reasons
    for security breaches are usually the same. They could be security bugs in the
    operating system or security bugs in an application that's running on that operating
    system. Often, a bug-related security breach could have been prevented had the
    administrators applied security updates in a timely manner.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你运行的是Linux、Windows还是其他操作系统，安全漏洞发生的原因通常都是相同的。它们可能是操作系统中的安全漏洞，或者是运行在该操作系统上的应用程序中的安全漏洞。通常，与漏洞相关的安全漏洞本可以通过管理员及时应用安全更新来避免。
- en: Another big issue is poorly configured servers. A standard, out-of-the-box configuration
    of a Linux server is actually quite insecure and can cause a whole ton of problems.
    One cause of poorly configured servers is simply the lack of properly trained
    personnel to securely administer Linux servers. (Of course, that's great news
    for the readers of this book, because—trust me—there's no lack of well-paying
    IT security jobs.)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个大问题是配置不当的服务器。一个标准的、开箱即用的Linux服务器配置实际上是相当不安全的，可能会引发大量问题。配置不当的服务器的一个原因是缺乏经过专业培训的人员来安全地管理Linux服务器。（当然，这对本书的读者来说是个好消息，因为——相信我——IT安全领域的高薪工作是没有短缺的。）
- en: And now, in addition to Linux on servers and desktops, we have Linux on devices
    that are part of the **Internet of Things** (**IoT**). There have been many security
    problems with these devices, in large part because people just don't know how
    to configure them securely.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，除了服务器和桌面上的Linux操作系统，我们还在**物联网**（**IoT**）设备上使用Linux。这些设备存在许多安全问题，很大一部分原因是人们根本不知道如何安全地配置它们。
- en: As we journey through this book, we'll see how to do business the right way,
    to make our servers as secure as possible. One thing we can do is to keep up with
    security-related news.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的旅程中，我们将学习如何以正确的方式做生意，使我们的服务器尽可能安全。我们可以做的一件事是跟进与安全相关的新闻。
- en: Keeping up with security news
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 跟进安全新闻
- en: If you're in the IT business, even if you're not a security administrator, you'll
    want to keep up with the latest security news. In the age of the Internet, that's
    easy to do.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你从事IT行业，即使你不是安全管理员，你也会想要跟进最新的安全新闻。在互联网时代，做到这一点非常容易。
- en: First, there are quite a few websites that specialize in network security news.
    Examples include ***Packet Storm Security*** and ***The Hacker News***. Regular
    tech news sites and Linux news websites, such as ***Ars Technica***, ***Fudzilla***,
    ***The Register***, ***ZDNet***, and ***LXer***, also carry reports about network
    security breaches. And, if you'd rather watch videos than read, you'll find plenty
    of good YouTube channels, such as ***BeginLinux Guru***.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，有许多专门报道网络安全新闻的网站。例如 ***Packet Storm Security*** 和 ***The Hacker News***。一些常规的技术新闻网站和
    Linux 新闻网站，如 ***Ars Technica***、***Fudzilla***、***The Register***、***ZDNet***
    和 ***LXer***，也会报道网络安全漏洞的相关信息。而且，如果你更喜欢看视频而不是阅读，你会找到许多好的 YouTube 频道，例如 ***BeginLinux
    Guru***。
- en: Finally, regardless of which Linux distro you're using, be sure to keep up with
    the news and current documentation for your Linux distro. Distro maintainers should
    have a way of letting you know if a security problem crops up in their products.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，不管你使用的是哪种 Linux 发行版，务必跟进你所使用的 Linux 发行版的新闻和当前文档。发行版维护者应该有一种方式，让你知道他们的产品中是否出现了安全问题。
- en: 'Here are some links to some good security-related websites:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些安全相关网站的链接：
- en: '**Packet Storm Security**: [https://packetstormsecurity.com/](https://packetstormsecurity.com/)'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Packet Storm Security**: [https://packetstormsecurity.com/](https://packetstormsecurity.com/)'
- en: '**The Hacker News**: [https://thehackernews.com/](https://thehackernews.com/)'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**The Hacker News**: [https://thehackernews.com/](https://thehackernews.com/)'
- en: 'Here are some links to more generalized tech websites:'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这里有一些更广泛的技术网站链接：
- en: '**Ars Technica**: [https://arstechnica.com/](https://arstechnica.com/)'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Ars Technica**: [https://arstechnica.com/](https://arstechnica.com/)'
- en: '**Fudzilla**: [https://www.fudzilla.com/](https://www.fudzilla.com/)'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fudzilla**: [https://www.fudzilla.com/](https://www.fudzilla.com/)'
- en: '**The Register**: [https://www.theregister.co.uk/](https://www.theregister.co.uk/)'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**The Register**: [https://www.theregister.co.uk/](https://www.theregister.co.uk/)'
- en: '**ZDNet**: [https://www.zdnet.com/](https://www.zdnet.com/)'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ZDNet**: [https://www.zdnet.com/](https://www.zdnet.com/)'
- en: 'You can check out some general Linux learning resources as well as Linux news
    sites:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以查看一些通用的 Linux 学习资源以及 Linux 新闻网站：
- en: '**LXer**: [http://lxer.com/](http://lxer.com/)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**LXer**: [http://lxer.com/](http://lxer.com/)'
- en: '**BeginLinux Guru on YouTube**: [https://www.youtube.com/channel/UC88eard_2sz89an6unmlbeA](https://www.youtube.com/channel/UC88eard_2sz89an6unmlbeA)'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**BeginLinux Guru 在 YouTube 上**: [https://www.youtube.com/channel/UC88eard_2sz89an6unmlbeA](https://www.youtube.com/channel/UC88eard_2sz89an6unmlbeA)'
- en: '(Full disclosure: I am the world-famous BeginLinux Guru.)'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: （完全披露：我就是世界著名的 BeginLinux Guru。）
- en: One thing to always remember as you go through this book is that the only operating
    system you'll ever see that's totally, 100% secure will be installed on a computer
    that never gets turned on.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读本书时需要时刻记住的一点是，唯一一个你见过的完全100%安全的操作系统，将会是安装在永远不会开机的计算机上。
- en: Differences between physical, virtual, and cloud setups
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 物理、虚拟和云环境之间的区别
- en: So you can do the hands-on labs, I'll introduce you to the concept of virtual
    machines. This is just a way of running one operating system within another operating
    system. So, it doesn't matter whether you're running Windows, macOS, or Linux
    on your host machine. In any case, you can run a Linux virtual machine that you
    can use for practice, and that you won't have to worry about if it gets trashed.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让你能够进行实践操作，我将向你介绍虚拟机的概念。这仅仅是一种在一个操作系统内部运行另一个操作系统的方式。所以，不管你在主机上运行的是 Windows、macOS
    还是 Linux，都没关系。无论如何，你都可以运行一个 Linux 虚拟机，用它进行练习，而且如果它被弄坏了，你也不必担心。
- en: Oracle's VirtualBox, which is what we'll be using, is great for what we'll be
    doing. In an enterprise setting, you'll find other forms of virtualization software
    that are better suited for use in data centers. In the past, server hardware could
    only handle doing one thing at a time, which meant that you had to have one server
    running DNS, another running DHCP, and so on. Nowadays, we have servers with gobs
    of memory, gobs of drive space, and CPUs with as many as 64 cores each. So, it's
    now cheaper and more convenient to install multiple virtual machines on each server,
    with each virtual machine doing its own specific job. This also means that you
    not only have to worry about security on the physical server that hosts these
    virtual machines, you also need to worry about the security of each virtual machine.
    An added problem is that you need to ensure that the virtual machines remain properly
    isolated from each other, especially ones that contain sensitive data.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用的虚拟化软件是Oracle的VirtualBox，它非常适合我们要做的工作。在企业环境中，你会发现有些虚拟化软件更适合用于数据中心。过去，服务器硬件只能一次做一件事，这意味着你必须为DNS运行一台服务器，为DHCP运行另一台，依此类推。如今，我们有了内存充足、硬盘空间大的服务器，每个CPU最多有64个核心。因此，在每台服务器上安装多个虚拟机，且每个虚拟机执行特定任务，变得更加便宜和方便。这也意味着你不仅需要关注托管这些虚拟机的物理服务器的安全性，还需要关注每个虚拟机的安全性。一个额外的问题是，你需要确保虚拟机之间正确地隔离，尤其是那些包含敏感数据的虚拟机。
- en: And then, there's the cloud. Many different outfits provide cloud services,
    where a person or a company can spin up an instance of either Windows or their
    choice of a Linux distro. When setting up a Linux distro on a cloud service, there
    are things that you'll have to do right away to enhance security. (That's something
    that we'll cover in *Chapter 6*, *SSH Hardening.*) And realize that when you set
    up a server on a cloud service, you'll always have more concerns about proper
    security, because it will have an interface that connects to the wild and woolly
    Internet. (Your on-premises servers, except for ones that are meant to serve the
    public, are usually isolated from the Internet.)
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，就是云计算了。许多不同的公司提供云服务，个人或公司可以在云端启动Windows实例或他们选择的Linux发行版。当在云服务上设置Linux发行版时，有些操作你需要立即做，以增强安全性。（这是我们在*第六章*，*SSH加固*中会讲解的内容。）并且要意识到，当你在云服务上设置服务器时，你会更关注适当的安全性，因为它会有一个连接到广阔互联网的接口。（你本地的服务器，除非是用于面向公众的，否则通常是与互联网隔离的。）
- en: With our introductory material out of the way, let's get to the real meat of
    the matter, starting with an introduction to our virtualization software.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们介绍完基本材料后，接下来进入真正的核心内容，从介绍我们的虚拟化软件开始。
- en: Introducing VirtualBox and Cygwin
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍VirtualBox和Cygwin
- en: Whenever I write or teach, I try very hard not to provide students with a cure
    for insomnia. Throughout this book, you'll see a bit of theory whenever it's necessary,
    but I mainly like to provide good, practical information. There will also be plenty
    of step-by-step hands-on labs and an occasional bit of humor.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 每当我写作或讲解时，我都会尽力避免给学生提供一种安眠药式的内容。在本书中，只有在必要时才会涉及一些理论，但我更喜欢提供有用的实践信息。书中还会有大量的逐步操作实验，偶尔也会加入一些幽默的元素。
- en: The best way to do the labs is to use Linux virtual machines. Most of what we'll
    do can apply to any Linux distro, but we will also do some things that are specific
    to either **Red Hat Enterprise Linux** (**RHEL**) or Ubuntu Linux. (RHEL is the
    most popular for enterprise use, while Ubuntu is the most popular for cloud deployments.)
    SUSE is the third big enterprise Linux distro. We won’t be doing too much with
    SUSE, but on occasion I’ll point out some of its little quirks.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 做实验的最佳方式是使用Linux虚拟机。我们所做的大多数工作都可以适用于任何Linux发行版，但我们也会做一些特定于**Red Hat企业版Linux**（**RHEL**）或Ubuntu
    Linux的事情。（RHEL在企业使用中最为流行，而Ubuntu在云部署中最为流行。）SUSE是第三大企业Linux发行版。我们不会做太多关于SUSE的内容，但偶尔会提到它的一些小特点。
- en: Red Hat is a billion-dollar company, so there's no doubt about where they stand
    in the Linux market. But since Ubuntu Server is free of charge, we can't judge
    its popularity strictly on the basis of its parent company's worth. The reality
    is that Ubuntu Server is the most widely used Linux distribution for deploying
    cloud-based applications.
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Red Hat是一家价值十亿美元的公司，因此它在Linux市场中的地位无可置疑。但由于Ubuntu Server是免费的，我们不能仅凭其母公司的价值来评判它的受欢迎程度。事实上，Ubuntu
    Server是部署基于云的应用程序最广泛使用的Linux发行版。
- en: ''
  id: totrans-62
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'See here for details: [http://www.zdnet.com/article/ubuntu-linux-continues-to-dominate-openstack-and-other-clouds/](http://www.zdnet.com/article/ubuntu-linux-continues-to-dominate-openstack-and-other-clouds/).'
  id: totrans-63
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 详情请见此处：[http://www.zdnet.com/article/ubuntu-linux-continues-to-dominate-openstack-and-other-clouds/](http://www.zdnet.com/article/ubuntu-linux-continues-to-dominate-openstack-and-other-clouds/)。
- en: Since Red Hat is a fee-based product, we'll substitute CentOS 7, AlmaLinux8,
    and AlmaLinux9, which are built from Red Hat source code and are free of charge.
    (We're using all three of these distros because there are some differences between
    them, and all of them will be supported for quite some time to come.)
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Red Hat 是收费产品，我们将使用 CentOS 7、AlmaLinux8 和 AlmaLinux9，这些都是基于 Red Hat 源代码构建的，并且是免费的。（我们会使用这三个发行版，因为它们之间有一些差异，并且它们都会在相当长的时间内得到支持。）
- en: For Ubuntu, we'll concentrate on version 22.04, since it's the newest **Long
    Term Support** (**LTS**) version. (We’ll also take an occasional look at Ubuntu
    20.04, since it’s still supported and there are a few differences between it and
    22.04.) A new LTS version of Ubuntu comes out in April of every even-numbered
    year, and non-LTS versions come out in April of every odd-numbered year and every
    October. For production use, you'll mainly want to stick with the LTS versions,
    because the non-LTS versions can sometimes be a bit problematic.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Ubuntu，我们将集中讨论 22.04 版本，因为它是最新的 **长期支持** (**LTS**) 版本。（我们也会偶尔看一下 Ubuntu 20.04，因为它仍然得到支持，并且它与
    22.04 之间存在一些差异。）新的 LTS 版本会在每个偶数年份的 4 月发布，而非 LTS 版本会在每个奇数年份的 4 月和每年 10 月发布。对于生产环境，你主要需要坚持使用
    LTS 版本，因为非 LTS 版本有时可能会遇到一些问题。
- en: There are several different virtualization platforms that you can use, but my
    own preferred choice is VirtualBox.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 有多种虚拟化平台可供选择，但我个人的首选是 VirtualBox。
- en: VirtualBox is available for Windows, Linux, and Mac hosts, and is free of charge
    for all of them. (It’s also available for Solaris hosts, but I doubt that may
    of you will be running that.) It has features that you have to pay for on other
    platforms, such as the ability to create snapshots of virtual machines.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: VirtualBox 适用于 Windows、Linux 和 Mac 主机，且所有平台均免费提供。（它也可以用于 Solaris 主机，但我怀疑你们当中大多数人不会运行这个系统。）它具有在其他平台上需要付费的功能，比如创建虚拟机快照的能力。
- en: Some of the labs that we'll be doing will require you to simulate creating a
    connection from your host machine to a remote Linux server. If your host machine
    is either a Linux or a Mac machine, you'll just be able to open the terminal and
    use the built-in **Secure Shell (SSH)** tools. If your host machine is running
    Windows, you'll need to install some sort of Bash shell, such as Cygwin, or just
    use the Bash shell that's built into Windows 10/11 Pro.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将进行的一些实验需要你模拟从主机连接到远程 Linux 服务器。如果你的主机是 Linux 或 Mac 机器，你只需要打开终端并使用内置的 **安全外壳（SSH）**
    工具。如果你的主机运行的是 Windows，你需要安装某种 Bash shell，例如 Cygwin，或者直接使用 Windows 10/11 Pro 中自带的
    Bash shell。
- en: Installing a virtual machine in VirtualBox
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 VirtualBox 中安装虚拟机
- en: 'For those of you who''ve never used VirtualBox, here''s a quick guide to get
    you going:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 对于从未使用过 VirtualBox 的你们，以下是一个快速入门指南：
- en: Download and install VirtualBox and the VirtualBox Extension Pack. You can get
    them from [https://www.virtualbox.org/](https://www.virtualbox.org/).
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并安装 VirtualBox 和 VirtualBox 扩展包。你可以从 [https://www.virtualbox.org/](https://www.virtualbox.org/)
    获取它们。
- en: Download the installation `.iso` files for Ubuntu Server 22.04, CentOS 7, AlmaLinux8,
    and AlmaLinux9\. You can get them from [https://ubuntu.com/](https://ubuntu.com/),
    [https://almalinux.org/](https://almalinux.org/) and [https://www.centos.org/](https://www.centos.org/).
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载 Ubuntu Server 22.04、CentOS 7、AlmaLinux8 和 AlmaLinux9 的安装 `.iso` 文件。你可以从 [https://ubuntu.com/](https://ubuntu.com/)、[https://almalinux.org/](https://almalinux.org/)
    和 [https://www.centos.org/](https://www.centos.org/) 获取它们。
- en: 'Start VirtualBox and click the **New** icon at the top of the screen. Fill
    out the information where requested. Increase the virtual drive size to 20 GB,
    but leave everything else as the default settings, as shown here:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 VirtualBox 并点击屏幕顶部的 **新建** 图标。根据提示填写信息。将虚拟磁盘大小增加到 20 GB，但保留其他所有默认设置，如下所示：
- en: '![B19501_01_01.png](img/file1.png)'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_01.png](img/file1.png)'
- en: B19501_01_01.png
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_01.png
- en: '![](img/file2.png)'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_IMG
  zh: '![](img/file2.png)'
- en: Start the new virtual machine. Click on the folder icon that’s beside the location
    dialog box and navigate to the directory where you stored the `.iso` files that
    you downloaded. Choose either the Ubuntu ISO file, the CentOS ISO file, or one
    of the AlmaLinux ISO files, as shown in the following screenshot. (If the ISO
    file doesn’t show up in the list, click the **Add** button at the top left corner
    to add it.)
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 启动新虚拟机。点击位置对话框旁边的文件夹图标，导航到存储下载的 `.iso` 文件的目录。选择 Ubuntu ISO 文件、CentOS ISO 文件或
    AlmaLinux ISO 文件，如下图所示。（如果 ISO 文件没有显示在列表中，点击左上角的 **添加** 按钮来添加它。）
- en: '![B19501_01_02.png](img/file3.png)'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_02.png](img/file3.png)'
- en: B19501_01_02.png
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_02.png
- en: Click the **Start** button on the dialog box to start installing the operating
    system. Note that for Ubuntu Server, you won't be installing a desktop interface.
    For the CentOS 7 virtual machine, choose either the KDE desktop or the GNOME desktop,
    as you desire. For AlmaLinux, your only desktop choice is GNOME. (We'll go through
    at least one exercise that will require a desktop interface for an AlmaLinux machine.)
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击对话框中的 **开始** 按钮以开始安装操作系统。请注意，对于 Ubuntu 服务器，你将不会安装桌面界面。对于 CentOS 7 虚拟机，你可以根据需要选择
    KDE 桌面或 GNOME 桌面。对于 AlmaLinux，你的唯一桌面选择是 GNOME。（我们将至少进行一次需要桌面界面的 AlmaLinux 机器操作。）
- en: 'When installing Ubuntu, choose **Try or Install Ubuntu Server** when you get
    to this screen:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 Ubuntu 时，来到此屏幕时选择 **试用或安装 Ubuntu 服务器**：
- en: '![B19501_01_03.png](img/file4.png)'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_03.png](img/file4.png)'
- en: B19501_01_03.png
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_03.png
- en: Repeat the procedure for the other Linux distros.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对其他 Linux 发行版重复该过程。
- en: 'Update the Ubuntu virtual machine with these two commands:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下两个命令更新 Ubuntu 虚拟机：
- en: '[PRE0]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Hold off on updating the CentOS and AlmaLinux virtual machines because we'll
    do that in the next exercise.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 暂时不要更新 CentOS 和 AlmaLinux 虚拟机，因为我们将在下一个练习中进行更新。
- en: For Ubuntu, choose to install the **OpenSSH Server** on the **SSH setup** screen.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 Ubuntu，在 **SSH 设置** 屏幕上选择安装 **OpenSSH 服务器**。
- en: When installing Ubuntu, you'll be asked to create a normal user account and
    password for yourself. It won't ask you to create a root user password, but will
    instead automatically add you to the `sudo` group so that you'll have admin privileges.
  id: totrans-89
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 安装 Ubuntu 时，系统会要求你为自己创建一个普通用户帐户和密码。它不会要求你创建 root 用户密码，而是会自动将你添加到 `sudo` 组中，以便你拥有管理员权限。
- en: ''
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: When you get to the user account creation screen of the CentOS or AlmaLinux
    installer, be sure to check the **Make this user administrator box** for your
    own user account, since it isn't checked by default. It will offer you the chance
    to create a password for the root user, but that's entirely optional. (In fact,
    I never do.)
  id: totrans-91
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 当你到达 CentOS 或 AlmaLinux 安装程序的用户帐户创建屏幕时，请确保勾选 **将此用户设置为管理员**，因为默认情况下此选项是未勾选的。系统会提供给你创建
    root 用户密码的机会，但这是完全可选的。（事实上，我从不设置 root 密码。）
- en: 'The user account creation screen of the AlmaLinux 9 installer—which looks the
    same as the one on CentOS 7 and AlmaLinux 8—is shown here:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: AlmaLinux 9 安装程序的用户帐户创建屏幕—与 CentOS 7 和 AlmaLinux 8 的屏幕相同—如下所示：
- en: '![B19501_01_04.png](img/file5.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![B19501_01_04.png](img/file5.png)'
- en: B19501_01_04.png
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: B19501_01_04.png
- en: For Ubuntu 22.04, you'll see just one self-explanatory screen to set up your
    real name, a username, and a password. The Ubuntu installer will automatically
    add your user account to the `sudo` group, which will give you full administrator
    privileges.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 22.04，你会看到一个简洁的屏幕，设置你的真实姓名、用户名和密码。Ubuntu 安装程序会自动将你的用户帐户添加到 `sudo`
    组，从而赋予你完全的管理员权限。
- en: 'Here''s the user account creation screen for Ubuntu 22.04:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 Ubuntu 22.04 的用户帐户创建屏幕：
- en: '![B19501_01_05.png](img/file6.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![B19501_01_05.png](img/file6.png)'
- en: B19501_01_05.png
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: B19501_01_05.png
- en: Now, let's change gears and move on to CentOS 7.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们转到 CentOS 7。
- en: Installing the EPEL repository on the CentOS 7 virtual machine
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 CentOS 7 虚拟机上安装 EPEL 仓库
- en: 'While the Ubuntu package repositories have pretty much everything that you
    need for this course, the CentOS and AlmaLinux package repositories are—shall
    we say—lacking. To have the packages that you''ll need for the CentOS and AlmaLinux
    hands-on labs, you''ll need to install the EPEL repository. (The EPEL project
    is run by the Fedora team.) When you install third-party repositories on Red Hat
    7 and CentOS 7 systems, you''ll also need to install a priorities package and
    edit the `.repo` files to set the proper priorities for each repository. This
    will prevent packages from the third-party repository from overwriting official
    Red Hat and CentOS packages if they just happen to have the same name. The following
    steps will help you install the required packages and edit the `.repo` files:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Ubuntu 软件包仓库几乎包含了你在本课程中所需的一切，但 CentOS 和 AlmaLinux 的软件包仓库——可以说——相对匮乏。为了在 CentOS
    和 AlmaLinux 的动手实验中获得所需的软件包，你需要安装 EPEL 仓库。（EPEL 项目由 Fedora 团队管理。）当你在 Red Hat 7
    和 CentOS 7 系统上安装第三方仓库时，还需要安装优先级包并编辑 `.repo` 文件，以为每个仓库设置正确的优先级。这将防止来自第三方仓库的软件包覆盖官方
    Red Hat 和 CentOS 软件包，即使它们恰好拥有相同的名称。以下步骤将帮助你安装所需的软件包并编辑 `.repo` 文件：
- en: 'The two packages that you''ll need to install EPEL are in the normal CentOS
    7 repositories. To install them, just run this command:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 EPEL 所需的两个软件包已经包含在 CentOS 7 的常规仓库中。要安装它们，只需运行以下命令：
- en: '[PRE1]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'When the installation completes, navigate to the `/etc/yum.repos.d` directory,
    and open the `CentOS-Base.repo` file in your favorite text editor. After the last
    line of the `base`, `updates`, and `extras` sections, add the line `priority=1`.
    After the last line of the `centosplus` section, add the line `priority=2`. Save
    the file and close the editor. Each of the sections that you''ve edited should
    look something like this, except with the appropriate name and priority number:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，导航到 `/etc/yum.repos.d` 目录，并在你喜欢的文本编辑器中打开 `CentOS-Base.repo` 文件。在 `base`、`updates`
    和 `extras` 部分的最后一行后，添加 `priority=1`。在 `centosplus` 部分的最后一行后，添加 `priority=2`。保存文件并关闭编辑器。你编辑过的每个部分应该看起来像这样，除了适当的名称和优先级号码：
- en: '[PRE2]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Open the `epel.repo` file for editing. After the last line of the `epel` section,
    add the line `priority=10`. After the last line of each remaining section, add
    the line `priority=11`.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 `epel.repo` 文件进行编辑。在 `epel` 部分的最后一行后，添加 `priority=10`。在每个剩余部分的最后一行后，添加 `priority=11`。
- en: 'Update the system and then create a list of the installed and available packages
    by running the following commands:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新系统后，运行以下命令以创建已安装和可用软件包的列表：
- en: '[PRE3]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Now, let's move on to AlmaLinux.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们继续进行 AlmaLinux 的设置。
- en: Installing the EPEL repository on the AlmaLinux 8/9 virtual machines
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 AlmaLinux 8/9 虚拟机上安装 EPEL 仓库
- en: 'To install the EPEL repository on AlmaLinux, all you have to do is run this
    command:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 AlmaLinux 上安装 EPEL 仓库，你只需运行以下命令：
- en: '[PRE4]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: There's no priorities package as there is on CentOS 7 and earlier, so we won't
    have to worry about configuring the repository priorities.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 由于在 CentOS 7 及更早版本中没有优先级包，因此我们不必担心配置仓库的优先级。
- en: 'When the package installation is complete, update the system and create a list
    of available software packages with these two commands:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 当软件包安装完成后，使用以下两个命令更新系统并创建可用软件包列表：
- en: '[PRE5]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Next, let's configure our network.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们来配置网络。
- en: Configuring a network for VirtualBox virtual machines
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 VirtualBox 虚拟机的网络
- en: 'Some of our training scenarios will require you to simulate creating a connection
    to a remote server. You would do this by using your host machine to connect to
    a virtual machine. When you first create a virtual machine on VirtualBox, the
    networking is set to **NAT** mode. In order to connect to the virtual machine
    from the host, you''ll need to set the virtual machine''s network adapter to **Bridged
    Adapter** mode. Here''s how you can do this:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的一些培训场景将要求你模拟连接到远程服务器。你可以通过使用主机机器连接到虚拟机来完成此操作。当你第一次在 VirtualBox 中创建虚拟机时，网络模式设置为**NAT**。为了从主机连接到虚拟机，你需要将虚拟机的网络适配器设置为**桥接适配器**模式。以下是你可以执行此操作的步骤：
- en: Shut down any virtual machines that you've already created.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭你已创建的任何虚拟机。
- en: On the **VirtualBox Manager** screen, open the **Settings** dialog for a virtual
    machine.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**VirtualBox 管理器**界面中，打开虚拟机的**设置**对话框。
- en: 'Click the **Network** menu item. Change the **Attached to** setting from **NAT**
    to **Bridged Adapter**, and change the **Promiscuous Mode** setting to **Allow
    All**, as shown in this screenshot:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **Network** 菜单项。将 **Attached to** 设置从 **NAT** 更改为 **Bridged Adapter**，并将
    **Promiscuous Mode** 设置为 **Allow All**，如此截图所示：
- en: '![B19501_01_06.png](img/file7.png)'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_06.png](img/file7.png)'
- en: B19501_01_06.png
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_06.png
- en: Restart the virtual machine and set it to use a static IP address.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动虚拟机并设置其使用静态 IP 地址。
- en: 'Tip:'
  id: totrans-125
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 提示：
- en: ''
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: If you assign static IP addresses from the high end of your subnet range, it
    will be easier to prevent conflicts with low-number IP addresses that get handed
    out from your internet gateway.
  id: totrans-127
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果您从子网范围的高端分配静态 IP 地址，则更容易避免与从您的互联网网关分配的低编号 IP 地址发生冲突。
- en: Creating a virtual machine snapshot with VirtualBox
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 VirtualBox 创建虚拟机快照
- en: 'One of the beautiful things about working with virtual machines is that you
    can create a snapshot and roll back to it if you mess something up. With VirtualBox,
    that''s easy to do, by following these steps:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 与虚拟机一起工作的美妙之处之一是，如果出现问题，您可以创建一个快照并回滚到它。使用 VirtualBox，这很容易做到，只需按照以下步骤操作：
- en: From the **Machine** menu of the **VirtualBox Manager** screen, select **Tools/Snapshots**.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 **VirtualBox 管理器** 屏幕的 **Machine** 菜单中，选择 **Tools/Snapshots**。
- en: 'Further right on the screen, click on the **Take** icon to bring up the snapshot
    dialog box. Either fill in the desired **Snapshot Name** or accept the default
    name. Optionally, you can create a description, as you see in this screenshot:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕右侧更进一步，点击 **Take** 图标以打开快照对话框。要么填写所需的 **Snapshot Name**，要么接受默认名称。可选地，您可以创建一个描述，如此截图所示：
- en: '![B19501_01_07.png](img/file8.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![B19501_01_07.png](img/file8.png)'
- en: B19501_01_07.png
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: B19501_01_07.png
- en: After you've made changes to the virtual machine, you can roll back to the snapshot
    by shutting down the virtual machine, then highlighting the **snapshot name**,
    and clicking on the **Restore** button.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 当您对虚拟机进行更改后，可以通过关闭虚拟机，然后突出显示 **快照名称** 并点击 **恢复** 按钮来回滚到快照。
- en: Using Cygwin to connect to your virtual machines
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Cygwin 连接到您的虚拟机
- en: If your host machine is either a Linux or Mac machine, you'll simply open the
    host's terminal and use the tools that are already there to connect to the virtual
    machine. Windows 10 and Windows 11, even in the base Home Edition, now come with
    a **Secure Shell** client that's built into the both the normal **Command Prompt**
    and **PowerShell**, and you can use that if you desire. But if you’d prefer to
    use something that comes closer to the actual Linux experience, you might consider
    Cygwin.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的主机机器是 Linux 或 Mac，您只需打开主机的终端并使用那些已经存在的工具来连接虚拟机。Windows 10 和 Windows 11，即使在基础
    Home 版本中，现在都带有内置的 **Secure Shell** 客户端，分别内置于普通的 **命令提示符** 和 **PowerShell** 中，您可以选择使用它。但如果您希望使用更接近实际
    Linux 经验的工具，您可以考虑使用 Cygwin。
- en: Cygwin, a project of the Red Hat company, is a free open source Bash shell that's
    built for Windows. It's free of charge and easy to install.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: Cygwin，红帽公司的项目，是一个专为 Windows 构建的免费开源 Bash shell。它是免费的，易于安装。
- en: Installing Cygwin on your Windows host
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在您的 Windows 主机上安装 Cygwin
- en: 'Here''s a quick how-to to get you going with Cygwin:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个快速入门使用 Cygwin 的方法：
- en: In your host machine's browser, download the appropriate `setup*.exe` file for
    your version of Windows from [http://www.cygwin.com/](http://www.cygwin.com/).
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您主机机器的浏览器中，从 [http://www.cygwin.com/](http://www.cygwin.com/) 下载适合您 Windows
    版本的适当的 `setup*.exe` 文件。
- en: Double-click on the setup icon to begin the installation. For the most part,
    just accept the defaults until you get to the **package selection** screen. (The
    one exception will be the screen where you select a download mirror.)
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击安装程序图标开始安装。在大多数情况下，只需接受默认设置，直到您到达 **包选择** 屏幕。 （唯一的例外是您选择下载镜像的屏幕。）
- en: At the top of the **package selection** screen, select **Category** from the
    **View** menu.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **包选择** 屏幕的顶部，从 **View** 菜单中选择 **Category**。
- en: 'Expand the **Net** category, as shown in the following screenshot:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开 **Net** 类别，如下截图所示：
- en: '![B19501_01_08.png](img/file9.png)'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_08.png](img/file9.png)'
- en: B19501_01_08.png
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_08.png
- en: 'Scroll down until you see the **openssh** package. Under the **New** column,
    click on **Skip** (this causes a version number to appear in place of the **Skip**),
    as you see in this screenshot:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动直到看到 **openssh** 包。在 **New** 列下，点击 **Skip**（这将导致 **Skip** 的位置显示版本号），如此截图所示：
- en: '![B19501_01_09.png](img/file10.png)'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_09.png](img/file10.png)'
- en: B19501_01_09.png
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_09.png
- en: '![](img/file11.png)'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_IMG
  zh: '![](img/file11.png)'
- en: 'After you have selected the proper package, your screen should look like this:'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 选择正确的包之后，你的屏幕应该是这样的：
- en: '![B19501_01_10.png](img/file12.png)'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_10.png](img/file12.png)'
- en: B19501_01_10.png
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_10.png
- en: In the bottom right-hand corner, click **Next**. If a **Resolving Dependencies**
    screen pops up, click **Next** on it as well.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在右下角，点击**下一步**。如果弹出**解析依赖关系**的屏幕，点击该屏幕上的**下一步**。
- en: Keep the setup file that you downloaded, because you'll use it later to either
    install more software packages or to update Cygwin. (When you open Cygwin, any
    updated packages will show up on the **Pending view** on the **View** menu.)
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保留你下载的安装文件，因为稍后你会用它来安装更多的软件包或更新 Cygwin。（当你打开 Cygwin 时，任何更新的软件包都会出现在**查看**菜单中的**待处理视图**里。）
- en: Once you open Cygwin from the Windows Start menu, you can resize it as you desire,
    and use either the *Ctrl* + + or *Ctrl* + - key combinations to resize the font.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你从 Windows 开始菜单打开 Cygwin，你可以根据需要调整其大小，并使用 *Ctrl* + + 或 *Ctrl* + - 键组合来调整字体大小。
- en: Next, we'll look at the Windows 10/11 Bash shell.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将查看 Windows 10/11 中的 Bash shell。
- en: Using the Windows 10 SSH Client to interface with Linux virtual machines
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Windows 10 SSH 客户端与 Linux 虚拟机交互
- en: If you're using Windows 10, you already have an SSH client built into your operating
    system.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是 Windows 10，你的操作系统中已经内建了 SSH 客户端。
- en: 'So, let''s see how to do this:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们看看如何操作：
- en: 'To get to it, you can open the traditional **Command Prompt** from the **Windows
    System** menu, like so:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要访问它，你可以从**Windows 系统**菜单中打开传统的**命令提示符**，如下所示：
- en: '![B19501_01_11.png](img/file13.png)'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_11.png](img/file13.png)'
- en: B19501_01_11.png
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_11.png
- en: 'Then, just type in the SSH commands the same as you would from a Mac or Linux
    machine, like this:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，像在 Mac 或 Linux 机器上那样，输入 SSH 命令：
- en: '![B19501_01_12.png](img/file14.png)'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_12.png](img/file14.png)'
- en: B19501_01_12.png
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_12.png
- en: 'A better option is to use **Windows** **PowerShell** instead of the normal
    **Command Prompt**. Get to it as you see here:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更好的选择是使用**Windows****PowerShell**，而不是普通的**命令提示符**。按照如下方式进入：
- en: '![B19501_01_13.png](img/file15.png)'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_13.png](img/file15.png)'
- en: B19501_01_13.png
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_13.png
- en: 'As before, let''s use it to log in to my Orange Pi device, as you see here:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如前所述，让我们用它来登录到我的 Orange Pi 设备，正如你在这里看到的：
- en: '![B19501_01_14.png](img/file16.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![B19501_01_14.png](img/file16.png)'
- en: B19501_01_14.png
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: B19501_01_14.png
- en: If you have the choice, go with **PowerShell** instead of **Command Prompt**.
    **PowerShell** is a bit closer to the Linux Bash shell experience, and you'll
    be much happier with it.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可以选择，建议使用**PowerShell**而不是**命令提示符**。**PowerShell** 更接近于 Linux 的 Bash shell
    体验，你会因此更加满意。
- en: Using the Windows 11 SSH Client to interface with Linux virtual machines
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Windows 11 SSH 客户端与 Linux 虚拟机交互
- en: You’ll work with Windows 11 the same way, except that the menu entries for the
    **Command Prompt** and **PowerShell** are in different places. The **Command Prompt**
    now has its own Terminal item on the main menu, and **PowerShell** is now under
    the **Windows Tools** submenu. Windows 11 also has a third option, which is a
    built-in Ubuntu virtual machine. You’ll see an icon for that in the bottom task
    bar.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 11 中，你的操作方式和 Windows 10 一样，唯一的区别是**命令提示符**和**PowerShell**的菜单位置不同。**命令提示符**现在在主菜单中有了自己的终端项，而**PowerShell**则位于**Windows
    工具**子菜单下。Windows 11 还新增了第三个选项，即内建的 Ubuntu 虚拟机，你会在任务栏底部看到它的图标。
- en: Cygwin versus the Windows shell
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Cygwin 与 Windows shell 的对比
- en: Both Cygwin and the SSH client that's built into Windows 10/11 have their pros
    and cons. In favor of Cygwin, you can install a variety of packages to customize
    it pretty much any way you want. Also, Cygwin stores the SSH `known_hosts` and
    keys files in the `.ssh` directory of the user’s home directory, which is where
    you’d expect to find them if you’re used to working with Linux. If you use the
    SSH client that’s built into Windows, you’ll have to search for these files in
    other locations.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: Cygwin 和 Windows 10/11 内建的 SSH 客户端各有优缺点。支持 Cygwin 的优点是，你可以安装多种软件包，几乎可以按你的需求自定义它。另外，Cygwin
    会将 SSH 的 `known_hosts` 和密钥文件存储在用户主目录的 `.ssh` 目录中，如果你习惯于使用 Linux，这里是你应该找到这些文件的位置。如果你使用的是
    Windows 内建的 SSH 客户端，你需要在其他位置查找这些文件。
- en: In favor of the Windows 10/11 built-in SSH client, there's the fact that it's
    already there. Also, it's much easier to use if you need to access your normal
    Windows folders because Cygwin traps you in its own sandboxed directory structure.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 支持 Windows 10/11 内建 SSH 客户端的理由之一就是它已经预装了。而且，如果你需要访问普通的 Windows 文件夹，它比 Cygwin
    更容易使用，因为 Cygwin 会把你困在它自己的沙盒目录结构中。
- en: Keeping the Linux systems updated
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 保持 Linux 系统更新
- en: 'Spend some time perusing the **Common Vulnerabilities and Exposures** database,
    and you''ll soon see why it''s so important to keep your systems updated. Yes,
    indeed, you''ll even find that there have been security flaws with our beloved
    Linux, as you can see here:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 花些时间浏览**常见漏洞和暴露**数据库，你很快就会明白为什么保持系统更新如此重要。没错，你甚至会发现，我们心爱的Linux也有安全漏洞，正如你在这里看到的：
- en: '![B19501_01_15.png](img/file17.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![B19501_01_15.png](img/file17.png)'
- en: B19501_01_15.png
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: B19501_01_15.png
- en: Updating a Linux system only requires one or two simple commands, and it's generally
    faster and less painful than updating a Windows system.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 更新Linux系统只需要一两个简单的命令，通常比更新Windows系统更快且不那么痛苦。
- en: 'You can find the **Common Vulnerabilities and Exposures** database here:'
  id: totrans-183
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 你可以在这里找到**常见漏洞和暴露**数据库：
- en: ''
  id: totrans-184
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[https://cve.mitre.org/](https://cve.mitre.org/)'
  id: totrans-185
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[https://cve.mitre.org/](https://cve.mitre.org/)'
- en: ''
  id: totrans-186
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: All of you conscientious, dedicated Linux administrators will definitely want
    to become familiar with this site.
  id: totrans-187
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 所有你们这些有责任心、敬业的Linux管理员，肯定都想熟悉这个网站。
- en: Next, let’s look at updating the Debian-based systems, which include Ubuntu.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们来看看如何更新基于Debian的系统，包括Ubuntu。
- en: Updating Debian-based systems
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更新基于Debian的系统
- en: 'Let''s take a look at how to update Debian-based systems:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看如何更新基于Debian的系统：
- en: 'On Debian and its many children, including Ubuntu, run two commands, as shown
    here:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Debian及其众多衍生版本（包括Ubuntu）上，运行两个命令，如下所示：
- en: '[PRE6]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Occasionally, you''ll also need to remove some old packages that are no longer
    needed. How will you know? Easy. When you log in to the system, a message will
    appear on the command line. To remove these old packages, just run this command:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 偶尔，你还需要删除一些不再需要的旧软件包。你怎么知道呢？很简单。当你登录系统时，命令行上会出现一条消息。要删除这些旧软件包，只需运行这个命令：
- en: '[PRE7]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Next, we will configure auto updates for Ubuntu.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将为Ubuntu配置自动更新。
- en: Configuring auto updates for Ubuntu
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为Ubuntu配置自动更新
- en: 'When you first install Ubuntu 22.04, automatic updates are turned on by default.
    To verify that, you’ll first check the status of the unattended-upgrades service,
    like so:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 当你首次安装Ubuntu 22.04时，自动更新默认是开启的。为了验证这一点，你首先需要检查unattended-upgrades服务的状态，像这样：
- en: '[PRE8]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Then, look in the `/etc/apt/apt.conf.d/20auto-upgrades` file. If auto-updating
    is enabled, you’ll see this:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，查看`/etc/apt/apt.conf.d/20auto-upgrades`文件。如果启用了自动更新，你会看到如下内容：
- en: '[PRE9]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'I must confess, though, that I have mixed feelings about this. I mean, it''s
    nice that the security updates get installed without me having to do anything,
    but a lot of those updates require that the system be rebooted before they can
    take effect. By default, Ubuntu systems don''t automatically reboot after an update
    is installed. If you keep it that way, you''ll see a message about it when you
    log into the system. But if you prefer, you can set Ubuntu to automatically reboot
    after it automatically updates itself. Here''s how to do it:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 不过，我必须承认，我对此有些复杂的感受。我的意思是，虽然安全更新能够在我不做任何事情的情况下自动安装，这很好，但很多更新需要系统重启后才能生效。默认情况下，Ubuntu系统在安装更新后不会自动重启。如果你保持默认设置，当你登录系统时，会看到一个关于此的消息。但如果你愿意，你可以设置Ubuntu在自动更新后自动重启。方法如下：
- en: 'Go into the `/etc/apt/apt.conf.d` directory and open the `50unattended-upgrades`
    file in your favorite text editor. In the vicinity of line *67*, you''ll see a
    line that says:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入`/etc/apt/apt.conf.d`目录，并使用你喜欢的文本编辑器打开`50unattended-upgrades`文件。在大约*67*行的位置，你会看到一行内容：
- en: '[PRE10]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Uncomment the line by removing the leading slashes, and change `false` to `true`,
    like so:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过删除前导斜杠来取消注释这一行，并将`false`改为`true`，像这样：
- en: '[PRE11]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'With this new configuration, Ubuntu will now reboot itself immediately after
    the automatic update process has completed. If you''d rather have the machine
    reboot at a specific time, scroll down to about line *103*, where you''ll see
    this:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个新配置下，Ubuntu现在将在自动更新过程完成后立即重新启动。如果你更希望在特定的时间重启机器，请向下滚动到大约*103*行，你会看到以下内容：
- en: '[PRE12]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Since this line is commented out with its pair of leading slashes, it currently
    has no effect. To have the machine reboot at 2:00 A.M., just uncomment this line.
    To have it reboot at, say, 10:00 P.M., uncomment the line and change the time
    to `22:00`, like so:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于这一行被其前导的双斜杠注释掉了，它目前没有任何效果。要让机器在早上2:00重新启动，只需取消注释这一行。要让它在比如晚上10:00重启，取消注释这一行并将时间改为`22:00`，像这样：
- en: '[PRE13]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Of course, there''s that old, basic precept that thou shalt not install system
    updates on a production system without first testing them on a test system. Any
    operating system vendor can occasionally supply you with problematic updates,
    and that has included Ubuntu. (I know what you''re saying: *Preach it, Donnie*.)
    Ubuntu''s automatic update feature is in direct opposition to that basic precept.
    If automatic updates have been enabled, disabling them is quite easy, if you choose
    to do so.'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，有一个基本的原则是，**你不应在生产系统上安装系统更新，而不先在测试系统上进行测试**。任何操作系统供应商偶尔都可能提供有问题的更新，而这也包括Ubuntu。（我知道你在说什么：*说得对，Donnie*。）Ubuntu的自动更新功能与这一基本原则直接冲突。如果启用了自动更新，禁用它其实很简单，如果你选择这么做的话。
- en: 'To disable automatic updates, just go into the `/etc/apt/apt.conf.d` directory
    and open the `20auto-upgrades` file in your favorite text editor. Here’s what
    you’ll see:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要禁用自动更新，只需进入`/etc/apt/apt.conf.d`目录，并用你喜欢的文本编辑器打开`20auto-upgrades`文件。你会看到如下内容：
- en: '[PRE14]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Change the parameter for that second line to 0, so that the file will now look
    like this:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将第二行的参数更改为0，这样文件看起来就像这样：
- en: '[PRE15]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Now, the system will still check for updates and show a message at the login
    screen when any are available, but it won't automatically install them. And of
    course, it should go without saying that you need to check your systems on a regular
    basis to see if updates are available. If you do prefer to leave automatic updates
    enabled, be sure to either enable automatic rebooting or to log in to the system
    at least a couple of times a week to see if it needs to be rebooted.
  id: totrans-215
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 现在，系统仍然会检查更新，并在登录屏幕上显示有更新时的消息，但不会自动安装它们。当然，应该说得很明显，你需要定期检查你的系统，以查看是否有更新可用。如果你确实希望保持自动更新启用，确保启用自动重启，或者每周至少登录系统几次，看看是否需要重启。
- en: 'If you want to see if there are any security-related updates available, but
    don''t want to see any non-security updates, use the `unattended-upgrade` command,
    like so:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想查看是否有任何与安全相关的更新可用，但不想看到任何非安全更新，可以使用`unattended-upgrade`命令，像这样：
- en: '[PRE16]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'To manually install the security-related updates without installing non-security
    updates, just run:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 若要手动安装与安全相关的更新，而不安装非安全更新，只需运行：
- en: '[PRE17]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: If you're running some form of desktop Ubuntu on a workstation that gets shut
    down after every use, you can enable the automatic updates if you like, but there's
    no need to enable automatic reboots.
  id: totrans-220
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果你在一个每次使用后都会关机的工作站上运行桌面版Ubuntu，你可以根据需要启用自动更新，但无需启用自动重启。
- en: ''
  id: totrans-221
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Also, if you''re running a non-Ubuntu flavor of Debian, which would include
    Raspbian for the Raspberry Pi, you can give it the same functionality as Ubuntu
    by installing the `unattended-upgrades` package. Just run this command:'
  id: totrans-222
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 此外，如果你运行的是非Ubuntu版本的Debian（包括树莓派的Raspbian），你可以通过安装`unattended-upgrades`软件包，使其具备与Ubuntu相同的功能。只需运行此命令：
- en: '[PRE18]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: You can also use the `apt` command to install only the security updates, but
    it would require piping the `apt` output into a convoluted set of text filters
    in order to mask the non-security updates. Using the `unattended-upgrade` command
    is much easier.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以使用`apt`命令只安装安全更新，但这需要将`apt`的输出通过一系列复杂的文本过滤器进行管道处理，以便屏蔽非安全更新。使用`unattended-upgrade`命令要简单得多。
- en: I said before that we should always test updates on a test system before we
    install them on a production system, and that certainly does hold true for corporate
    servers. But what do we do when we have a whole bunch of IoT devices that we need
    to keep updated, especially if these devices are all over the place out in the
    field and in consumer devices?
  id: totrans-225
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我之前说过，我们应该总是在测试系统上测试更新，之后再在生产系统上安装它们，这一点对于企业服务器来说确实是成立的。但当我们有一大堆物联网设备需要保持更新时，尤其是当这些设备分布在各地、甚至是消费者设备中时，我们该怎么办呢？
- en: ''
  id: totrans-226
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In the wonderful world of IoT, the ARM CPU versions of Ubuntu, Raspbian, and
    Debian are the most popular Linux distros for use on the various Pi devices, including
    the ubiquitous Raspberry Pi. If you have lots of IoT devices in the field and
    in consumer devices, you might not have direct control over them once they've
    been deployed or sold. They still need to be kept updated, so setting up unattended
    updates with automatic rebooting would certainly be advantageous. But keep in
    mind that in the world of IoT, we have to be concerned about safety as well as
    security. So, for example, if you have devices that are set up as some sort of
    critical, safety-related industrial controller, then you most likely don't want
    the device to automatically reboot after doing automatic updates. But if you're
    a television vendor who installs Linux on smart televisions, then definitely set
    them up to automatically update and to automatically reboot themselves after an
    update.
  id: totrans-227
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在神奇的物联网世界中，适用于各种Pi设备（包括无处不在的树莓派）的最流行Linux发行版是ARM CPU版本的Ubuntu、Raspbian和Debian。如果你在现场和消费设备中有大量物联网设备，一旦它们被部署或售出，你可能无法直接控制它们。它们仍然需要保持更新，因此设置无人值守更新并自动重启无疑会带来便利。但请记住，在物联网世界中，我们不仅要关注安全性，还要关注安全问题。例如，如果你有设备被设置为某种关键的、安全相关的工业控制器，那么在执行自动更新后，你很可能不希望设备自动重启。但如果你是安装Linux的智能电视供应商，那么肯定应该设置它们自动更新并在更新后自动重启。
- en: Next, let’s look at updating the RHEL 7 systems.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们来看一下更新RHEL 7系统。
- en: Updating Red Hat 7-based systems
  id: totrans-229
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更新基于Red Hat 7的系统
- en: 'With Red Hat-based systems, which include CentOS and Oracle Linux, there''s
    no automatic update mechanism that you can set up during installation. So, with
    the default configuration, you''ll need to perform updates yourself:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 对于基于Red Hat的系统，包括CentOS和Oracle Linux，在安装过程中没有自动更新机制。因此，在默认配置下，你需要自己执行更新：
- en: 'To update a Red Hat 7-based system, just run this one command:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要更新一个基于Red Hat 7的系统，只需运行以下命令：
- en: '[PRE19]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Sometimes, you might just want to see if there are any security-related updates
    that are ready to be installed. Do that by running this command:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有时候，你可能只想查看是否有任何与安全相关的更新准备好安装。可以通过运行以下命令来做到这一点：
- en: '[PRE20]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'If any security updates are available, you''ll see them at the end of the command
    output. On the system that I just tested, there was only one security update available,
    which looks like this:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果有任何安全更新可用，你将在命令输出的最后看到它们。我刚刚测试的系统中，只有一个安全更新可用，内容如下：
- en: '[PRE21]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'If the only thing you want to install is just the security updates, run this
    command:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你只想安装安全更新，运行以下命令：
- en: '[PRE22]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Now, let''s say that you need a CentOS system to automatically update itself.
    You''re in luck because there''s a package for that. Install and enable it, and
    start it by running these two commands:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，假设你需要一个CentOS系统自动更新自己。你很幸运，因为有一个专门的包来实现这一点。安装并启用它，然后通过运行以下两条命令来启动它：
- en: '[PRE23]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'To configure it, go into the `/etc/yum` directory, and edit the `yum-cron.conf`
    file. At the top of the file, you''ll see this:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要进行配置，进入`/etc/yum`目录，编辑`yum-cron.conf`文件。在文件顶部，你将看到如下内容：
- en: '[PRE24]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: This lists the various types of upgrades we can do. The last line shows that
    we're set to update everything.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 这列出了我们可以执行的各种类型的升级。最后一行显示我们已经设置好更新所有内容。
- en: 'Let''s say that you only want security updates to get applied automatically.
    Just change the last line to the following:'
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设你只希望自动应用安全更新。只需将最后一行更改为以下内容：
- en: '[PRE25]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'On lines *15* and *20*, you''ll see this:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*15*和*20*行，你会看到如下内容：
- en: '[PRE26]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: This indicates that by default, `yum-cron` is only set to automatically download
    updates, but not to install them.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 这表示默认情况下，`yum-cron`只设置为自动下载更新，但不进行安装。
- en: If you want the updates to get automatically installed, change the `apply_updates`
    parameter to `yes`.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你希望自动安装更新，将`apply_updates`参数更改为`yes`。
- en: Note that unlike Ubuntu, there's no setting to make the system automatically
    reboot itself after an update.
  id: totrans-250
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 请注意，不像Ubuntu，CentOS没有设置让系统在更新后自动重启。
- en: 'Finally, let''s look at the mail settings for `yum-cron`, which you''ll find
    on lines *48* through *57* of the `yum-cron.conf` file, as shown here:'
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，让我们来看一下`yum-cron`的邮件设置，你可以在`yum-cron.conf`文件的*48*到*57*行找到，如下所示：
- en: '[PRE27]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: As you can see, the `email_to =` line is set to send messages to the root user
    account. If you want to receive messages at your own account, just change it here.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，`email_to =` 行被设置为将消息发送给root用户账户。如果你想接收来自你自己账户的消息，只需在这里更改。
- en: 'To see the messages, you''ll need to install a mail reader program, if one
    isn''t already installed. (It hasn''t been installed if you chose **Minimal installation**
    when you installed the operating system.) Your best bet is to install `mutt`,
    like so:'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看消息，你需要安装一个邮件阅读程序，如果尚未安装。（如果你在安装操作系统时选择了**最小安装**，则未安装该程序。）你最好的选择是安装`mutt`，如下所示：
- en: '[PRE28]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'When you open `mutt` and look at a message, you''ll see something like this:'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你打开`mutt`并查看一条消息时，你将看到类似这样的内容：
- en: '![B19501_01_16.png](img/file18.png)'
  id: totrans-257
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![B19501_01_16.png](img/file18.png)'
- en: B19501_01_16.png
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: B19501_01_16.png
- en: 'As with all operating systems, certain updates will require that the system
    be restarted. And how do you know when the system needs to be restarted? With
    the `needs-restarting` command, of course. First, though, you need to make sure
    that `needs-restarting` is installed on your system. Do that with this command:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与所有操作系统一样，某些更新将要求系统重启。那么，如何知道系统何时需要重启呢？当然是使用`needs-restarting`命令。不过，首先，你需要确保系统中安装了`needs-restarting`。可以通过以下命令来做到这一点：
- en: '[PRE29]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Once the package is installed, there are three ways to use `needs-restarting`.
    If you just run the command without any option switches, you''ll see the services
    that need to be restarted and the packages that require you to reboot the machine.
    You can also use the `-s` or `-r` options, as shown here:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了该软件包，你可以通过三种方式使用`needs-restarting`。如果仅运行该命令而不加任何选项开关，你将看到需要重启的服务和要求重启计算机的包。你还可以使用`-s`或`-r`选项，如下所示：
- en: '| **Command** | **Explanation** |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
  zh: '| **命令** | **解释** |'
- en: '| `sudo needs-restarting` | This shows the services that need to be restarted,
    and the reasons why the system might need to be rebooted. |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| `sudo needs-restarting` | 这个命令显示需要重启的服务，以及系统可能需要重启的原因。 |'
- en: '| `sudo needs-restarting -s` | This only shows the services that need to be
    restarted. |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| `sudo needs-restarting -s` | 这个命令仅显示需要重启的服务。 |'
- en: '| `sudo needs-restarting -r` | This only shows the reasons why the system needs
    to be rebooted. |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
  zh: '| `sudo needs-restarting -r` | 这个命令仅显示系统需要重启的原因。 |'
- en: Next, we will be updating Red Hat 8/9-based systems.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将更新基于Red Hat 8/9的系统。
- en: Updating Red Hat 8/9-based systems
  id: totrans-267
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更新基于Red Hat 8/9的系统
- en: The old `yum` utility has been around for practically forever, and it's been
    a good, hard-working utility. But it does have its occasional quirks, and at times
    it can be excruciatingly slow. But, not to worry. Our heroes at Red Hat have finally
    done something about that, by replacing `yum` with `dnf`. So, when you work with
    your AlmaLinux 8/9 virtual machines, you'll use `dnf` instead of `yum`. Let's
    see how to do this.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 旧版的`yum`工具已经存在了几乎永远，它是一个出色、勤奋的工具。但它确实有时会出现一些小问题，并且在某些时候会非常慢。不过，别担心。Red Hat的英雄们终于做出了改变，通过用`dnf`替代了`yum`。所以，当你使用你的AlmaLinux
    8/9虚拟机时，你将使用`dnf`而不是`yum`。让我们来看看如何操作。
- en: 'For the most part, you use `dnf` the same way that you''d use `yum`, with the
    same arguments and options. For example, to do a system upgrade, just do:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 大多数情况下，你使用`dnf`的方式与使用`yum`是一样的，使用相同的参数和选项。例如，要进行系统升级，只需执行：
- en: '[PRE30]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The main functional difference between `yum` and `dnf` is that `dnf` has a
    different automatic update mechanism. Instead of installing the `yum-cron` package,
    you''ll now install the `dnf-automatic` package, like so:'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`yum`和`dnf`之间的主要功能差异在于，`dnf`具有不同的自动更新机制。现在，你不再安装`yum-cron`包，而是安装`dnf-automatic`包，如下所示：'
- en: '[PRE31]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'In the `/etc/dnf` directory, you''ll see the `automatic.conf` file, which you''ll
    configure the same way as you did the `yum-cron.conf` file for CentOS 7\. Instead
    of working as a cron job, as the old `yum-cron` did, `dnf-automatic` works with
    a `systemd` timer. When you first install `dnf-automatic`, the timer is disabled.
    Enable it and start it by running this command:'
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`/etc/dnf`目录中，你会看到`automatic.conf`文件，配置方法与CentOS 7中的`yum-cron.conf`文件相同。与旧版的`yum-cron`作为定时任务运行不同，`dnf-automatic`是通过`systemd`定时器来工作的。当你第一次安装`dnf-automatic`时，定时器是禁用的。你需要通过运行以下命令来启用并启动它：
- en: '[PRE32]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Verify that it''s running with this command:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令来验证它是否正在运行：
- en: '[PRE33]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'If it started successfully, you should see something like this when you check
    the status:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果它启动成功，你在检查状态时应该会看到类似这样的内容：
- en: '[PRE34]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: To determine if a system needs to be restarted, just install the `yum-utils`
    package and run the `needs-restarting` command, the same as you did for CentOS
    7\. (For some reason, the Red Hat developers never bothered to change the package
    name to `dnf-utils`.)
  id: totrans-279
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 要确定系统是否需要重启，只需安装`yum-utils`包并运行`needs-restarting`命令，和CentOS 7中的做法一样。（出于某种原因，Red
    Hat开发人员从未将包名称更改为`dnf-utils`。）
- en: ''
  id: totrans-280
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'For more details about `dnf-automatic`, just type:'
  id: totrans-281
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 想了解更多关于`dnf-automatic`的细节，只需输入：
- en: '[PRE35]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: And that's all there is to it.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 就是这些了。
- en: Automatic updating sounds like a good thing, right? Well, it is in some circumstances.
    On my own personal Linux workstations, I always like to turn it off. That's because
    it drives me crazy whenever I want to install a package, and the machine tells
    me that I have to wait until the update process finishes. In an enterprise, it
    might also be desirable to disable automatic updates in some cases, so that administrators
    can have more control over the update process.
  id: totrans-284
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 自动更新听起来是件好事，对吧？嗯，在某些情况下确实如此。在我自己的 Linux 工作站上，我总是喜欢关闭它。因为每当我想安装一个软件包时，系统总是告诉我必须等更新过程完成才能继续。这让我非常烦躁。在企业环境中，在某些情况下禁用自动更新可能也是可取的，这样管理员可以更好地控制更新过程。
- en: There are special considerations about doing updates in an enterprise environment.
    Let's look at them next.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 在企业环境中进行更新时，有一些特殊的考虑因素。接下来我们来看一下这些问题。
- en: Managing updates in an enterprise
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在企业中管理更新
- en: When you first install any Linux distro, it will be configured to access its
    own package repositories. This allows the user to install software packages and
    updates directly from these normal distro repositories. This is great for home
    or small business use, but not so great for the enterprise.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 当你首次安装任何 Linux 发行版时，它会配置为访问其自己的软件包仓库。这允许用户直接从这些常规发行版仓库安装软件包和更新。这对于家庭或小型企业使用非常好，但对于企业环境来说就不太合适。
- en: 'In an enterprise setting, there are two additional considerations:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 在企业环境中，还有两个额外的考虑因素：
- en: You want to restrict what packages the end users are allowed to install.
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要限制最终用户可以安装的软件包。
- en: You always want to test updates on a separate test network before allowing them
    to be installed on a production network.
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在允许更新安装到生产网络之前，你总是需要先在一个独立的测试网络上进行测试。
- en: For these reasons, enterprises will often set up their own repository servers
    that only have approved packages and approved updates. All other machines on the
    network will be configured to pull their packages and updates from them, rather
    than from the normal distro repository. (We won't go into how to set up on-premises
    repository servers here, because that topic is better suited for a Linux administration
    book.)
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 出于这些原因，企业通常会设置自己的仓库服务器，只包含经过批准的软件包和更新。网络中的所有其他机器将配置为从这些仓库拉取软件包和更新，而不是从常规的发行版仓库中拉取。（这里我们不讨论如何设置本地仓库服务器，因为这个话题更适合放在
    Linux 管理书籍中。）
- en: Ubuntu has always been one of the more innovative Linux distros, but it's also
    had more than its fair share of quality-control problems. In its early days, there
    was at least one Ubuntu update that completely broke the operating system, requiring
    the user to re-install the operating system. So, yeah, in any mission-critical
    environment, test those updates before putting them into production.
  id: totrans-292
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Ubuntu 一直是最具创新性的 Linux 发行版之一，但它也曾面临过不少质量控制问题。在早期，至少有一个 Ubuntu 更新完全破坏了操作系统，用户需要重新安装操作系统。所以，是的，在任何关键任务环境中，更新之前一定要先进行测试。
- en: I think that that's about it for our introductory chapter. Let's wrap things
    up in a summary, shall we?
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 我认为这就是我们引言章节的全部内容了。让我们来总结一下，好吗？
- en: Summary
  id: totrans-294
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: We've made a good start with our journey into Linux security and hardening.
    In this chapter, we looked at why it's just as important to know about securing
    and hardening Linux systems as it is to know how to secure and harden Windows
    systems. We provided a few examples of how a poorly configured Linux system can
    be compromised, and we mentioned that learning about Linux security could be good
    for your career. We then looked at some special considerations for setting up
    Linux servers either as virtual machines or on a cloud service. After that, we
    looked at how to set up a virtualized lab environment using VirtualBox, Cygwin,
    and the Windows 10/11 shell. We wrapped things up with a quick look at how to
    keep your Linux systems updated.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经在 Linux 安全性和强化的旅程上迈出了良好的第一步。在这一章中，我们讨论了了解如何保护和强化 Linux 系统与了解如何保护和强化 Windows
    系统一样重要的原因。我们提供了一些关于配置不当的 Linux 系统可能如何被攻破的例子，并提到学习 Linux 安全性对你的职业生涯可能有所帮助。接着，我们讨论了一些在将
    Linux 服务器设置为虚拟机或云服务时需要考虑的特殊事项。然后，我们介绍了如何使用 VirtualBox、Cygwin 和 Windows 10/11 shell
    设置虚拟化实验室环境。最后，我们简要回顾了如何保持 Linux 系统更新。
- en: In the next chapter, we'll look at locking down user accounts, and ensuring
    that the wrong people never get administrative privileges. I'll see you there.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨如何锁定用户账户，确保错误的人永远无法获得管理员权限。我们下次见。
- en: Questions
  id: totrans-297
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题
- en: Because Linux is more securely designed than Windows, we never have to worry
    about Linux security.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 因为 Linux 的设计比 Windows 更加安全，我们不必担心 Linux 安全问题。
- en: 'True'
  id: totrans-299
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正确
- en: 'False'
  id: totrans-300
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误
- en: Which of the following is true about Linux on IoT devices?
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个关于 IoT 设备上 Linux 的说法是正确的？
- en: There are too many of them.
  id: totrans-302
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们太多了。
- en: They're taking over the world.
  id: totrans-303
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们正在接管世界。
- en: Too many of them are configured insecurely.
  id: totrans-304
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们中的太多配置不安全。
- en: They're so securely configured that they'll put security practitioners out of
    their jobs.
  id: totrans-305
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们的配置如此安全，以至于会让安全从业者失业。
- en: Which of the following is true about automatic operating system updates in an
    enterprise?
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个关于企业中自动操作系统更新的说法是正确的？
- en: You should always leave them enabled.
  id: totrans-307
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你应该始终保持它们启用。
- en: They violate the basic precept of testing updates on a test network before installing
    them on a production network.
  id: totrans-308
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们违反了在生产网络安装更新之前，必须先在测试网络上进行测试的基本原则。
- en: Unlike with manual updates, you never have to reboot a system after automatic
    updates.
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与手动更新不同，自动更新后你无需重新启动系统。
- en: For IoT devices, it isn't useful to enable automatic updates.
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 IoT 设备，启用自动更新没有太大意义。
- en: Further reading
  id: totrans-311
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Here are some handy resources for your viewing pleasure:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些方便的资源供你参考：
- en: '**Linux Security**: [https://linuxsecurity.com/](https://linuxsecurity.com/)'
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Linux 安全**: [https://linuxsecurity.com/](https://linuxsecurity.com/)'
- en: '**The official VirtualBox website**: [https://www.virtualbox.org/](https://www.virtualbox.org/)'
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**官方 VirtualBox 网站**: [https://www.virtualbox.org/](https://www.virtualbox.org/)'
- en: '**The official CentOS page**: [https://www.centos.org/](https://www.centos.org/)'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**官方 CentOS 页面**: [https://www.centos.org/](https://www.centos.org/)'
- en: '**RHEL documentation (this also works for CentOS and AlmaLinux)**: [https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9)'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**RHEL 文档（同样适用于 CentOS 和 AlmaLinux）**: [https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9)'
- en: '**Enabling Automatic Updates in RHEL 7 and CentOS 7**: [https://linuxaria.com/howto/enabling-automatic-updates-in-centos-7-and-rhel-7](https://linuxaria.com/howto/enabling-automatic-updates-in-centos-7-and-rhel-7)'
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在 RHEL 7 和 CentOS 7 中启用自动更新**: [https://linuxaria.com/howto/enabling-automatic-updates-in-centos-7-and-rhel-7](https://linuxaria.com/howto/enabling-automatic-updates-in-centos-7-and-rhel-7)'
- en: '**Managing and Monitoring Security Updates for RHEL 8**: [https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_and_monitoring_security_updates/index](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_and_monitoring_security_updates/index)'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理和监控 RHEL 8 的安全更新**: [https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_and_monitoring_security_updates/index](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_and_monitoring_security_updates/index)'
