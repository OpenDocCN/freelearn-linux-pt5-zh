- en: Chapter 2. Preparing to Add FreeNAS to Your Network
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章 准备将FreeNAS添加到网络中
- en: 'Like all system deployments, a NAS needs to be correctly planned to maximize
    success. In this chapter, we will look at the basic planning points including:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 就像所有系统部署一样，NAS也需要正确规划以最大化成功。在本章中，我们将讨论一些基本的规划要点，包括：
- en: Capacity planning
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 容量规划
- en: Hardware requirements
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 硬件要求
- en: Planning for backup
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备份规划
- en: Redundancy needs
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 冗余需求
- en: Network infrastructure
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络基础设施
- en: This chapter may seem to be less "hands on", but there are important decisions
    to be made and actions to be taken to successfully plan, and deploy your NAS.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章可能看起来不像是“动手操作”的内容，但成功规划和部署NAS需要做出重要决策并采取相应的行动。
- en: Planning Your NAS
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 规划你的NAS
- en: In my experience, there are two types of people in computing, those which plan
    meticulously before adding any new hardware or service to their networks and those
    who just add what they have and hope for the best. You can get busy and proper
    planning seems like an extra unnecessary step. But it is also equally true that
    fixing problems after your have deployed the system costs a lot more than resolving
    them before you "go live".
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我的经验，计算机领域的人可以分为两种类型，一种是在添加任何新硬件或服务到网络之前进行精心规划的人，另一种是直接添加现有资源并寄希望于好运的人。你可能会很忙，觉得适当的规划是一个额外且不必要的步骤。但同样也有一个事实是，系统部署后解决问题的成本远高于在“上线”之前就解决它们。
- en: For example let us imagine that you didn't plan your hard disk requirements
    correctly and that, in fact, the server you have can't hold any more hard disks?
    What do you do now? Buy another server? It would have been better to get the right
    server to start with.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 比如，假设你没有正确规划硬盘需求，事实上，你现有的服务器无法容纳更多的硬盘。现在该怎么办？再买一台服务器？最好一开始就选对合适的服务器。
- en: Capacity Planning
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 容量规划
- en: Your plans to deploy FreeNAS are constrained by two major factors, the first
    is the resources you have available (meaning PC or servers you already have or
    money to buy new ones) and how much capacity you want in your NAS.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 部署FreeNAS的计划受到两个主要因素的限制，第一个是你可用的资源（即你已经拥有的PC或服务器，或者购买新设备的资金）以及你希望在NAS中拥有的容量。
- en: Note
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Never underestimate your need for disk space. Video files, audio files, emails,
    software downloads; the list of types of data we store is forever growing. I remember
    when I bought my first 170MB hard drive for a 386 PC that I had. I wondered how
    I could ever fill 170MB. Today, a short video clip is 170MB!
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 永远不要低估对磁盘空间的需求。视频文件、音频文件、电子邮件、软件下载；我们存储的数据类型清单在不断增长。我记得当我为我的386 PC购买第一个170MB的硬盘时，我还在想怎么可能填满170MB的空间。今天，一段简短的视频就有170MB！
- en: The more resources you have, the more capacity you can have, it is a simple
    relationship. FreeNAS, of course, helps this situation in a number of ways, first
    it is free. There are no licensing costs to pay. If you want 2 users or 20 users,
    the cost is the same... $0\. Also, FreeNAS is on the lighter side of system requirements,
    you aren't going to need 4GB of memory to run this server.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 你拥有的资源越多，你能拥有的容量就越大，这是一种简单的关系。当然，FreeNAS在这方面提供了多种帮助，首先，它是免费的。没有许可费用。如果你需要2个用户或20个用户，费用都是一样的……$0。此外，FreeNAS对系统要求较轻，你不需要4GB的内存来运行这个服务器。
- en: So the big first question is how many users are going to use this server? If
    you are a home user, then the answer is probably less then 5 people. Maybe, you
    want the FreeNAS to act as a simple repository for multimedia files that can be
    accessed from any PC in your home. If you work in a small office environment then
    the answer is probably less than 15, and large offices less than 25\. For any
    kind of corporate deployment, the number could be 25 and upwards.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，第一个大问题是有多少用户将使用这个服务器？如果你是家庭用户，那么答案可能是不到5个人。也许，你希望FreeNAS充当一个简单的多媒体文件存储库，任何家庭中的PC都能访问。如果你在一个小型办公室工作，那么答案可能是不到15个用户，大型办公室则是不到25个用户。对于任何企业级部署，人数可能是25人及以上。
- en: Having established this number, you need to consider how many of these users
    will be writing to the NAS or in other words, will be adding files to the NAS,
    and how many will be just read as what is already there. We will refer to these
    as *write* users and *read* users. Again, in the home environment, maybe only
    1 person will be actually copying files over to the NAS while 2 or 3 others maybe
    using them. In the office environment, it is more difficult to say, it all depends
    on your planned use for the FreeNAS.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 确定了这个数字后，你需要考虑这些用户中有多少人将向NAS写入，换句话说，将向NAS添加文件，以及有多少人只是读取已有的内容。我们将这些称为*写入*用户和*读取*用户。再次强调，在家庭环境中，可能只有1人实际上会将文件复制到NAS，而其他2或3人可能只是使用它们。在办公环境中，情况就更难说了，这完全取决于您计划如何使用FreeNAS。
- en: Now, there is one final question for this section. How much space will each
    *write* user need on the server?
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，这一节的最后一个问题是什么？每个*写入*用户在服务器上需要多少空间？
- en: 'Now you just need to multiply:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你只需要做乘法：
- en: '*number of write users X gigabytes needed*'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '*需要写入用户数量 X 需要的千兆字节*'
- en: So, if we have 2 *write* users who need 5GB, each, then you need to start with
    10GB of disk space. If you have 25 *write* users who each need 10GB of disk space,
    then you need 250BG of disk space and so on. For the home user, maybe it is only
    1 write user but you want 500GB, so 1 X 500GB is 500GB!!!
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果我们有2名*写入*用户，每个需要5GB，那么您需要从10GB磁盘空间开始。如果您有25名*写入*用户，每个需要10GB磁盘空间，那么您需要250GB磁盘空间，以此类推。对于家庭用户，也许只有1个写入用户，但您想要500GB，那么1
    X 500GB就是500GB！！！
- en: Note
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Now double it**'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '**现在翻倍**'
- en: Whatever figure you have now, double it. Somewhere you have underestimated,
    you don't know it but you have. Either in the number of users or in the data they
    need. So the safest thing to do now is double it. That way you won't be caught
    out with a lack of disk space in 6 months from now.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你现在有多少数字，都要翻倍。你肯定在某处低估了，你不知道但确实如此。无论是用户数量还是他们需要的数据量。所以现在最安全的做法就是翻倍。这样，你就不会在六个月后因为缺少磁盘空间而被抓个正着了。
- en: Now the next calculation is a bit trickier. We need to workout how fast your
    data grows. How much it will grow depends on what you are storing on your FreeNAS.
    For example if you are using FreeNAS as a backup server, then as your users create
    documents, receive emails, download things from the Internet, the amount of disk
    space needed to backup their PCs will increase. There aren't really any rules
    of thumb here, you need to work it out. Mid-range and affordable (rather than
    top of the range, bleeding edge, and expensive) hard disks, on average, grow in
    capacity about 25% to 50% per year. Their growth isn't driven by need but rather
    by technology so this doesn't really give us a guide how much your data grows.
    Having said that, there always seems to be a tendency to use all the disk space
    that is available. The more disk space available, the more users find ways to
    fill it.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 现在下一个计算有点棘手。我们需要计算您的数据增长速度。它的增长取决于您在FreeNAS上存储的内容。例如，如果您将FreeNAS用作备份服务器，那么随着用户创建文档、接收电子邮件、从互联网下载内容，备份其PC所需的磁盘空间将增加。这里没有固定的规则，您需要计算出来。中档和经济实惠（而不是顶级、尖端和昂贵的）硬盘，平均每年的容量增长约为25%至50%。它们的增长不是由需求驱动的，而是由技术驱动的，因此这实际上并不能为我们提供数据增长的指导。话虽如此，总是倾向于使用所有可用的磁盘空间。可用的磁盘空间越多，用户就越有办法把它填满。
- en: I remember once working for a mid-sized IT company and the server was running
    out of disk space. An email was sent around asking people to delete unnecessary
    files from the server. Once done, over 50% of the disk space was freed.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我记得曾经为一家中型IT公司工作，服务器的磁盘空间不足了。发了封电子邮件要求大家从服务器上删除不必要的文件。删除后，磁盘空间释放了超过50%。
- en: Once you have decided how much more disk space you need each year, you can calculate
    your disk requirements for the next three years. For this example, we will use
    a 25% increase for 25 users who initially need 2GB of disk space each.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦确定了每年需要多少额外的磁盘空间，您可以计算接下来三年的磁盘需求。在这个例子中，我们将使用25名初始需要2GB磁盘空间的用户，每年增长25%。
- en: 'Initial space needed: 25 X 2 = 50GB'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 初始所需空间：25 X 2 = 50GB
- en: 'Double it: = 100GB'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 翻倍：= 100GB
- en: '25% increase year 1: 100 X 25% = 125GB'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 第一年增长25%：100 X 25% = 125GB
- en: '25% increase year 2: 125 X 25% = 156GB'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 第二年增长25%：125 X 25% = 156GB
- en: '25% increase year 3: 156 X 25% = 195GB'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 第三年增长25%：156 X 25% = 195GB
- en: From this, we can see that over three years, disk usage could double. Depending
    on your type of business and how you are using FreeNAS, your growth rates could
    be even higher. If the data growth rate is 40%, then the storage space needed
    can double in two years.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 从这些数据可以看出，三年内磁盘使用量可能会翻倍。根据你的业务类型以及FreeNAS的使用方式，增长率甚至可能更高。如果数据增长率为40%，那么所需的存储空间在两年内可能翻倍。
- en: To finally tweak the equation, you could factor in any planned growth in staffing
    levels as every new member will require an extra 4GB of disk space initially,
    which translates to nearly 8GB over three years.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步调整这个公式，你可以考虑任何计划中的员工增长，因为每增加一名成员初期将需要额外4GB的磁盘空间，三年后将达到近8GB。
- en: Choosing Your Hardware
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择硬件
- en: FreeNAS runs on the PC platform. The stated minimum requirements are an "IBM
    PC compatible" machine with a Pentium processor, at least 96MB of memory, and
    a bootable CDROM drive plus hard disks for storage. However, the practical minimum
    requirements are a Pentium II processor and 128MB of memory, and of course, the
    CDROM and hard disks.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS运行在PC平台上。其最低要求为一台“兼容IBM PC”的机器，配备Pentium处理器、至少96MB的内存，以及可引导的CD-ROM驱动器和硬盘用于存储。然而，实际的最低要求是Pentium
    II处理器和128MB内存，当然还需要CD-ROM和硬盘。
- en: CPU
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CPU
- en: 'It is impossible to list every manufacturer, motherboard, and CPU that are
    supported by FreeNAS (or more specifically, by FreeBSD the underlying operating
    system) but here are some general guidelines:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 不可能列出FreeNAS（或更具体地说，FreeBSD操作系统）支持的所有制造商、主板和CPU，但这里有一些通用的指南：
- en: All Intel processors beginning with the Pentium are supported, including the
    Pentium, Pentium Pro, Pentium II, Pentium III, Pentium 4 (and its variants such
    as the Xeon and Celeron processors), and the Intel Core (including Core Solo,
    Core Duo and Core 2 Duo) processors.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有Intel处理器（从Pentium开始）都受支持，包括Pentium、Pentium Pro、Pentium II、Pentium III、Pentium
    4（及其变种如Xeon和Celeron处理器），以及Intel Core系列处理器（包括Core Solo、Core Duo和Core 2 Duo）。
- en: All i386-compatible AMD processors are also supported, including the Am486,
    Am5x86, K5, K6 (and variants), Athlon (including Athlon MP, Athlon XP, and Athlon
    Thunderbird), Duron, and Opteron processors.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有兼容i386的AMD处理器也受到支持，包括Am486、Am5x86、K5、K6（及其变种）、Athlon（包括Athlon MP、Athlon XP和Athlon
    Thunderbird）、Duron和Opteron处理器。
- en: All of the standard PC buses are supported including ISA, AGP, PCI, and PCI-X.
    There is NO support for the MicroChannel expansion bus used in the IBM PS/2 line
    of PCs.
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持所有标准PC总线，包括ISA、AGP、PCI和PCI-X。不支持IBM PS/2系列PC所使用的MicroChannel扩展总线。
- en: PCs with more than one CPU are supported as well as PCs with dual or quad cores.
    FreeBSD also takes advantage of HyperThreading (HT) on Intel CPUs that support
    this feature. FreeBSD will detect these additional logical processors as if they
    were additional physical processors. FreeBSD does not attempt to optimize scheduling
    decisions given the shared resources between logical processors within the same
    CPU.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持配有多个CPU的PC，以及双核或四核的PC。FreeBSD还可以利用支持超线程技术（HT）的Intel CPU。FreeBSD将把这些附加的逻辑处理器当作额外的物理处理器来识别。FreeBSD不会尝试根据逻辑处理器之间共享的资源来优化调度决策。
- en: The choice of CPU is important for your NAS. Although FreeNAS will work on a
    Pentium 1 with less than 128MB of memory, it won't perform well for a real live
    environment. Although running a NAS isn't CPU intensive in terms of exotic mathematical
    calculations, it can be CPU intensive because of demand. If 5 people are accessing
    files simultaneously, the CPU will be used heavily. One of the test machines in
    my lab is a Pentium III running at 466Mhz. Copying large files to the FreeNAS
    using a very fast network connection caused the CPU to run at 100%.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: CPU的选择对你的NAS非常重要。虽然FreeNAS可以在配备少于128MB内存的Pentium 1上运行，但在实际使用环境中它的性能表现不佳。虽然运行NAS在复杂数学运算上对CPU的需求不高，但由于需求量大，它可能对CPU有较高的消耗。如果有5个人同时访问文件，CPU将被大量使用。我实验室中的一台测试机是Pentium
    III，主频为466MHz。使用非常快的网络连接向FreeNAS复制大文件时，CPU的使用率达到了100%。
- en: 'Here are some guidelines to help you choose your CPU:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是帮助你选择CPU的一些建议：
- en: If you are just experimenting with FreeNAS and are interested in using it on
    a small scale, then an old 233MHz or greater Pentium II machine (or AMD equivalent)
    will be perfect.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你只是想尝试FreeNAS，并计划在小规模上使用它，那么一台老款的233MHz或更高频率的Pentium II机器（或AMD同类处理器）将是完美的选择。
- en: For home use for backup or storing multimedia files, a minimum of a Pentium
    III at 1Ghz is required (or AMD equivalent). Such a machine can handle software
    RAID and up to 10 clients.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于家庭使用、备份或存储多媒体文件，最低要求是1GHz的Pentium III（或相当于AMD的处理器）。这样的机器可以处理软件RAID和最多10个客户端。
- en: For a small office environment, the smallest CPU acceptable would be a Pentium
    4 running at least 1.3 GHz (or AMD equivalent).
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于小型办公环境，最低可接受的CPU是至少1.3GHz的Pentium 4（或相当于AMD的处理器）。
- en: For large installations, a Pentium 4 (or AMD equivalent) running at 3Ghz is
    really the bare minimum and ideally, fast dual core or dual processor machines
    would be better.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于大型安装，运行在3GHz的Pentium 4（或相当于AMD的处理器）是最低要求，理想情况下，快速的双核或双处理器机器会更好。
- en: Note
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注
- en: '**Front Side Bus (FSB)**'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**前端总线（FSB）**'
- en: The FSB connects the CPU to the main memory. The faster the FSB, the faster
    data is transferred to the CPU. In general, the speed of the FSB (which is measured
    in MHz) scales with the speed of the CPU. However, there are some motherboard/CPU
    combinations that use a lower FSB even for a higher speed CPU. This will reduce
    the overall performance of the system. Make sure you get a machine with a good
    FSB speed.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: FSB将CPU与主内存连接起来。FSB越快，数据传输到CPU的速度越快。通常，FSB的速度（以MHz为单位）与CPU的速度成正比。然而，有一些主板/CPU组合即使是更高速度的CPU，也使用较低的FSB。这将降低系统的整体性能。确保你选购的机器具有良好的FSB速度。
- en: Processor speed isn't the only component of the PC or server that affects transfer
    speeds and concurrent user capacity. The network is a very important factor and
    we will look at this soon, also, the type of disks in the machine is very important.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 处理器速度并不是影响传输速度和并发用户容量的唯一因素。网络是一个非常重要的因素，我们很快会讨论到这一点，此外，机器中磁盘的类型也非常重要。
- en: Disks
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 磁盘
- en: The processor's job is to co-ordinate the requests coming in on the network
    with the disks in the machine. If the CPU is slow then that co-ordination role
    will be slow and the overall performance will be slow. Equally, if the disks are
    slow, then the performance of the system will suffer. The end goal of a NAS is
    to read and write data to a hard disk. The speed of the hard disk will determine
    how fast the data can be read or written.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 处理器的任务是协调来自网络的请求与机器中的磁盘之间的操作。如果CPU较慢，那么协调工作就会变慢，整体性能也会下降。同样，如果磁盘较慢，系统的性能也会受到影响。NAS的最终目标是将数据读写到硬盘。硬盘的速度决定了数据读取和写入的速度。
- en: Note
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注
- en: '**Quality**'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**质量**'
- en: In discussing disks and the different parameters that govern their performance,
    it is important not to forget the quality of the disks. By quality, I mean how
    likely is it that the disk will fail. In your FreeNAS server, the CPU can fail,
    the RAM can fail, the network can fail, and so on. But if a disk fails, you are
    in danger of losing your data.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在讨论磁盘和控制其性能的各种参数时，重要的是不要忽视磁盘的质量。所谓质量，是指磁盘故障的可能性。在你的FreeNAS服务器中，CPU可能会失败，内存可能会失败，网络可能会失败，等等。但如果磁盘故障，你就有可能丢失数据。
- en: 'When looking at disks, we need to look at two things: first the way in which
    the disks are connected to the PC, and secondly the disks themselves.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在查看磁盘时，我们需要关注两点：首先是磁盘如何连接到PC，其次是磁盘本身。
- en: Buses
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 总线
- en: Every hard disk is connected to the PC via a thing called an interface. An interface
    is a conduit or pipeline down which the data for the hard drive travels. The faster
    the interface, the quicker the data travel, to and from the hard disk. Over the
    years, PCs have sported different types of hard disk interface and with each new
    iteration, the top speeds have increased.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 每个硬盘都通过一种叫做接口的东西与PC连接。接口是数据在硬盘和PC之间传输的管道。接口越快，数据传输的速度就越快。随着时间的推移，PC采用了不同类型的硬盘接口，每次更新时，最高传输速度都会有所提高。
- en: '**IDE/ATA—** The most common hard drive interface (until around 2004) was the
    Advanced Technology Attachment (ATA) interface or the Integrated Drive Electronics
    (IDE) interface. It was developed by Western Digital in the mid 1980''s and for
    over twenty years was the main interface for connecting hard disks and CD ROMs
    to a PC. There are several synonyms or variations of ATA including Enhanced IDE
    (EIDE) and AT Attachment Packet Interface (ATAPI) but essentially it is the same
    technology refined and reused. In 2003, a new interface was introduced called
    Serial ATA (SATA) and so ATA was retroactively renamed to Parallel ATA (PATA)
    to distinguish it from the newer interface. Although fading as a means to connect
    hard drives to a PC, ATA is still popular for connecting CD ROMs and DVD ROMs
    to PCs and many motherboards come with both PATA and SATA interfaces. ATA interfaces
    are easy to recognize as they use 40 or 80 wire ribbon cables to connect the hard
    drive to the PC.'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**IDE/ATA—** 最常见的硬盘接口（直到大约2004年）是先进技术附件（ATA）接口或集成驱动电子（IDE）接口。它是由西部数据公司在1980年代中期开发的，二十多年间是将硬盘和CD-ROM连接到PC的主要接口。ATA有几个同义词或变体，包括增强型IDE（EIDE）和AT附件数据包接口（ATAPI），但本质上它们是相同的技术，只是经过精炼和重复使用。2003年，推出了一种新接口，称为串行ATA（SATA），因此ATA被追溯性地重新命名为并行ATA（PATA），以区别于新的接口。尽管作为连接硬盘到PC的方式逐渐退场，ATA仍然是连接CD-ROM和DVD-ROM到PC的流行方式，许多主板都配有PATA和SATA接口。ATA接口很容易识别，因为它们使用40或80根的排线将硬盘连接到PC。'
- en: '**SATA—** The Serial Advanced Technology Attachment (SATA) interface was released
    in 2003 and over 2004/2005 started to grow in popularity. SATA is faster than
    PATA and also adds the ability to remove or add devices while operating (this
    is called hot swapping). SATA uses thinner cables than PATA (gone are the flat
    80 pin cables) and this allows air cooling to work more efficiently in the PC.'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '**SATA—** 串行高级技术附件（SATA）接口于2003年发布，并在2004/2005年间开始流行。SATA比PATA更快，并且增加了在操作过程中移除或添加设备的能力（这叫热插拔）。SATA使用比PATA更薄的电缆（不再是扁平的80针电缆），这使得空气冷却在PC中更高效。'
- en: '**SCSI—** There has always been an alternative to PATA and SATA and that is
    an interface called the Small Computer System Interface or SCSI for short. Like
    ATA, SCSI (which is most commonly pronounced "scuzzy") has been around a long
    time. It has been most popular in PC servers and has also been popular with Apple
    for their Macintosh computers and with Sun Microsystems. Like Parallel ATA, SCSI
    is being replaced by a serial version using smaller cabling and running at faster
    speeds, these new variations are commonly known as Serial SCSI.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '**SCSI—** 一直以来，PATA和SATA都有一种替代方案，那就是小型计算机系统接口，简称SCSI。与ATA一样，SCSI（通常发音为“scuzzy”）已经存在很长时间了。它最常见于PC服务器，并且也在苹果的Macintosh电脑和Sun
    Microsystems中得到广泛应用。像并行ATA一样，SCSI正被一种使用更小电缆、运行速度更快的串行版本所替代，这些新版本通常被称为串行SCSI。'
- en: Each interface type has various pros and cons. If you are using an existing
    PC for your FreeNAS server, then the differences are largely academic as you will
    have to use what is in the machine. But if you are buying a new piece of hardware
    for your FreeNAS server, then these differences can be important.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 每种接口类型都有其优缺点。如果你正在使用现有的PC作为你的FreeNAS服务器，那么这些差异大多是理论上的，因为你只能使用机器中已有的接口。但如果你为你的FreeNAS服务器购买新的硬件，那么这些差异可能变得非常重要。
- en: The first differences are in transfer speeds. The last version of PATA could
    transfer data at 133 MB per second (MB/s). This would mean that 700 megabytes
    of data (the same as a CD) would copy in just over 5 seconds. SATA comes in two
    speeds at the moment, SATA 150, which can transfer 187.5 MB/s and SATA 300, which
    peaks at 375MB/s. A CD's worth of data would copy in just under 4 seconds, and
    just under 2 seconds respectively. SCSI has many different variations and the
    latest iterations Ultra-320 and Ultra-640 have transfer speeds of 320MB/s and
    640MB/s. A 700MB file would transfer in just over 1 second on a Ultra-640 system.
    All these speeds are theoretical peak transfer rates but they do serve as a good
    guide to the difference in the transfer speeds.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个差异是传输速度。最后一个版本的PATA可以以133 MB每秒（MB/s）的速度传输数据。这意味着700MB的数据（与CD相同）将需要略超过5秒的时间来复制。SATA目前有两种速度，SATA
    150，可以传输187.5 MB/s，和SATA 300，最高可达375MB/s。复制一张CD的数据分别需要不到4秒和不到2秒。SCSI有许多不同的变体，最新的版本Ultra-320和Ultra-640分别具有320MB/s和640MB/s的传输速度。700MB的文件在Ultra-640系统上将需要略超过1秒的时间来传输。所有这些速度都是理论上的峰值传输速率，但它们确实提供了一个很好的传输速度差异的指导。
- en: Cost is also a difference. PATA and SATA have similar costs with SATA being
    slightly cheaper at the moment as PATA drives have become less popular. SCSI drives,
    however, have historically been more expensive. SCSI drives are mainly seen as
    the "professional" storage option and so have higher quality parts, but less of
    them are sold and so they are more expensive.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 成本也是一个区别。PATA 和 SATA 的成本相似，目前 SATA 稍便宜一些，因为 PATA 硬盘已经不那么流行了。然而，SCSI 硬盘的历史价格一直更高。SCSI
    硬盘主要被视为“专业”存储选项，因此具有更高质量的零部件，但销量较少，因此价格更高。
- en: Another difference is in the number of disks that can be attached to the PC.
    Traditionally, ATA is limited to four disks. Most motherboards came with two IDE
    interfaces know as the primary and secondary interfaces. Each interface can have
    two drives that were called the master and the slave. In a traditional PC, the
    secondary master was the CD or DVD ROM drive and the primary master was the hard
    disk. One could expand the PC by adding another disk as either the primary slave
    or as the secondary slave.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个区别在于可以连接到 PC 的硬盘数量。传统上，ATA 限制为四个硬盘。大多数主板配备两个 IDE 接口，称为主接口和从接口。每个接口可以连接两个被称为主驱动器和从驱动器的驱动器。在传统
    PC 中，从接口的主驱动器是 CD 或 DVD ROM 驱动器，主接口的主驱动器是硬盘。可以通过将另一个硬盘作为主从驱动器或从从驱动器的方式来扩展 PC。
- en: Note
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: A problem with the ATA/IDE system is that when two devices are connected to
    the same cable, only one device on the cable can perform a read or write operation
    at a time. Therefore, a hard disk on the same cable as a DVD under heavy use will
    find that nearly every time it is asked to perform a transfer, it has to wait
    for the DVD to finish its own transfer first. If the DVD isn't being used, this
    isn't a issue.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: ATA/IDE 系统的一个问题是，当两个设备连接到同一电缆时，电缆上只能有一个设备执行读取或写入操作。因此，在与使用频繁的 DVD 同一电缆上的硬盘将发现，几乎每次被要求执行传输时，它都必须等待
    DVD 先完成自己的传输。如果 DVD 没有使用，则不会出现这个问题。
- en: SATA is different in that each physical cable connects to only 1 disk. The number
    of SATA drives you can have on your PC depends on how many connectors there are
    on your motherboard. Some motherboards come with only two connectors but there
    are also motherboards with as many as eight connectors. It is also possible to
    add extra SATA connectors by installing another SATA controller in a PCI slot.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: SATA 不同之处在于每个物理电缆只连接到一个硬盘。你的 PC 上可以连接的 SATA 硬盘数量取决于主板上有多少连接器。一些主板只有两个连接器，但也有一些主板有多达八个连接器。还可以通过在
    PCI 插槽中安装另一个 SATA 控制器来添加额外的 SATA 连接器。
- en: SCSI is the champion for adding extra drives to your PC or server with a standard
    SCSI controller allowing you to add 16 drives to it. Many servers often come with
    2 or 3 SCSI controllers built-in so as many as 48 drives can be added. SCSI is
    a mature technology and SCSI drives are often of a higher quality than PATA/SATA
    disks. They are, however, more expensive.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: SCSI 是在你的 PC 或服务器上添加额外驱动器的冠军，使用标准的 SCSI 控制器可以添加最多 16 个驱动器。许多服务器通常内置 2 或 3 个
    SCSI 控制器，因此最多可以添加 48 个驱动器。SCSI 是一种成熟的技术，SCSI 驱动器通常比 PATA/SATA 硬盘质量更高。然而，它们更昂贵。
- en: Drives
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 驱动器
- en: When buying a hard drive, the first thing we often look for is the capacity
    of the drive, how many Gigabytes (or even Terabytes) is it. But beside the capacity,
    there are also issues of quality and speed. Hard disks are physical mechanisms,
    which means compared to computer memory or a hard disk interface, they are quite
    slow. When looking to buy a drive for your FreeNAS server, there are several important
    factors to note besides the capacity of the drive.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在购买硬盘时，我们经常首先关注的是硬盘的容量，即多少吉字节（甚至是特字节）。但除了容量外，质量和速度也是问题。硬盘是物理机制，这意味着与计算机内存或硬盘接口相比，它们相当慢。在为你的
    FreeNAS 服务器购买硬盘时，除了容量外，还有几个重要因素需要注意。
- en: 'Hard drive performance is determined by 3 factors: the seek time, the spindle
    speed, and the overall transfer speed.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 硬盘性能由三个因素决定：寻道时间、主轴转速和总体传输速度。
- en: '**Seek time—** In order to read or write data in a particular place on the
    disk, the read/write head of the disk needs to be physically moved to that place.
    This process is known as seeking, and the time it takes for the head to move to
    the correct place is the seek time. This seek time varies as it depends on how
    far the head''s destination is, from its origin at the time of the read or write
    operation. Therefore, seek time is normally expressed as an average. The typical
    seek time for a desktop hard disk is around 7ms to 8ms (and dropping), while for
    a server or high end disk it is about 3ms to 4ms. This can mean that the time
    to find the data on the disk or the time to find the correct spot to write data
    to the disk can be twice as slow on cheaper hard disks. We are, of course, talking
    about milliseconds here but multiply that by the number of seek movements that
    happen on a disk and you could see significant speed improvement on higher quality
    disks. For big single file transfers, this won''t change the performance much
    as once the disk has found the file (and assuming it is contiguous on the disk),
    it can just be read without long seek times between reads. However, in a multi-user
    situation, the disk will be trying to read and write to several files at once.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '**寻道时间—** 为了在磁盘的特定位置读取或写入数据，磁盘的读写头需要被物理地移动到该位置。这个过程叫做寻道，移动到正确位置所需的时间就是寻道时间。寻道时间因目标位置的远近而有所不同，因此寻道时间通常表示为平均值。桌面硬盘的典型寻道时间大约是7毫秒到8毫秒（并且正在下降），而服务器或高端磁盘的寻道时间大约是3毫秒到4毫秒。这意味着在较便宜的硬盘上，查找数据或找到写入数据的正确位置所需的时间可能是较贵硬盘的两倍。我们当然是在讨论毫秒，但将其乘以磁盘上发生的寻道次数，你就会看到更高质量的磁盘能显著提升速度。对于大文件的单一传输，性能变化不大，因为一旦磁盘找到了文件（假设文件是连续的），它就可以直接读取，不需要在读取之间进行长时间的寻道。但在多用户的情况下，磁盘会尝试同时读取和写入多个文件。'
- en: '**Spindle speed—** A hard disk is made up of one or more platters coated with
    a magnetic material. It is from these platters that we get the word disk or sometime
    people like to say disc. Each platter spins inside the disk drive unit and the
    read/write head bobs up and down on the platter surface reading and writing data.
    The speed at which this platter spins is a factor in the performance of the disk.
    This is for two reasons: First, when waiting to find a section on the disk, the
    quicker the disk spins the quicker that section will come around and be under
    the read/write head. Second, once reading or writing has begun, the quicker the
    disk spins, the quicker the data can be laid down or read. Today, disks spin at
    a variety of speeds starting at 4200 revolutions per minute (RPM) then 5400 RPM,
    7200 RPM, 10,000 RPM, and 15,000 RPM. The 10,000 and 15,000 type disks are sometimes
    referred to as 10K RPM or 15K RPM disks. Traditionally, laptops have used the
    slow disks to space battery power. A common laptop disk speed was 4200 RPM and
    5400 RPM. However, there are now some 7200 RPM laptop disks. Interestingly, several
    high end disks manufacturers now use the 2.5 inch laptop format for servers as
    they are finding they can make more reliable, faster, and quieter disks in the
    smaller physical package and the improvements in disk drive technology has meant
    that these disks aren''t necessarily small on capacity. Desktop machines have
    been the main users of 5400 RPM and 7200 RPM disks with high end servers using
    the expensive 10K RPM and 15K RPM disks.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '**主轴速度—** 硬盘由一个或多个涂有磁性材料的盘片组成。正是这些盘片使我们得以使用“磁盘”一词，有时人们也喜欢说“光盘”。每个盘片在磁盘驱动单元内旋转，读写头在盘片表面上下摆动，读取和写入数据。盘片旋转的速度是影响磁盘性能的一个因素，原因有二：首先，当等待查找磁盘上的某个位置时，磁盘旋转越快，那个位置越快就会出现在读写头下方；其次，一旦开始读写，磁盘旋转得越快，数据写入或读取的速度也越快。如今，磁盘的旋转速度有很多种，从每分钟4200转（RPM）开始，接着是5400
    RPM、7200 RPM、10,000 RPM和15,000 RPM。10,000 RPM和15,000 RPM类型的磁盘有时被称为10K RPM或15K
    RPM磁盘。传统上，笔记本电脑使用较慢的磁盘来节省电池电量。常见的笔记本磁盘速度是4200 RPM和5400 RPM，但现在也有一些7200 RPM的笔记本磁盘。有趣的是，一些高端磁盘制造商现在采用2.5英寸笔记本格式用于服务器，因为他们发现可以在更小的物理体积中制造出更可靠、更快速、噪音更小的磁盘，并且磁盘驱动技术的进步意味着这些磁盘的容量不一定较小。桌面计算机主要使用5400
    RPM和7200 RPM的磁盘，高端服务器则使用昂贵的10K RPM和15K RPM磁盘。'
- en: '**Transfer speed—** Now that the disk is spinning fast and the head is flying
    back and forth at maximum speed, the real question is how quickly can the data
    be read from or written to the disk. Unfortunately, this isn''t an easy question
    to answer. There are several different types of transfer speeds that can be measured
    when looking at a disk. The first is the *internal media transfer rate*, which
    is the actual speed that the drive can read or write bits to and from the surface
    of the platter. This figure isn''t much use to us (although I am sure there are
    some people who find it interesting) as it is only an *internal* transfer speed
    and doesn''t include any seeking time. It does not reflect what comes out of the
    disk to the PC. A better (but not perfect) measure of disk performance is the
    drive''s *sustained transfer rate*. This is the rate at which the drive can transfer
    data sequentially from multiple parts of the disk including the overheads required
    for seeking. However, it is worth noting that the speed of the disks external
    interface (for example SATA 150) does **not** reflect the drive''s external transfer
    rate. The best drives today have a transfer rate of under 100MB/s. Now, the speed
    of the SATA interface is at its slowest 150MB/s and at its fastest 300MB/s. Many
    hard disks include a memory cache on the disk, which means that for a small fraction
    of a second, if the conditions are right, the disk can pump out data at the speed
    of the bus. But these caches are small, when compared to the size of the disk,
    and are just a few megabytes. So more often than not, the drive is getting the
    data directly from the disk platter and as such, it can **never** meet the speed
    of the external bus.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '**传输速度—** 现在，硬盘正在高速旋转，磁头以最大速度来回飞行，真正的问题是数据能以多快的速度从硬盘读取或写入。不幸的是，这个问题并不好回答。我们可以测量几种不同类型的传输速度。首先是*内部介质传输速率*，即硬盘能够从盘片表面读取或写入数据的实际速度。这个数据对我们没有太大用处（尽管我相信也有些人觉得它很有趣），因为它只是一个*内部*传输速度，不包括任何寻址时间。它并不反映硬盘向PC输出的数据。一个更好的（但不完美的）硬盘性能衡量标准是硬盘的*持续传输速率*。这指的是硬盘能够从硬盘的多个部分按顺序传输数据的速度，包括寻址所需的开销。然而，值得注意的是，硬盘外部接口的速度（例如SATA
    150）**并不**反映硬盘的外部传输速率。如今最好的硬盘的传输速率低于100MB/s。而SATA接口的最低速度为150MB/s，最快为300MB/s。许多硬盘在硬盘上包括一个内存缓存，这意味着如果条件合适，硬盘可以在短短的几毫秒内以总线速度输出数据。但这些缓存相对于硬盘的大小来说非常小，只有几兆字节。所以，通常情况下，硬盘是直接从硬盘盘片获取数据的，因此，它**永远**无法达到外部总线的速度。'
- en: Multiple Disk Drives
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 多硬盘驱动器
- en: So if the disk cannot match the speed of the disk interface, why create these
    ever faster specifications. Well, the good news is that because you can fit more
    than one disk to the PC, you can improve overall performance by reading and writing
    from two disks simultaneously. There are two aspects of this, first, if you install
    multiple disks in your FreeNAS server and offer them as separate resources, then
    the load on the disks will be split according to how many people are accessing
    files on disk one and how many are accessing data on disk two. As the disk interface
    can cope with both disks simultaneously, you have doubled the performance of your
    system. The second approach is to use the disks as an array where the disks contain
    copies of the same data and so the FreeNAS server can find the same data in two
    places and read that data from the less busy disk. This is called a Redundant
    Arrays of Inexpensive Disks (RAID) and we shall look at it in more detail later
    in this chapter.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，如果硬盘的速度无法与硬盘接口匹配，为什么还要制定这些越来越快的规范呢？好消息是，因为你可以为PC安装多个硬盘，你可以通过同时从两个硬盘读取和写入来提高整体性能。这有两个方面，首先，如果你在FreeNAS服务器上安装多个硬盘并将它们作为独立的资源提供，那么硬盘上的负载将根据有多少人访问硬盘一上的文件和有多少人访问硬盘二上的数据进行分配。由于硬盘接口可以同时处理两个硬盘的操作，你就实现了系统性能的翻倍。第二种方法是将硬盘用作阵列，其中硬盘包含相同数据的副本，这样FreeNAS服务器就可以在两个地方找到相同的数据，并从较空闲的硬盘读取数据。这被称为廉价磁盘冗余阵列（RAID），我们将在本章稍后更详细地讨论它。
- en: Memory, Network Card, PCI, and USB
  id: totrans-80
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 内存、网卡、PCI和USB
- en: There are a few final things to mention when deciding on the hardware for your
    FreeNAS server.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在决定FreeNAS服务器硬件时，还有一些最后需要提到的事项。
- en: The first is memory or more specifically how much memory. The minimum requirement
    for FreeNAS is 96MB, but if you want to use iSCSI, you need a minimum of 256MB.
    Having extra memory is always a good thing as FreeNAS will use the extra memory
    for disk caching (meaning the spare memory will be used to speed up access to
    the disks by storing popular bits of data in memory and so removing the need to
    get the data from the disk).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个需要考虑的因素是内存，或者更具体地说是内存的大小。FreeNAS的最低内存要求是96MB，但如果你打算使用iSCSI，则至少需要256MB。额外的内存总是有好处的，因为FreeNAS会利用额外的内存进行磁盘缓存（也就是说，额外的内存将用于将常用的数据存储在内存中，从而减少从磁盘读取数据的需求）。
- en: 'The next thing to consider is your network; this will be covered in more depth
    later in this chapter, but it is worth mentioning here that you will need a network
    interface to connect your NAS to the network. Many motherboards come with network
    interfaces on board and they are a good start, but they may not be the best thing.
    In short, there are 3 types of popular Ethernet network interface: 10Mb/s, 100Mb/s,
    and 1000Mb/s. Note that these speeds are in megabits per second **not** megabytes
    per second. Clearly, the faster the network interface, the more data can be transferred
    to and from the FreeNAS server.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来需要考虑的是你的网络；这一部分将在本章后续内容中详细讨论，但值得在这里提到的是，你需要一个网络接口来将你的NAS连接到网络。许多主板自带网络接口，它们是一个不错的起点，但可能不是最佳选择。简而言之，常见的以太网网络接口有三种速度：10Mb/s、100Mb/s和1000Mb/s。请注意，这些速度单位是兆比特每秒**而不是**兆字节每秒。显然，网络接口的速度越快，数据从FreeNAS服务器的传输速度也会越快。
- en: However, it is worth mentioning that the performance of the network is directly
    related to the speed of the CPU (and the motherboard). Putting a Gigabit Ethernet
    card in a Pentium II will **not** increase the speed of the network transfers
    by ten.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，值得一提的是，网络性能直接与CPU（和主板）的速度相关。将一个千兆以太网卡插入一台奔腾II处理器的电脑，并**不会**使网络传输速度提高十倍。
- en: To connect the network card or maybe even a hardware RAID controller to your
    motherboard, you will need to have free PCI slots. 99.9% of all motherboards have
    a free PCI slot but it is worth mentioning that the speed of PCI is limited to
    132MB/s. For the network, that shouldn't be a problem but if you add a high speed
    hardware RAID controller, then the transfer rate to and from the controller could
    be more than the PCI bus. There is a new version of PCI called PCI Express. It
    comes in different speed configurations (1x, 2x, 4x, 8x, 16x, and 32x), but they
    all have much greater bandwidth than basic PCI.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 若要将网络卡或可能的硬件RAID控制器连接到主板，你需要有空余的PCI插槽。99.9%的主板都有空闲的PCI插槽，但值得提到的是，PCI的速度限制为132MB/s。对于网络来说，这应该不是问题，但如果你添加了一个高速的硬件RAID控制器，数据传输速率可能会超过PCI总线的带宽。现在有一种新的PCI版本，叫做PCI
    Express，它有不同的速度配置（1x、2x、4x、8x、16x和32x），但这些配置的带宽都比传统PCI要大得多。
- en: Finally, your FreeNAS server will need a USB 2.0 port if you are planning on
    using a USB flash disk to store the configuration data or if you want to install
    FreeNAS on it. The configuration data can be stored on either a floppy, a USB
    flash disk or on a hard disk in the PC. The advantage of storing the configuration
    data on the USB flash disk is that you can leave the disks in the machine 100%
    for storage. This is also true of installing the FreeNAS on a USB flash disk.
    This leaves ALL the hard disks free for use as storage, as well as improving boot
    up time as booting from USB is faster than booting from CDROM. Note that your
    BIOS needs to be capable of booting from USB if you intend to install FreeNAS
    on a USB memory stick.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，如果你打算使用USB闪存盘存储配置数据，或者希望将FreeNAS安装在USB闪存盘上，那么你的FreeNAS服务器需要一个USB 2.0端口。配置数据可以存储在软盘、USB闪存盘或PC中的硬盘上。将配置数据存储在USB闪存盘上的好处是，你可以将硬盘完全留给存储使用。将FreeNAS安装在USB闪存盘上也有类似的好处。这样可以让所有硬盘完全用于存储，同时提高启动速度，因为从USB启动比从CDROM启动要快。请注意，如果你打算将FreeNAS安装在USB闪存盘上，你的BIOS需要支持从USB启动。
- en: Planning for Backup
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 备份规划
- en: When deciding how you are going to use and deploy your FreeNAS server, you need
    to consider your backup requirements. Backup is sadly something that is often
    left as a low priority task and then suddenly something happens and everyone wants
    to know where are the backups.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在决定如何使用和部署你的FreeNAS服务器时，你需要考虑备份需求。备份遗憾的是常常被当作低优先级任务处理，直到突然发生问题，大家才会问备份在哪里。
- en: 'FreeNAS doesn''t come with many options for automated backup. There is no support
    for burning DVDs on the FreeNAS machine nor is there any support for attaching
    a tape drive. This leaves us with just two options:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS并没有提供许多自动化备份选项。FreeNAS机器不支持刻录DVD，也不支持连接磁带驱动器。这让我们只剩下两个选择：
- en: The first is to include enough disks in the machine so that the data can be
    duplicated internally, and the second is to copy the data to another machine where
    it can be burnt to DVD or left there as a backup server. This can be achieved
    in one of two ways. Double the amount of disks can be added to the machine and
    as a manual task the system administrator can copy the data from the "live" disks
    to the "backup" disks. This task can also be automated and we will look at this
    in more detail in chapter 7\. Another way to achieve this is with RAID, which
    we will study in more detail later in this chapter. Using a technique known as
    mirroring, the FreeNAS server can be configured to automatically copy all data
    written to one disk to another disk and so set up a spare copy of the data. This
    spare copy is also used during read operations meaning that the overall storage
    performance increases.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一个选择是在机器中加入足够的磁盘，以便可以在内部复制数据，第二个选择是将数据复制到另一台机器上，然后将其刻录到DVD或将其作为备份服务器保留。这个过程可以通过两种方式实现。可以将机器中的磁盘数量加倍，作为一项手动任务，系统管理员可以将数据从“活动”磁盘复制到“备份”磁盘。这项任务也可以自动化，更多细节将在第7章中探讨。另一种方法是使用RAID，我们将在本章稍后更详细地研究。通过镜像技术，可以将FreeNAS服务器配置为将所有写入一个磁盘的数据自动复制到另一个磁盘，从而设置数据的备用副本。这个备用副本在读取操作时也会被使用，从而提高整体存储性能。
- en: Note
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The disadvantage of duplicating the data internally, as the only means of backup,
    is that if something was to happen to the server itself then the backup data would
    also be lost. Secondly, this method (especially the RAID variations) doesn't allow
    for the recovery of mistakenly deleted files or allow for the restoration of files
    from a few months ago.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 内部复制数据作为唯一备份手段的缺点是，如果服务器本身发生故障，备份数据也会丢失。其次，这种方法（特别是RAID变体）无法恢复误删除的文件，也无法恢复几个月前的文件。
- en: The second way to implement backup for your FreeNAS server is by copying it
    to another machine. This second machine would either act as a backup server where
    the data just remains or it could be a staging point before the data is written
    to DVD or some other form of backup media. FreeNAS includes several ways in which
    the data can be copied off the server. In fact, any of the access protocols like
    CIFS, NFS, and FTP can be used to copy the data to another machine. Also, FreeNAS
    includes support for the RSYNC protocol whose primary goal is to allow the mirroring
    (or exact copying) of data from one machine to another. Also, RSYNC is sophisticated
    in that it will only copy the data that needs to be copied (because it has changed)
    and hence saves on network bandwidth when possible.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现FreeNAS服务器备份的第二种方式是将数据复制到另一台机器上。这台机器可以作为备份服务器，仅保存数据，或者作为数据写入DVD或其他备份介质之前的中转点。FreeNAS提供了多种方式来将数据从服务器复制出去。事实上，像CIFS、NFS和FTP等访问协议都可以用来将数据复制到另一台机器上。此外，FreeNAS还支持RSYNC协议，其主要目标是实现数据从一台机器到另一台机器的镜像（或精确复制）。RSYNC还很智能，它只会复制需要复制的数据（因为数据已发生更改），从而在可能的情况下节省网络带宽。
- en: If you just want a backup server then another FreeNAS server would be ideal.
    Using the RSYNC protocol, the two FreeNAS servers can be configured to make backups
    at certain times. It is good practice to make sure that this backup server isn't
    sitting right next to the FreeNAS server. Why? Well if the roof comes down or
    the air conditioning decides to pour something all over your server, having the
    two machines side-by-side won't help your backup strategy very much!!!
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你只需要一个备份服务器，那么另一台FreeNAS服务器将是理想的选择。通过RSYNC协议，两个FreeNAS服务器可以配置为在特定时间进行备份。确保备份服务器不与FreeNAS服务器放在一起是一个好习惯。为什么？如果天花板塌了或者空调突然把东西倒到服务器上，两个机器并排放置不会对你的备份策略有太大帮助!!!
- en: If you need to get the data onto a DVD or some other type of media, then you
    need to use a client machine like a Windows, OS X or Linux computer to copy off
    the data and then put it on to DVD etc. You should investigate the backup solutions,
    which are available on those platforms.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要将数据写入 DVD 或其他类型的介质，那么你需要使用像 Windows、OS X 或 Linux 计算机这样的客户端机器来复制数据，然后将其放入
    DVD 等介质中。你应该调查一下在这些平台上可用的备份解决方案。
- en: What is RAID? And, Do I Need It?
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是 RAID？我需要它吗？
- en: It seems to be a rule of thumb for science fiction writers that once the spaceship
    is attacked by a hostile force, all appears to be lost until the emergency backup
    systems kick in, and then everything is restored to full power except for maybe
    a few flickering lights and the odd spark flying out of a nearby console.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 对科幻作家来说，似乎有一个经验法则，就是一旦飞船受到敌方攻击，所有看似都失去了，直到紧急备份系统启动，然后一切恢复到满电状态，除了可能有一些闪烁的灯光和从附近控制台冒出的偶尔火花。
- en: Fortunately, you don't need to worry about your FreeNAS server being zapped
    with a laser beam, but you **do** need to worry about hard disk failures, electrical
    spikes, burst water pipes (or cooling systems), fires, and maybe even earthquakes.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，你不需要担心你的 FreeNAS 服务器被激光束击中，但你**确实**需要担心硬盘故障、电压激增、爆裂的水管（或冷却系统）、火灾，甚至可能是地震。
- en: The RAID (Redundant Arrays of Inexpensive Disks) concept isn't a magic solution
    for your entire backup and redundancy problems. For one, it won't save your server
    from an earthquake! However, as a means to improving your storage access speeds
    and as a way of coping with a disk failure, RAID is an excellent system.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: RAID（冗余独立磁盘阵列）概念并不是解决所有备份和冗余问题的魔法方案。首先，它无法保护你的服务器免受地震的影响！然而，作为一种提高存储访问速度并应对磁盘故障的手段，RAID
    是一个优秀的系统。
- en: 'So what is it? RAID is a system that divides and duplicates your data across
    several hard disks, and so provides redundancy and removes read bottlenecks. Depending
    on which scheme, you use your data is copied, in full or in part, across other
    disks in the RAID set and if one of those disks fails the other disks (with the
    copy of the data) continue to work and the data as a whole remains intact. RAID
    provides two main advantages: the duplication of data to guard against disk failure
    and the increase of storage performance as multiple disks can be used to read
    the same data and sent quickly back to the client. The minimum number of hard
    disks for the simplest RAID setup is two.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，它是什么呢？RAID 是一种将数据分割并复制到多个硬盘上的系统，从而提供冗余并消除读取瓶颈。根据使用的方案，你的数据将会被完整或部分复制到 RAID
    阵列中的其他磁盘上，如果其中一块磁盘发生故障，其他磁盘（上面有数据的副本）将继续工作，整个数据保持完整。RAID 提供了两个主要优势：一是数据的复制，防止磁盘故障；二是存储性能的提升，因为多个磁盘可以用来读取相同的数据，并迅速返回给客户端。最简单的
    RAID 设置需要至少两块硬盘。
- en: There are several different RAID configurations that are called RAID levels.
    Originally, there were 5 RAID levels of which two were most frequently used (RAID
    1 and RAID 5). There are also several extensions which improve, combine or nest
    the original RAID levels. If a disk fails, in an array using a RAID level that
    has redundancy, then when a new disk is inserted to replace the failed disk, it
    will be reconstructed (from the other disks in the array) and the array will become
    fully operational again. It is also possible to designate a disk as a "hot spare",
    which will automatically take the place of a failed disk without external intervention.
    The failed disk can then be replaced and it will become the "hot spare". For RAID,
    all the disks need to be the same size. For the software RAID facilities in FreeNAS,
    if the disks are of different sizes, the small disk size will be used.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种不同的 RAID 配置，称为 RAID 等级。最初，有 5 种 RAID 等级，其中两个最常用（RAID 1 和 RAID 5）。还有一些扩展功能，改进、组合或嵌套了原始的
    RAID 等级。如果在使用冗余的 RAID 等级的阵列中某个磁盘发生故障，当插入新磁盘替代故障磁盘时，它将会从其他磁盘中重建数据，阵列将重新变为完全可用。也可以指定某个磁盘作为“热备件”，它会在没有外部干预的情况下自动替代故障磁盘。然后，故障磁盘可以被替换，并成为“热备件”。对于
    RAID，所有磁盘需要具有相同的大小。对于 FreeNAS 中的软件 RAID 功能，如果磁盘的大小不同，则会使用较小的磁盘大小。
- en: Here is an overview of the most popular RAID levels. Not all of these RAID levels
    are available using the software RAID functionality of FreeNAS, but they may be
    available if you are using a dedicated hardware RAID card.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是最常见的 RAID 等级概述。并非所有这些 RAID 等级都可以通过 FreeNAS 的软件 RAID 功能实现，但如果你使用的是专用的硬件 RAID
    卡，它们可能是可用的。
- en: '**RAID 0** (Striped set without redundancy)—RAID 0 is a way of joining two
    disks together to create one big disk. The data is interleaved between the two
    disks and so it improves performance but there is no fault tolerance. Any disk
    failure destroys the array and the data will be lost. On its own, this isn''t
    very useful but it can be combined with RAID 1 in a system known as RAID 10\.
    See below.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '**RAID 0**（无冗余的条带化集群）—RAID 0 是一种将两个硬盘连接在一起以创建一个大硬盘的方法。数据在两个硬盘之间交错分布，因此提高了性能，但没有容错能力。任何硬盘故障都会摧毁整个阵列，数据将丢失。单独使用时，这种配置并不十分有用，但可以与
    RAID 1 结合形成 RAID 10 系统。请见下文。'
- en: '**RAID 1** (mirroring)—Here, two disks are used with one disk mirroring the
    contents of the other disk. Whatever is written to disk 1 is also written simultaneously
    to disk 2 in a identical fashion. If either of the disks fails, the RAID continues
    using the remaining disk. When the faulty disk is replaced, the new disk will
    be synchronized with the good disk and the mirroring will continue as before.
    Write performance is often slightly worse than on a single device, because identical
    copies of the data written must be sent to the other disk but read performance
    is greatly improved as the data is available in two places and the read operation
    can be split between the two drives. The amount of storage space available is
    always half of the total of the two drives as one is used to duplicate the other.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**RAID 1**（镜像）—在这种配置中，使用两个硬盘，其中一个硬盘镜像另一个硬盘的内容。写入到硬盘 1 的任何数据都会同时写入硬盘 2，方式完全相同。如果任一硬盘发生故障，RAID
    继续使用剩余的硬盘。故障硬盘被替换后，新的硬盘将与好的硬盘同步，镜像过程将继续。写入性能通常会稍差于单一设备，因为需要将数据的相同副本写入另一块硬盘，但读取性能大大提高，因为数据在两个地方可用，读取操作可以在两个硬盘之间分配。可用的存储空间始终是两块硬盘总容量的一半，因为其中一块硬盘用于复制另一块硬盘。'
- en: '**RAID 5** (striped set with distributed parity)—This is one of the most popular
    and arguably one of the most useful RAID levels. It allows you to combine a larger
    number of physical disks, and still maintain some redundancy. RAID 5 can be used
    on three or more disks. If one disk fails, the data remains intact. RAID 5 can
    survive one disk failure, but not two or more. Both read and write performance
    usually increase with RAID 5\. The size of a RAID 5 array is equal to the size
    of the smallest disk multiplied by the number of disks minus 1\. So, if you have
    three 200GB disks, the total size of the array will be 200 X (3-1) = 400GB.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '**RAID 5**（带分布奇偶校验的条带化集群）—这是最常见、也许是最实用的 RAID 级别之一。它允许你结合多个物理硬盘，同时保持一定的冗余性。RAID
    5 可以在三个或更多硬盘上使用。如果一个硬盘发生故障，数据仍然完好无损。RAID 5 可以容忍一个硬盘故障，但不能容忍两个或更多硬盘故障。RAID 5 的读取和写入性能通常都会提高。RAID
    5 阵列的大小等于最小硬盘的大小乘以硬盘数量减去 1。如果你有三个 200GB 的硬盘，则阵列的总大小为 200 X (3-1) = 400GB。'
- en: '**RAID 6** (striped set with dual distributed parity)—This is very similar
    to RAID 5 except that the data is distributed to two other drives, which means
    the array can recover from the failure of two disks. RAID 6 can be used on four
    or more disks. The size of a RAID 6 array is equal to the size of the disk multiplied
    by the number of disks minus 2\. So if you have four 250GB disks, the total size
    of the array will be 250 X (4-2) = 500GB.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**RAID 6**（带有双重分布奇偶校验的条带化集群）—这与 RAID 5 非常相似，只不过数据会分布到另外两个硬盘上，这意味着阵列可以从两个硬盘的故障中恢复。RAID
    6 可以在四个或更多硬盘上使用。RAID 6 阵列的大小等于硬盘大小乘以硬盘数量减去 2。如果你有四个 250GB 的硬盘，则阵列的总大小为 250 X (4-2)
    = 500GB。'
- en: '**RAID 10** (mirrored stripes)—This is sometimes called RAID 1+0 and is a RAID
    1 array of two RAID 0 arrays. So disk 1 and 2 are in RAID 0 configurations making
    a big disk A1\. Disks 3 and 4 are also in a RAID 0 set making a combined disk
    called A2\. Then A1 and A2 are used to mirror each other in a RAID 1 setup. A
    RAID 10 array can sustain multiple drive failures as long as the two failed drives
    are part of the **same** RAID 0 set. The read performance is good and the write
    performance is better than RAID 1 as the writing is interleaved across the two
    disks in the mirror.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**RAID 10**（镜像条带化集群）—这种配置有时称为 RAID 1+0，是由两个 RAID 0 阵列组成的 RAID 1 阵列。因此，硬盘 1
    和硬盘 2 以 RAID 0 配置形成一个大硬盘 A1。硬盘 3 和硬盘 4 也以 RAID 0 配置形成一个组合硬盘，称为 A2。然后 A1 和 A2 被用来在
    RAID 1 配置中互为镜像。RAID 10 阵列能够承受多个硬盘故障，只要这两块故障硬盘属于**同一** RAID 0 阵列。读取性能较好，写入性能优于
    RAID 1，因为数据写入是交错分布在镜像中的两个硬盘上的。'
- en: Hardware or Software RAID
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 硬件 RAID 或软件 RAID
- en: RAID comes in two forms. Arrays that are controlled by a dedicated piece of
    hardware often called the RAID controller or arrays that are controlled by software,
    more specifically the operating system, which in this case is FreeBSD.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: RAID有两种形式。一种是由专用硬件控制的阵列，通常称为RAID控制器，另一种是由软件控制的阵列，更具体地说，是由操作系统控制，在这种情况下是FreeBSD。
- en: If you have a hardware RAID controller, then you can use it. FreeBSD supports
    many hardware RAID controllers and the controller is responsible for managing
    the RAID array. With a RAID controller, performance is guaranteed as no overhead
    is added to the local CPU to run the array. The controller simply presents a logical
    disk to the operating system, which FreeNAS will "see" as one disk regardless
    of how many disks comprise the array. Some RAID cards also support hot swapping;
    allowing failed drives to be replaced while the system is running.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有硬件RAID控制器，那么你可以使用它。FreeBSD支持许多硬件RAID控制器，且该控制器负责管理RAID阵列。使用RAID控制器时，性能得到保障，因为没有额外的开销添加到本地CPU上来运行阵列。控制器仅向操作系统呈现一个逻辑磁盘，FreeNAS将其视为一个磁盘，不管阵列由多少个磁盘组成。一些RAID卡还支持热插拔；允许在系统运行时更换故障的硬盘。
- en: Note
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Beware of "Fake" Hardware RAID Controllers**'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**小心“假”硬件RAID控制器**'
- en: There is a type of cheap RAID controller that doesn't have dedicated hardware
    for managing a RAID array but rather uses a combination of a standard disk controller
    chip with special firmware and drivers. Although described as RAID controllers,
    the burden of RAID processing is put on the CPU and not the RAID controller itself.
    These controllers are often known as "fake" RAID controllers, not because they
    don't implement RAID correctly but rather because they are not "true" hardware
    RAID controllers. FreeNAS does not support such kind of RAID controllers.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 有一种便宜的RAID控制器，它没有专门的硬件来管理RAID阵列，而是使用标准的磁盘控制器芯片与特殊的固件和驱动程序相结合。虽然被称为RAID控制器，但RAID处理的负担被放在CPU上，而非RAID控制器本身。这些控制器通常被称为“假”RAID控制器，并非因为它们没有正确实现RAID，而是因为它们不是“真正”的硬件RAID控制器。FreeNAS不支持这种类型的RAID控制器。
- en: If you don't have a RAID controller, then you can use FreeNAS (with the help
    of FreeBSD) to run your RAID array for you. This doesn't require any extra controllers
    and comes free with FreeNAS. We will look, in detail, in chapter 6 about configuring
    software RAID on FreeNAS.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有RAID控制器，那么你可以使用FreeNAS（在FreeBSD的帮助下）来运行RAID阵列。这不需要额外的控制器，并且FreeNAS自带此功能。我们将在第六章中详细讲解如何在FreeNAS上配置软件RAID。
- en: Network Considerations
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络考虑因素
- en: As FreeNAS is **network** attached storage, an important element in deploying
    your server is the network infrastructure. If your network is slow, your FreeNAS
    server will appear slow to your users.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 由于FreeNAS是**网络**附加存储，部署服务器时一个重要的因素是网络基础设施。如果你的网络速度慢，你的FreeNAS服务器对用户的响应也会显得很慢。
- en: All modern Local Area Networks (LANs) use Ethernet or wireless. By local area,
    we mean confined to one local area, normally, a building like a house or office
    building. Ethernet was invented in the 1980s and has become the standard for wired
    home and office networking. Originally, it used a coax cable that went from machine
    to machine but today each machine connects directly to a hub or switch using an
    8-wire cable called Category 5 cable (commonly known as Cat 5 cable).
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 所有现代的局域网（LAN）都使用Ethernet或无线网络。这里的“局域”是指局限于一个本地区域，通常是一个建筑物，比如房屋或办公楼。Ethernet发明于1980年代，并已成为家庭和办公室有线网络的标准。最初，它使用同轴电缆连接各个机器，但今天每台机器都通过一种叫做5类电缆（通常称为Cat
    5电缆）的8根线直接连接到集线器或交换机。
- en: The hub or switch acts as the distribution point and sends the network traffic
    on to the clients. There are 3 main speeds for Ethernet networking today. The
    first and original Ethernet network worked at 10Mb/s (notice megabits not megabytes)
    and was called 10BaseT, then came 100Mb/s networking called 100BaseT and more
    recently 1000Mb/s, which is 1000BaseT. 100BaseT is often known as Fast Ethernet
    and 1000BaseT as **Gigabit** Ethernet.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 集线器或交换机充当分发点，将网络流量转发给客户端。如今，Ethernet网络有3种主要速度。最初的以太网网络工作在10Mb/s（注意是兆比特而非兆字节），称为10BaseT，接着是100Mb/s网络，称为100BaseT，最近则是1000Mb/s，也就是1000BaseT。100BaseT通常被称为快速以太网，而1000BaseT则是**千兆**以太网。
- en: In simplest terms, you want to use the fastest networking possible on your FreeNAS
    server, which at the moment would mean Gigabit Ethernet. This doesn't mean that
    you need to use Gigabit Ethernet throughout your network. If your network is already
    established with Fast Ethernet, then you don't need to change all the network
    cards and switches on your network. However, you do need to ensure that your FreeNAS
    server is fitted with a Gigabit network card and attached to a **good** Gigabit
    switch.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 简单来说，你希望在FreeNAS服务器上使用最快的网络连接，这意味着目前使用千兆以太网。这并不意味着你需要在整个网络中都使用千兆以太网。如果你的网络已经使用了快速以太网，那么你不需要更换网络中的所有网卡和交换机。但是，你确实需要确保你的FreeNAS服务器配备了千兆网卡，并且连接到一个**优质**的千兆交换机。
- en: This means that if two PCs, each with Fast Ethernet, are copying data from the
    FreeNAS server then both will use their maximum available network bandwidth (100Mb/s)
    but the FreeNAS server, being on Gigabit Ethernet, will be able to handle both
    requests (assuming it has the right hardware in terms of CPU and disks etc).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，如果两台PC（每台都具有快速以太网）正在从FreeNAS服务器复制数据，那么两者都会使用其最大可用的网络带宽（100Mb/s），但FreeNAS服务器因为使用的是千兆以太网，所以能够处理这两个请求（假设它拥有足够的硬件支持，如CPU、磁盘等）。
- en: Switch or Hub?
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交换机还是集线器？
- en: To connect your FreeNAS server to your network, it will need to be connected
    to a piece of network equipment called a hub or switch.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 要将你的FreeNAS服务器连接到网络，需要将它连接到一种叫做集线器或交换机的网络设备。
- en: Hubs are quite rare today, but in essence, it is a broadcast device that broadcasts
    all packets coming into a port from all the other ports. It does not try to manage
    the traffic in anyway or check if it is appropriate for any particular packet
    to be forwarded on. As a result, network collisions will occur. This means that
    the PC is trying to use the network, but other PCs on the hub are using it at
    the same time. Ethernet has a built-in system for handling this but it slows down
    the flow of traffic.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 今天集线器相当少见，但从本质上来说，它是一个广播设备，将所有进入某个端口的分组广播到其他所有端口。它不会尝试以任何方式管理流量，也不会检查是否适合将某个特定分组转发出去。结果，网络碰撞会发生。这意味着PC在尝试使用网络时，其他PC也在同时使用网络。以太网有内建的系统来处理这个问题，但它会减慢流量的传输速度。
- en: Because of this collision problem, only 4 hubs are allowed on a 10Mb/s network
    and only 2 on a 100Mb/s network. For 100Mb/s and greater networks, it is much
    better to use a switch.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 由于碰撞问题，在10Mb/s网络中只允许使用4个集线器，在100Mb/s网络中只允许使用2个集线器。对于100Mb/s及更高速率的网络，使用交换机要比集线器好得多。
- en: During the cross over between 10Mb/s networks and 100Mb/s networks, a hybrid
    hub was produced called a dual speed hub. This hub is, in fact, two smaller hubs
    (a 10MB/s hub and a 100Mb/s) combined in one unit with a link between them. PCs
    with 100Mb/s connections would connect to the 100Mb/s hub and those with 10Mb/s
    to the 10Mb/s hub. There is a two port bridge between them. Like single speed
    hubs, such devices are rare today due to the popularity and low cost of Fast Ethernet
    switches.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在10Mb/s和100Mb/s网络之间交替使用时，产生了一种混合集线器，叫做双速集线器。实际上，这个集线器是两个较小的集线器（一个是10Mb/s集线器，另一个是100Mb/s集线器）组合成一个单元，它们之间通过一个链接连接。具有100Mb/s连接的PC将连接到100Mb/s集线器，而具有10Mb/s连接的PC将连接到10Mb/s集线器。它们之间有一个两端口桥接器。像单速集线器一样，由于快速以太网交换机的普及和低成本，这种设备今天已经很少见了。
- en: A switch is different from a hub in that it examines the traffic coming in on
    a port and calculates where it should be sent. By sending each packet only to
    the connected device it was intended for, a network switch conserves network bandwidth
    and offers generally better performance than a hub.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 交换机与集线器的不同之处在于，交换机会检查通过某个端口传入的流量，并计算应该将其发送到哪里。通过仅将每个分组发送到它本应发送的设备，网络交换机能够节省网络带宽，并且通常比集线器提供更好的性能。
- en: Note
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Beware of Cheap Gigabit Switches**'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '**警惕便宜的千兆交换机**'
- en: One thing to be aware of is that just because a switch calls itself a Gigabit
    Ethernet switch, that doesn't necessarily mean it can handle 1000Mb/s of traffic.
    Some of the cheaper switches available understand the language of 1000MB/s networks
    and in such are Gigabit Ethernet switches, but they don't offer the full bandwidth.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，虽然有些交换机自称为千兆以太网交换机，但这并不一定意味着它能够处理1000Mb/s的流量。一些便宜的交换机虽然能够理解1000MB/s网络的语言，因此它们被称为千兆以太网交换机，但它们并不提供完整的带宽。
- en: The key feature of a Gigabit switch is the support for Jumbo (meaning large)
    frames. Without Jumbo frame support, the increases over 100Mb/s networking will
    be marginal.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 千兆交换机的关键特点是支持巨型帧（即大帧）。没有巨型帧支持时，超过100Mb/s的网络提升将会很小。
- en: What About Wireless?
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于无线连接？
- en: Wireless has become a very popular medium today for connecting home PCs to DSL
    (or ADSL) Internet modems and also for connecting various devices around the home
    like Internet radio devices, laptops or even multimedia centers which you can
    connect to your TV and use wireless connections to the Internet and to your desktop
    for streaming music and films.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 无线连接如今已成为将家庭PC连接到DSL（或ADSL）互联网调制解调器以及连接家中各种设备（如互联网无线电设备、笔记本电脑甚至多媒体中心）的流行媒介。您可以将这些设备连接到电视，并通过无线连接流式传输音乐和电影到您的台式电脑和互联网。
- en: FreeNAS does support a number of wireless devices and has support in the web
    interface for configuring a wireless card.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS确实支持多种无线设备，并且在Web界面中支持配置无线卡。
- en: However, wireless isn't the best method for connecting to the FreeNAS. First
    of all, wireless has a limited bandwidth (54Mb/s) and is only half that of 100Mb/s.
    Second, the greater the distance from the wireless access point to the server,
    the bandwidth drops and this is especially true if the signal needs to go through
    walls. The practical result is that the server needs to be close to the wireless
    access point and since it is close, you should be able to connect to your network
    with a cable.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，无线连接并非连接到FreeNAS的最佳方法。首先，无线带宽有限（54Mb/s），只有100Mb/s的一半。其次，从无线接入点到服务器的距离越远，带宽就会下降，特别是如果信号需要穿过墙壁时。实际结果是服务器需要靠近无线接入点，而且既然如此接近，您应该能够通过电缆连接到您的网络。
- en: It is worth repeating that the FreeNAS server is best suited to connection to
    a Gigabit Ethernet switch.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 值得重申的是，FreeNAS服务器最适合连接到千兆以太网交换机。
- en: Summary
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have looked at the decisions you will need to make to buy
    or prepare a server for deployment in your organization. We have considered the
    hardware requirements based on the numbers of users and looked at the different
    types of disks you can put in your server. We have also looked at some of the
    implications for your network.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已经看到了您需要为组织中部署服务器而做出的决策。我们根据用户数量考虑了硬件要求，并研究了您可以放置在服务器中的不同类型的磁盘。我们还考虑了对您的网络可能产生的一些影响。
- en: In the next chapter, we will get our hands on the FreeNAS server and install
    it.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将亲手操作FreeNAS服务器并进行安装。
