# 第一章 Debian 管理员基础

“什么是最适合我需求的发行版？我需要了解什么才能管理 Debian 系统？Debian 有什么不同？在 Debian 中处理特定问题的最佳方式是什么？我在互联网上搜索了这些问题，得到了几百万个结果。现在我该怎么做？有人能帮助我吗？”

对于最后一个问题，答案是肯定的。回答其他问题则需要一些背景知识。本讨论面向那些刚接触 Debian 的人。在这里，我们将讨论 Debian 在各种 Linux 发行版中的位置、项目组织（以及这如何影响管理）以及许可问题。已经熟悉 Debian 的人可以跳到下一章。

# Linux 发行版

Debian 只是众多 Linux 发行版之一。选择哪个发行版最适合你的部署可能是一个相当艰巨的任务。发行版之所以如此多样，是因为每个开发者或赞助商对于默认安装的软件、特定任务的适用软件以及如何最佳管理系统有不同的看法。这意味着，选择一个符合你目标和偏好的发行版将使安装和管理更加容易。

### 注意

任何发行版都可以通过安装非默认软件，或者在某些情况下安装非发行版原生的软件，并使用非默认配置来反映管理员的偏好。然而，选择一个合适的发行版意味着为了满足管理员的需求，所需的工作量会减少。

# 三个分支

Linux 发行版可以分为三个分支，分别根据其原始发行版或包管理器命名：SLS、RPM 和 DPKG。

## SLS

**Softlanding Linux System** (**SLS**) 发行版，后来发展为 Slackware 发行版，是最古老的发行版之一。该分支中的发行版通常在包含原始软件包之前，几乎没有或根本没有对其进行修改。使用这种格式的发行版通常不提供本地软件管理，而是依赖第三方工具进行包管理和管理。这些工具通常是现成可用的，且常常包括在内，因此这不一定是一个缺点。

### 注意

这些发行版也被称为 Sorcerer/Lunar-Linux/Source Mage (SLS) 发行版，是最常见的采用这种格式的发行版。

这些发行版大多已经过时，不常见了。然而，这种包格式仍被许多软件项目使用。

## RPM

**Red Hat 包管理器** (**RPM**) 是由 Red Hat 开发的，旨在为软件管理提供一些结构。它提供了所有常见的软件管理功能，具体如下：

+   软件安装，包括在安装过程中解析软件依赖关系

+   已安装软件的各种报告

+   软件验证和控制

+   用户能够打包自己的软件，以便也能进行管理

大多数基于 RPM 的发行版由公司赞助，这些公司还销售增强版的发行版并提供广泛的付费支持。这也意味着统一的管理工具可用，至少在付费版本中是这样，免费版本中通常会有功能稍微简化的版本。许多管理员更倾向于这种方法，它使得大多数常见的管理任务可以通过一个起始点完成。

使用这种格式的最常见发行版是 Red Hat（及其付费版 **Red Hat Enterprise Linux** 或 **RHEL**）和 SuSE（免费版为 OpenSuSE，付费版通常称为 **SuSE Linux Enterprise Server** 或 **SLES**）。

## DPKG 或 DEB

**Debian 打包系统**（**DPKG**/**DEB**）大约在与 RPM 同一时期开发，具备相同的功能，尽管它们的实现方式不同。DPKG 指的是最初的软件打包工具。它已被更灵活且用户友好的工具所取代，因此该分支通常通过软件包文件的扩展名来称呼：DEB（`.deb`）。该分支中的一些发行版得到了公司资助（Ubuntu 是最著名的），因此拥有统一的管理工具，类似于 SuSE 的 YaST 等。其他发行版，如 Debian，则依赖于第三方软件来实现这一功能。

该分支中最常见的发行版是 Debian 和 Ubuntu。该分支中的其他大多数发行版，如 Mint 和 BackTrack，都源自其中之一。

# 其他差异

在我们深入细节之前，管理员应该了解一些关于 Debian 与其他发行版差异的其他事项。

需要注意的一点是，发行版的“家园”可能会影响其特性。例如，Red Hat 最初在美国开发，因此反映了美国管理员的常见使用习惯和偏好。而 SuSE 则源自德国，体现了欧洲的做法。一个具体的例子是，Red Hat 偏好使用 GNOME 窗口管理器，而 SuSE 更倾向于 KDE 桌面管理器，尽管两个窗口管理器以及其他窗口管理器在这两个发行版中都可用。主要的问题是，匹配你偏好的发行版将需要更少的配置更改或软件包安装，以便更好地匹配你的管理风格。关于发行版的历史和预期目的，可以在发行版的主页以及常见的 Wikipedia 条目中找到相关信息。

Debian 项目起源于美国，但从一开始就招募了全球开发者。因此，默认设置和配置尽可能反映全球最常见的最佳实践，每个软件包则反映了其开发者的独特经验。

最佳实践是选择一个最符合你偏好的发行版。这样，默认配置将更接近你的需求，并且需要较少的调整来匹配你的管理风格。

接下来，发行版大致分为两大类：有公司赞助的和没有公司赞助的。公司赞助通常意味着付费支持是可用的，同时也有带有额外功能的付费版本。并不意味着没有公司赞助的发行版无法获得这些，只是需要寻找第三方提供这些服务，而不是集中在一个地方。

Debian 不接受或没有公司赞助，尽管它确实接受并获得了大量来自硬件、开发者支持和捐赠的企业支持。其理念是，Debian 由其社会契约和开发者指导，而不是由特定的企业赞助商推动。付费支持可以通过多个来源获得（其中许多也有贡献），而来自开发者和用户社区的免费支持则通过许多支持页面和论坛以及官方的错误报告和跟踪网站提供。

另一点是，缺乏公司赞助可能意味着缺乏结构或方向，但这对 Debian 并不成立。事实上，Debian 有着非常强大的结构，支持过程和行政责任引导着 Debian 的开发和发布。其主要影响更为微妙——Debian 由社会契约引导，且由一群致力于质量、自由软件理念的开发者组成，确保软件在尽可能多的环境中运行得尽可能无故障，且广泛可用。

现在，让我们来看看 Debian 项目本身。

# Debian 项目

Debian 本质上是一个完全自由、由志愿者支持的发行版。与 Ubuntu、Red Hat 或 SuSE 不同，它并不接受任何公司赞助。这并不意味着它的组织不严密。事实上，Debian 项目组织良好，拥有明确的治理结构、详细的标准和指南，以及为软件发布、维护和支持制定的特定流程。

### 注意

名称*Debian*来源于项目创始人 Ian Murdock 和他的妻子 Debra 的名字。

## 社会契约

最重要的是，Debian 开发者相信自由软件，正如自由软件基金会所定义的那样。从本质上讲，这一定义确保用户拥有以下自由：

+   为任何目的运行该程序

+   学习程序如何工作并进行修改

+   重新分发副本

+   分发修改版本的副本

所有这些都体现在 Debian 社会契约中，以及**Debian 自由软件准则**（**DFSG**）中，二者都可以在[`www.debian.org/social_contract`](http://www.debian.org/social_contract)找到。所有 Debian 开发者都承诺遵守这一社会契约，它阐明了 Debian 项目的指导原则，并影响所有关于什么应该包含在发行版中、如何分发和维护的决策。特别值得注意的是有关非自由软件的条款，以及对多种不同计算环境的支持。

非自由条款不仅允许此类软件在 Debian 系统上运行，还为这些软件提供了特殊的 Debian 仓库，可以在不支付费用的情况下发布。这些软件实际上是由 Debian 开发者打包和支持的。主要区别在于，由于许可限制，它不属于官方 Debian 发行版。当然，必须付费的软件也可以在 Debian 发行版上运行，只是不能包含在 Debian 仓库中。

## 宪法

实现 Debian 社会契约目标的手段在 Debian 宪法中有所阐明。它概述了正式的结构和决策过程。该项目有一个完整的组织结构，涵盖了官员、发行版、宣传、支持和基础设施等部门，并为每个部门设有具体的职位和职责。虽然 Debian 是一个全员志愿者组织，但它的组织性不亚于任何大型企业实体。

## 政策

除了组织结构外，还有非常全面的政策手册，指导开发和发布的各个方面，包括仓库和存档的结构，以及一系列相关的标准文档。所有相关信息可以在[`www.debian.org/devel/`](http://www.debian.org/devel/)找到。

这些政策及其背后的组织带来的最重要影响之一，就是 Debian 发行版的稳定性。在任何时候，Debian 都有三个主要版本可用：稳定版、测试版和不稳定版。此外，还有实验版和回溯版，但它们并不是完整的发行版。

### 注意

实验版本包含不完整且尚未准备好被纳入不稳定版本的包。回溯包包含专为当前 Debian 稳定版编译的较新包。

不稳定版本是活跃开发的场所。一旦一个包没有“发布关键”缺陷并且在所有支持的架构上都能正常工作，它会被移至测试版本，进行额外的测试。某个时刻，测试内容会被冻结，为新的稳定版本做准备。经过稳定性验证且所有包满足 Debian 发布要求后，测试版成为新的稳定版本，之后循环继续。

稳定版的要求相当严格。实际上，测试版的要求也非常严格，正如一些人所评论的那样，测试版甚至比许多公司发布的稳定版还要稳定。因此，在 Debian 中，稳定版就是意味着稳定。Debian 的稳定发布是极其可靠的，拥有发布安全性和紧急更新的系统，保证了其稳定性。它为服务器和开发系统提供了关键任务级别的生产质量软件。这也是 Debian 被用于更多生产服务器的主要原因之一（根据 W3Tech 数据，截止到 2012 年 1 月）。

和任何优势一样，也存在相应的劣势。Debian 稳定版并不总是包含最新的前沿软件。这是为了确保该发行版尽可能成熟并且没有崩溃。当然，用户可以在 Debian 上安装更新的软件及其所需的依赖项。事实上，backports 存储库包含了这样的软件，特别为 Debian 稳定版预编译。这些软件包，但并不保证其稳定性与官方稳定版相同。

## 许可证

正如在*社会契约*部分提到的，许可证是 Debian 的核心问题之一。官方 Debian 发行版中的所有软件都采用了几种自由软件许可证之一，通常是某个版本的 GNU **通用公共许可证**（**GPL**）、伯克利 BSD 风格的许可证，或 Perl 开发者使用的某种艺术许可证。

对管理员来说，这意味着他们可以在任意数量的不同系统上运行 Debian，而无需支付许可证费用，并且可以将其提供给其他人而没有任何限制（严格来说，的确存在一些限制，但这些大多数是为了保持软件自由的要求，符合自由软件基金会的定义精神）。

这种自由并不妨碍管理员在 Debian 上运行专有软件。事实上，这种自由是社会契约的一部分。唯一的限制就是该软件许可证中所规定的内容。

### Firefox 发生了什么？

Debian 在处理许可证问题时非常谨慎，Mozilla 软件套件就是最好的例子，其中包括 Thunderbird 邮件阅读器和流行的 Firefox 浏览器。关于争议和相关问题，可以写出一整章。然而，基本问题是 Mozilla 的艺术作品并不符合 Debian 指南定义的自由许可证标准。曾经一段时间，Debian 被允许使用其他艺术作品，但最终 Mozilla 公司撤回了这一许可。变化的原因之一是 Debian 开发者为遵守政策和社会契约的方式对软件进行了编译。

经过长时间的争论，Debian 项目决定采取最好的方式——根据 Mozilla 许可证重命名软件，以便保持与 DFSG 的兼容性。Debian 中的 Thunderbird 现在被称为 Iceowl，Firefox 被称为 Iceweasel。

### 注释

这些名称源自早期讨论，当时 Iceweasel 被用来描述一个假设的重新命名版本。这个名字被沿用了。其他 Mozilla 软件也以类似的方式进行了重命名。

管理员的优势包括以下几点：

+   Debian 版本没有受到非免费许可证的限制。

+   Debian 维护者通常会更快地修复漏洞。这些补丁会传递给 Mozilla 维护者。这实际上是 Debian 开发者根据政策对任何软件补丁的要求。

+   更新是通过 Debian 打包框架进行管理的，而不需要单独的专有更新程序。

+   该软件使用标准的 Debian 系统库，而不是安装 Mozilla 的独立库。

+   该软件可以在各种 Debian 支持的非 Intel 架构上运行。例如，你有一台旧的 IBM z 系列服务器吗？Debian Iceweasel 可以在上面运行。那一台老旧的 SG 或 Sparc 工作站呢？同样的情况，Debian Iceweasel 可以顺利运行。

尽管如此，Debian Iceweasel 在实际操作中就是 Firefox。它提供相同的界面和体验，使用相同的插件，并且会向服务器报告自己是兼容 Firefox 的。其他重新命名的 Mozilla 软件也是如此。

### 注释

在 Debian 中，插件搜索功能已修改为仅搜索免费的插件，但我从未觉得这有问题。非免费插件仍然可以根据用户的选择安装，并且可以正常使用。

## 软件仓库

Debian 许可政策的另一个结果是存在三个不同的软件仓库：

+   **main**: 这些是许可证符合 DFSG 的包。

+   **contrib**: 这些包的许可证也符合 DFSG，但依赖于其他不符合 DFSG 的包或库。

+   **non-free**: 这些是许可证不符合 DFSG，但被允许与 Debian 一起分发的包。

用户可以自由选择是否允许安装来自 contrib 和 non-free 类别的软件。如果安装了这些软件，用户需自行了解并遵守相应的许可证。

还有其他非官方的软件仓库，它们托管那些由于某种原因未包含在官方 Debian 仓库中的软件。

## Debian 环境

Debian 包含尽可能广泛的软件种类。截至目前，Debian 稳定版包含超过 48,000 个预编译软件包，是最新稳定版本。根据一些统计数据，这是所有 Linux 发行版中最多的。公平地说，其中许多是小众应用程序，并没有广泛的用户基础。但软件包的数量只是故事的一部分。

支持多种不同环境也是 Debian 发行版的一个显著特点，可能也是最令人吃惊的地方。实际上，Debian 在支持的不同处理器数量上是独一无二的。写作时，它支持包括 32 位和 64 位的 Intel 和 AMD 处理器、ARM（EABI 或小端版本）、Intel Itanium、MIPS（包括大端和小端）、PowerPC（是的，这意味着它可以在 IBM 服务器上运行！）、System/390（旧的 IBM 架构）和 SPARC。此外，Alpha 架构在 Debian 6.0 之前得到支持，还有不官方的移植版本支持其他 ARM 架构，以及 Amtel 的 RISC 芯片（AVR32）、HP 的 PA-RISC 芯片（直到 Debian 6.0）、摩托罗拉 68000、IBM System Z 和日立 SuperH 处理器。还支持将 FreeBSD 作为主要操作系统而非 Linux，在 Intel 32 位和 64 位架构上运行，同时还有其他非官方或实验性的非 Linux 基础的 Debian 发行版，适用于 GNU Hurd 操作系统。

这种承诺导致了一个非常灵活的发行版，可以用于多种环境。因此，Debian 开发者选择不设计一个适合大多数用户的默认安装包。默认的 Debian 安装（未选择任何可选软件）仅包括基础内容。管理员需要选择作为选项的软件，或稍后安装适当的软件。这并不困难，因为基础系统已经包括了安装额外软件所需的所有必要工具。

这与基于 Debian 的 Ubuntu Linux 相对立。基本的 Ubuntu 安装旨在即插即用，适用于大多数用户。因此，它包含更多的软件，使其成为适合新 Linux 用户的发行版，尤其是对于那些不了解可用软件或没有探索需求的用户，与其在可选安装的软件包中挑选，还不如直接使用已有的软件。然而，这也可能导致安装包含不必要的组件。当然，这些组件可以轻松卸载，但这又是一个选择合适发行版的例子，从而减少管理员的工作负担。

这也是 Debian 成为商业服务器领域主要玩家之一的原因之一，因为只有必要的软件和服务会被安装，这通常会带来更好的性能和更简化的系统管理。这也意味着 Debian 可以在较旧、性能较差的设备上正常运行。请注意，尽管如此，在安装过程中或安装后，仍然可以安装各种软件，这将使 Debian 系统能够满足即使是最难以满足的开发者的需求。

## 对管理员的影响

现在我们已经了解了 Debian 的组织和开发背景，接下来的问题是：“这如何影响管理员？”

管理员需要注意的三个主要领域如下：

+   支持的可用性

+   专有功能的可用性

+   许可证问题

### Debian 支持

Debian 项目有一个庞大且结构明确的支持体系，包括大量的文档、Wiki、邮件列表和新闻组、网站和论坛。通过 IRC 提供实时帮助，并且有一个功能完善且有效的 bug 跟踪系统，任何人都可以使用。也可以直接联系 Debian 开发人员和包维护者，这是其他发行版中并不总能做到的。这些及其他可用的支持资源可以在 [`www.debian.org/support`](http://www.debian.org/support) 上找到。

需要记住的一点是，这些都是志愿者（其中一些实际上是由那些正式捐赠时间给 Debian 项目的公司支付的）。每大约两年会发布一次主要版本，并提供三年的更新支持，或者是下一个主要版本发布后一年的支持。根据我的经验，对于 bug 报告和支持请求的响应相当不错，有时甚至比付费支持更快。当然，像论坛这样的地方提供的建议质量，取决于提供建议的人的经验。尽管如此，对于大多数用户来说，这种方式效果非常好。Debian 版本本身极其稳定，这也是一个有利因素。

对于那些更愿意支付支持费用的人，有许多公司和个人提供此类服务。事实上，Debian 网站有一页列出了世界各地的此类顾问。

类似地，尽管 Debian 可以通过从众多 Debian 服务器和镜像站点下载并自行刻录安装 CD、DVD 或蓝光光盘来免费获得，但也可以从第三方供应商处购买现成的安装媒体。

### 专有功能

简单来说，Debian 并没有付费版本，也没有额外功能。

这其中的一个副作用是没有官方的 Debian 统一管理工具。例如，SuSE 提供 YaST，Ubuntu 提供 UCC。然而，发行版中有许多配置和管理工具，诸如 GNOME 和 KDE 等窗口管理器会将它们的管理菜单项集中在一个地方，方便使用。同样，也有一些第三方应用程序能够在 Debian 上很好地运行，它们将大多数（如果不是全部）常见任务集中在一个地方，提供统一且用户友好的界面。

管理员可能遇到的最重要问题是受支持硬件的问题。虽然 Debian 尽力支持尽可能多种类的硬件，但一些制造商并没有提供关于其专有硬件的信息。没有这些信息（编写驱动程序所必需的），如果制造商不提供 Linux 驱动程序，它就无法在 Debian 中得到支持。

### 注意

存在一些特殊情况。如果某些 Windows XP 驱动程序可用，Linux 可以使用它们，但需要额外的步骤来安装和激活它们。

实际上，这并不是 Debian 的问题，而是 Linux 的问题。一些提供付费版本的发行版可能会在增强版本中包含专有驱动程序。然而，一般来说，如果你的硬件受 Linux 支持，它将与 Debian 一起工作。Debian Wiki 上以及其他网站上有许多页面解释如何让 Linux 和 Debian 在许多具有特殊硬件的系统上运行。此外，随着 Linux 的普及，许多制造商正在提供必要的驱动程序，尽管这些驱动程序可能没有免费提供并且没有许可协议允许它们包含在基本发行版中，但至少它们可以以可以安装并与 Debian 一起使用的格式提供。

### 提示

最佳实践：在购买硬件或安装任何发行版之前，检查硬件支持列表和 Linux 兼容性网站。

### 寻找安装帮助和信息的地方

那么，如果你的硬件在 Debian 安装过程中不被支持，应该如何查找支持的硬件或解决方案呢？最好的起点可能是当前的 Debian 安装指南。支持所有架构版本的不同语言版本可以在 [`www.debian.org/releases/stable/installmanual`](http://www.debian.org/releases/stable/installmanual) 获取，并且内容非常详尽。第 2.1 节涵盖了支持的硬件，并提供了链接到更一般的 Linux 硬件兼容性网站。该章节还链接到了同一手册的第 6.4 节，介绍了在安装过程中如何提供缺失的固件。一些架构特定的手册提到了 Linux 硬件兼容性 HOWTO，但有些没有。你可以在 [`www.tldp.org/HOWTO/Hardware-HOWTO/`](http://www.tldp.org/HOWTO/Hardware-HOWTO/) 找到它。最后，你还可以在 [`www.debian.org/releases/stable/releasenotes`](http://www.debian.org/releases/stable/releasenotes) 查找与当前 Debian 版本相关的每个支持架构的附加信息。

# 总结

Debian 是一个极其稳定的 Linux 发行版，包含多种在不同环境和多种 CPU 架构上运行的软件。它是免费的，符合自由软件基金会的定义，因此可以在任何数量的系统上自由运行，管理员可以不受限制地使用，也没有许可费用。它可以自由复制、修改和重新分发。Debian 可通过许多官方 Debian 服务器和镜像下载，并且得到了官方且定义明确的志愿者组织的良好支持，该组织通过多个渠道提供支持。付费的安装介质和支持也可以从许多第三方处获得。

Debian 安装通常只安装必要的最小服务，管理员需要在初始安装后添加任何其他需要的服务。这使得系统更加安全，运行更快且没有多余的服务，并且允许 Debian 在较旧的、性能较低的系统上正常运行。

现在我们已经介绍了 Debian 的基础知识，接下来是磁盘布局的基础知识，包括用于启动的结构以及如何确定分区布局。
