# 序言

欢迎来到 *CentOS 系统管理基础*。我是 Andrew Mallett，我将为您提供专业的指导和培训，使您掌握管理这个强大而流行的 Linux 发行版的技能。我选择主要写关于 CentOS 是因为它在学习和生产过程中都不需要您支付费用。此外，CentOS 紧密遵循 Red Hat Enterprise Linux 发行版，因此您在这里学习和开发的技能可以在 CentOS 和 Red Hat 上得到很好的应用。如果您有兴趣，您的阅读可以作为追求 Red Hat 认证路径的一种投资。尽管本书并非直接编写为适应任何现有的课程，但 Red Hat 的考试都基于实际练习，因此您对 Linux 操作的了解越多，就越好。

CentOS 代表社区企业操作系统，尽管社区是一个小词，但它包含了很多。支持来自社区，通过论坛和 Linux 社区来帮助开发服务和应用程序，并提供解决发生的错误的方法。社区已经接管了这个发行版。随着社区的不断参与，发行版变得更加强大。

当我们谈论社区时，我想要感谢 Say Mistage（在 Twitter 上的 `@sayomgwtf` 可用）给予我的灵感和涂鸦。

写关于企业 Linux 发行版的重要性在于我们看到越来越多的组织部署 Linux，并因此需要有经验的专业人员来管理这些系统。在 2013 年，Linux 基金会与专业招聘公司 Dice 进行了调查，涉及许多大型组织，并得出以下结果：

+   93% 的被调查组织正在寻找雇佣 Linux 专业人员。

+   91% 的招聘经理报告称他们发现很难找到技能熟练的 Linux 管理员。

+   作为这一点的附注，还额外注意到 Linux 专业人员的薪水在过去的 12 个月内增加了 9%。

在如此多组织对 Linux 如此有信心的情况下，本书的重点必须是商业驱动，既是对我自己也是对你，读者。我希望你能够提升自己的职业前景以及 Linux 知识。

企业级 Linux 发行版，如 CentOS、Red Hat、Debian 和 SUSE 企业版 Linux，通常不会部署你在家用或爱好者导向的发行版（如 Fedora 或 openSUSE）中可能找到的最新和最尖端的技术。相反，它们将这些技术作为开发平台，先进行打磨和完善，再将其迁移到企业平台，这一过程可能会持续几个月甚至几年。企业级 Linux 必须是可靠、稳定且具有弹性的。除此之外，它还必须得到部署它的组织的良好支持，以及来自社区或付费支持团队的后端支持。从定义上讲，最新的软件开发技术并不适合这种需求；因为它们是最为新近的，关于这些进展的知识及最佳实践，毫无疑问需要时间来演变和发展。

# 本书内容概览

第一章，*驯服 vi*，将确保你熟练掌握 shell 中的快捷键，使其更加高效地导航，然后再进入 vi 的精通之路。你可能有过使用 vi 的经验，但我发现大多数人的经验并不愉快。我将确保你成为 vi 的主人，而不是相反。

第二章，*冷启动*，将帮助你理解 CentOS 中的启动过程，学习如何不仅修改 GRUB 菜单以增强安全性，还将学习如何使用 GRUB 命令行来调试和修复启动问题。我们还将包括一些使用 Plymouth 进行的启动动画，并解释何时根文件系统实际上并不是根文件系统。

第三章，*CentOS 文件系统深入探讨*，告诉我们，虽然我们有文件和目录，但它们都只是不同的文件类型。然而，当涉及到链接、管道和套接字时，我们将讨论它们是什么，以及它们如何使用。关于链接，我们将讨论硬链接和软链接之间的区别。我们还将挑战传统的文件系统设计；你可能曾经使用过逻辑卷管理器（LVM），但让我告诉你，它已经是上世纪的技术了。你将会惊讶于使用 BTRFS 进行企业级文件系统管理的强大与便捷，它的发音是 Better FS。

第四章，*YUM——软件从未如此美丽*，将让你掌握 YUM 仓库和软件管理；你一定会喜欢这个的。你将学会如何下载软件包而不立即安装它们，这样你就可以轻松地在企业中分发软件包。如果这还不够好，那么你将学会如何设置本地仓库，通过局域网共享软件包，并创建你自己的 RPM 包。

第五章，*驯服猫 – 控制进程*，告诉我们，管理员们常常没有你我这般的洞察力，随意让不必要的服务继续运行，并且不理解他们管理进程所需的工具。在这里，你将学习如何使用 upstart 和传统的服务脚本控制服务和进程，并且通过 kill 和 pkill 这些“致命武器”学会如何清除不必要的进程。

第六章，*用户 – 我们真的需要他们吗？*，当然告诉我们，我们并不希望系统上有这些用户，但这往往是被要求的，因此我们别无选择。与其对此心生不满，你将学会如何微笑着管理用户，并把他们牢牢掌控。

第七章，*LDAP – 更好的用户管理方式*，告诉我们，与其在每台机器上创建用户和组的孤岛，不如花更多时间在系统上进行优化，少花时间管理用户，这样你就可以回到高尔夫球场。将用户添加到中央目录并在需要时跨所有系统共享，是通向自由的门户。

第八章，*Nginx – 部署以性能为中心的 Web 服务器*，告诉我们，通常 Linux 管理员和出版物会集中讨论 Apache Web 服务器；我将向你介绍这个新兴的角色——Nginx（发音为 Engine X）。Nginx 自 2004 年推出以来，迅速从 Apache 手中抢占市场份额，且在全球多个部署的 Web 服务器中已经超过了 IIS。我们将一起部署 Nginx 和 PHP。

第九章，*木偶 – 现在你是木偶师*，将我们的焦点从企业中的 Linux 转移到通过 Puppet Labs 的著名 Puppet 软件来控制你的企业系统。集中配置控制和集中用户管理一样好，它能让你有更多的时间去高尔夫球场，而不是让我给你留下“高尔夫占据了我生活”的印象。

第十章，*安全中心*，向你介绍了可插拔身份验证模块（PAM）。它是你的朋友，帮助你管理用户何时以及如何连接。SELinux 同样是朋友，尽管它有些脾气。只要好好对待，它会帮助你确保系统的正确使用。你将学习如何加固你的 Linux 系统，并获得一套最佳实践！

第十一章，*毕业典礼*，告诉我们，在我们准备离开并带着新学到的技能时，我们将提醒自己需要关注安全问题，并遵循最佳实践。我们可以重新回顾一些我们之前见过的产品，比如 Puppet 和 Nginx，并概述一些行业公认的部署这些服务的准则，以及 CentOS 7 的一些新特性。

# 本书所需资源

你需要有一些 Linux 使用的基础知识，并希望将这些知识快速提升到专家级别。建议并鼓励你在本书及其中的练习中进行实际操作。虽然本书也可以作为“阅读和学习”的工具，但我更推荐“阅读、实践并终身学习”。中间的“实践”对于真正理解和掌握知识至关重要；这是经过时代验证的教育法。

在撰写本书时，CentOS 6.5 版本已发布，尽管任何版本的 CentOS 都适用于大多数练习，包括后续版本。CentOS 的各个版本可以从 [`wiki.centos.org/Download`](http://wiki.centos.org/Download) 下载。它是免费的且开放使用的，正如你将看到的，符合 GPL 许可协议。CentOS 6.5 将免费支持更新，直到 2020 年 11 月 30 日。

# 本书适用对象

我认为可以公平地说，我了解 Linux，更重要的是，我知道如何让你保持参与。我将以一种旨在帮助你理解和记住的方式传授我的知识，通过将复杂的理念拆解成易于消化的智慧小块，使你在每翻一页时都能在知识和信心上成长。我们将集中讨论命令行的强大功能和易用性。例如，让我问你一个问题：

73 天前是什么日期？

我很惊讶你居然不知道。Linux 命令行知道，简单地执行以下命令即可：

```
$ date --date "73 days ago"

```

本书是为那些有一定 Linux 知识的管理员编写的，目的是让他们获得更多的经验，并且不怕通过命令行外壳操作来动手实践。

理解 Linux 命令行的强大功能，并通过这些小小的增强技巧掌握它，将是你作为 Linux 管理员成功的关键。这也是我将本书与其他书籍区分开来的地方。你可能还想查看我的 YouTube 频道 [`www.youtube.com/theurbanpenguin`](http://www.youtube.com/theurbanpenguin)，在该频道中，我创建了超过 700 个教程，涵盖了各种产品，主要以 Linux 为主，并且包含大量脚本编写和编程内容。

或者，你可以访问我自己的站点 [`theurbanpenguin.com`](http://theurbanpenguin.com)，那里内容组织得更好。

# 约定

在本书中，你会看到多种文本样式，它们用于区分不同类型的信息。以下是一些样式示例及其含义解释。

文本中的代码词、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名会以如下方式显示：“将`.vimrc`设置为你喜欢的方式。”

一段代码块设置如下：

```
default=0
timeout=5
hiddenmenu
password --md5 <password-hash>
```

任何命令行输入或输出都会如下所示：

```
# vi /etc/httpd/conf/httpd.conf
# service httpd restart
w3m localhost

```

**新术语**和**重要词汇**会以粗体显示。你在屏幕上看到的单词，例如菜单或对话框中的内容，会以这样的方式呈现：“在主欢迎页面，我们应该选择**用户和组**标签页，然后点击**搜索**按钮。”

### 注意

警告或重要说明会以这样的框框形式出现。

### 提示

提示和技巧会以这样的方式展示。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢或不喜欢什么。读者反馈对我们非常重要，因为它帮助我们开发出能让你从中获得最大价值的书籍。

要向我们提供一般反馈，只需通过电子邮件发送到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果你在某个领域拥有专业知识，并且有兴趣撰写或为书籍做贡献，请参阅我们的作者指南：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经成为一本 Packt 书籍的骄傲拥有者，我们提供了一些帮助你从购买中获得最大收益的资源。

## 下载本书的彩色图像

我们还为你提供了一份 PDF 文件，其中包含本书中使用的截图/图表的彩色图像。彩色图像将帮助你更好地理解输出中的变化。你可以从以下链接下载该文件：[`www.packtpub.com/sites/default/files/downloads/5920OS_coloredimages.pdf`](https://www.packtpub.com/sites/default/files/downloads/5920OS_coloredimages.pdf)。

## 勘误

虽然我们已尽一切努力确保内容的准确性，但错误还是会发生。如果你在我们的书籍中发现错误——可能是文本或代码错误——我们将非常感谢你能报告给我们。通过这样做，你可以帮助其他读者避免困扰，并帮助我们改进后续版本的书籍。如果你发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)报告它们，选择你的书籍，点击**勘误提交表单**链接，并填写勘误的详细信息。一旦你的勘误被验证，你的提交将被接受，勘误将被上传到我们的网站或添加到该书的勘误部分。

要查看之前提交的勘误，请访问 [`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support) 并在搜索框中输入书名。所需的信息将在**勘误**部分显示。

## 盗版

网络上对版权材料的盗版问题在所有媒体中都持续存在。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上遇到我们作品的任何非法复制，请立即提供相关的地址或网站名称，以便我们采取补救措施。

请通过 `<copyright@packtpub.com>` 与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护作者权益以及我们为您提供有价值内容方面的帮助。

## 问题

如果您对本书的任何方面有问题，您可以通过 `<questions@packtpub.com>` 与我们联系，我们会尽力解决问题。
