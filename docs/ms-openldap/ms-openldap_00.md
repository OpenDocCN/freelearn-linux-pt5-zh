# 前言

OpenLDAP 目录服务器是一个成熟的产品，自 1995 年以来（以某种形式）一直存在。所有主要的 Linux 发行版都包含 OpenLDAP 服务器，许多主要的应用程序（无论是开源还是专有）都支持目录功能，并能够使用 OpenLDAP 提供的服务。然而，OpenLDAP 服务器似乎一直笼罩在神秘之中，只有专家和黑客才了解和掌握它。本书不仅旨在揭开 OpenLDAP 的神秘面纱，还希望为系统管理员和软件开发人员提供扎实的理解，帮助他们在实际应用中有效利用 OpenLDAP 的目录服务。

OpenLDAP 是一个开源服务器，提供网络客户端目录服务。目录服务器可用于将组织信息存储在集中位置，并将这些信息提供给授权的应用程序。客户端应用程序可以通过轻量级目录访问协议（LDAP）连接到 OpenLDAP。然后它们可以搜索目录，并在具有适当权限的情况下，修改和操作目录中的记录。LDAP 服务器最常用于为用户提供基于网络的认证服务。但 LDAP 还有许多其他用途，包括将目录用作地址簿、DNS 数据库、组织工具，甚至作为应用程序的网络对象存储。本书将介绍其中的一些用途。

本书的目标是为系统管理员或软件开发人员准备好使用 OpenLDAP 构建目录，并在网络环境中应用该目录。为此，本书将采取实际操作的方法，重点强调如何完成任务。偶尔，我们将深入探讨 LDAP 的理论方面，但这些讨论只会在理解理论有助于回答实际问题时进行。

# 本书内容

在第一章中，我们将讨论目录服务器和 LDAP 的一般概念，回顾 LDAP 的历史及 OpenLDAP 服务器的演变，最后提供 OpenLDAP 的技术概述。

接下来的章节重点讲解如何使用 OpenLDAP 构建目录服务，我们将在这些章节中深入探讨 OpenLDAP 服务器。

第二章从在 GNU/Linux 服务器上安装 OpenLDAP 开始。安装完服务器后，我们将进行基本的后安装配置，以确保服务器能够运行。

第三章介绍了 OpenLDAP 服务器的基本使用。我们将使用 OpenLDAP 命令行工具向新目录中添加记录、搜索目录并修改记录。本章介绍了与 LDAP 数据操作相关的许多关键概念。

第四章 涵盖了安全性，包括如何处理目录的身份验证、配置访问控制列表（ACL）以及使用安全套接字层（SSL）和传输层安全性（TLS）保护基于网络的目录连接。

第五章 讨论了 OpenLDAP 服务器的高级配置。在这里，我们详细介绍了各种后端数据库选项，还讨论了性能调优设置，以及最近引入的目录覆盖技术。

第六章 重点介绍通过创建和实施 LDAP 模式来扩展目录结构。模式提供了一种定义新属性和结构的程序，以扩展目录并提供根据需求定制的记录。

第七章 重点介绍目录复制以及如何通过不同方式让目录服务器在网络上互操作。OpenLDAP 可以将其目录内容从主服务器复制到任意数量的从属服务器。在这一章中，我们将设置两个服务器之间的复制过程。

第八章 讨论了如何配置其他工具与 OpenLDAP 互操作。我们从 Apache Web 服务器开始，使用 LDAP 作为认证和授权的来源。接着，我们安装 phpLDAPadmin，这是一个基于 Web 的目录服务器管理程序。然后，我们查看其主要功能，并进行一些定制调优。

附录包括逐步指导如何从源代码构建 OpenLDAP (附录 A)、如何使用 LDAP URL 的指南 (附录 B)，以及有用的 LDAP 客户端命令汇编 (附录 C)。

# 本书所需内容

为了最大限度地从本书中受益，你需要安装 OpenLDAP 服务器软件，以及客户端命令行工具。这些都可以免费获取（作为开源软件）并以源代码形式从 [`openldap.org`](http://openldap.org) 下载。不过，你也可以选择使用特定 Linux 或 UNIX 发行版提供的 OpenLDAP 版本。

虽然 OpenLDAP 可以在 Linux、各种版本的 UNIX、MacOS X 和 Windows 2000 等系统上运行，但本书中的示例使用的是 Linux 操作系统。

由于基本的 LDAP 工具是命令行应用程序，你需要具备一定的 Linux/UNIX shell 环境操作知识。本书不详细涵盖网络协议，假设读者已经具备基本的客户端-服务器网络模型的理解。同时，也假设读者具备对 Web 和电子邮件服务结构的基本了解。

# 约定

在本书中，您将找到多种文本样式，用以区分不同种类的信息。以下是这些样式的一些示例，并解释它们的含义。

代码有三种样式。文本中的代码词汇显示如下：“`telephoneNumber` 属性有两个值，每个值代表一个不同的电话号码。”

一段代码将按如下方式设置：

```
########
# ACLs #
########
access to attrs=userPassword
       by anonymous auth
       by self write
       by * none
```

当我们希望引起您对代码块中特定部分的注意时，相关的行或项目将以粗体显示：

```
directory /var/lib/ldap
# directory /usr/local/var/openldap-data
index objectClass sub,eq
index cn sub,eq
```

任何命令行输入和输出将按如下方式编写：

```
 $ sudo slaptest -v -f /etc/ldap/slapd.conf

```

**新术语** 和 **重要单词** 以粗体字样介绍。您在屏幕上看到的，或者在菜单或对话框中看到的词汇，例如，出现在我们的文本中像这样：“点击简单搜索屏幕顶部的**高级搜索表单**链接将加载一个具有更多选项的搜索屏幕”。

### 注意

重要的说明将以类似这样的框展示。

### 提示

提示和技巧以这种形式出现。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们您对本书的看法，您喜欢什么或可能不喜欢什么。读者反馈对我们开发真正能让您受益的书籍非常重要。

要发送一般反馈，只需给我们发送一封电子邮件至 `<feedback@packtpub.com>`，并确保在邮件的主题中提及书名。

如果您需要某本书并希望我们出版，请通过 [www.packtpub.com](http://www.packtpub.com) 上的 **SUGGEST A TITLE** 表单或发送电子邮件至 `<suggest@packtpub.com>` 给我们留言。

如果您在某个主题上有专业知识，并且有兴趣撰写或贡献书籍，请参见我们的作者指南：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经成为 Packt 图书的骄傲拥有者，我们有很多方法可以帮助您从购买中获得最大收益。

## 下载本书的示例代码

访问 [`www.packtpub.com/support`](http://www.packtpub.com/support)，然后从书籍列表中选择本书，以下载本书的示例代码或额外资源。可供下载的文件将随后显示。

## 勘误

尽管我们已尽力确保内容的准确性，但错误还是会发生。如果您在我们的书籍中发现错误——可能是文本或代码错误——我们将非常感激您能报告给我们。这样，您不仅能帮助其他读者避免困扰，还能促进后续版本的改进。如果您发现任何勘误，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)报告，选择您的书籍，点击**提交勘误**链接，并输入您的勘误详情。您的勘误经过验证后，将被接受并添加到现有的勘误列表中。您可以通过访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并选择您的书名来查看现有的勘误。

## 问题

如果您在书籍的某个方面遇到问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽最大努力解决问题。
