# 第四章：终端设备

VMware View 是通过 PCoIP 协议向终端设备提供桌面体验的解决方案。VMware View 支持的设备种类繁多，包括厚客户端、瘦客户端、零客户端以及其他设备，例如 Apple iPad。本章将涵盖各种类型的客户端以及它们支持和不支持的功能，以便在整体解决方案中做出适当的设计考虑。

在评估 VMware View 解决方案的客户端设备时，需要注意的是，大多数人将工作电脑的质量与显示器的尺寸和外观关联在一起。

例如，Jenson 的桌面下有一台积满灰尘的 HP 工作站，并连接着一台 17 英寸的显示器。如果 IT 部门将 Jenson 的 HP 工作站替换为零客户端和 24 英寸显示器，他很可能会对新设备产生好感。通过为曾经使用 Windows XP 工作站的 Jenson 提供 Windows 7 虚拟桌面，Jenson 很可能会对他的“新电脑”赞不绝口。

设备选择对于 VDI 项目的成功至关重要，因为它是用户连接到虚拟桌面的门户。

本章将涵盖以下内容：

+   厚客户端与瘦客户端

+   Teradici PCoIP 驱动的零客户端及其他客户端

+   为您的组织选择合适的设备

# 厚客户端

**厚客户端**是运行完整工作站操作系统版本的笔记本或台式机，例如 Windows XP。厚客户端拥有完全可用的操作系统，并使用本地安装的 VMware View 客户端连接到虚拟桌面基础架构（VDI）。

以下是一些厚客户端的示例：

+   Dell OptiPlex 工作站

+   Lenovo 笔记本

+   Apple MacBook Pro

厚客户端的常见优势如下：

+   它们支持本地模式（仅限基于 Windows 的厚客户端）

+   通常，它们提供较高的性能（从图形卸载的角度来看）

厚客户端和瘦客户端的主要区别在于，基于 Windows 的厚客户端能够支持检出的本地模式桌面。而基于 Windows 的瘦客户端则具备支持检出本地模式虚拟桌面的能力，但它们通常会被锁定，且没有足够的本地存储来容纳加密的虚拟桌面镜像。因此，如果某个解决方案中存在要求终端用户处于断开连接状态的使用场景，通常需要为这些终端用户配发厚客户端，以满足 VMware View 本地模式的要求。

除了支持本地模式，厚客户端通常具有非常好的性能，因为它们通常配备超过 2 GB 的内存、多核处理器和中到高性能的本地硬盘。对于一些入门级的瘦客户端，运行多媒体应用程序可能会导致瘦客户端的 CPU 占用达到 100%，因为它难以处理多媒体重定向。多媒体重定向将媒体渲染到终端设备上，这就需要终端设备具备较强的性能。

厚客户端的缺点如下：

+   另一个需要修补、维护并保持合规的工作站

+   可能会在边缘存储数据（因为该设备本身仍然是一个完全功能的桌面）

+   需要额外操作系统的许可证

+   一个不稳定的终端

+   更高的被盗风险（因为该设备本身是一个完全功能的设备）

+   用户需要额外的培训，因为他们在使用虚拟桌面时可能会感到困惑，尤其是在切换到本地操作系统时

通常，在从现有物理桌面环境迁移到虚拟桌面解决方案的过程中，组织会考虑逐步引入瘦客户端或零客户端。这种方法通常适用于那些最近购买了新厚客户端（例如工作站）和/或那些在未来几年内不打算进行更新的组织。然而，通过逐步引入瘦客户端或零客户端，组织仍然需要管理厚客户端的底层操作系统。

除了强制组织管理底层操作系统外，组织还可能（根据其特定的操作系统许可协议）需要为厚客户端上的操作系统购买许可，这还不包括虚拟桌面操作系统的许可。这可能会迅速增加组织所需的许可证数量，并增加虚拟桌面项目的总体资本支出。

最后，厚客户端通常是从可写分区启动的机器。这意味着设备在每次启动时可能会以略有不同的状态启动。瘦客户端或零客户端的稳定性不会出现，因此，厚客户端的维护任务（如重新映像）可能会增加，从而提高每台厚客户端的运营费用。

## 重新利用厚客户端

**重新利用**是将厚客户端（例如，安装了 Windows XP 的 Dell OptiPlex 工作站）转换为专用的 VMware View 终端的过程。重新利用通常包括以下步骤：

+   安装精简版操作系统（例如 Windows XP 嵌入式版或 Linux 发行版）

+   在重新利用的厚客户端上安装的附加应用程序较少，除了 VMware View 客户端

+   防止对厚客户端配置的更改

替代重新映像厚客户端为新的、专门构建的映像的方法是使用可启动解决方案。例如，通过创建带有 Linux 桌面操作系统和运行 VMware View Client 所需组件的 Live CD，厚客户端可以直接从 CD 启动（只读）。这确保了每次用户打开设备时都会有统一的体验。新发布的 Linux 版本 VMware View Client 使得重新利用变得更加吸引许多没有资本投资 PCoIP 零客户端的组织。

重新利用厚客户端通常被视为实现零客户端的过渡措施，也是延长老旧桌面硬件使用寿命的一种方式。

# 瘦客户端

**瘦客户端**指的是专门构建的设备，这些设备运行精简版操作系统（例如，**Microsoft Windows XP Embedded (XPe)**、SUSE Linux），旨在为最终用户提供最小化的桌面环境。在这个最小化的桌面环境中，最终用户启动 VMware View Client，并连接到其虚拟桌面。瘦客户端通常具有受保护或过滤写入的系统分区。

以下是一些瘦客户端的例子：

+   ClearCube I8520

+   Wyse R50

+   Dell Latitude Mobile 13

瘦客户端的常见优势如下：

+   它们提供一致的桌面环境。

+   它们允许安装第三方软件（如 VPN 客户端）。

+   它们比厚客户端占用的空间更小。

+   通常，它们消耗的功率比厚客户端少。

由于瘦客户端通常是被锁定的操作系统，并具有写入过滤器（不允许写入系统分区，或仅允许在特定子目录中写入），最终用户在每次启动过程中将拥有一致的体验。这有助于减少与修补、维护和重新映像厚客户端相关的运营成本。

此外，瘦客户端允许安装第三方软件，以创建特定于组织需求的精简操作系统映像。

当前，零客户端不支持**虚拟专用网络（VPN）**连接，因为 PCoIP 固件中没有内置客户端。然而，VMware View 4.6 引入了通过安全服务器使用 PCoIP 的功能，这是远程连接的首选方法，因为它相较于典型的 VPN 连接提供了更好的最终用户体验。

对于那些希望锁定最终设备、提供一致体验并且需要 VPN 连接的组织，瘦客户端是终端设备的一个可靠选择。

瘦客户端的缺点如下：

+   成本

+   性能

+   升级时可能会导致供应商锁定（例如，Wyse）。

虽然瘦客户机通常在硬件平台上功能较少，规格较低，但对于大多数组织而言，它们的成本通常与厚客户机相当。这部分是因为厚客户机的采购通常伴随着大宗订单，以及由此带来的大幅折扣。此外，由于瘦客户机总体上仍属于低产量业务，制造成本通常高于传统厚客户机。

此外，由于瘦客户机通常试图为终端用户提供最少的功能，以便提供良好的体验（最终能够连接到一个具备足够计算能力以满足用户需求的虚拟桌面），如果瘦客户机的处理器无法处理多媒体重定向（例如），整体体验可能会受到影响。

# Teradici PCoIP 驱动的零客户机

**零客户机**指的是一种内嵌 Teradici PCoIP 芯片的设备，使得设备可以直接启动 VMware View 客户端，而无需底层操作系统。零客户机没有可写的系统分区，也没有硬盘。相反，零客户机是从嵌入设备中的芯片组启动的。

本节特别强调**Teradici PCoIP 驱动**的设备，因为作者认为市场上那些未采用 PCoIP 模式的零客户机注定会被淘汰。至少，它们可能无法在 VMware 生态系统中获得相同的采用率。

零客户机的一些例子如下：

+   三星 NC240 显示器

+   EVGA PD02

+   ClearCube I9424

+   Wyse P20

零客户机的常见优点如下：

+   安全性

+   配置简便

+   成本

+   供应商诊断管理

+   通常比瘦客户机占用更小的空间

+   通常比瘦客户机消耗更少的电力

零客户机是组织可以利用的最安全的终端设备，因为它们内部没有硬盘。在基于零客户机的解决方案中，不可能有敏感数据存储在终端设备上，因为这些设备无法存储此类数据。

零客户机通常被认为在配置上与瘦客户机不相上下，甚至更容易配置。这是因为零客户机的设置非常少（IP 设置、VMware View 连接服务器及其他一些小设置），其目标是尽快让终端用户访问他们的虚拟桌面。

最后，零客户机通常被视为不仅是最安全的解决方案，而且也是最具性价比的解决方案。这是因为，对于那些希望替换桌面设备的组织，例如，一台配有键盘和鼠标的三星 NC240 通常比瘦客户机便宜得多（后者仍然需要显示器）。对于希望利用现有显示器的组织来说，标准的零客户机（例如，EVGA PD02）可能是市场上最便宜的选择之一。

零客户机的缺点如下：

+   目前，它们不支持客户端内的 VPN

+   它们不支持本地模式

+   目前，它们不提供原生的 Wi-Fi 支持

+   无客户端缓存

对于需要其终端设备建立 VPN 连接以连接到 VMware View 连接服务器环境的组织，零客户端将不适用。因为目前零客户端没有内嵌 VPN 客户端固件，无法建立到远程对等端的安全连接。

应当注意，利用安全服务器的合适 VMware View 解决方案应能消除对 VPN 连接的需求。

此外，零客户端无法支持在本地模式下原生运行的虚拟桌面。目前没有移动设备专用（例如，装在笔记本外壳中的零客户端）零客户端解决方案，因此需要使用本地模式的移动用户可能仍然最好使用传统的厚客户端。

# 其他客户端

其他客户端可以包括苹果 iPhone、华硕 Transformer（基于 Android 的平板电脑）、苹果 iPad 或戴尔 Streak 等设备。目前最流行的外设是基于平板的终端设备，主要是苹果 iPad 和基于 Android 的平板电脑。

这些其他客户端的缺点在于它们可能不支持本地模式。另外，像苹果 iPad 这样的设备不支持本地模式，这意味着当终端用户处于无网络连接的状态时（例如，在飞机上没有 Wi-Fi），用户将无法访问自己的桌面。

对于将平板作为终端设备的组织，强烈建议为平板提供键盘解决方案。如今，大多数用户是传统键盘和鼠标解决方案的本地用户。平板设备提供了一种新的输入方式，许多用户仍在适应这一方式。尽管用户体验通常很愉快，但尝试输入一封长邮件或执行某些常规工作任务时，可能会显得有些繁琐。

例如，iPad 的 VMware View 客户端支持蓝牙键盘，如 Zagg Mate（[`www.zagg.com/accessories/logitech-ipad-2-keyboard-case`](http://www.zagg.com/accessories/logitech-ipad-2-keyboard-case)）。

# 选择合适的设备

以下问卷可用于帮助确定适合特定组织的设备。该问卷基于经验，应该作为实地工作时的基础：

| 问题 | 答案 | 理由 |
| --- | --- | --- |
| 是否为此 VDI 项目购买新设备？ | 是 | 以零客户端为主，其他设备/平板电脑为辅。 |
| 是否为此 VDI 项目购买新设备？ | 否 | 重新利用现有的厚客户端或薄客户端。 |
| 安全性是否至关重要？ | 是 | 零客户端，因为它们不提供可写硬盘。 |
| 该解决方案是否需要支持常规视频会议？ | 是 | 调查 Cisco 等公司即将推出的集成 PCoIP 零客户端解决方案。 |
| 是否需要智能卡认证？ | 是 | 厚客户端、薄客户端或零客户端都可以；避免使用平板电脑。 |
| 是否希望最小化占地面积和电缆基础设施？ | 是 | 三星集成显示器零客户端，配合第三方 Wi-Fi 解决方案，以及无线键盘和鼠标。它需要一根电缆（电源）从解决方案连接到墙壁。 |
| 大多数用户是否将从固定位置连接？ | 是 | 零客户端。 |
| 大多数用户是否是移动用户或经常出差？ | 是 | 厚客户端（笔记本电脑）。 |

上表仅是一个起点。理想情况下，可以在试点期间测试几种设备，包括厚客户端和零客户端。这将帮助组织了解零客户端如何为他们工作（或在特定情况下可能无法使用）。

## 一根电缆零客户端解决方案

电缆减少是一个在教育环境或任何必须快速建立和拆解客户端环境的环境中经常讨论的话题。一个典型的物理桌面解决方案包括：

+   工作站电源电缆

+   工作站网络电缆

+   键盘的 USB 电缆

+   鼠标的 USB 电缆

+   视频电缆

+   显示器电源电缆

该解决方案总共需要六根电缆分布在桌面或会议室中。还包括三根电缆（显示器电源、工作站电源和工作站网络），它们需要连接到墙面插座。

以下解决方案仅需一根电缆连接到墙壁，并基于三星的集成 PCoIP 显示器解决方案（NC190 或 NC240）：

+   三星显示器零客户端的电源电缆

+   NETGEAR WNCE2001 通用 Wi-Fi 互联网适配器

    +   这使得零客户端能够通过 Wi-Fi 连接到 VDI，而无需将补丁电缆从设备连接到墙面插座

    +   WNCE2001 也可以通过 USB 供电（以去除电源电缆的需求）

+   罗技 MK520 无线键盘和鼠标

    +   发射器只占用一个 USB 端口，并提供无线键盘和鼠标

该解决方案仅需要一根电源电缆，适用于需要快速搭建和拆除的环境，如应急响应、培训和教育环境。

# 总结

VMware View 是一个极其灵活的解决方案，可以支持各种不同的终端设备。这有助于提高 VDI 项目的整体成功率，因为它允许用户在特定的情况或网络连接状态下，携带最适合自己的设备。例如，用户可以简单地携带一台 Apple iPad，并使用 VMware View 客户端连接到他们的企业虚拟桌面（vDesktop），执行一些轻量任务，如内部浏览、文件管理等。当用户回到家庭办公室或工作桌面时，他们可能会使用带有 View 客户端的完整桌面工作；这将使输入更快，例如。

根据本书作者的集体经验，PCoIP 零客户端通常是组织前进的最佳选择，因为它消除了整体 VDI 解决方案中的一个不必要的变量。PCoIP 零客户端既可靠、可预测，又经济实惠且安全。

下一章讨论了如何正确地调整 VMware View 解决方案的规模，这对确保良好的终端用户体验、冗余性和成本效益至关重要。现在，VMware View 的基础工作已经完成，接下来是时候开始设计软件和硬件基础设施了。
