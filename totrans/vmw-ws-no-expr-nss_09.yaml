- en: Chapter 9. Sharing Virtual Machines
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In a test environment, a virtual machine is a convenient way to share your test
    results with others. VMware Workstation offers many options to share. You can
    upload virtual machines to vSphere or make them available in the cloud by using
    the VMware Marketplace. Also you can share virtual machines with other users that
    use VMware Player. To make it totally clear to the users what they can do with
    their virtual machines, you can also make screen movies from the test results
    you've accomplished in your virtual machines to explain to others what you have
    been doing. In this chapter you'll learn how to use these techniques.
  prefs: []
  type: TYPE_NORMAL
- en: Uploading virtual machines to vSphere and the cloud
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: VMware Workstation is used by many to create and test virtual machines in an
    isolated environment before uploading them to the production environment. This
    is made easier by the option to upload virtual machines directly to vSphere and
    ESXi. To use this functionality, it doesn't matter if you're in a vSphere environment
    with unmanaged hosts, or if you have hosts managed by vCenter Server, both environments
    are supported.
  prefs: []
  type: TYPE_NORMAL
- en: Making virtual machines ready for vSphere
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Even if VMware Workstation and vSphere come from the same vendor, there are
    some significant differences between the two solutions. The most important difference
    relates to networking, so it makes sense to develop a plan with regard to the
    networking architecture before starting to upload virtual machines to vSphere.
  prefs: []
  type: TYPE_NORMAL
- en: There are big differences between the networking options that are offered by
    vSphere and the networking in VMware Workstation. The differences might seem so
    significant that it appears impossible to mirror the state of networking that
    you want to use in vSphere in a VMware Workstation environment. Depending on the
    kind of networking that you're looking at however, there are some options nevertheless.
  prefs: []
  type: TYPE_NORMAL
- en: The most significant networking feature that is available in vSphere and not
    in VMware Workstation, is the **virtual switch**. VMware Workstation doesn't allow
    you to connect a virtual switch, on which advanced network settings can be specified.
    Also, there is no distinction between the management network and the production
    network that you normally see in a vSphere environment. There are good reasons
    why these features are missing however.
  prefs: []
  type: TYPE_NORMAL
- en: An ESXi Server in a vSphere environment typically has a minimum of at least
    eight network cards, in some cases even more. VMware workstation is developed
    to be used on desktop computers and a typical desktop computer just has one network
    card available, or two if it's a laptop with an Ethernet network card as well
    as a WiFi network card. Even with this limitation, VMware Workstation still has
    much to offer. Even if the physical host may have one network card only, you can
    easily create virtual machines that have several network cards. This allows you
    to set up an environment where the virtual computer routes traffic from the physical
    network to which the host is connected to an internal host-only network, which
    allows you to emulate a setup where a DMZ is used.
  prefs: []
  type: TYPE_NORMAL
- en: This topology mirroring is exactly what you can do in a very useful way in VMware
    Workstation. So if you're looking for a solution that allows you to play with
    advanced vSwitch features, including VLAN tagging, VMware Workstation is not ideal
    to use as a pre-production test environment. If you're looking for a solution
    that is easy to understand and allows you to build a test networking topology,
    VMware workstation is the perfect solution.
  prefs: []
  type: TYPE_NORMAL
- en: To mirror network topologies, VMware Workstation offers three different kinds
    of network adapters, all of which can be created with the Virtual Network Editor.
    By default three networks have already been created and as an administrator, you
    can add up to a total of 10 virtual networks. That means that even if the host
    has only one network adapter, you can have as many as 10 different network adapters
    in any virtual machine!
  prefs: []
  type: TYPE_NORMAL
- en: Two of the network types that are available in the Virtual Network Editor allow
    for a direct connection to the external network. These are the **NAT** and **bridged
    network type**. The most open method is to provide virtual machines with a bridged
    network adapter. Using this, the virtual machine is connected directly to the
    external network. This means, for example, it will get an IP address from the
    DHCP server on the physical network and it also means that you'll need to make
    sure that resources are available on the external network. If, for instance, you
    use a network bridge on the network interface that connects your host to the Internet,
    the Internet provider has to be willing to hand out an additional IP address.
    This limitation means that a bridged network interface is not useable in all scenarios.
  prefs: []
  type: TYPE_NORMAL
- en: As an alternative, you can use the NAT type network interface. Use this type
    if you don't manage the external network, and no configuration is available to
    connect the virtual machines directly to the external network. Using NAT has a
    disadvantage though, as while using NAT you cannot access services on the virtual
    machines from the external network. NAT, however, is also commonly used in corporate
    vSphere implementations to add an extra level of protection to services on the
    internal network, which shouldn't be accessible from the outside, and as such,
    NAT might be a welcome addition to your network configuration anyway.
  prefs: []
  type: TYPE_NORMAL
- en: The third network type is **host only**. This means that on the host, the virtual
    network card is in no way connected to a physical network card, so the host-only
    network card cannot be accessed from any machine outside the host-only network.
    This may sound like a limitation, but host-only networks offer some real benefits.
    You could, for example, configure one virtual machine with a public network interface,
    which is connected to the external network by using NAT or bridged mode, and at
    the other side of that virtual routing hosts, create one or more host-only networks,
    which reflect the internal company network, and even a DMZ network. To make that
    work, you need to configure routing processes on that virtual machine though,
    to have it do the work that would normally be done by a (virtualized) router in
    your infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: Uploading virtual machines to vSphere
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Once you have ensured that the features you need in vSphere can be prepared
    in VMware Workstation, you can start uploading the virtual machines. VMware Workstation
    supports both, the uploading of a virtual machine to an individual ESXi host as
    well as connectivity to a vSphere environment that is managed from the vCenter
    Server. To upload to an ESXi host, enter the name or IP address of the host you
    want to connect to and to upload to the vCenter Server, enter the IP address or
    name of the vCenter Server that manages the vSphere environment.
  prefs: []
  type: TYPE_NORMAL
- en: To start the upload from the VMware Workstation menu, navigate to **File** |
    **Connect to Server** and enter the IP address, administrator name, and password
    that you need to connect to the vSphere Server. You'll now see an overview of
    the current vSphere environment, displaying current usage, resource availability
    and which virtual machines are actually being used.
  prefs: []
  type: TYPE_NORMAL
- en: '![Uploading virtual machines to vSphere](img/9182EN_09_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: An overview of the current usage of ESXi Server
  prefs: []
  type: TYPE_NORMAL
- en: To copy a virtual machine over to the vSphere environment, from the VM menu,
    select the **Manage** option and from there choose **Upload**. This presents you
    with a new window in which you can select the vSphere environment you have just
    connected to. After clicking on **Next**, from the drop-down list you can select
    the specific ESXi Server in your vSphere environment that you want to copy the
    virtual machine to. Also make sure to specify which data store you want to use
    before clicking on **Finish** to copy over the virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: '![Uploading virtual machines to vSphere](img/9182EN_09_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Selecting where to copy the virtual machine to
  prefs: []
  type: TYPE_NORMAL
- en: Once the virtual machine has been copied, you're ready to start using it in
    the vSphere environment.
  prefs: []
  type: TYPE_NORMAL
- en: Sharing virtual machines with VMware Player
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: VMware Player is a free VMware product that allows others to create virtual
    machines and import virtual machines that have been created by others. It is typically
    the product that you want to provide to other users who need to be able to use
    virtual machines that you have created. VMware Player users can create virtual
    machines as well, but the solution lacks the advanced features that are typically
    appreciated by power users, such as the option to create snapshots. VMware Player
    is available as a free and independent product on [www.vmware.com](http://www.vmware.com),
    but it is also installed as a part of VMware Workstation.
  prefs: []
  type: TYPE_NORMAL
- en: Preparing to move virtual machines to VMware Player
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Before sharing your virtual machines with VMware Player users, it is a good
    idea to test if the virtual machines work as you want them to in the VMware Player
    environment. Just start VMware Player from the computer where VMware Workstation
    is installed, and click on **Open a Virtual Machine**. Next, browse to the location
    where the VMX file of your virtual machine is stored and click on **Open**. The
    virtual machine is now added to the VMware Player interface.
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing to move virtual machines to VMware Player](img/9182EN_09_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Opening existing virtual machines in VMware Player
  prefs: []
  type: TYPE_NORMAL
- en: From VMware Player, you can easily use the virtual machine and all of its features.
    You will notice though that the advanced VMware Workstation features are missing.
    Amongst the significant missing features is the option to create snapshots or
    work with snapshots. That means that you'll need to decide which state of the
    virtual machine you want to use before sharing it with a VMware Player user; that
    user won't have the ability to easily switch to another state of the virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing to move virtual machines to VMware Player](img/9182EN_09_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Compared to VMware Workstation, there are many features missing from VMware
    Player
  prefs: []
  type: TYPE_NORMAL
- en: Making a virtual machine available to a user of VMware Player is easy. Select
    the directory where the virtual machine files (VMX as well as VMDK) are stored
    and copy it over to the computer of the VMware Player user. Once the files are
    stored on that computer, the VMware Player user can just import the virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: Starting a copied virtual machine for the first time
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: After copying a virtual machine and starting it for the first time, you might
    get a few questions. To start with, depending on the state that the virtual machine
    was in when it was first copied, VMware Player may tell you that the virtual machine
    appears to be in use. It is easy to fix this issue; just click on **Take Ownership**.
    This allows your local VMware Player to take ownership of the virtual machine
    and do anything you like with it. At this point you can start the virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: After starting the virtual machine for the first time in VMware Player, you
    will be asked if the virtual machine has been copied over or moved. This is to
    avoid a situation where a duplicate MAC address is used in an environment. If
    you select **I moved it**, you keep the MAC address that was in use in the virtual
    machine. When you select **I copied it**, a new MAC address will be generated
    to avoid conflicts with other virtual machines that are using the same MAC address.
    In the latter case, you might have a problem accessing the network from the newly
    copied virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: '![Starting a copied virtual machine for the first time](img/9182EN_09_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Starting a copied virtual machine for the first time
  prefs: []
  type: TYPE_NORMAL
- en: If you cannot access the network from a virtual machine that you've just copied
    over, the best solution is to shut down the virtual machine and remove the current
    network card and add a new one. This will force the operating system to create
    a new network card and all the configuration that is needed on it, which allows
    you to connect to the network from a copied virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: Using VMware appliances
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Instead of creating all the virtual machines yourself, you can also use virtual
    appliances. A virtual appliance is a ready-to-use virtual machine that you can
    download from the VMware Marketplace at [solutionexchange.vmware.com](http://solutionexchange.vmware.com).
  prefs: []
  type: TYPE_NORMAL
- en: '![Using VMware appliances](img/9182EN_09_06.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Downloading virtual appliances from VMware Marketplace
  prefs: []
  type: TYPE_NORMAL
- en: On every virtual appliance that you find on the VMware Marketplace, there is
    a **try now** button. Click on it to get access to a download page where you can
    access the compressed virtual machine files. After downloading these files, you
    can copy them to the `Virtual Machines` folder and open them in VMware Workstation
    of VMware Player like you would do with any other virtual machine that you've
    just copied over.
  prefs: []
  type: TYPE_NORMAL
- en: If you really want your virtual machines to be available for a broad public,
    you can apply for a virtual appliance partnership. After getting this partnership
    (which will not be free), you can build an appliance according to the VMware specifications
    and upload it to the Marketplace. From there, anyone can download it and install
    it in their VMware environment.
  prefs: []
  type: TYPE_NORMAL
- en: Making screen movies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you really want it to be clear what to do with your virtual machine when
    sharing it with others, you may like the **Capture Movie** feature that you can
    find in the VM menu for every virtual machine. This feature allows you to capture
    movies of everything you do on a virtual machine. Especially if used with a voice-over
    that explains what you are doing, the **Capture Movie** feature is extremely useful.
  prefs: []
  type: TYPE_NORMAL
- en: Before starting to capture a movie, it is a good idea to enable sound. This
    allows you to use the microphone on your computer to add explanation about what
    you're doing. By default, no sound is enabled in VMware Workstation movies.
  prefs: []
  type: TYPE_NORMAL
- en: To add sound, you need to change the contents of the `config.ini` file. If you're
    using a Windows host, you can find this file in `C:\ProgramData\VMware\VMware
    Workstation`. In this file, add the line `mks.movie.config.high.recordSound="TRUE"`
    and restart VMware Workstation.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The `config.ini` file is in the hidden directory `ProgramData` in `C:`. Make
    sure to enable Windows Explorer to show hidden files before trying to access the
    file. To save changes to this file, you need administrator permissions. Select
    and right-click on Notepad, and select **Run as Administrator**. You can now open
    the file and add the above line to it.
  prefs: []
  type: TYPE_NORMAL
- en: 'Before starting to capture a movie in VMware, you need to be aware of an important
    limitation: it works in graphical mode only. That means that if you want to capture
    a movie on a Linux environment that is showing a text-only desktop, you''ll just
    see the initial screen of the desktop and none of the modifications. This is a
    well-known issue that up to now hasn''t been fixed. So if you want to capture
    screen movies in VMware workstation, start your Linux machine in graphical mode.'
  prefs: []
  type: TYPE_NORMAL
- en: Before starting to capture, put the virtual machine in the exact state where
    you want to start capturing. Then navigate to **VM** | **Capture Movie** and select
    the name and location of the file you want to create. After doing that, perform
    all the manipulations that you want to be recorded.
  prefs: []
  type: TYPE_NORMAL
- en: Once finished, go to the VM menu again and click on **Stop Capture movie**.
    The screen movie is stopped at this point and will be saved to the disk.
  prefs: []
  type: TYPE_NORMAL
- en: '![Making screen movies](img/9182EN_09_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: While capturing a movie, a record button is shown in the lower-right part of
    the virtual machine window
  prefs: []
  type: TYPE_NORMAL
- en: Before sharing the screen movies that you've created, it is a good idea to optimize
    the video a bit. No one likes looking at a badly created movie, where the presenter
    isn't really sure of what he's doing and makes lots of mistakes. So make an investment
    in good video editing software, cut all of the less successful bits of the movie,
    and maybe even enhance it with some picture in picture effects to make it a more
    appealing movie to look at. After doing that you'll be ready to share it with
    other users who will be able to understand what you wanted to accomplish with
    your virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter you've learned what you can do with your virtual machines after
    creating them. You can upload them to different locations, such as vSphere, VMware
    Player users, and even the VMware Marketplace where other users can download your
    appliance. You have also learned how to create screen movies that explain to users
    of your virtual machine how they should use the features that you've embedded
    in them.
  prefs: []
  type: TYPE_NORMAL
