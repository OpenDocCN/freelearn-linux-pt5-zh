<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Tips and Tricks"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Tips and Tricks</h1></div></div></div><p>So, this is where we part ways. We have come a long way since defining our first alias, so there's really not much left for us to discover, at least not with the number of pages left for us. Like a nosy neighbor though, I can't help but give you a few more tips before our journey ends.</p><div class="section" title="Main resources"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec30"/>Main resources</h1></div></div></div><p>Hold your horses there buddy. Before<a class="indexterm" id="id225"/> you start typing down tips and tweaking your configuration, it's important that I point you towards zsh's official site once again. Zsh's page is <a class="indexterm" id="id226"/>located at <a class="ulink" href="http://www.zsh.org">http://www.zsh.org</a>, and you can take your browser there to take a look at the <span class="emphasis"><em>Frequently Asked Questions</em></span> section as well as other interesting entries such as <span class="strong"><strong>Scripts &amp; contributions</strong></span>. Turns out this is our main source of information for our new favorite shell, so I recommend you refer it to keep up with changes between releases and the awesome user guides and manuals located there.</p><p>Perhaps the most feature-packed item on the list of recommendations is the zsh wiki<a class="indexterm" id="id227"/> (<a class="ulink" href="http://zshwiki.org">http://zshwiki.org</a>). There you will find a lot of useful information about zsh together with tips and user-suggested configurations. Overall an excellent starting point for stuffing your startup files to the gills. It's worth noting that this is a user-maintained site, which means you can contribute to it by submitting your own configurations and scripts as well as editing existing content.</p><p>No project with the magnitude of zsh is without its mailing list. You can find zsh's located at <a class="ulink" href="http://www.zsh.org/mla">http://www.zsh.org/mla</a> and have a look at the thousands of interesting discussions going on for more tips, tricks, and announcements that happen around the project. Remember, you can also use this for any impending questions you have regarding the shell and the project in general. Also an excellent starting point if you are looking forward to contributing to the project.</p><p>Finally, for those inclined to "group chat", there's an IRC channel hosted on <span class="strong"><strong>freenode</strong></span><a class="indexterm" id="id228"/> (<a class="ulink" href="http://freenode.net">http://freenode.net</a>) as <code class="literal">#zsh</code>. This is your go-to source to get help and discuss zsh with lots of other users.</p></div></div>
<div class="section" title="Helping tips"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec31"/>Helping tips</h1></div></div></div><p>What follows is a list of "nice things to have" on your <a class="indexterm" id="id229"/>configuration files, aliases, and functions. Think of these as a helping hand with some of the more boring tasks that involve the command line.</p><div class="section" title="Directory substitution"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec51"/>Directory substitution</h2></div></div></div><p>This is one of the <a class="indexterm" id="id230"/>cooler tricks you can pull with zsh, albeit a bit hidden from <a class="indexterm" id="id231"/>plain sight. Did you know you can use <code class="literal">cd</code> for switching between parallel directories without even typing the whole path? Let's work with an example.</p><p>Say you were located in the directory <code class="literal">/zsh/completion/unix/</code>; now, see the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>% cd completion doc</strong></span>
</pre></div><p>This command would effectively move your current working directory to <code class="literal">/zsh/doc/unix/</code>, provided both the directories have the same tree structure and are located on the same branch level. I know, I too can't imagine myself living without it.</p><p>Remember, you can set the <code class="literal">AUTOCD</code> option to enable <code class="literal">cd</code> just by typing the name of a directory, provided that the directory exists and is not an ambiguous match, of course.</p></div><div class="section" title="Magic space"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec52"/>Magic space</h2></div></div></div><p>It's safe to assume that you have been using the <span class="emphasis"><em>Tab</em></span> key for completion so far, but the shell also provides <a class="indexterm" id="id232"/>a <code class="literal">magic-space</code> functionality<a class="indexterm" id="id233"/> that is really worth being bound to your space bar. Simply add the following code to your <code class="literal">.zshrc</code> file:</p><div class="informalexample"><pre class="programlisting">bindkey ' ' magic-space</pre></div><p>And try typing something followed immediately by the space bar as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>% echo !!&lt;Space&gt;</strong></span>
</pre></div><p>You'll notice what that "magic" means right away, as pressing the space bar now triggers history expansion on the current line.</p></div><div class="section" title="Random numbers"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec53"/>Random numbers</h2></div></div></div><p>I've lost track of how <a class="indexterm" id="id234"/>many times I needed an actual random number in order to fill in a form or make a completely arbitrary decision, just like those times you can't decide between cappuccino or latte.</p><p>Let's borrow a helping hand from our friend <code class="literal">$RANDOM</code> and sprinkle some arithmetic expansion on top. Putting everything together, we end up with the following alias:</p><div class="informalexample"><pre class="programlisting">alias rand='echo $(( ( RANDOM % 10 ) + 1 ))'</pre></div><p>What this does is uses the <code class="literal">$RANDOM</code> internal function to get a <span class="emphasis"><em>pseudorandom</em></span> number for us. We then use the <span class="emphasis"><em>modulo</em></span> operator (<code class="literal">%</code>) to get the remainder of the division by 10; this way, we can get only numbers between <code class="literal">1</code> and <code class="literal">10</code>. The <code class="literal">1</code> being added that you see is there because the <code class="literal">1</code> to <code class="literal">10</code> range is actually interpreted by your computer as "0-9", which includes the first 10 digits, <a class="indexterm" id="id235"/>but is a bit less human friendly.</p><p>The whole expression is wrapped with the arithmetic expansion construction <code class="literal">$(())</code> that we learned about in <a class="link" href="ch02.html" title="Chapter 2. Alias and History">Chapter 2</a>, <span class="emphasis"><em>Alias and History</em></span>, and allows us to operate with numbers such as <code class="literal">$RANDOM</code>.</p><p>You can now go ahead and type <code class="literal">rand</code> every time you need an actual random number output on your terminal window.</p><p>As a side note, keep in mind that, as with all things computer-generated, there's no such thing as a purely "random" event—unless you are talking to my boss about one of my bugs. Those are completely random phenomena—so don't rely on this for security or sensitive operations.</p></div><div class="section" title="zcalc"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec54"/>zcalc</h2></div></div></div><p>Most times, math just<a class="indexterm" id="id236"/> catches us with an unfairly low caffeine level. Attempting algebra at those times usually calls for a quick calculator. Turns out zsh comes packed with just one of those.</p><p>The way it works<a class="indexterm" id="id237"/> is similar to the <code class="literal">tetris</code> and <code class="literal">zle</code> modules; just add <code class="literal">autoload -Uz zcalc</code> to your <code class="literal">.zshrc</code> and type <code class="literal">zcalc</code> on your terminal emulator whenever the need arises. To exit <code class="literal">zcalc</code> just press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>.</p></div><div class="section" title="Change and list directory contents"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec55"/>Change and list directory contents</h2></div></div></div><p>Like many, <a class="indexterm" id="id238"/>many other <a class="indexterm" id="id239"/>users of shells out there, most <a class="indexterm" id="id240"/>of of the time with shell you will be<a class="indexterm" id="id241"/> switching between directories and listing their contents. It's reasonable to assume that during your normal workflow, you'll be calling <code class="literal">cd</code> and <code class="literal">ls</code> quite a lot.</p><p>Look at the following example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>% cd some_dir</strong></span>
<span class="strong"><strong>&gt; ~/gfestari/somedir/</strong></span>
<span class="strong"><strong>% ls</strong></span>
<span class="strong"><strong>&gt; file1.txt  file2.txt</strong></span>
</pre></div><p>Fret not, dear reader, you are not alone. Most fellow shell users feel your pain. Luckily, there's something we can do about it, which involves a simple function to change our current working directory with <code class="literal">cd</code> and then calling ls to list the contents of the new directory as shown in the following code snippet:</p><div class="informalexample"><pre class="programlisting"># calls cd, and immediately list its contents
function cs {
    cd "$@" &amp;&amp; ls -A
}</pre></div><p>Our new <code class="literal">cs</code> function<a class="indexterm" id="id242"/> will <a class="indexterm" id="id243"/>perform just like <code class="literal">cd</code>, but will list the contents of any <a class="indexterm" id="id244"/>directory we move to. The <code class="literal">$@</code> string you see there is the<a class="indexterm" id="id245"/> current command arguments we use when<a class="indexterm" id="id246"/> calling <code class="literal">cs</code>. These get passed in its entirety to <code class="literal">cd</code>, so we don't need to worry about handling them with the same finesse as the actual program. We then use the double ampersand logic operator <code class="literal">&amp;&amp;</code> (read that as "and") to chain the <code class="literal">ls</code> command with the <code class="literal">-A</code> option. This works as "execute <code class="literal">cd</code> and if it succeeds, call <code class="literal">ls -A</code>".</p><p>Put this on your startup files, <a class="indexterm" id="id247"/>and start changing directories by typing <code class="literal">cs</code>.</p></div><div class="section" title="Finding your path through commands"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec56"/>Finding your path through commands</h2></div></div></div><p>We have<a class="indexterm" id="id248"/> used <code class="literal">which</code> many times already throughout this book, but it's time for you to learn about yet another cool zsh feature, courtesy of the command substitution mechanism: the <code class="literal">=command</code> shortcut.</p><p>Try the following command line, which should point you towards zsh's binary location:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>% echo $(which zsh)</strong></span>
<span class="strong"><strong>&gt; /usr/local/bin/zsh</strong></span>
</pre></div><p>And now, let's try using the equivalent shortcut:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>% echo =zsh</strong></span>
<span class="strong"><strong>&gt; /usr/local/bin/zsh</strong></span>
</pre></div><p>This will work the same as <code class="literal">which</code> with a lot less typing as long as you remember to follow that equals sign immediately with the name of any program on your system.</p></div></div>
<div class="section" title="Other projects"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec32"/>Other projects</h1></div></div></div><p>This section aims to point you towards some of the most interesting projects and resources out there. The whole point of these is to have something of an "extra spice" to add your zsh.</p><div class="section" title="zsh-lovers"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec57"/>zsh-lovers </h2></div></div></div><p>The<a class="indexterm" id="id249"/> <code class="literal">zsh-lovers</code> project (<a class="ulink" href="http://grml.org/zsh/zsh-lovers.html">http://grml.org/zsh/zsh-lovers.html</a>) is a collection<a class="indexterm" id="id250"/> of useful tips, tricks, and examples that can be installed as a manual page and accessed from the terminal. One of the more interesting features of the project is the collection of examples for many of the "hidden"—or not so evident—features of zsh. Worth every byte, if only for the hundreds of hours of online searching it'll save you.</p></div><div class="section" title="zsh-users"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec58"/>zsh-users </h2></div></div></div><p>The<a class="indexterm" id="id251"/> zsh users' <a class="indexterm" id="id252"/>repository on GitHub (<a class="ulink" href="https://github.com/zsh-users">https://github.com/zsh-users</a>) packs a lot of incredibly useful code. Of particular interest to any zsh user are the projects <code class="literal">zsh-syntax-highlighting</code> (<a class="ulink" href="https://github.com/zsh-users/zsh-syntax-highlighting">https://github.com/zsh-users/zsh-syntax-highlighting</a>) and <code class="literal">zsh-history-substring-search</code> (<a class="ulink" href="https://github.com/zsh-users/zsh-history-substring-search">https://github.com/zsh-users/zsh-history-substring-search</a>).</p><p>As the name implies, <code class="literal">zsh-syntax-highlighting</code> offers syntax highlighting similar to that available in the fish shell, whereas <code class="literal">zsh-history-substring-search</code> again <a class="indexterm" id="id253"/>borrows a page from the fish's functionality and does a history search by allowing you to type any part of a history entry and press the up or down arrow keys to cycle through the matching commands.</p><p>Also available on the zsh users' repository is the <code class="literal">zsh-completions</code> project (<a class="ulink" href="https://github.com/zsh-users/zsh-completions">https://github.com/zsh-users/zsh-completions</a>), a collection of community-submitted completion functions for a lot of popular programs and tools such as Node.js, Redis, and Vagrant.</p></div><div class="section" title="oh-my-zsh"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec59"/>oh-my-zsh</h2></div></div></div><p>Unless you have been offline for the past couple of years, chances are you have already heard about <a class="indexterm" id="id254"/>oh-my-zsh (<a class="ulink" href="https://github.com/robbyrussell/oh-my-zsh">https://github.com/robbyrussell/oh-my-zsh</a>). The community-driven project has helped zsh become incredibly popular by simplifying the initial configuration and learning curve for zsh. The framework packs more than a hundred plugins for tools like <a class="indexterm" id="id255"/>Ruby on Rails, <a class="indexterm" id="id256"/>Git, and<a class="indexterm" id="id257"/> Ant, and another chock-full of prompt themes; so the command line never gets boring.</p></div><div class="section" title="Prezto"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec60"/>Prezto </h2></div></div></div><p>Prezto (<a class="ulink" href="https://github.com/sorin-ionescu/prezto">https://github.com/sorin-ionescu/prezto</a>) is <a class="indexterm" id="id258"/>another <a class="indexterm" id="id259"/>popular project with some great configuration options. Like oh-my-zsh, Prezto packs what it calls "sane defaults", a handful of interesting aliases and functions together with autocompletion and—you guessed it—prompt themes.</p><p>Okay, I heard that. Does my shell <span class="emphasis"><em>really need a framework?</em></span> Truth is you probably don't need <span class="emphasis"><em>the whole package</em></span> but just a particular functionality, be it a completion function or prompt style. So why reinvent the wheel when someone has already thought about the problem and come up with a—hopefully elegant—solution? What I'm trying to say here is: look at the source code, see what you can bring into your configuration, and if you feel like it, give it back to the community. The next guy will surely appreciate it a lot.</p></div><div class="section" title="Explain Shell"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec61"/>Explain Shell</h2></div></div></div><p>Although not purely zsh-related, the Explain Shell project<a class="indexterm" id="id260"/> (<a class="ulink" href="http://explainshell.com">http://explainshell.com</a>) aims to <a class="indexterm" id="id261"/>lend a helping hand on those incredibly awkward commands by providing a really neat interface in which to parse and explain them term-by-term. This can prove really useful when experimenting with unfamiliar commands or things found in the strangest depths of the web.</p></div><div class="section" title="Your dotfiles"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec62"/>Your dotfiles</h2></div></div></div><p>Noticed how your program's configuration files all are hidden by default? Even your startup files and zsh-related configuration lay on your home directory tucked away from plain sight by a leading dot on their filename. Commonly referred to as<a class="indexterm" id="id262"/> <span class="emphasis"><em>dotfiles</em></span>, there are a lot of really cool settings and configurations out there that started as someone's clever attempt at fixing an annoyance. So go ahead and publish your dotfiles for the world to see. Turns out sharing your configuration is a really nice way of helping other users on their zsh adventures and getting feedback on what you have been so passionately working on. Just be careful not to share any passwords or credentials while you're at it!</p><p>If there's a book that should be on your radar after reading this, that should be <span class="emphasis"><em>From Bash to Z Shell Conquering the Command Line</em></span> by <span class="emphasis"><em>Oliver Kiddle</em></span>, <span class="emphasis"><em>Peter Stephenson</em></span>, and <span class="emphasis"><em>Jerry Peek</em></span>. An almost-instant classic for both beginners and power-users that will definitely help you expand your knowledge of the command line.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec33"/>Summary</h1></div></div></div><p>And that brings us to the end of this book. Notice how I wrote "book" and not journey, as hopefully this first dip into zsh has gotten you excited enough about the possibilities of the shell and how versatile a tool it really is. </p><p>What now, then? Well, fortunately, that's up to you, dear reader. There's plenty more left on zsh for you to unravel and many more of those annoying and boring tasks that are required of your scripts, so you can go back to those other, important things on the backlog. </p><p>With a bit of spit and polish, particularly on the configuration side of things, zsh can really shine and make your life easier—and why not, fun—on the command line. So go ahead and get back to it. You'll be glad you did.</p></div></body></html>