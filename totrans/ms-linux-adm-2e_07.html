<html><head></head><body>
<div id="_idContainer229">
<h1 class="chapter-number" id="_idParaDest-123"><a id="_idTextAnchor139"/><span class="koboSpan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-124"><a id="_idTextAnchor140"/><span class="koboSpan" id="kobo.2.1">Networking with Linux</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.3.1">Linux networking</span></strong><span class="koboSpan" id="kobo.4.1"> is a vast domain. </span><span class="koboSpan" id="kobo.4.2">The last few decades have seen countless volumes and references written about Linux </span><a id="_idIndexMarker896"/><span class="koboSpan" id="kobo.5.1">network administration internals. </span><span class="koboSpan" id="kobo.5.2">Sometimes, the mere assimilation of essential concepts can be overwhelming for both novice and advanced users. </span><span class="koboSpan" id="kobo.5.3">This chapter provides a relatively concise overview of Linux networking, focusing on network communication layers, sockets and ports, network services and protocols, and </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">network security.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">We hope that the content presented in this chapter is both a comfortable introduction to basic Linux networking principles for a novice user and a good refresher for an advanced </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">Linux administrator.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">In this chapter, we’ll cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.11.1">Exploring basic networking – focusing on computer networks, networking models, protocols, network addresses, and ports. </span><span class="koboSpan" id="kobo.11.2">We’ll also cover some practical aspects of configuring Linux network settings using the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">command-line Terminal.</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Working with network services – introducing common networking servers that run </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">on Linux.</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Understanding </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">network security.</span></span></li>
</ul>
<h1 id="_idParaDest-125"><a id="_idTextAnchor141"/><span class="koboSpan" id="kobo.17.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.18.1">Throughout this chapter, we’ll be using the Linux command line to some extent. </span><span class="koboSpan" id="kobo.18.2">A working Linux distribution, installed on either a </span><strong class="bold"><span class="koboSpan" id="kobo.19.1">virtual machine</span></strong><span class="koboSpan" id="kobo.20.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.21.1">VM</span></strong><span class="koboSpan" id="kobo.22.1">) or a desktop platform, is highly recommended. </span><span class="koboSpan" id="kobo.22.2">If you don’t have one already, go back to </span><a href="B19682_01.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.23.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.24.1">, </span><em class="italic"><span class="koboSpan" id="kobo.25.1">Installing Linux</span></em><span class="koboSpan" id="kobo.26.1">, which will guide you through the installation process. </span><span class="koboSpan" id="kobo.26.2">Most of the commands and examples illustrated in this chapter use Ubuntu and Fedora, but the same would apply to any other </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">Linux platform.</span></span></p>
<h1 id="_idParaDest-126"><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.28.1">Exploring basic networking</span></h1>
<p><span class="koboSpan" id="kobo.29.1">Today, it’s almost inconceivable to imagine a computer not connected to some sort of network or </span><a id="_idIndexMarker897"/><span class="koboSpan" id="kobo.30.1">the internet. </span><span class="koboSpan" id="kobo.30.2">Our ever-increasing online presence, cloud computing, mobile communications, and </span><strong class="bold"><span class="koboSpan" id="kobo.31.1">Internet of Things</span></strong><span class="koboSpan" id="kobo.32.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.33.1">IoT</span></strong><span class="koboSpan" id="kobo.34.1">) would not </span><a id="_idIndexMarker898"/><span class="koboSpan" id="kobo.35.1">be possible without the highly distributed, high-speed, and scalable networks serving the underlying data traffic; yet the basic networking principles behind the driving force of the modern-day internet are decades old. </span><span class="koboSpan" id="kobo.35.2">Networking and communication paradigms will continue to evolve, but some of the original primitives and concepts will still have a long-lasting effect in shaping the building blocks of </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">future communications.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">This section will introduce you to a few of these networking essentials and, hopefully, spark your curiosity for further exploration. </span><span class="koboSpan" id="kobo.37.2">Let’s start with </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">computer networks.</span></span></p>
<h2 id="_idParaDest-127"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.39.1">Computer networks</span></h2>
<p><span class="koboSpan" id="kobo.40.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.41.1">computer network</span></strong><span class="koboSpan" id="kobo.42.1"> is </span><a id="_idIndexMarker899"/><span class="koboSpan" id="kobo.43.1">a group of two or more </span><a id="_idIndexMarker900"/><span class="koboSpan" id="kobo.44.1">computers (or nodes) connected via a physical medium (cable, wireless, optical) and communicating with each other using a standard set of agreed-upon communication protocols. </span><span class="koboSpan" id="kobo.44.2">At a very high level, a </span><strong class="bold"><span class="koboSpan" id="kobo.45.1">network communication infrastructure</span></strong><span class="koboSpan" id="kobo.46.1"> includes</span><a id="_idIndexMarker901"/><span class="koboSpan" id="kobo.47.1"> computers, devices, switches, routers, Ethernet or optical cables, wireless environments, and all sorts of </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">network equipment.</span></span></p>
<p><span class="koboSpan" id="kobo.49.1">Beyond the </span><em class="italic"><span class="koboSpan" id="kobo.50.1">physical</span></em><span class="koboSpan" id="kobo.51.1"> connectivity and arrangement, networks are also defined by a </span><em class="italic"><span class="koboSpan" id="kobo.52.1">logical</span></em><span class="koboSpan" id="kobo.53.1"> layout via network topologies, tiers, and the related data flow. </span><span class="koboSpan" id="kobo.53.2">An example of a logical </span><a id="_idIndexMarker902"/><span class="koboSpan" id="kobo.54.1">networking hierarchy is the three-tiered layering of the </span><strong class="bold"><span class="koboSpan" id="kobo.55.1">demilitarized zone</span></strong><span class="koboSpan" id="kobo.56.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.57.1">DMZ</span></strong><span class="koboSpan" id="kobo.58.1">), </span><em class="italic"><span class="koboSpan" id="kobo.59.1">firewall</span></em><span class="koboSpan" id="kobo.60.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.61.1">internal</span></em><span class="koboSpan" id="kobo.62.1"> networks. </span><span class="koboSpan" id="kobo.62.2">The DMZ is an organization’s outward-facing network, with an extra security layer against the public internet. </span><span class="koboSpan" id="kobo.62.3">A firewall controls the network traffic between the DMZ and the </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">internal network.</span></span></p>
<p><span class="koboSpan" id="kobo.64.1">Network devices are identified by the </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">following aspects:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.66.1">Network addresses</span></strong><span class="koboSpan" id="kobo.67.1">: These assist </span><a id="_idIndexMarker903"/><span class="koboSpan" id="kobo.68.1">with locating nodes on the network using </span><strong class="bold"><span class="koboSpan" id="kobo.69.1">communication protocols</span></strong><span class="koboSpan" id="kobo.70.1">, such as the </span><strong class="bold"><span class="koboSpan" id="kobo.71.1">Internet Protocol</span></strong><span class="koboSpan" id="kobo.72.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.73.1">IP</span></strong><span class="koboSpan" id="kobo.74.1">) (see more on IP in the </span><em class="italic"><span class="koboSpan" id="kobo.75.1">TCP/IP protocols</span></em><span class="koboSpan" id="kobo.76.1"> section, later in </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">this chapter)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.78.1">Hostnames</span></strong><span class="koboSpan" id="kobo.79.1">: These are user-friendly labels associated with devices that are easier to remember than </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">network addresses</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.81.1">A common classification criterion looks at the </span><em class="italic"><span class="koboSpan" id="kobo.82.1">scale</span></em><span class="koboSpan" id="kobo.83.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.84.1">expansion</span></em><span class="koboSpan" id="kobo.85.1"> of computer networks. </span><span class="koboSpan" id="kobo.85.2">Let’s introduce you to </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">local area networks</span></strong><span class="koboSpan" id="kobo.87.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.88.1">LANs</span></strong><span class="koboSpan" id="kobo.89.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.90.1">wide area </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.91.1">networks</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.92.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.93.1">WANs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">):</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.95.1">LANs</span></strong><span class="koboSpan" id="kobo.96.1">: A LAN represents </span><a id="_idIndexMarker904"/><span class="koboSpan" id="kobo.97.1">a group of devices connected and located in a single physical location, such as a private residence, school, or office. </span><span class="koboSpan" id="kobo.97.2">A LAN can be of any size, ranging from a home network with only a few devices to large-scale enterprise networks with thousands of users </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">and computers.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.99.1">Regardless of the network’s size, a LAN’s essential characteristic is that it connects devices in a single, limited area. </span><span class="koboSpan" id="kobo.99.2">Examples of LANs include the home network of a single-family residence or your local coffee shop’s free </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">wireless service.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.101.1">For more </span><a id="_idIndexMarker905"/><span class="koboSpan" id="kobo.102.1">information about LANs, you can refer </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">to </span></span><a href="https://www.cisco.com/c/en/us/products/switches/what-is-a-lan-local-area-network.html"><span class="No-Break"><span class="koboSpan" id="kobo.104.1">https://www.cisco.com/c/en/us/products/switches/what-is-a-lan-local-area-network.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.105.1">.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.106.1">When a computer network spans multiple regions or multiple interconnected LANs, WANs come </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">into play.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.108.1">WANs</span></strong><span class="koboSpan" id="kobo.109.1">: A WAN is usually </span><a id="_idIndexMarker906"/><span class="koboSpan" id="kobo.110.1">a network of networks, with multiple or distributed LANs communicating with each other. </span><span class="koboSpan" id="kobo.110.2">In this sense, we regard the internet as the world’s largest WAN. </span><span class="koboSpan" id="kobo.110.3">An example of a WAN is the computer network of a multinational company’s geographically distributed offices worldwide. </span><span class="koboSpan" id="kobo.110.4">Some WANs are built by service providers, to be leased to various businesses and institutions around </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">the world.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.112.1">WANs have </span><a id="_idIndexMarker907"/><span class="koboSpan" id="kobo.113.1">several variations, depending on their type, range, and use. </span><span class="koboSpan" id="kobo.113.2">Typical </span><a id="_idIndexMarker908"/><span class="koboSpan" id="kobo.114.1">examples of WANs </span><a id="_idIndexMarker909"/><span class="koboSpan" id="kobo.115.1">include </span><strong class="bold"><span class="koboSpan" id="kobo.116.1">personal area networks</span></strong><span class="koboSpan" id="kobo.117.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.118.1">PANs</span></strong><span class="koboSpan" id="kobo.119.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.120.1">metropolitan area networks</span></strong><span class="koboSpan" id="kobo.121.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.122.1">MANs</span></strong><span class="koboSpan" id="kobo.123.1">), and </span><strong class="bold"><span class="koboSpan" id="kobo.124.1">cloud</span></strong><span class="koboSpan" id="kobo.125.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">internet area </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.127.1">networks</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.128.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.129.1">IANs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">).</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.131.1">For more </span><a id="_idIndexMarker910"/><span class="koboSpan" id="kobo.132.1">information about WANs, you can refer </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">to </span></span><a href="https://www.cisco.com/c/en/us/products/switches/what-is-a-wan-wide-area-network.html"><span class="No-Break"><span class="koboSpan" id="kobo.134.1">https://www.cisco.com/c/en/us/products/switches/what-is-a-wan-wide-area-network.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.135.1">.</span></span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.136.1">We think that an adequate introduction to basic networking principles should always include a brief presentation of the theoretical model governing network communications in general. </span><span class="koboSpan" id="kobo.136.2">We’ll look at </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">this next.</span></span></p>
<h2 id="_idParaDest-128"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.138.1">The OSI model</span></h2>
<p><span class="koboSpan" id="kobo.139.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.140.1">Open Systems Interconnection</span></strong><span class="koboSpan" id="kobo.141.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.142.1">OSI</span></strong><span class="koboSpan" id="kobo.143.1">) model is a theoretical representation of a multilayer </span><a id="_idIndexMarker911"/><span class="koboSpan" id="kobo.144.1">communication mechanism between computer systems </span><a id="_idIndexMarker912"/><span class="koboSpan" id="kobo.145.1">interacting over a network. </span><span class="koboSpan" id="kobo.145.2">The OSI model was introduced in 1983 </span><a id="_idIndexMarker913"/><span class="koboSpan" id="kobo.146.1">by the </span><strong class="bold"><span class="koboSpan" id="kobo.147.1">International Organization for Standardization</span></strong><span class="koboSpan" id="kobo.148.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.149.1">ISO</span></strong><span class="koboSpan" id="kobo.150.1">) to provide a standard for different computer systems to communicate with </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">each other.</span></span></p>
<p><span class="koboSpan" id="kobo.152.1">We can regard the OSI model as a universal framework for network communications. </span><span class="koboSpan" id="kobo.152.2">As the following figure shows, the OSI model defines a stack of seven layers, directing the </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">communication flow:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer190">
<span class="koboSpan" id="kobo.154.1"><img alt="Figure 7.1 – The OSI model" src="image/B19682_07_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.155.1">Figure 7.1 – The OSI model</span></p>
<p><span class="koboSpan" id="kobo.156.1">In the layered view shown in the preceding figure, the communication flow moves from top to bottom (on the transmitting </span><a id="_idIndexMarker914"/><span class="koboSpan" id="kobo.157.1">end) or bottom to top (on the receiving end). </span><span class="koboSpan" id="kobo.157.2">Before we look at each layer in more detail, let’s briefly explain how the OSI model and data encapsulation and </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">decapsulation work.</span></span></p>
<h3><span class="koboSpan" id="kobo.159.1">Data encapsulation and decapsulation in the OSI model</span></h3>
<p><span class="koboSpan" id="kobo.160.1">When using the network to transfer data from one computer to another, some specific rules are followed. </span><span class="koboSpan" id="kobo.160.2">Inside the OSI model, the network data flows in two different ways. </span><span class="koboSpan" id="kobo.160.3">One way is down, from Layer 7 to Layer 1, and this is known as </span><strong class="bold"><span class="koboSpan" id="kobo.161.1">data encapsulation</span></strong><span class="koboSpan" id="kobo.162.1">. </span><span class="koboSpan" id="kobo.162.2">The other way, up from Layer 1 to Layer 7, is known as </span><strong class="bold"><span class="koboSpan" id="kobo.163.1">data decapsulation</span></strong><span class="koboSpan" id="kobo.164.1">. </span><span class="koboSpan" id="kobo.164.2">Data encapsulation represents the process of sending data from one computer to another, while data decapsulation represents the process of receiving data. </span><span class="koboSpan" id="kobo.164.3">Let’s look at these in </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">greater detail:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.166.1">Encapsulation</span></strong><span class="koboSpan" id="kobo.167.1">: When sending data, data</span><a id="_idIndexMarker915"/><span class="koboSpan" id="kobo.168.1"> from one computer is converted to be sent through the network, and it receives extra information as it is being sent though all the layers of the stack. </span><span class="koboSpan" id="kobo.168.2">The application layer (Layer 7) is the place where the user directly interacts with the application. </span><span class="koboSpan" id="kobo.168.3">Then, data is sent through the presentation (Layer 6) and session (Layer 5) layers, where data is transformed into a usable format. </span><span class="koboSpan" id="kobo.168.4">In the transport layer (Layer 4), data is broken into smaller chunks (segments) and receives a new TCP header. </span><span class="koboSpan" id="kobo.168.5">Inside the network layer (Layer 3), the data is called a packet, receives an IP header, and is sent to the data link layer (Layer 2), where it is called a frame and contains both TCP and IP headers. </span><span class="koboSpan" id="kobo.168.6">At Layer 2, each frame receives information about the hardware addresses of the source and destination (</span><strong class="bold"><span class="koboSpan" id="kobo.169.1">media access control</span></strong><span class="koboSpan" id="kobo.170.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.171.1">MAC</span></strong><span class="koboSpan" id="kobo.172.1">) addresses) and information about the protocols to be used in the network layer (created by the </span><strong class="bold"><span class="koboSpan" id="kobo.173.1">logical link control</span></strong><span class="koboSpan" id="kobo.174.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.175.1">LLC</span></strong><span class="koboSpan" id="kobo.176.1">) data communication protocol). </span><span class="koboSpan" id="kobo.176.2">At this point, a new field is added, called </span><strong class="bold"><span class="koboSpan" id="kobo.177.1">Frame Check Sequence</span></strong><span class="koboSpan" id="kobo.178.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.179.1">FCS</span></strong><span class="koboSpan" id="kobo.180.1">), which is used for checking errors. </span><span class="koboSpan" id="kobo.180.2">Then, the frames are passed through the physical layer (</span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">Layer 1).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.182.1">Decapsulation</span></strong><span class="koboSpan" id="kobo.183.1">: When data is </span><a id="_idIndexMarker916"/><span class="koboSpan" id="kobo.184.1">received, the process is identical, but in reverse order. </span><span class="koboSpan" id="kobo.184.2">This starts from the physical layer (Layer 1), where the first synchronization happens, after which the frame is sent through the data link layer (Layer 2), where an error check is done, by verifying the FCS field. </span><span class="koboSpan" id="kobo.184.3">This process is called a </span><strong class="bold"><span class="koboSpan" id="kobo.185.1">Cyclic Redundancy Check</span></strong><span class="koboSpan" id="kobo.186.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.187.1">CRC</span></strong><span class="koboSpan" id="kobo.188.1">). </span><span class="koboSpan" id="kobo.188.2">The data, which is now a packet, is sent through all the other layers. </span><span class="koboSpan" id="kobo.188.3">Here, the headers that were added during the encapsulation process are stripped off until they reach the upper layers and become ready to be used on the target computer. </span><span class="koboSpan" id="kobo.188.4">A graphic explanation is provided in the </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">following figure:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer191">
<span class="koboSpan" id="kobo.190.1"><img alt="Figure 7.2 – Encapsulation and decapsulation in the OSI model" src="image/B19682_07_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.191.1">Figure 7.2 – Encapsulation and decapsulation in the OSI model</span></p>
<p><span class="koboSpan" id="kobo.192.1">Let’s look at each of these layers in detail and describe their functionality in shaping </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">network communication.</span></span></p>
<h3><span class="koboSpan" id="kobo.194.1">The physical layer</span></h3>
<p><span class="koboSpan" id="kobo.195.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.196.1">physical layer</span></strong><span class="koboSpan" id="kobo.197.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.198.1">Layer 1</span></em><span class="koboSpan" id="kobo.199.1">) consists of the networking equipment or infrastructure connecting </span><a id="_idIndexMarker917"/><span class="koboSpan" id="kobo.200.1">the devices and serving the communication, such as cables, wireless or optical environments, connectors, and switches. </span><span class="koboSpan" id="kobo.200.2">This layer handles </span><a id="_idIndexMarker918"/><span class="koboSpan" id="kobo.201.1">the conversion between raw bit streams and the communication medium (which includes electrical, radio, or optical signals) while regulating the corresponding </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">bit-rate control.</span></span></p>
<p><span class="koboSpan" id="kobo.203.1">Examples </span><a id="_idIndexMarker919"/><span class="koboSpan" id="kobo.204.1">of protocols operating at the physical layer include </span><a id="_idIndexMarker920"/><span class="koboSpan" id="kobo.205.1">Ethernet, </span><strong class="bold"><span class="koboSpan" id="kobo.206.1">Universal Serial Bus</span></strong><span class="koboSpan" id="kobo.207.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.208.1">USB</span></strong><span class="koboSpan" id="kobo.209.1">), and </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Digital Subscriber </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.211.1">Line</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.212.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.213.1">DSL</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">).</span></span></p>
<h3><span class="koboSpan" id="kobo.215.1">The data link layer</span></h3>
<p><span class="koboSpan" id="kobo.216.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.217.1">data link layer</span></strong><span class="koboSpan" id="kobo.218.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.219.1">Layer 2</span></em><span class="koboSpan" id="kobo.220.1">) establishes a reliable data flow between two directly connected </span><a id="_idIndexMarker921"/><span class="koboSpan" id="kobo.221.1">devices on a network, either as adjacent nodes in a WAN or </span><a id="_idIndexMarker922"/><span class="koboSpan" id="kobo.222.1">as devices within a LAN. </span><span class="koboSpan" id="kobo.222.2">One of the data link layer’s responsibilities is flow control, adapting to the physical layer’s communication speed. </span><span class="koboSpan" id="kobo.222.3">On the receiving device, the data link layer corrects communication errors that originated in the physical layer. </span><span class="koboSpan" id="kobo.222.4">The data link layer consists of the </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">following subsystems:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.224.1">Media access control</span></strong><span class="koboSpan" id="kobo.225.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.226.1">MAC</span></strong><span class="koboSpan" id="kobo.227.1">): This </span><a id="_idIndexMarker923"/><span class="koboSpan" id="kobo.228.1">subsystem uses MAC addresses to identify </span><a id="_idIndexMarker924"/><span class="koboSpan" id="kobo.229.1">and connect devices on the network. </span><span class="koboSpan" id="kobo.229.2">It also controls the device access permissions to transmit and receive data on </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">the network.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.231.1">Logical link control</span></strong><span class="koboSpan" id="kobo.232.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.233.1">LLC</span></strong><span class="koboSpan" id="kobo.234.1">): This </span><a id="_idIndexMarker925"/><span class="koboSpan" id="kobo.235.1">subsystem identifies and encapsulates network </span><a id="_idIndexMarker926"/><span class="koboSpan" id="kobo.236.1">layer protocols and performs error checking and frame synchronization while transmitting or </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">receiving data.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.238.1">The protocol </span><a id="_idIndexMarker927"/><span class="koboSpan" id="kobo.239.1">data units controlled by the data link layer are also known as </span><strong class="bold"><span class="koboSpan" id="kobo.240.1">frames</span></strong><span class="koboSpan" id="kobo.241.1">. </span><span class="koboSpan" id="kobo.241.2">A frame is a data transmission unit that acts as a container for a single network packet. </span><span class="koboSpan" id="kobo.241.3">Network packets are processed at the next OSI level (</span><em class="italic"><span class="koboSpan" id="kobo.242.1">network layer</span></em><span class="koboSpan" id="kobo.243.1">). </span><span class="koboSpan" id="kobo.243.2">When multiple devices access the same physical layer simultaneously, frame collisions may occur. </span><span class="koboSpan" id="kobo.243.3">Data link layer protocols can detect and recover from such collisions and further reduce or prevent </span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">their occurrence.</span></span></p>
<p><span class="koboSpan" id="kobo.245.1">There are also Ethernet frames, for example, which are encapsulated data that is defined for MAC implementations. </span><span class="koboSpan" id="kobo.245.2">The original IEEE 802.3 Ethernet format, the 802.3 </span><strong class="bold"><span class="koboSpan" id="kobo.246.1">SubNetwork Access Protocol</span></strong><span class="koboSpan" id="kobo.247.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.248.1">SNAP</span></strong><span class="koboSpan" id="kobo.249.1">), and the</span><a id="_idIndexMarker928"/><span class="koboSpan" id="kobo.250.1"> Ethernet II (extended) frame formats are </span><span class="No-Break"><span class="koboSpan" id="kobo.251.1">also available.</span></span></p>
<p><span class="koboSpan" id="kobo.252.1">One more example </span><a id="_idIndexMarker929"/><span class="koboSpan" id="kobo.253.1">of the data link protocol is the </span><strong class="bold"><span class="koboSpan" id="kobo.254.1">Point-to-Point Protocol</span></strong><span class="koboSpan" id="kobo.255.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.256.1">PPP</span></strong><span class="koboSpan" id="kobo.257.1">), a binary networking protocol that’s used in high-speed broadband </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">communication networks.</span></span></p>
<h3><span class="koboSpan" id="kobo.259.1">The network layer</span></h3>
<p><span class="koboSpan" id="kobo.260.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.261.1">network layer</span></strong><span class="koboSpan" id="kobo.262.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.263.1">Layer 3</span></em><span class="koboSpan" id="kobo.264.1">) discovers the optimal communication path (or route) between </span><a id="_idIndexMarker930"/><span class="koboSpan" id="kobo.265.1">devices on a network. </span><span class="koboSpan" id="kobo.265.2">This layer uses a routing mechanism based on the IP</span><em class="italic"> </em><span class="koboSpan" id="kobo.266.1">addresses of the devices involved in the data exchange to move </span><a id="_idIndexMarker931"/><span class="koboSpan" id="kobo.267.1">data packets from source </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">to destination.</span></span></p>
<p><span class="koboSpan" id="kobo.269.1">On the transmitting end, the network layer disassembles the data segments that originated in the </span><em class="italic"><span class="koboSpan" id="kobo.270.1">transport layer</span></em><span class="koboSpan" id="kobo.271.1"> into network packets. </span><span class="koboSpan" id="kobo.271.2">On the receiving end, the data frames are reassembled from the layer below (</span><em class="italic"><span class="koboSpan" id="kobo.272.1">data link layer</span></em><span class="koboSpan" id="kobo.273.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">into packets.</span></span></p>
<p><span class="koboSpan" id="kobo.275.1">A protocol </span><a id="_idIndexMarker932"/><span class="koboSpan" id="kobo.276.1">that operates at the network layer is the </span><strong class="bold"><span class="koboSpan" id="kobo.277.1">Internet Control Message Protocol</span></strong><span class="koboSpan" id="kobo.278.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.279.1">ICMP</span></strong><span class="koboSpan" id="kobo.280.1">). </span><span class="koboSpan" id="kobo.280.2">ICMP is used by network devices to diagnose network communication issues. </span><span class="koboSpan" id="kobo.280.3">ICMP reports an error when a requested endpoint is not available by sending messages such as </span><em class="italic"><span class="koboSpan" id="kobo.281.1">destination network unreachable</span></em><span class="koboSpan" id="kobo.282.1">, </span><em class="italic"><span class="koboSpan" id="kobo.283.1">timer expired</span></em><span class="koboSpan" id="kobo.284.1">, </span><em class="italic"><span class="koboSpan" id="kobo.285.1">source route failed</span></em><span class="koboSpan" id="kobo.286.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">and others.</span></span></p>
<h3><span class="koboSpan" id="kobo.288.1">The transport layer</span></h3>
<p><span class="koboSpan" id="kobo.289.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.290.1">transport layer</span></strong><span class="koboSpan" id="kobo.291.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.292.1">Layer 4</span></em><span class="koboSpan" id="kobo.293.1">) operates </span><a id="_idIndexMarker933"/><span class="koboSpan" id="kobo.294.1">with </span><strong class="bold"><span class="koboSpan" id="kobo.295.1">data segments</span></strong><span class="koboSpan" id="kobo.296.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.297.1">datagrams</span></strong><span class="koboSpan" id="kobo.298.1">. </span><span class="koboSpan" id="kobo.298.2">This layer is </span><a id="_idIndexMarker934"/><span class="koboSpan" id="kobo.299.1">mainly responsible for transferring data from a source to </span><a id="_idIndexMarker935"/><span class="koboSpan" id="kobo.300.1">a destination and guaranteeing a specific </span><strong class="bold"><span class="koboSpan" id="kobo.301.1">quality of service</span></strong><span class="koboSpan" id="kobo.302.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.303.1">QoS</span></strong><span class="koboSpan" id="kobo.304.1">). </span><span class="koboSpan" id="kobo.304.2">On the </span><a id="_idIndexMarker936"/><span class="koboSpan" id="kobo.305.1">transmitting end, data that originated from the layer above (</span><em class="italic"><span class="koboSpan" id="kobo.306.1">session layer</span></em><span class="koboSpan" id="kobo.307.1">) is disassembled into segments. </span><span class="koboSpan" id="kobo.307.2">On the receiving end, the transport layer reassembles the data packets received from the layer below (</span><em class="italic"><span class="koboSpan" id="kobo.308.1">network layer</span></em><span class="koboSpan" id="kobo.309.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">into segments.</span></span></p>
<p><span class="koboSpan" id="kobo.311.1">The transport layer maintains the reliability of the data transfer through flow-control and error-control functions. </span><span class="koboSpan" id="kobo.311.2">The flow-control function adjusts the data transfer rate between endpoints with different connection speeds, to avoid a sender overwhelming the receiver. </span><span class="koboSpan" id="kobo.311.3">When the data received is incorrect, the error-control function may request the retransmission </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">of data.</span></span></p>
<p><span class="koboSpan" id="kobo.313.1">Examples </span><a id="_idIndexMarker937"/><span class="koboSpan" id="kobo.314.1">of transport layer protocols include the </span><strong class="bold"><span class="koboSpan" id="kobo.315.1">Transmission Control Protocol</span></strong><span class="koboSpan" id="kobo.316.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.317.1">TCP</span></strong><span class="koboSpan" id="kobo.318.1">) and</span><a id="_idIndexMarker938"/><span class="koboSpan" id="kobo.319.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.320.1">User Datagram </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.321.1">Protocol</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.322.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.323.1">UDP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">).</span></span></p>
<h3><span class="koboSpan" id="kobo.325.1">The session layer</span></h3>
<p><span class="koboSpan" id="kobo.326.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.327.1">session layer</span></strong><span class="koboSpan" id="kobo.328.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.329.1">Layer 5</span></em><span class="koboSpan" id="kobo.330.1">) controls the lifetime of the connection channels (or sessions) between devices communicating on a network. </span><span class="koboSpan" id="kobo.330.2">At this layer, sessions or network </span><a id="_idIndexMarker939"/><span class="koboSpan" id="kobo.331.1">connections are usually defined by network addresses, sockets, and ports. </span><span class="koboSpan" id="kobo.331.2">We’ll explain each of these concepts in the </span><em class="italic"><span class="koboSpan" id="kobo.332.1">Sockets and ports</span></em><span class="koboSpan" id="kobo.333.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.334.1">IP addresses</span></em><span class="koboSpan" id="kobo.335.1"> sections. </span><span class="koboSpan" id="kobo.335.2">The session layer </span><a id="_idIndexMarker940"/><span class="koboSpan" id="kobo.336.1">is responsible for the integrity of the data transfer within a communication channel or session. </span><span class="koboSpan" id="kobo.336.2">For example, if a session is interrupted, the data transfer resumes from a </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">previous checkpoint.</span></span></p>
<p><span class="koboSpan" id="kobo.338.1">Some typical </span><a id="_idIndexMarker941"/><span class="koboSpan" id="kobo.339.1">session layer protocols are the </span><strong class="bold"><span class="koboSpan" id="kobo.340.1">Remote Procedure Call</span></strong><span class="koboSpan" id="kobo.341.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.342.1">RPC</span></strong><span class="koboSpan" id="kobo.343.1">) protocol, which is </span><a id="_idIndexMarker942"/><span class="koboSpan" id="kobo.344.1">used by interprocess communications, and </span><strong class="bold"><span class="koboSpan" id="kobo.345.1">Network Basic Input/Output System</span></strong><span class="koboSpan" id="kobo.346.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.347.1">NetBIOS</span></strong><span class="koboSpan" id="kobo.348.1">), which is a file-sharing and </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">name-resolution protocol.</span></span></p>
<h3><span class="koboSpan" id="kobo.350.1">The presentation layer</span></h3>
<p><span class="koboSpan" id="kobo.351.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.352.1">presentation layer</span></strong><span class="koboSpan" id="kobo.353.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.354.1">Layer 6</span></em><span class="koboSpan" id="kobo.355.1">) acts as a data translation tier between the </span><em class="italic"><span class="koboSpan" id="kobo.356.1">application layer</span></em><span class="koboSpan" id="kobo.357.1"> above and the </span><em class="italic"><span class="koboSpan" id="kobo.358.1">session layer</span></em><span class="koboSpan" id="kobo.359.1"> below. </span><span class="koboSpan" id="kobo.359.2">On the transmitting end, this layer formats </span><a id="_idIndexMarker943"/><span class="koboSpan" id="kobo.360.1">the data into a system-independent representation before sending it across the network. </span><span class="koboSpan" id="kobo.360.2">On the receiving end, the presentation </span><a id="_idIndexMarker944"/><span class="koboSpan" id="kobo.361.1">layer transforms the data into an application-friendly format. </span><span class="koboSpan" id="kobo.361.2">Examples of such transformations are encryption and decryption, compression and decompression, encoding and decoding, and serialization </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">and deserialization.</span></span></p>
<p><span class="koboSpan" id="kobo.363.1">Usually, there is no substantial distinction between the presentation and application </span><a id="_idIndexMarker945"/><span class="koboSpan" id="kobo.364.1">layers, mainly </span><a id="_idIndexMarker946"/><span class="koboSpan" id="kobo.365.1">due to the relatively tight coupling of the various </span><a id="_idIndexMarker947"/><span class="koboSpan" id="kobo.366.1">data formats with the applications consuming </span><a id="_idIndexMarker948"/><span class="koboSpan" id="kobo.367.1">them. </span><span class="koboSpan" id="kobo.367.2">Standard data representation formats include the </span><strong class="bold"><span class="koboSpan" id="kobo.368.1">American Standard Code for Information Interchange</span></strong><span class="koboSpan" id="kobo.369.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.370.1">ASCII</span></strong><span class="koboSpan" id="kobo.371.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.372.1">Extensible Markup Language</span></strong><span class="koboSpan" id="kobo.373.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.374.1">XML</span></strong><span class="koboSpan" id="kobo.375.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.376.1">JavaScript Object Notation</span></strong><span class="koboSpan" id="kobo.377.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.378.1">JSON</span></strong><span class="koboSpan" id="kobo.379.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.380.1">Joint Photographic Experts Group</span></strong><span class="koboSpan" id="kobo.381.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.382.1">JPEG</span></strong><span class="koboSpan" id="kobo.383.1">), ZIP, </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">and others.</span></span></p>
<h3><span class="koboSpan" id="kobo.385.1">The application layer</span></h3>
<p><span class="koboSpan" id="kobo.386.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.387.1">application layer</span></strong><span class="koboSpan" id="kobo.388.1"> (or </span><em class="italic"><span class="koboSpan" id="kobo.389.1">Layer 7</span></em><span class="koboSpan" id="kobo.390.1">) is the closest to the end user in the OSI model. </span><span class="koboSpan" id="kobo.390.2">This layer collects </span><a id="_idIndexMarker949"/><span class="koboSpan" id="kobo.391.1">or provides the input or output of application </span><a id="_idIndexMarker950"/><span class="koboSpan" id="kobo.392.1">data in some meaningful way. </span><span class="koboSpan" id="kobo.392.2">This layer does not contain or run the applications themselves. </span><span class="koboSpan" id="kobo.392.3">Instead, it acts as an abstraction between applications, implementing a communication component and the underlying network. </span><span class="koboSpan" id="kobo.392.4">Typical examples of applications that interact with the application layer are web browsers and </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">email clients.</span></span></p>
<p><span class="koboSpan" id="kobo.394.1">A </span><a id="_idIndexMarker951"/><span class="koboSpan" id="kobo.395.1">few </span><a id="_idIndexMarker952"/><span class="koboSpan" id="kobo.396.1">examples</span><a id="_idIndexMarker953"/><span class="koboSpan" id="kobo.397.1"> of Layer </span><a id="_idIndexMarker954"/><span class="koboSpan" id="kobo.398.1">7 protocols are the DNS protocol, the </span><strong class="bold"><span class="koboSpan" id="kobo.399.1">HyperText Transfer Protocol</span></strong><span class="koboSpan" id="kobo.400.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.401.1">HTTP</span></strong><span class="koboSpan" id="kobo.402.1">), the </span><strong class="bold"><span class="koboSpan" id="kobo.403.1">File Transfer Protocol</span></strong><span class="koboSpan" id="kobo.404.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.405.1">FTP</span></strong><span class="koboSpan" id="kobo.406.1">), and email messaging </span><a id="_idIndexMarker955"/><span class="koboSpan" id="kobo.407.1">protocols, such as the </span><strong class="bold"><span class="koboSpan" id="kobo.408.1">Post Office Protocol</span></strong><span class="koboSpan" id="kobo.409.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.410.1">POP</span></strong><span class="koboSpan" id="kobo.411.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.412.1">Internet Message Access Protocol</span></strong><span class="koboSpan" id="kobo.413.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.414.1">IMAP</span></strong><span class="koboSpan" id="kobo.415.1">), and </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">Simple Mail Transfer </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.417.1">Protocol</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.418.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.419.1">SMTP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.420.1">)</span></span><span class="No-Break"><a id="_idIndexMarker956"/></span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.422.1">Before wrapping up, we should note that the OSI model is a generic representation of networking communication layers and provides the theoretical guidelines for how network communication works. </span><span class="koboSpan" id="kobo.422.2">A similar – but more practical – illustration of the networking stack is the TCP/IP model. </span><span class="koboSpan" id="kobo.422.3">Both these models </span><a id="_idIndexMarker957"/><span class="koboSpan" id="kobo.423.1">are useful when it comes to network design, implementation, troubleshooting, and diagnostics. </span><span class="koboSpan" id="kobo.423.2">The OSI model gives network operators a </span><a id="_idIndexMarker958"/><span class="koboSpan" id="kobo.424.1">good understanding of the full networking stack, from the physical medium to the application layer, and each level has </span><strong class="bold"><span class="koboSpan" id="kobo.425.1">Protocol Data Units</span></strong><span class="koboSpan" id="kobo.426.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.427.1">PDUs</span></strong><span class="koboSpan" id="kobo.428.1">) and communication internals. </span><span class="koboSpan" id="kobo.428.2">However, the TCP/IP model is somewhat </span><a id="_idIndexMarker959"/><span class="koboSpan" id="kobo.429.1">simplified, with a few of the OSI model layers collapsed into one, and it takes a rather protocol-centric approach to network communications. </span><span class="koboSpan" id="kobo.429.2">We’ll explore this in more detail in the </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">next section.</span></span></p>
<h2 id="_idParaDest-129"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.431.1">The TCP/IP network stack model</span></h2>
<p><span class="koboSpan" id="kobo.432.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.433.1">TCP/IP model</span></strong><span class="koboSpan" id="kobo.434.1"> is a four-layer </span><a id="_idIndexMarker960"/><span class="koboSpan" id="kobo.435.1">interpretation of the OSI networking stack, where some of the equivalent OSI layers appear consolidated, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.437.1"><img alt="Figure 7.3 – The OSI and TCP/IP models" src="image/B19682_07_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.438.1">Figure 7.3 – The OSI and TCP/IP models</span></p>
<p><span class="koboSpan" id="kobo.439.1">Chronologically, the TCP/IP model </span><a id="_idIndexMarker961"/><span class="koboSpan" id="kobo.440.1">is older than the OSI model. </span><span class="koboSpan" id="kobo.440.2">It was </span><a id="_idIndexMarker962"/><span class="koboSpan" id="kobo.441.1">first suggested by the US </span><strong class="bold"><span class="koboSpan" id="kobo.442.1">Department of Defense</span></strong><span class="koboSpan" id="kobo.443.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.444.1">DoD</span></strong><span class="koboSpan" id="kobo.445.1">) as part of an internetwork project developed by the </span><strong class="bold"><span class="koboSpan" id="kobo.446.1">Defense Advanced Research Projects Agency</span></strong><span class="koboSpan" id="kobo.447.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.448.1">DARPA</span></strong><span class="koboSpan" id="kobo.449.1">). </span><span class="koboSpan" id="kobo.449.2">This project eventually became </span><a id="_idIndexMarker963"/><span class="koboSpan" id="kobo.450.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">modern-day internet.</span></span></p>
<p><span class="koboSpan" id="kobo.452.1">The TCP/IP model layers encapsulate similar functions to their counterpart OSI layers. </span><span class="koboSpan" id="kobo.452.2">Here’s a summary of each layer in the </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">TCP/IP model.</span></span></p>
<h3><span class="koboSpan" id="kobo.454.1">The network interface layer</span></h3>
<p><span class="koboSpan" id="kobo.455.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.456.1">network interface layer</span></strong><span class="koboSpan" id="kobo.457.1"> is </span><a id="_idIndexMarker964"/><span class="koboSpan" id="kobo.458.1">responsible for data </span><a id="_idIndexMarker965"/><span class="koboSpan" id="kobo.459.1">delivery over a physical medium (such as wire, wireless, or optical). </span><span class="koboSpan" id="kobo.459.2">Networking protocols operating at this layer include Ethernet, Token Ring, and Frame Relay. </span><span class="koboSpan" id="kobo.459.3">This layer maps to the composition of the </span><em class="italic"><span class="koboSpan" id="kobo.460.1">physical and data link layers</span></em><span class="koboSpan" id="kobo.461.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">OSI model.</span></span></p>
<h3><span class="koboSpan" id="kobo.463.1">The internet layer</span></h3>
<p><span class="koboSpan" id="kobo.464.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.465.1">internet layer</span></strong><span class="koboSpan" id="kobo.466.1"> provides </span><em class="italic"><span class="koboSpan" id="kobo.467.1">connectionless</span></em><span class="koboSpan" id="kobo.468.1"> data delivery between nodes on a network. </span><span class="koboSpan" id="kobo.468.2">Connectionless protocols describe a network communication pattern where a sender transmits </span><a id="_idIndexMarker966"/><span class="koboSpan" id="kobo.469.1">data to a receiver without a prior arrangement between the two. </span><span class="koboSpan" id="kobo.469.2">This layer </span><a id="_idIndexMarker967"/><span class="koboSpan" id="kobo.470.1">is responsible for disassembling data into network packets at the transmitting end and reassembling them on the receiving end. </span><span class="koboSpan" id="kobo.470.2">The internet layer uses routing functions to identify the optimal path between the network nodes. </span><span class="koboSpan" id="kobo.470.3">This layer maps to the </span><em class="italic"><span class="koboSpan" id="kobo.471.1">network layer</span></em><span class="koboSpan" id="kobo.472.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">OSI model.</span></span></p>
<h3><span class="koboSpan" id="kobo.474.1">The transport layer</span></h3>
<p><span class="koboSpan" id="kobo.475.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.476.1">transport layer</span></strong><span class="koboSpan" id="kobo.477.1"> (also known as the </span><strong class="bold"><span class="koboSpan" id="kobo.478.1">transmission layer</span></strong><span class="koboSpan" id="kobo.479.1"> or the </span><strong class="bold"><span class="koboSpan" id="kobo.480.1">host-to-host layer</span></strong><span class="koboSpan" id="kobo.481.1">) is responsible </span><a id="_idIndexMarker968"/><span class="koboSpan" id="kobo.482.1">for maintaining the communication sessions </span><a id="_idIndexMarker969"/><span class="koboSpan" id="kobo.483.1">between connected network nodes. </span><span class="koboSpan" id="kobo.483.2">The transport layer implements error-detection and correction mechanisms for reliable data delivery between endpoints. </span><span class="koboSpan" id="kobo.483.3">This layer maps to the </span><em class="italic"><span class="koboSpan" id="kobo.484.1">transport layer</span></em><span class="koboSpan" id="kobo.485.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">OSI model.</span></span></p>
<h3><span class="koboSpan" id="kobo.487.1">The application layer</span></h3>
<p><span class="koboSpan" id="kobo.488.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.489.1">application layer</span></strong><span class="koboSpan" id="kobo.490.1"> provides</span><a id="_idIndexMarker970"/><span class="koboSpan" id="kobo.491.1"> the data communication abstraction between software applications </span><a id="_idIndexMarker971"/><span class="koboSpan" id="kobo.492.1">and the underlying network. </span><span class="koboSpan" id="kobo.492.2">This layer maps to the composition of the </span><em class="italic"><span class="koboSpan" id="kobo.493.1">session, presentation, and application layers</span></em><span class="koboSpan" id="kobo.494.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.495.1">OSI model.</span></span></p>
<p><span class="koboSpan" id="kobo.496.1">As discussed earlier in this chapter, the TCP/IP model is a protocol-centric representation of the networking stack. </span><span class="koboSpan" id="kobo.496.2">This model served as the foundation of the internet by gradually defining and developing networking protocols required for internet communications. </span><span class="koboSpan" id="kobo.496.3">These protocols are collectively referred to as the </span><em class="italic"><span class="koboSpan" id="kobo.497.1">IP suite</span></em><span class="koboSpan" id="kobo.498.1">. </span><span class="koboSpan" id="kobo.498.2">The following section describes some of the most common </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1">networking protocols.</span></span></p>
<h2 id="_idParaDest-130"><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.500.1">TCP/IP protocols</span></h2>
<p><span class="koboSpan" id="kobo.501.1">In this section, we’ll describe some widely used networking protocols. </span><span class="koboSpan" id="kobo.501.2">The reference provided here should not </span><a id="_idIndexMarker972"/><span class="koboSpan" id="kobo.502.1">be regarded as an all-encompassing guide. </span><span class="koboSpan" id="kobo.502.2">There are a vast number of TCP/IP protocols, and a comprehensive study is beyond the scope of this chapter. </span><span class="koboSpan" id="kobo.502.3">Nevertheless, there are a handful of protocols worth exploring, frequently at work in everyday network communication and </span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">administration workflows.</span></span></p>
<p><span class="koboSpan" id="kobo.504.1">The following list briefly describes each TCP/IP protocol and its related </span><strong class="bold"><span class="koboSpan" id="kobo.505.1">Request for Comments</span></strong><span class="koboSpan" id="kobo.506.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.507.1">RFC</span></strong><span class="koboSpan" id="kobo.508.1">) identifier. </span><span class="koboSpan" id="kobo.508.2">The RFC represents the detailed technical documentation – of a protocol, in our case – that’s usually authored by the </span><strong class="bold"><span class="koboSpan" id="kobo.509.1">Internet Engineering Task Force</span></strong><span class="koboSpan" id="kobo.510.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.511.1">IETF</span></strong><span class="koboSpan" id="kobo.512.1">). </span><span class="koboSpan" id="kobo.512.2">For more </span><a id="_idIndexMarker973"/><span class="koboSpan" id="kobo.513.1">information </span><a id="_idIndexMarker974"/><span class="koboSpan" id="kobo.514.1">about RFC, please refer to </span><a href="https://www.ietf.org/standards/rfcs/"><span class="koboSpan" id="kobo.515.1">https://www.ietf.org/standards/rfcs/</span></a><span class="koboSpan" id="kobo.516.1">. </span><span class="koboSpan" id="kobo.516.2">Here are the most widely </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">used protocols:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.518.1">IP</span></strong><span class="koboSpan" id="kobo.519.1">: IP (</span><em class="italic"><span class="koboSpan" id="kobo.520.1">RFC 791</span></em><span class="koboSpan" id="kobo.521.1">) identifies network nodes based on fixed-length addresses, also known as IP addresses. </span><span class="koboSpan" id="kobo.521.2">IP addresses </span><a id="_idIndexMarker975"/><span class="koboSpan" id="kobo.522.1">will be described in more </span><a id="_idIndexMarker976"/><span class="koboSpan" id="kobo.523.1">detail in the next section. </span><span class="koboSpan" id="kobo.523.2">The IP protocol uses datagrams as the data transmission unit and provides fragmentation and reassembly capabilities of large datagrams to accommodate small-packet networks (and avoid transmission delays). </span><span class="koboSpan" id="kobo.523.3">The IP protocol also provides routing functions to find the optimal data path between network nodes. </span><span class="koboSpan" id="kobo.523.4">IP operates at the network layer (</span><em class="italic"><span class="koboSpan" id="kobo.524.1">Layer 3</span></em><span class="koboSpan" id="kobo.525.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.527.1">ARP</span></strong><span class="koboSpan" id="kobo.528.1">: The </span><strong class="bold"><span class="koboSpan" id="kobo.529.1">Address Resolution Protocol</span></strong><span class="koboSpan" id="kobo.530.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.531.1">ARP</span></strong><span class="koboSpan" id="kobo.532.1">) (</span><em class="italic"><span class="koboSpan" id="kobo.533.1">RFC 826</span></em><span class="koboSpan" id="kobo.534.1">) is used by the IP protocol to map IP </span><a id="_idIndexMarker977"/><span class="koboSpan" id="kobo.535.1">network addresses (specifically, </span><strong class="bold"><span class="koboSpan" id="kobo.536.1">IP version 4</span></strong><span class="koboSpan" id="kobo.537.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.538.1">IPv4</span></strong><span class="koboSpan" id="kobo.539.1">) to </span><a id="_idIndexMarker978"/><span class="koboSpan" id="kobo.540.1">device MAC </span><a id="_idIndexMarker979"/><span class="koboSpan" id="kobo.541.1">addresses used by a data link protocol. </span><span class="koboSpan" id="kobo.541.2">ARP operates at the data link layer (</span><em class="italic"><span class="koboSpan" id="kobo.542.1">Layer 2</span></em><span class="koboSpan" id="kobo.543.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.545.1">NDP</span></strong><span class="koboSpan" id="kobo.546.1">: The </span><strong class="bold"><span class="koboSpan" id="kobo.547.1">Neighbor Discovery Protocol</span></strong><span class="koboSpan" id="kobo.548.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.549.1">NDP</span></strong><span class="koboSpan" id="kobo.550.1">) (</span><em class="italic"><span class="koboSpan" id="kobo.551.1">RFC 4861</span></em><span class="koboSpan" id="kobo.552.1">) is like the ARP protocol, and it also </span><a id="_idIndexMarker980"/><span class="koboSpan" id="kobo.553.1">controls </span><strong class="bold"><span class="koboSpan" id="kobo.554.1">IP version 6</span></strong><span class="koboSpan" id="kobo.555.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.556.1">IPv6</span></strong><span class="koboSpan" id="kobo.557.1">) address mapping. </span><span class="koboSpan" id="kobo.557.2">NDP </span><a id="_idIndexMarker981"/><span class="koboSpan" id="kobo.558.1">operates within </span><a id="_idIndexMarker982"/><span class="koboSpan" id="kobo.559.1">the data link layer (</span><em class="italic"><span class="koboSpan" id="kobo.560.1">Layer 2</span></em><span class="koboSpan" id="kobo.561.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.563.1">ICMP</span></strong><span class="koboSpan" id="kobo.564.1">: ICMP (</span><em class="italic"><span class="koboSpan" id="kobo.565.1">RFC 792</span></em><span class="koboSpan" id="kobo.566.1">) is </span><a id="_idIndexMarker983"/><span class="koboSpan" id="kobo.567.1">a supporting </span><a id="_idIndexMarker984"/><span class="koboSpan" id="kobo.568.1">protocol for checking transmission issues. </span><span class="koboSpan" id="kobo.568.2">When a device or node is not reachable within a given timeout, ICMP reports an error. </span><span class="koboSpan" id="kobo.568.3">ICMP operates at the network layer (</span><em class="italic"><span class="koboSpan" id="kobo.569.1">Layer 3</span></em><span class="koboSpan" id="kobo.570.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.572.1">TCP</span></strong><span class="koboSpan" id="kobo.573.1">: TCP (</span><em class="italic"><span class="koboSpan" id="kobo.574.1">RFC 793</span></em><span class="koboSpan" id="kobo.575.1">) is </span><a id="_idIndexMarker985"/><span class="koboSpan" id="kobo.576.1">a connection-oriented, highly </span><a id="_idIndexMarker986"/><span class="koboSpan" id="kobo.577.1">reliable communication protocol. </span><span class="koboSpan" id="kobo.577.2">TCP requires a logical connection (such as a </span><em class="italic"><span class="koboSpan" id="kobo.578.1">handshake</span></em><span class="koboSpan" id="kobo.579.1">) between the nodes before initiating the data exchange. </span><span class="koboSpan" id="kobo.579.2">TCP operates at the transport layer (</span><em class="italic"><span class="koboSpan" id="kobo.580.1">Layer 4</span></em><span class="koboSpan" id="kobo.581.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.583.1">UDP</span></strong><span class="koboSpan" id="kobo.584.1">: UDP (</span><em class="italic"><span class="koboSpan" id="kobo.585.1">RFC 768</span></em><span class="koboSpan" id="kobo.586.1">) is </span><a id="_idIndexMarker987"/><span class="koboSpan" id="kobo.587.1">a connectionless </span><a id="_idIndexMarker988"/><span class="koboSpan" id="kobo.588.1">communication protocol. </span><span class="koboSpan" id="kobo.588.2">UDP has no handshake mechanism (compared to TCP). </span><span class="koboSpan" id="kobo.588.3">Consequently, with UDP, there’s no guarantee of data delivery. </span><span class="koboSpan" id="kobo.588.4">It is also known as a </span><em class="italic"><span class="koboSpan" id="kobo.589.1">best-effort protocol</span></em><span class="koboSpan" id="kobo.590.1">. </span><span class="koboSpan" id="kobo.590.2">UDP uses datagrams as the data transmission unit, and it’s suitable for network communications where error checking is not critical. </span><span class="koboSpan" id="kobo.590.3">UDP operates at the transport layer (</span><em class="italic"><span class="koboSpan" id="kobo.591.1">Layer 4</span></em><span class="koboSpan" id="kobo.592.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.594.1">Dynamic Host Configuration Protocol</span></strong><span class="koboSpan" id="kobo.595.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.596.1">DHCP</span></strong><span class="koboSpan" id="kobo.597.1">): The DHCP (</span><em class="italic"><span class="koboSpan" id="kobo.598.1">RFC 2131</span></em><span class="koboSpan" id="kobo.599.1">) provides a framework for requesting and passing host configuration information </span><a id="_idIndexMarker989"/><span class="koboSpan" id="kobo.600.1">required by devices on a TCP/IP </span><a id="_idIndexMarker990"/><span class="koboSpan" id="kobo.601.1">network. </span><span class="koboSpan" id="kobo.601.2">DHCP enables the automatic (dynamic) allocation of reusable IP addresses and other configuration options. </span><span class="koboSpan" id="kobo.601.3">DHCP is considered an application layer (</span><em class="italic"><span class="koboSpan" id="kobo.602.1">Layer 7</span></em><span class="koboSpan" id="kobo.603.1">) protocol in the OSI model, but the initial DHCP discovery mechanism operates at the data link layer (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.604.1">Layer 2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.605.1">).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.606.1">Domain Name System</span></strong><span class="koboSpan" id="kobo.607.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.608.1">DNS</span></strong><span class="koboSpan" id="kobo.609.1">): The DNS (</span><em class="italic"><span class="koboSpan" id="kobo.610.1">RFC 2929</span></em><span class="koboSpan" id="kobo.611.1">) is a </span><a id="_idIndexMarker991"/><span class="koboSpan" id="kobo.612.1">protocol that acts as </span><a id="_idIndexMarker992"/><span class="koboSpan" id="kobo.613.1">a network address book, where nodes in the network are identified by human-readable names instead of IP addresses. </span><span class="koboSpan" id="kobo.613.2">According to the IP protocol, each device on a network is identified by a unique IP address. </span><span class="koboSpan" id="kobo.613.3">When a network connection specifies the remote device’s hostname (or domain name) before the connection is established, DNS translates the domain name (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">dns.google.com</span></strong><span class="koboSpan" id="kobo.615.1">) into an IP address (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.616.1">8.8.8.8</span></strong><span class="koboSpan" id="kobo.617.1">). </span><span class="koboSpan" id="kobo.617.2">The DNS protocol operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.618.1">Layer 7</span></em><span class="koboSpan" id="kobo.619.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.621.1">HTTP</span></strong><span class="koboSpan" id="kobo.622.1">: HTTP (</span><em class="italic"><span class="koboSpan" id="kobo.623.1">RFC 2616</span></em><span class="koboSpan" id="kobo.624.1">) is the vehicular language of the internet. </span><span class="koboSpan" id="kobo.624.2">HTTP is a stateless application-level </span><a id="_idIndexMarker993"/><span class="koboSpan" id="kobo.625.1">protocol based </span><a id="_idIndexMarker994"/><span class="koboSpan" id="kobo.626.1">on the request and response between a client application (for example, a browser) and a server endpoint (for example, a web server). </span><span class="koboSpan" id="kobo.626.2">HTTP supports a wide variety of data formats, ranging from text to images and video streams. </span><span class="koboSpan" id="kobo.626.3">HTTP operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.627.1">Layer 7</span></em><span class="koboSpan" id="kobo.628.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.629.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.630.1">FTP</span></strong><span class="koboSpan" id="kobo.631.1">: FTP (</span><em class="italic"><span class="koboSpan" id="kobo.632.1">RFC 959</span></em><span class="koboSpan" id="kobo.633.1">) is a </span><a id="_idIndexMarker995"/><span class="koboSpan" id="kobo.634.1">standard protocol for transferring files </span><a id="_idIndexMarker996"/><span class="koboSpan" id="kobo.635.1">requested by an FTP client from an FTP server. </span><span class="koboSpan" id="kobo.635.2">FTP operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.636.1">Layer 7</span></em><span class="koboSpan" id="kobo.637.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.639.1">TELNET</span></strong><span class="koboSpan" id="kobo.640.1">: The </span><strong class="bold"><span class="koboSpan" id="kobo.641.1">Terminal Network protocol</span></strong><span class="koboSpan" id="kobo.642.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.643.1">TELNET</span></strong><span class="koboSpan" id="kobo.644.1">) (</span><em class="italic"><span class="koboSpan" id="kobo.645.1">RFC 854</span></em><span class="koboSpan" id="kobo.646.1">) is an application-layer protocol </span><a id="_idIndexMarker997"/><span class="koboSpan" id="kobo.647.1">that provides a bidirectional </span><a id="_idIndexMarker998"/><span class="koboSpan" id="kobo.648.1">text-oriented network communication between a client and a server machine, using a virtual terminal connection. </span><span class="koboSpan" id="kobo.648.2">TELNET operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.649.1">Layer 7</span></em><span class="koboSpan" id="kobo.650.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.652.1">SSH</span></strong><span class="koboSpan" id="kobo.653.1">: </span><strong class="bold"><span class="koboSpan" id="kobo.654.1">Secure Shell</span></strong><span class="koboSpan" id="kobo.655.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.656.1">SSH</span></strong><span class="koboSpan" id="kobo.657.1">) (</span><em class="italic"><span class="koboSpan" id="kobo.658.1">RFC 4253</span></em><span class="koboSpan" id="kobo.659.1">) is a </span><a id="_idIndexMarker999"/><span class="koboSpan" id="kobo.660.1">secure application-layer </span><a id="_idIndexMarker1000"/><span class="koboSpan" id="kobo.661.1">protocol that encapsulates strong encryption and cryptographic host authentication. </span><span class="koboSpan" id="kobo.661.2">SSH uses a virtual terminal connection between a client and a server machine. </span><span class="koboSpan" id="kobo.661.3">SSH operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.662.1">Layer 7</span></em><span class="koboSpan" id="kobo.663.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.665.1">SMTP</span></strong><span class="koboSpan" id="kobo.666.1">: SMTP (</span><em class="italic"><span class="koboSpan" id="kobo.667.1">RFC 5321</span></em><span class="koboSpan" id="kobo.668.1">) is </span><a id="_idIndexMarker1001"/><span class="koboSpan" id="kobo.669.1">an application-layer </span><a id="_idIndexMarker1002"/><span class="koboSpan" id="kobo.670.1">protocol for sending and receiving emails between an email client (for example, Outlook) and an email server (such as Exchange Server). </span><span class="koboSpan" id="kobo.670.2">SMTP supports strong encryption and host authentication. </span><span class="koboSpan" id="kobo.670.3">SMTP acts at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.671.1">Layer 7</span></em><span class="koboSpan" id="kobo.672.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.674.1">SNMP</span></strong><span class="koboSpan" id="kobo.675.1">: The </span><strong class="bold"><span class="koboSpan" id="kobo.676.1">Simple Network Management Protocol</span></strong><span class="koboSpan" id="kobo.677.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.678.1">SNMP</span></strong><span class="koboSpan" id="kobo.679.1">) (</span><em class="italic"><span class="koboSpan" id="kobo.680.1">RFC 1157</span></em><span class="koboSpan" id="kobo.681.1">) is used for remote </span><a id="_idIndexMarker1003"/><span class="koboSpan" id="kobo.682.1">device management and monitoring. </span><span class="koboSpan" id="kobo.682.2">SNMP </span><a id="_idIndexMarker1004"/><span class="koboSpan" id="kobo.683.1">operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.684.1">Layer 7</span></em><span class="koboSpan" id="kobo.685.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">OSI model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.687.1">NTP</span></strong><span class="koboSpan" id="kobo.688.1">: The </span><strong class="bold"><span class="koboSpan" id="kobo.689.1">Network Time Protocol</span></strong><span class="koboSpan" id="kobo.690.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.691.1">NTP</span></strong><span class="koboSpan" id="kobo.692.1">) (</span><em class="italic"><span class="koboSpan" id="kobo.693.1">RFC 5905)</span></em><span class="koboSpan" id="kobo.694.1"> is an internet protocol that’s used for synchronizing </span><a id="_idIndexMarker1005"/><span class="koboSpan" id="kobo.695.1">the system clock of multiple </span><a id="_idIndexMarker1006"/><span class="koboSpan" id="kobo.696.1">machines across a network. </span><span class="koboSpan" id="kobo.696.2">NTP operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.697.1">Layer 7</span></em><span class="koboSpan" id="kobo.698.1">) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">OSI model.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.700.1">Most of the internet protocols enumerated previously use the IP protocol to identify devices participating in the communication. </span><span class="koboSpan" id="kobo.700.2">Devices on a network are uniquely identified by an IP address. </span><span class="koboSpan" id="kobo.700.3">Let’s examine these network addresses </span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">more closely.</span></span></p>
<h2 id="_idParaDest-131"><a id="_idTextAnchor147"/><span class="koboSpan" id="kobo.702.1">IP addresses</span></h2>
<p><span class="koboSpan" id="kobo.703.1">An </span><strong class="bold"><span class="koboSpan" id="kobo.704.1">IP address</span></strong> <a id="_idIndexMarker1007"/><span class="koboSpan" id="kobo.705.1">is a fixed-length </span><strong class="bold"><span class="koboSpan" id="kobo.706.1">unique identifier</span></strong><span class="koboSpan" id="kobo.707.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.708.1">UID</span></strong><span class="koboSpan" id="kobo.709.1">) of a device in a network. </span><span class="koboSpan" id="kobo.709.2">Devices locate </span><a id="_idIndexMarker1008"/><span class="koboSpan" id="kobo.710.1">and communicate with each other based on IP addresses. </span><span class="koboSpan" id="kobo.710.2">The concept of an IP address is very similar to a postal address of a residence, whereby mail or a package would be sent to that destination based on </span><span class="No-Break"><span class="koboSpan" id="kobo.711.1">its address.</span></span></p>
<p><span class="koboSpan" id="kobo.712.1">Initially, IP defined the IP address as a 32-bit number known as an </span><strong class="bold"><span class="koboSpan" id="kobo.713.1">IPv4 address</span></strong><span class="koboSpan" id="kobo.714.1">. </span><span class="koboSpan" id="kobo.714.2">With the growth of the internet, the total number of IP addresses in a network has been exhausted. </span><span class="koboSpan" id="kobo.714.3">To address this issue, a new version of the IP protocol devised a 128-bit numbering scheme for IP addresses. </span><span class="koboSpan" id="kobo.714.4">A 128-bit IP address is also known as an </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.715.1">IPv6 address</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.717.1">In the next few sections, we’ll take a closer look at the networking constructs that play an important role in IP addresses, such as IPv4 and IPv6 address formats, network classes, subnetworks, and </span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">broadcast addresses.</span></span></p>
<h3><span class="koboSpan" id="kobo.719.1">IPv4 addresses</span></h3>
<p><span class="koboSpan" id="kobo.720.1">An </span><strong class="bold"><span class="koboSpan" id="kobo.721.1">IPv4 address</span></strong> <a id="_idIndexMarker1009"/><span class="koboSpan" id="kobo.722.1">is a 32-bit number (4 bytes) usually expressed </span><a id="_idIndexMarker1010"/><span class="koboSpan" id="kobo.723.1">as four groups of 1-byte (8 bits) numbers, separated by a dot (</span><strong class="source-inline"><span class="koboSpan" id="kobo.724.1">.</span></strong><span class="koboSpan" id="kobo.725.1">). </span><span class="koboSpan" id="kobo.725.2">Each number in these four groups is an integer between </span><strong class="source-inline"><span class="koboSpan" id="kobo.726.1">0</span></strong><span class="koboSpan" id="kobo.727.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">255</span></strong><span class="koboSpan" id="kobo.729.1">. </span><span class="koboSpan" id="kobo.729.2">An example of an IPv4 address </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">192.168.1.53</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.732.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.733.1">The following figure shows a binary representation of an </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">IPv4 address:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer193">
<span class="koboSpan" id="kobo.735.1"><img alt="Figure 7.4 – Network classes" src="image/B19682_07_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.736.1">Figure 7.4 – Network classes</span></p>
<p><span class="koboSpan" id="kobo.737.1">The IPv4 address </span><a id="_idIndexMarker1011"/><span class="koboSpan" id="kobo.738.1">space is limited to 4,294,967,296 (2^32) addresses (roughly 4 billion). </span><span class="koboSpan" id="kobo.738.2">Of these, approximately 18 million are reserved for special purposes (for example, private networks), and about 270 million are </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">multicast addresses.</span></span></p>
<p><span class="koboSpan" id="kobo.740.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.741.1">multicast address</span></strong><span class="koboSpan" id="kobo.742.1"> is a logical identifier</span><a id="_idIndexMarker1012"/><span class="koboSpan" id="kobo.743.1"> of a group of IP </span><a id="_idIndexMarker1013"/><span class="koboSpan" id="kobo.744.1">addresses. </span><span class="koboSpan" id="kobo.744.2">For more information on multicast addresses, please </span><a id="_idIndexMarker1014"/><span class="koboSpan" id="kobo.745.1">refer to </span><em class="italic"><span class="koboSpan" id="kobo.746.1">RFC </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.747.1">6308</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.748.1"> (</span></span><a href="https://tools.ietf.org/html/rfc6308"><span class="No-Break"><span class="koboSpan" id="kobo.749.1">https://tools.ietf.org/html/rfc6308</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.750.1">).</span></span></p>
<h3><span class="koboSpan" id="kobo.751.1">Network classes</span></h3>
<p><span class="koboSpan" id="kobo.752.1">In the early stages of the internet, the highest-order byte (first group) in the IPv4 address </span><a id="_idIndexMarker1015"/><span class="koboSpan" id="kobo.753.1">indicated the </span><strong class="bold"><span class="koboSpan" id="kobo.754.1">network number</span></strong><span class="koboSpan" id="kobo.755.1">. </span><span class="koboSpan" id="kobo.755.2">The subsequent bytes further express the network hierarchy and subnetworks, with the lowest-order </span><a id="_idIndexMarker1016"/><span class="koboSpan" id="kobo.756.1">byte identifying the device itself. </span><span class="koboSpan" id="kobo.756.2">This scheme soon proved insufficient for network hierarchies and segregations as it only allowed for 256 (2^8) networks, denoted by the leading byte of the IPv4 address. </span><span class="koboSpan" id="kobo.756.3">As additional networks were added, each with its own identity, the IP address specification needed a special revision to accommodate a standard model. </span><span class="koboSpan" id="kobo.756.4">The </span><em class="italic"><span class="koboSpan" id="kobo.757.1">Classful Network</span></em><span class="koboSpan" id="kobo.758.1"> specification, which was introduced in 1981, addressed this problem by dividing the IPv4 address space into five classes based on the leading 4 bits of the address, as illustrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.759.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer194">
<span class="koboSpan" id="kobo.760.1"><img alt="Figure 7.5 – Network classes" src="image/B19682_07_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.761.1">Figure 7.5 – Network classes</span></p>
<p><span class="koboSpan" id="kobo.762.1">For more </span><a id="_idIndexMarker1017"/><span class="koboSpan" id="kobo.763.1">information on network classes, please refer to </span><em class="italic"><span class="koboSpan" id="kobo.764.1">RFC 870</span></em><span class="koboSpan" id="kobo.765.1"> (</span><a href="https://tools.ietf.org/html/rfc870"><span class="koboSpan" id="kobo.766.1">https://tools.ietf.org/html/rfc870</span></a><span class="koboSpan" id="kobo.767.1">). </span><span class="koboSpan" id="kobo.767.2">In the preceding figure, the last column </span><a id="_idIndexMarker1018"/><span class="koboSpan" id="kobo.768.1">specifies the default subnet mask for each of these </span><a id="_idIndexMarker1019"/><span class="koboSpan" id="kobo.769.1">network classes. </span><span class="koboSpan" id="kobo.769.2">We’ll look at subnets (or </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">subnetworks) next.</span></span></p>
<h3><span class="koboSpan" id="kobo.771.1">Subnetworks</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.772.1">Subnetworks</span></strong><span class="koboSpan" id="kobo.773.1"> (or </span><strong class="bold"><span class="koboSpan" id="kobo.774.1">subnets</span></strong><span class="koboSpan" id="kobo.775.1">) are logical subdivisions of an IP network. </span><span class="koboSpan" id="kobo.775.2">Subnets were introduced </span><a id="_idIndexMarker1020"/><span class="koboSpan" id="kobo.776.1">to identify devices that belong </span><a id="_idIndexMarker1021"/><span class="koboSpan" id="kobo.777.1">to the same network. </span><span class="koboSpan" id="kobo.777.2">The IP addresses of devices in the same network have an identical most-significant group. </span><span class="koboSpan" id="kobo.777.3">The subnet definition yields a logical division of an IP address into two fields: the </span><strong class="bold"><span class="koboSpan" id="kobo.778.1">network identifier</span></strong><span class="koboSpan" id="kobo.779.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.780.1">host identifier</span></strong><span class="koboSpan" id="kobo.781.1">. </span><span class="koboSpan" id="kobo.781.2">The numerical </span><a id="_idIndexMarker1022"/><span class="koboSpan" id="kobo.782.1">representation of the subnet is called a </span><strong class="bold"><span class="koboSpan" id="kobo.783.1">subnet mask</span></strong><span class="koboSpan" id="kobo.784.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.785.1">netmask</span></strong><span class="koboSpan" id="kobo.786.1">. </span><span class="koboSpan" id="kobo.786.2">The following </span><a id="_idIndexMarker1023"/><span class="koboSpan" id="kobo.787.1">figure provides an example of a network identifier and a </span><span class="No-Break"><span class="koboSpan" id="kobo.788.1">host identifier:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer195">
<span class="koboSpan" id="kobo.789.1"><img alt="Figure 7.6 – Subnet with network and host identifiers" src="image/B19682_07_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.790.1">Figure 7.6 – Subnet with network and host identifiers</span></p>
<p><span class="koboSpan" id="kobo.791.1">With our IPv4 address (</span><strong class="source-inline"><span class="koboSpan" id="kobo.792.1">192.168.1.53</span></strong><span class="koboSpan" id="kobo.793.1">), we could devise a network identifier of </span><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">192.168.1</span></strong><span class="koboSpan" id="kobo.795.1">, where the host identifier is </span><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">53</span></strong><span class="koboSpan" id="kobo.797.1">. </span><span class="koboSpan" id="kobo.797.2">The resulting subnet mask would be </span><span class="No-Break"><span class="koboSpan" id="kobo.798.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.799.1">
192.168.1.0</span></pre> <p><span class="koboSpan" id="kobo.800.1">We dropped the least significant group in the subnet mask, representing the host identifier (</span><strong class="source-inline"><span class="koboSpan" id="kobo.801.1">53</span></strong><span class="koboSpan" id="kobo.802.1">), and replaced it with </span><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">0</span></strong><span class="koboSpan" id="kobo.804.1">. </span><span class="koboSpan" id="kobo.804.2">Here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.805.1">0</span></strong><span class="koboSpan" id="kobo.806.1"> indicates the starting address in the subnet. </span><span class="koboSpan" id="kobo.806.2">In other words, any host identifier value in the range of </span><strong class="source-inline"><span class="koboSpan" id="kobo.807.1">0</span></strong><span class="koboSpan" id="kobo.808.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.809.1">255</span></strong><span class="koboSpan" id="kobo.810.1"> is allowed in the subnetwork. </span><span class="koboSpan" id="kobo.810.2">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">192.168.1.92</span></strong><span class="koboSpan" id="kobo.812.1"> is a valid (and accepted) IP address in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">192.168.1.0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.814.1"> network.</span></span></p>
<p><span class="koboSpan" id="kobo.815.1">An alternative </span><a id="_idIndexMarker1024"/><span class="koboSpan" id="kobo.816.1">representation of subnets uses so-called </span><strong class="bold"><span class="koboSpan" id="kobo.817.1">Classless Inter-Domain Routing</span></strong><span class="koboSpan" id="kobo.818.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.819.1">CIDR</span></strong><span class="koboSpan" id="kobo.820.1">) notation. </span><span class="koboSpan" id="kobo.820.2">CIDR represents an IP address as the network address (</span><em class="italic"><span class="koboSpan" id="kobo.821.1">prefix</span></em><span class="koboSpan" id="kobo.822.1">) followed by a slash (</span><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">/</span></strong><span class="koboSpan" id="kobo.824.1">) and the </span><em class="italic"><span class="koboSpan" id="kobo.825.1">bit-length</span></em><span class="koboSpan" id="kobo.826.1"> of the prefix. </span><span class="koboSpan" id="kobo.826.2">In our case, the CIDR notation of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">192.168.1.0</span></strong><span class="koboSpan" id="kobo.828.1"> subnet </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">is this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.830.1">
192.168.1.0/24</span></pre> <p><span class="koboSpan" id="kobo.831.1">The first three groups in the network address make up </span><em class="italic"><span class="koboSpan" id="kobo.832.1">3 x 8 = 24</span></em><span class="koboSpan" id="kobo.833.1"> bits, hence the </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.835.1">24</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.836.1"> notation.</span></span></p>
<p><span class="koboSpan" id="kobo.837.1">Usually, </span><strong class="bold"><span class="koboSpan" id="kobo.838.1">subnets</span></strong><span class="koboSpan" id="kobo.839.1"> are </span><a id="_idIndexMarker1025"/><span class="koboSpan" id="kobo.840.1">planned with the host identifier address </span><a id="_idIndexMarker1026"/><span class="koboSpan" id="kobo.841.1">as a starting point. </span><span class="koboSpan" id="kobo.841.2">Back to our example, suppose we wanted our host identifier addresses in the network to start with </span><strong class="source-inline"><span class="koboSpan" id="kobo.842.1">100</span></strong><span class="koboSpan" id="kobo.843.1"> and end with </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">125</span></strong><span class="koboSpan" id="kobo.845.1">. </span><span class="koboSpan" id="kobo.845.2">Let’s look at how we can </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1">achieve this.</span></span></p>
<p><span class="koboSpan" id="kobo.847.1">First, let’s see the binary representation </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.849.1">192.168.1.100</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.850.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.851.1">
11000000.10101000.00000001.</span><strong class="bold"><span class="koboSpan" id="kobo.852.1">01100100</span></strong></pre> <p><span class="koboSpan" id="kobo.853.1">As you can see, the last group, highlighted in the preceding sequence, represents the host identifier (</span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">100</span></strong><span class="koboSpan" id="kobo.855.1">). </span><span class="koboSpan" id="kobo.855.2">Remember that we want the network to start with 100 and end with 125. </span><span class="koboSpan" id="kobo.855.3">This means that the closest binary value to the reserved 99 addresses that would not be permitted in our subnet is </span><em class="italic"><span class="koboSpan" id="kobo.856.1">96 = 64 + 32</span></em><span class="koboSpan" id="kobo.857.1">. </span><span class="koboSpan" id="kobo.857.2">The equivalent binary value for it is </span><span class="No-Break"><span class="koboSpan" id="kobo.858.1">as follows:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.859.1">111</span></strong><span class="koboSpan" id="kobo.860.1">00000</span></pre> <p><span class="koboSpan" id="kobo.861.1">In other words, the three most significant bits in the</span><a id="_idIndexMarker1027"/><span class="koboSpan" id="kobo.862.1"> host identifier are reserved. </span><strong class="bold"><span class="koboSpan" id="kobo.863.1">Reserved bits</span></strong><span class="koboSpan" id="kobo.864.1"> in the subnet representation are shown as </span><strong class="source-inline"><span class="koboSpan" id="kobo.865.1">1</span></strong><span class="koboSpan" id="kobo.866.1">. </span><span class="koboSpan" id="kobo.866.2">These bits would be added to the 24 already reserved bits of the network address (</span><strong class="source-inline"><span class="koboSpan" id="kobo.867.1">192.168.1</span></strong><span class="koboSpan" id="kobo.868.1">), accounting in total for </span><em class="italic"><span class="koboSpan" id="kobo.869.1">27 = 24 + 3</span></em><span class="koboSpan" id="kobo.870.1"> bits. </span><span class="koboSpan" id="kobo.870.2">Here’s the </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">equivalent representation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.872.1">
11111111.11111111.11111111.11100000</span></pre> <p><span class="koboSpan" id="kobo.873.1">Consequently, the resulting netmask is </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.875.1">
255.255.255.224</span></pre> <p><span class="koboSpan" id="kobo.876.1">The CIDR notation of the corresponding subnet is </span><span class="No-Break"><span class="koboSpan" id="kobo.877.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.878.1">
192.168.1.96/27</span></pre> <p><span class="koboSpan" id="kobo.879.1">The remaining five bits in the host identifier’s group account for </span><em class="italic"><span class="koboSpan" id="kobo.880.1">2^5 = 32</span></em><span class="koboSpan" id="kobo.881.1"> possible addresses in the subnet, starting with </span><strong class="source-inline"><span class="koboSpan" id="kobo.882.1">97</span></strong><span class="koboSpan" id="kobo.883.1">. </span><span class="koboSpan" id="kobo.883.2">This would limit the maximum host identifier value to </span><em class="italic"><span class="koboSpan" id="kobo.884.1">127 = 96 + 32 – 1</span></em><span class="koboSpan" id="kobo.885.1"> (we subtract 1 to account for the starting number of 97 included in the total of 32). </span><span class="koboSpan" id="kobo.885.2">In this range of 32 addresses, the last IP address is reserved as a </span><strong class="bold"><span class="koboSpan" id="kobo.886.1">broadcast address</span></strong><span class="koboSpan" id="kobo.887.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">shown</span></span><span class="No-Break"><a id="_idIndexMarker1028"/></span><span class="No-Break"><span class="koboSpan" id="kobo.889.1"> here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.890.1">
192.168.1.127</span></pre> <p><span class="koboSpan" id="kobo.891.1">A broadcast </span><a id="_idIndexMarker1029"/><span class="koboSpan" id="kobo.892.1">address is reserved as the highest number in a network </span><a id="_idIndexMarker1030"/><span class="koboSpan" id="kobo.893.1">or subnet, when applicable. </span><span class="koboSpan" id="kobo.893.2">Back to our example, excluding the broadcast address, the maximum host IP address in the subnet is </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.895.1">
192.168.1.126</span></pre> <p><span class="koboSpan" id="kobo.896.1">You can learn </span><a id="_idIndexMarker1031"/><span class="koboSpan" id="kobo.897.1">more about subnets in </span><em class="italic"><span class="koboSpan" id="kobo.898.1">RFC 1918</span></em><span class="koboSpan" id="kobo.899.1"> (</span><a href="https://tools.ietf.org/html/rfc1918"><span class="koboSpan" id="kobo.900.1">https://tools.ietf.org/html/rfc1918</span></a><span class="koboSpan" id="kobo.901.1">). </span><span class="koboSpan" id="kobo.901.2">Since we mentioned the broadcast address, let’s have a quick look </span><span class="No-Break"><span class="koboSpan" id="kobo.902.1">at it.</span></span></p>
<h3><span class="koboSpan" id="kobo.903.1">Broadcast addresses</span></h3>
<p><span class="koboSpan" id="kobo.904.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.905.1">broadcast address</span></strong><span class="koboSpan" id="kobo.906.1"> is a reserved IP address in a network or subnetwork that’s used to transmit a </span><a id="_idIndexMarker1032"/><span class="koboSpan" id="kobo.907.1">collective message (data) to all devices </span><a id="_idIndexMarker1033"/><span class="koboSpan" id="kobo.908.1">belonging to the network. </span><span class="koboSpan" id="kobo.908.2">The broadcast address is the last IP address in the network or subnet, </span><span class="No-Break"><span class="koboSpan" id="kobo.909.1">when applicable.</span></span></p>
<p><span class="koboSpan" id="kobo.910.1">For example, the </span><a id="_idIndexMarker1034"/><span class="koboSpan" id="kobo.911.1">broadcast address of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.912.1">192.168.1.0/24</span></strong><span class="koboSpan" id="kobo.913.1"> network is </span><strong class="source-inline"><span class="koboSpan" id="kobo.914.1">192.168.1.255</span></strong><span class="koboSpan" id="kobo.915.1">. </span><span class="koboSpan" id="kobo.915.2">In our example in the previous section, the broadcast address of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.916.1">192.168.1.96/27</span></strong><span class="koboSpan" id="kobo.917.1"> subnet is </span><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">192.168.1.127</span></strong><span class="koboSpan" id="kobo.919.1"> (</span><em class="italic"><span class="koboSpan" id="kobo.920.1">127 = 96 + 32 – </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.921.1">1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.923.1">For more information on broadcast addresses, you can refer </span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">to </span></span><a href="https://www.sciencedirect.com/topics/computer-science/broadcast-address"><span class="No-Break"><span class="koboSpan" id="kobo.925.1">https://www.sciencedirect.com/topics/computer-science/broadcast-address</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.926.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.927.1">IPv6 addresses</span></h3>
<p><span class="koboSpan" id="kobo.928.1">An IPv6 </span><a id="_idIndexMarker1035"/><span class="koboSpan" id="kobo.929.1">address is </span><a id="_idIndexMarker1036"/><span class="koboSpan" id="kobo.930.1">a 128-bit number (16 bytes) that’s usually expressed as up to eight groups of 2-byte (16 bits) numbers, separated by a column (</span><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">:</span></strong><span class="koboSpan" id="kobo.932.1">). </span><span class="koboSpan" id="kobo.932.2">Each number in these eight groups is a hexadecimal number, with values between </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">0000</span></strong><span class="koboSpan" id="kobo.934.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">FFFF</span></strong><span class="koboSpan" id="kobo.936.1">. </span><span class="koboSpan" id="kobo.936.2">Here’s an example of an </span><span class="No-Break"><span class="koboSpan" id="kobo.937.1">IPv6 address:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.938.1">
2001:0b8d:8a52:0000:0000:8b2d:0240:7235</span></pre> <p><span class="koboSpan" id="kobo.939.1">An equivalent representation of the preceding IPv6 address is </span><span class="No-Break"><span class="koboSpan" id="kobo.940.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.941.1">
2001:b8d:8a52::8b2d:240:7235/64</span></pre> <p><span class="koboSpan" id="kobo.942.1">In the second representation, the leading zeros are omitted, and the all-zero groups (</span><strong class="source-inline"><span class="koboSpan" id="kobo.943.1">0000:0000</span></strong><span class="koboSpan" id="kobo.944.1">) are collapsed into an empty group (</span><strong class="source-inline"><span class="koboSpan" id="kobo.945.1">::</span></strong><span class="koboSpan" id="kobo.946.1">). </span><span class="koboSpan" id="kobo.946.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">/64</span></strong><span class="koboSpan" id="kobo.948.1"> notation at the end represents the </span><strong class="bold"><span class="koboSpan" id="kobo.949.1">prefix length</span></strong><span class="koboSpan" id="kobo.950.1"> of the IPv6 </span><a id="_idIndexMarker1037"/><span class="koboSpan" id="kobo.951.1">address. </span><span class="koboSpan" id="kobo.951.2">The IPv6 prefix length is the equivalent of the CIDR notation of IPv4 subnets. </span><span class="koboSpan" id="kobo.951.3">For IPv6, the prefix length is expressed as an integer value between </span><strong class="source-inline"><span class="koboSpan" id="kobo.952.1">1</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.953.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.954.1">128</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.956.1">In our case, with a prefix length of 64 (</span><em class="italic"><span class="koboSpan" id="kobo.957.1">4 x 16</span></em><span class="koboSpan" id="kobo.958.1">) bits, the subnet looks </span><span class="No-Break"><span class="koboSpan" id="kobo.959.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.960.1">
2001:b8d:8a52::</span></pre> <p><span class="koboSpan" id="kobo.961.1">The subnet </span><a id="_idIndexMarker1038"/><span class="koboSpan" id="kobo.962.1">represents the leading four groups (</span><strong class="source-inline"><span class="koboSpan" id="kobo.963.1">2001</span></strong><span class="koboSpan" id="kobo.964.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.965.1">0b8d</span></strong><span class="koboSpan" id="kobo.966.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.967.1">8a52</span></strong><span class="koboSpan" id="kobo.968.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.969.1">0000</span></strong><span class="koboSpan" id="kobo.970.1">), which results in a total of </span><em class="italic"><span class="koboSpan" id="kobo.971.1">4 x 16 = 64</span></em><span class="koboSpan" id="kobo.972.1"> bits. </span><span class="koboSpan" id="kobo.972.2">In the shortened representation of the IPv6 subnet, the leading </span><a id="_idIndexMarker1039"/><span class="koboSpan" id="kobo.973.1">zeros are omitted and the all-zero group is collapsed </span><span class="No-Break"><span class="koboSpan" id="kobo.974.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.975.1">::</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.976.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.977.1">Subnetting with IPv6 is very similar to IPv4. </span><span class="koboSpan" id="kobo.977.2">We won’t go into the details here since the related concepts </span><a id="_idIndexMarker1040"/><span class="koboSpan" id="kobo.978.1">were presented in the </span><em class="italic"><span class="koboSpan" id="kobo.979.1">IPv4 addresses</span></em><span class="koboSpan" id="kobo.980.1"> section. </span><span class="koboSpan" id="kobo.980.2">For more information about IPv6, please refer to </span><em class="italic"><span class="koboSpan" id="kobo.981.1">RFC </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.982.1">2460</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.983.1"> (</span></span><a href="https://tools.ietf.org/html/rfc2460"><span class="No-Break"><span class="koboSpan" id="kobo.984.1">https://tools.ietf.org/html/rfc2460</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.985.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.986.1">Now that you’ve become familiar with IP addresses, it is fitting to introduce some of the related network constructs that serve the software implementation of IP addresses – that is, sockets </span><span class="No-Break"><span class="koboSpan" id="kobo.987.1">and ports.</span></span></p>
<h2 id="_idParaDest-132"><a id="_idTextAnchor148"/><span class="koboSpan" id="kobo.988.1">Sockets and ports</span></h2>
<p><span class="koboSpan" id="kobo.989.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.990.1">socket</span></strong><span class="koboSpan" id="kobo.991.1"> is a </span><a id="_idIndexMarker1041"/><span class="koboSpan" id="kobo.992.1">software data structure representing a network node for communication purposes. </span><span class="koboSpan" id="kobo.992.2">Although </span><a id="_idIndexMarker1042"/><span class="koboSpan" id="kobo.993.1">a programming concept, in Linux, a </span><strong class="bold"><span class="koboSpan" id="kobo.994.1">network socket</span></strong><span class="koboSpan" id="kobo.995.1"> is ultimately </span><a id="_idIndexMarker1043"/><span class="koboSpan" id="kobo.996.1">a file descriptor that’s controlled via a network </span><strong class="bold"><span class="koboSpan" id="kobo.997.1">application programming interface</span></strong><span class="koboSpan" id="kobo.998.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.999.1">API</span></strong><span class="koboSpan" id="kobo.1000.1">). </span><span class="koboSpan" id="kobo.1000.2">A socket is used by an application process for transmitting and receiving data. </span><span class="koboSpan" id="kobo.1000.3">An application can create and delete sockets. </span><span class="koboSpan" id="kobo.1000.4">A socket cannot be active (send or receive data) beyond the lifetime of the process that created </span><span class="No-Break"><span class="koboSpan" id="kobo.1001.1">the socket.</span></span></p>
<p><span class="koboSpan" id="kobo.1002.1">Network sockets operate at the </span><em class="italic"><span class="koboSpan" id="kobo.1003.1">transport-layer</span></em><span class="koboSpan" id="kobo.1004.1"> level in the OSI model. </span><span class="koboSpan" id="kobo.1004.2">There are two endpoints to a socket connection – a sender and a receiver. </span><span class="koboSpan" id="kobo.1004.3">Both the sender and receiver have an IP address. </span><span class="koboSpan" id="kobo.1004.4">Consequently, a critical piece of information in the socket data structure is the </span><em class="italic"><span class="koboSpan" id="kobo.1005.1">IP address</span></em><span class="koboSpan" id="kobo.1006.1"> of the endpoint that owns </span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">the socket.</span></span></p>
<p><span class="koboSpan" id="kobo.1008.1">Both endpoints </span><a id="_idIndexMarker1044"/><span class="koboSpan" id="kobo.1009.1">create and manage their sockets via the network processes using these sockets. </span><span class="koboSpan" id="kobo.1009.2">The sender and receiver may agree upon using multiple connections </span><a id="_idIndexMarker1045"/><span class="koboSpan" id="kobo.1010.1">to exchange data. </span><span class="koboSpan" id="kobo.1010.2">Some of these connections may even run in parallel. </span><span class="koboSpan" id="kobo.1010.3">How do we differentiate between these socket connections? </span><span class="koboSpan" id="kobo.1010.4">The IP address by itself is not sufficient, and this is where </span><strong class="bold"><span class="koboSpan" id="kobo.1011.1">ports</span></strong><span class="koboSpan" id="kobo.1012.1"> come </span><span class="No-Break"><span class="koboSpan" id="kobo.1013.1">into play.</span></span></p>
<p><span class="koboSpan" id="kobo.1014.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.1015.1">network port</span></strong><span class="koboSpan" id="kobo.1016.1"> is a </span><a id="_idIndexMarker1046"/><span class="koboSpan" id="kobo.1017.1">logical construct that’s used to identify a specific process or network service running on a host. </span><span class="koboSpan" id="kobo.1017.2">A port is an integer value in the range of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1018.1">0</span></strong><span class="koboSpan" id="kobo.1019.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1020.1">65535</span></strong><span class="koboSpan" id="kobo.1021.1">. </span><span class="koboSpan" id="kobo.1021.2">Usually, ports in the range of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1022.1">0</span></strong><span class="koboSpan" id="kobo.1023.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1024.1">1024</span></strong><span class="koboSpan" id="kobo.1025.1"> are assigned to the most used services on a system. </span><span class="koboSpan" id="kobo.1025.2">These </span><a id="_idIndexMarker1047"/><span class="koboSpan" id="kobo.1026.1">ports are also called </span><strong class="bold"><span class="koboSpan" id="kobo.1027.1">well-known ports</span></strong><span class="koboSpan" id="kobo.1028.1">. </span><span class="koboSpan" id="kobo.1028.2">Here are a few examples of well-known ports and the related network service </span><span class="No-Break"><span class="koboSpan" id="kobo.1029.1">for each:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1030.1">25</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1">: SMTP</span></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1032.1">21</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1033.1">: FTP</span></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1034.1">22</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1035.1">: SSH</span></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1036.1">53</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1037.1">: DNS</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1038.1">67</span></strong><span class="koboSpan" id="kobo.1039.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1040.1">68</span></strong><span class="koboSpan" id="kobo.1041.1">: DHCP (client = </span><strong class="source-inline"><span class="koboSpan" id="kobo.1042.1">68</span></strong><span class="koboSpan" id="kobo.1043.1">, server = </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1044.1">67</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1045.1">)</span></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1046.1">80</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1047.1">: HTTP</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1048.1">443</span></strong><span class="koboSpan" id="kobo.1049.1">: </span><strong class="bold"><span class="koboSpan" id="kobo.1050.1">HTTP </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1051.1">Secure</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1052.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1053.1">HTTPS</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1054.1">)</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1055.1">Port numbers </span><a id="_idIndexMarker1048"/><span class="koboSpan" id="kobo.1056.1">beyond </span><strong class="source-inline"><span class="koboSpan" id="kobo.1057.1">1024</span></strong><span class="koboSpan" id="kobo.1058.1"> are for general use and are also </span><a id="_idIndexMarker1049"/><span class="koboSpan" id="kobo.1059.1">known as </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1060.1">ephemeral ports</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1061.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1062.1">A port is always associated with an IP address. </span><span class="koboSpan" id="kobo.1062.2">Ultimately, a socket is a combination of an IP address and a port. </span><span class="koboSpan" id="kobo.1062.3">For more information on network sockets, you </span><a id="_idIndexMarker1050"/><span class="koboSpan" id="kobo.1063.1">can refer to </span><em class="italic"><span class="koboSpan" id="kobo.1064.1">RFC 147</span></em><span class="koboSpan" id="kobo.1065.1"> (</span><a href="https://tools.ietf.org/html/rfc147"><span class="koboSpan" id="kobo.1066.1">https://tools.ietf.org/html/rfc147</span></a><span class="koboSpan" id="kobo.1067.1">). </span><span class="koboSpan" id="kobo.1067.2">For </span><a id="_idIndexMarker1051"/><span class="koboSpan" id="kobo.1068.1">well-known ports, see </span><em class="italic"><span class="koboSpan" id="kobo.1069.1">RFC </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1070.1">1340</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1071.1"> (</span></span><a href="https://tools.ietf.org/html/rfc1340"><span class="No-Break"><span class="koboSpan" id="kobo.1072.1">https://tools.ietf.org/html/rfc1340</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1073.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1074.1">Now, let’s put the knowledge we’ve gained so far to work by looking at how to configure the local networking stack </span><span class="No-Break"><span class="koboSpan" id="kobo.1075.1">in Linux.</span></span></p>
<h2 id="_idParaDest-133"><a id="_idTextAnchor149"/><span class="koboSpan" id="kobo.1076.1">Linux network configuration</span></h2>
<p><span class="koboSpan" id="kobo.1077.1">This section describes the TCP/IP </span><strong class="bold"><span class="koboSpan" id="kobo.1078.1">network configuration</span></strong><span class="koboSpan" id="kobo.1079.1"> for Ubuntu and Fedora platforms, using </span><a id="_idIndexMarker1052"/><span class="koboSpan" id="kobo.1080.1">their latest released versions to date. </span><span class="koboSpan" id="kobo.1080.2">The same concepts would apply to most Linux distributions, albeit some of the network configuration utilities and files involved could </span><span class="No-Break"><span class="koboSpan" id="kobo.1081.1">be different.</span></span></p>
<p><span class="koboSpan" id="kobo.1082.1">We can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1083.1">ip</span></strong><span class="koboSpan" id="kobo.1084.1"> command-line utility to retrieve the system’s current IP addresses, </span><span class="No-Break"><span class="koboSpan" id="kobo.1085.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1086.1">
ip addr show</span></pre> <p><span class="koboSpan" id="kobo.1087.1">An example of the output is </span><span class="No-Break"><span class="koboSpan" id="kobo.1088.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer196">
<span class="koboSpan" id="kobo.1089.1"><img alt="Figure 7.7 – Retrieving the current IP addresses with the ip command" src="image/B19682_07_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1090.1">Figure 7.7 – Retrieving the current IP addresses with the ip command</span></p>
<p><span class="koboSpan" id="kobo.1091.1">We’ve highlighted some </span><a id="_idIndexMarker1053"/><span class="koboSpan" id="kobo.1092.1">relevant information here, such as the network interface ID (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1093.1">2: enp1s0</span></strong><span class="koboSpan" id="kobo.1094.1">) and the IP address with the subnet </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">prefix (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1096.1">192.168.122.117/24</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1097.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1098.1">We’ll look at Ubuntu’s network configuration next. </span><span class="koboSpan" id="kobo.1098.2">At the time of writing this book, the released version of Ubuntu is </span><span class="No-Break"><span class="koboSpan" id="kobo.1099.1">22.04.2 LTS.</span></span></p>
<h3><span class="koboSpan" id="kobo.1100.1">Ubuntu network configuration</span></h3>
<p><span class="koboSpan" id="kobo.1101.1">Ubuntu 22.04 provides the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1102.1">netplan</span></strong><span class="koboSpan" id="kobo.1103.1"> command-line utility for easy</span><a id="_idIndexMarker1054"/><span class="koboSpan" id="kobo.1104.1"> network configuration. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1105.1">netplan</span></strong><span class="koboSpan" id="kobo.1106.1"> uses a </span><strong class="bold"><span class="koboSpan" id="kobo.1107.1">YAML Ain’t Markup Language</span></strong><span class="koboSpan" id="kobo.1108.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1109.1">YAML</span></strong><span class="koboSpan" id="kobo.1110.1">) configuration file to </span><a id="_idIndexMarker1055"/><span class="koboSpan" id="kobo.1111.1">generate the network interface bindings. </span><span class="koboSpan" id="kobo.1111.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">netplan</span></strong><span class="koboSpan" id="kobo.1113.1"> configuration file(s) is in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1114.1">/etc/netplan/</span></strong><span class="koboSpan" id="kobo.1115.1"> directory, and we can access it by using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1116.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1117.1">
ls /etc/netplan/</span></pre> <p><span class="koboSpan" id="kobo.1118.1">In our case, the configuration file </span><span class="No-Break"><span class="koboSpan" id="kobo.1119.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1120.1">00-installer-config.yaml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1121.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1122.1">Changing the network configuration involves editing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1123.1">netplan</span></strong><span class="koboSpan" id="kobo.1124.1"> YAML configuration file. </span><span class="koboSpan" id="kobo.1124.2">As good practice, we should always make a backup of the current configuration file before making changes. </span><span class="koboSpan" id="kobo.1124.3">Changing a network configuration would most commonly involve setting up either a dynamic or a static IP address. </span><span class="koboSpan" id="kobo.1124.4">We will show you how to configure both types in the next few sections. </span><span class="koboSpan" id="kobo.1124.5">We’ll look at dynamic IP </span><span class="No-Break"><span class="koboSpan" id="kobo.1125.1">addressing first.</span></span></p>
<h4><span class="koboSpan" id="kobo.1126.1">Dynamic IP configuration</span></h4>
<p><span class="koboSpan" id="kobo.1127.1">To enable </span><a id="_idIndexMarker1056"/><span class="koboSpan" id="kobo.1128.1">a dynamic (DHCP) IP address, we must edit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1129.1">netplan</span></strong><span class="koboSpan" id="kobo.1130.1"> configuration file and set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1131.1">dhcp4</span></strong><span class="koboSpan" id="kobo.1132.1"> attribute to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1133.1">true</span></strong><span class="koboSpan" id="kobo.1134.1"> (as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1135.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1136.1">.8</span></em><span class="koboSpan" id="kobo.1137.1">) for the network interface of our choice (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1138.1">ens33</span></strong><span class="koboSpan" id="kobo.1139.1">, in our case). </span><span class="koboSpan" id="kobo.1139.2">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1140.1">00-installer-config.yaml</span></strong><span class="koboSpan" id="kobo.1141.1"> file with your text editor of choice (nano, in </span><span class="No-Break"><span class="koboSpan" id="kobo.1142.1">our case):</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1143.1">
sudo nano /etc/netplan/00-installer-config.yaml</span></pre> <p><span class="koboSpan" id="kobo.1144.1">Here’s the related configuration excerpt, with the relevant </span><span class="No-Break"><span class="koboSpan" id="kobo.1145.1">points highlighted:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer197">
<span class="koboSpan" id="kobo.1146.1"><img alt="Figure 7.8 – Enabling DHCP in the netplan configuration" src="image/B19682_07_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1147.1">Figure 7.8 – Enabling DHCP in the netplan configuration</span></p>
<p><span class="koboSpan" id="kobo.1148.1">After saving the configuration file, we can test the related changes with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1149.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1150.1">
sudo netplan try</span></pre> <p><span class="koboSpan" id="kobo.1151.1">We’ll get the </span><span class="No-Break"><span class="koboSpan" id="kobo.1152.1">following response:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer198">
<span class="koboSpan" id="kobo.1153.1"><img alt="Figure 7.9 – Testing and accepting the netplan configuration changes" src="image/B19682_07_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1154.1">Figure 7.9 – Testing and accepting the netplan configuration changes</span></p>
<p><span class="koboSpan" id="kobo.1155.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1156.1">netplan</span></strong><span class="koboSpan" id="kobo.1157.1"> keyword validates </span><a id="_idIndexMarker1057"/><span class="koboSpan" id="kobo.1158.1">the new configuration and prompts the user to accept the changes. </span><span class="koboSpan" id="kobo.1158.2">The following command applies the current changes to </span><span class="No-Break"><span class="koboSpan" id="kobo.1159.1">the system:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1160.1">
sudo netplan apply</span></pre> <p><span class="koboSpan" id="kobo.1161.1">Next, we will configure a static IP address </span><span class="No-Break"><span class="koboSpan" id="kobo.1162.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1163.1">netplan</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1164.1">.</span></span></p>
<h4><span class="koboSpan" id="kobo.1165.1">Static IP configuration</span></h4>
<p><span class="koboSpan" id="kobo.1166.1">To set the </span><a id="_idIndexMarker1058"/><span class="koboSpan" id="kobo.1167.1">static IP address of a network interface, we start by editing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1168.1">netplan</span></strong><span class="koboSpan" id="kobo.1169.1"> configuration YAML file, </span><span class="No-Break"><span class="koboSpan" id="kobo.1170.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1171.1">
sudo nano /etc/netplan/00-installer-config.yaml</span></pre> <p><span class="koboSpan" id="kobo.1172.1">Here’s a configuration example with a static IP address </span><span class="No-Break"><span class="koboSpan" id="kobo.1173.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1174.1">192.168.122.22/24</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1175.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer199">
<span class="koboSpan" id="kobo.1176.1"><img alt="Figure 7.10 – Static IP configuration example with netplan" src="image/B19682_07_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1177.1">Figure 7.10 – Static IP configuration example with netplan</span></p>
<p><span class="koboSpan" id="kobo.1178.1">After saving </span><a id="_idIndexMarker1059"/><span class="koboSpan" id="kobo.1179.1">the configuration, we can test and accept it, and then apply changes, as we did in the </span><em class="italic"><span class="koboSpan" id="kobo.1180.1">Dynamic IP</span></em><span class="koboSpan" id="kobo.1181.1"> section, with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1182.1">following commands:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1183.1">
sudo netplan try
sudo netplan apply</span></pre> <p><span class="koboSpan" id="kobo.1184.1">For more information on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1185.1">netplan</span></strong><span class="koboSpan" id="kobo.1186.1"> command-line utility, see </span><strong class="source-inline"><span class="koboSpan" id="kobo.1187.1">netplan --help</span></strong><span class="koboSpan" id="kobo.1188.1"> or the related system manual (</span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1189.1">man netplan</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1190.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1191.1">We’ll look </span><a id="_idIndexMarker1060"/><span class="koboSpan" id="kobo.1192.1">at the Fedora network configuration next. </span><span class="koboSpan" id="kobo.1192.2">At the time of writing, the current released version of Fedora </span><span class="No-Break"><span class="koboSpan" id="kobo.1193.1">is 37.</span></span></p>
<h3><span class="koboSpan" id="kobo.1194.1">Fedora/RHEL network configuration</span></h3>
<p><span class="koboSpan" id="kobo.1195.1">Starting with Fedora 33 and RHEL 9, network configuration files are </span><em class="italic"><span class="koboSpan" id="kobo.1196.1">no longer</span></em><span class="koboSpan" id="kobo.1197.1"> kept in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1198.1">/etc/sysconfig/network-scripts/</span></strong><span class="koboSpan" id="kobo.1199.1"> directory. </span><span class="koboSpan" id="kobo.1199.2">To learn more about the new configuration options, read the</span><a id="_idIndexMarker1061"/> <span class="No-Break"><span class="koboSpan" id="kobo.1200.1">following file:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1201.1">
cat /etc/sysconfig/network-scripts/readme-ifcfg-rh.txt</span></pre> <p><span class="koboSpan" id="kobo.1202.1">The preferred method to configure the network in Fedora/RHEL is to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">nmcli</span></strong><span class="koboSpan" id="kobo.1204.1"> utility. </span><span class="koboSpan" id="kobo.1204.2">This location is deprecated and no longer used by NetworkManager in Fedora; it can still be used, but we do not recommend it. </span><span class="koboSpan" id="kobo.1204.3">The new NetworkManager keyfiles are stored inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1205.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1206.1">etc/NetworkManager/system-connections/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1207.1"> directory.</span></span></p>
<p><span class="koboSpan" id="kobo.1208.1">Let’s use some basic </span><strong class="source-inline"><span class="koboSpan" id="kobo.1209.1">nmcli</span></strong><span class="koboSpan" id="kobo.1210.1"> commands to view information about our connections. </span><span class="koboSpan" id="kobo.1210.2">To learn about </span><strong class="source-inline"><span class="koboSpan" id="kobo.1211.1">nmcli</span></strong><span class="koboSpan" id="kobo.1212.1">, read the related manual pages. </span><span class="koboSpan" id="kobo.1212.2">First, let’s find information about our active connection using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1213.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1214.1">
nmcli connection show</span></pre> <p><span class="koboSpan" id="kobo.1215.1">The output will show basic</span><a id="_idIndexMarker1062"/><span class="koboSpan" id="kobo.1216.1"> information about the name of the connection, UUID, type, and the device used. </span><span class="koboSpan" id="kobo.1216.2">The following screenshot shows the relevant information on our Fedora </span><span class="No-Break"><span class="koboSpan" id="kobo.1217.1">37 VM:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer200">
<span class="koboSpan" id="kobo.1218.1"><img alt="Figure 7.11 – Using nmcli to view connection information" src="image/B19682_07_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1219.1">Figure 7.11 – Using nmcli to view connection information</span></p>
<p><span class="koboSpan" id="kobo.1220.1">Similar to Ubuntu, when using Fedora/RHEL, changing a network configuration would most commonly involve setting up either a dynamic or a static IP address. </span><span class="koboSpan" id="kobo.1220.2">We will show you how to configure both types in the following sections. </span><span class="koboSpan" id="kobo.1220.3">Let’s look at dynamic IP </span><span class="No-Break"><span class="koboSpan" id="kobo.1221.1">addressing first.</span></span></p>
<h4><span class="koboSpan" id="kobo.1222.1">Dynamic IP configuration</span></h4>
<p><span class="koboSpan" id="kobo.1223.1">To configure a dynamic IP address using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1224.1">ncmli</span></strong><span class="koboSpan" id="kobo.1225.1">, we can</span><a id="_idIndexMarker1063"/><span class="koboSpan" id="kobo.1226.1"> run the </span><span class="No-Break"><span class="koboSpan" id="kobo.1227.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1228.1">
sudo nmcli connection modify 'Wired connection 1' ipv4.method auto</span></pre> <p><span class="koboSpan" id="kobo.1229.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1230.1">ipv4.method auto</span></strong><span class="koboSpan" id="kobo.1231.1"> directive enables DHCP. </span><span class="koboSpan" id="kobo.1231.2">There is no output from the command; after execution, you will be returned to the prompt again. </span><span class="koboSpan" id="kobo.1231.3">You can check if the command worked by viewing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1232.1">/etc/NetworkManager/system-connections/</span></strong><span class="koboSpan" id="kobo.1233.1"> directory. </span><span class="koboSpan" id="kobo.1233.2">In our case, there is a new keyfile inside. </span><span class="koboSpan" id="kobo.1233.3">It has the same name as our connection. </span><span class="koboSpan" id="kobo.1233.4">The following is </span><span class="No-Break"><span class="koboSpan" id="kobo.1234.1">an excerpt:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer201">
<span class="koboSpan" id="kobo.1235.1"><img alt="Figure 7.12 – New configuration keyfile" src="image/B19682_07_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1236.1">Figure 7.12 – New configuration keyfile</span></p>
<p><span class="koboSpan" id="kobo.1237.1">Next, we’ll configure a</span><a id="_idIndexMarker1064"/><span class="koboSpan" id="kobo.1238.1"> static </span><span class="No-Break"><span class="koboSpan" id="kobo.1239.1">IP address.</span></span></p>
<h4><span class="koboSpan" id="kobo.1240.1">Static IP configuration</span></h4>
<p><span class="koboSpan" id="kobo.1241.1">To perform the equivalent </span><a id="_idIndexMarker1065"/><span class="koboSpan" id="kobo.1242.1">static IP address changes using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">ncmli</span></strong><span class="koboSpan" id="kobo.1244.1">, we need to run multiple commands. </span><span class="koboSpan" id="kobo.1244.2">First, we must set the static IP address, </span><span class="No-Break"><span class="koboSpan" id="kobo.1245.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1246.1">
sudo nmcli connection modify 'Wired connection 1' ipv4.address 192.168.122.3/24</span></pre> <p><span class="koboSpan" id="kobo.1247.1">If no previous static IP address has been configured, we recommend saving the preceding change before proceeding with the next steps. </span><span class="koboSpan" id="kobo.1247.2">The changes can be saved with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1248.1">following code:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1249.1">
sudo nmcli connection down 'Wired connection 1'
sudo nmcli connection up 'Wired connection 1'</span></pre> <p><span class="koboSpan" id="kobo.1250.1">Next, we must set the gateway and DNS IP addresses, </span><span class="No-Break"><span class="koboSpan" id="kobo.1251.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1252.1">
sudo nmcli connection modify 'Wired connection 1' ipv4.gateway 192.168.122.1
sudo nmcli connection modify 'Wired connection 1' ipv4.dns 8.8.8.8</span></pre> <p><span class="koboSpan" id="kobo.1253.1">Finally, we must disable </span><a id="_idIndexMarker1066"/><span class="koboSpan" id="kobo.1254.1">DHCP with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1255.1">following code:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1256.1">
sudo nmcli connection modify 'Wired connection 1' ipv4.method manual</span></pre> <p><span class="koboSpan" id="kobo.1257.1">After making these changes, we need to restart the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1258.1">'Wired connection 1'</span></strong><span class="koboSpan" id="kobo.1259.1"> network interface with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1260.1">following code:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1261.1">
sudo nmcli connection down 'Wired connection 1'
sudo nmcli connection up 'Wired connection 1'</span></pre> <p><span class="koboSpan" id="kobo.1262.1">Now, let’s see the results of all the commands we’ve performed. </span><span class="koboSpan" id="kobo.1262.2">After bringing the connection up again, let’s check the new IP address and the contents of the network keyfile. </span><span class="koboSpan" id="kobo.1262.3">The following figure shows the new IP we assigned to the system (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1263.1">192.168.122.3</span></strong><span class="koboSpan" id="kobo.1264.1">) by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1265.1">ip addr </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1266.1">show</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1"> command:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer202">
<span class="koboSpan" id="kobo.1268.1"><img alt="Figure 7.13 – Checking the new IP address" src="image/B19682_07_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1269.1">Figure 7.13 – Checking the new IP address</span></p>
<p><span class="koboSpan" id="kobo.1270.1">Now, let’s view the contents of the network keyfile to see the changes that were made for static IP configuration. </span><span class="koboSpan" id="kobo.1270.2">Remember that the location of the file </span><span class="No-Break"><span class="koboSpan" id="kobo.1271.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1272.1">/etc/NetworkManager/system-connections/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1273.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer203">
<span class="koboSpan" id="kobo.1274.1"><img alt="Figure 7.14 – New keyfile configuration for the static IP address" src="image/B19682_07_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1275.1">Figure 7.14 – New keyfile configuration for the static IP address</span></p>
<p><span class="koboSpan" id="kobo.1276.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1277.1">nmcli</span></strong><span class="koboSpan" id="kobo.1278.1"> utility is a powerful and useful one. </span><span class="koboSpan" id="kobo.1278.2">At the end of this chapter, we will provide you with some useful links</span><a id="_idIndexMarker1067"/><span class="koboSpan" id="kobo.1279.1"> for learning more about it. </span><span class="koboSpan" id="kobo.1279.2">Next, we’ll take a look at how to configure network services </span><span class="No-Break"><span class="koboSpan" id="kobo.1280.1">on openSUSE.</span></span></p>
<h3><span class="koboSpan" id="kobo.1281.1">openSUSE network configuration</span></h3>
<p><span class="koboSpan" id="kobo.1282.1">openSUSE provides several tools for network configuration: </span><strong class="bold"><span class="koboSpan" id="kobo.1283.1">Wicked</span></strong><span class="koboSpan" id="kobo.1284.1"> and NetworkManager. </span><span class="koboSpan" id="kobo.1284.2">According to the official SUSE documentation, Wicked is used for all types of machines, from servers to laptops and workstations, whereas NetworkManager is used only for laptop and workstation </span><a id="_idIndexMarker1068"/><span class="koboSpan" id="kobo.1285.1">setup and is not used for server setup. </span><span class="koboSpan" id="kobo.1285.2">However, in openSUSE Leap, Wicked is set up by default on both desktop or server configurations, and NetworkManager is set up by default on </span><span class="No-Break"><span class="koboSpan" id="kobo.1286.1">laptop configurations.</span></span></p>
<p><span class="koboSpan" id="kobo.1287.1">For example, on our main workstation (which is a laptop), if we want to see which service is running by default on openSUSE Leap, we can use the </span><span class="No-Break"><span class="koboSpan" id="kobo.1288.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1289.1">
sudo systemctl status network</span></pre> <p><span class="koboSpan" id="kobo.1290.1">The output will show us which service is running, and in our case, it </span><span class="No-Break"><span class="koboSpan" id="kobo.1291.1">is NetworkManager:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer204">
<span class="koboSpan" id="kobo.1292.1"><img alt="Figure 7.15 – Checking which network service is running in openSUSE" src="image/B19682_07_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1293.1">Figure 7.15 – Checking which network service is running in openSUSE</span></p>
<p><span class="koboSpan" id="kobo.1294.1">When running the same command inside an openSUSE Leap server VM, the result is different. </span><span class="koboSpan" id="kobo.1294.2">The output shows that Wicked is running by default. </span><span class="koboSpan" id="kobo.1294.3">The following screenshot shows </span><span class="No-Break"><span class="koboSpan" id="kobo.1295.1">an example:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer205">
<span class="koboSpan" id="kobo.1296.1"><img alt="Figure 7.16 – Wicked is running inside the openSUSE server" src="image/B19682_07_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1297.1">Figure 7.16 – Wicked is running inside the openSUSE server</span></p>
<p><span class="koboSpan" id="kobo.1298.1">As a result, we will perform</span><a id="_idIndexMarker1069"/><span class="koboSpan" id="kobo.1299.1"> all the examples in this section on an openSUSE Leap server VM, thus using Wicked as the default network configuration tool. </span><span class="koboSpan" id="kobo.1299.2">In the next section, we will configure dynamic IP on an </span><span class="No-Break"><span class="koboSpan" id="kobo.1300.1">openSUSE machine.</span></span></p>
<h4><span class="koboSpan" id="kobo.1301.1">Dynamic IP configuration</span></h4>
<p><span class="koboSpan" id="kobo.1302.1">Before setting anything up, let’s</span><a id="_idIndexMarker1070"/><span class="koboSpan" id="kobo.1303.1"> check for active connections and devices. </span><span class="koboSpan" id="kobo.1303.2">We can do this by using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1304.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1305.1">
wicked show all</span></pre> <p><span class="koboSpan" id="kobo.1306.1">The output will show all the active devices. </span><span class="koboSpan" id="kobo.1306.2">The following screenshot shows an excerpt from the output on </span><span class="No-Break"><span class="koboSpan" id="kobo.1307.1">our machine:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer206">
<span class="koboSpan" id="kobo.1308.1"><img alt="Figure 7.17 – Information about active devices" src="image/B19682_07_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1309.1">Figure 7.17 – Information about active devices</span></p>
<p><span class="koboSpan" id="kobo.1310.1">There are two active connections, one is loopback (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1311.1">lo</span></strong><span class="koboSpan" id="kobo.1312.1">) and the other is on the ethernet port (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1313.1">eth0</span></strong><span class="koboSpan" id="kobo.1314.1">). </span><span class="koboSpan" id="kobo.1314.2">We will only </span><a id="_idIndexMarker1071"/><span class="koboSpan" id="kobo.1315.1">show information related to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1316.1">eth0</span></strong><span class="koboSpan" id="kobo.1317.1">. </span><span class="koboSpan" id="kobo.1317.2">The location where Wicked stores configuration files in openSUSE is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1318.1">/etc/sysconfig/network</span></strong><span class="koboSpan" id="kobo.1319.1">. </span><span class="koboSpan" id="kobo.1319.2">If we do a listing of that directory, we will see that it is already populated with configuration files for </span><span class="No-Break"><span class="koboSpan" id="kobo.1320.1">existing connections:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer207">
<span class="koboSpan" id="kobo.1321.1"><img alt="Figure 7.18 – Location of the Wicked configuration files" src="image/B19682_07_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1322.1">Figure 7.18 – Location of the Wicked configuration files</span></p>
<p><span class="koboSpan" id="kobo.1323.1">In our case, and maybe it will be the same for you, the file we are interested in is called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1324.1">ifcfg-eth0</span></strong><span class="koboSpan" id="kobo.1325.1">; we can open it with a text editor or concatenate it. </span><span class="koboSpan" id="kobo.1325.2">Let’s take a look at the contents of </span><span class="No-Break"><span class="koboSpan" id="kobo.1326.1">the file:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer208">
<span class="koboSpan" id="kobo.1327.1"><img alt="Figure 7.19 – Information provided by the configuration file" src="image/B19682_07_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1328.1">Figure 7.19 – Information provided by the configuration file</span></p>
<p><span class="koboSpan" id="kobo.1329.1">As shown in the preceding screenshot, the information provided is rather scarce but relevant. </span><span class="koboSpan" id="kobo.1329.2">For a more detailed output, we can use the </span><span class="No-Break"><span class="koboSpan" id="kobo.1330.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1331.1">
sudo wicked show-config</span></pre> <p><span class="koboSpan" id="kobo.1332.1">This will provide much more</span><a id="_idIndexMarker1072"/><span class="koboSpan" id="kobo.1333.1"> relevant information directly to the monitor. </span><span class="koboSpan" id="kobo.1333.2">The following screenshot provides an excerpt from our output, with detailed IPv4 </span><span class="No-Break"><span class="koboSpan" id="kobo.1334.1">DHCP information:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer209">
<span class="koboSpan" id="kobo.1335.1"><img alt="Figure 7.20 – Detailed information provided by Wicked" src="image/B19682_07_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1336.1">Figure 7.20 – Detailed information provided by Wicked</span></p>
<p><span class="koboSpan" id="kobo.1337.1">To better understand this output, we recommend reading the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1338.1">config</span></strong><span class="koboSpan" id="kobo.1339.1"> file and, if available, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1340.1">dhcp</span></strong><span class="koboSpan" id="kobo.1341.1"> files inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1342.1">/etc/sysconfig/network</span></strong><span class="koboSpan" id="kobo.1343.1"> directory. </span><span class="koboSpan" id="kobo.1343.2">These files provide information about specific variables and default parameters needed for configuring the </span><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">network devices.</span></span></p>
<p><span class="koboSpan" id="kobo.1345.1">Dynamic IP addresses are usually set up by default when installing the operating system. </span><span class="koboSpan" id="kobo.1345.2">If yours is not configured, all you need to do is create a configuration file inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.1346.1">/etc/sysconfig/network</span></strong><span class="koboSpan" id="kobo.1347.1"> and give it a relevant name based on the device you are using to connect to the network, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1348.1">ifcfg-eth0</span></strong><span class="koboSpan" id="kobo.1349.1">. </span><span class="koboSpan" id="kobo.1349.2">Inside that file, you will have to provide just three lines, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1350.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1351.1">.19</span></em><span class="koboSpan" id="kobo.1352.1">. </span><span class="koboSpan" id="kobo.1352.2">The following commands are needed for the actions described in </span><span class="No-Break"><span class="koboSpan" id="kobo.1353.1">this paragraph:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1354.1">Check your device name using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1355.1">ip </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1356.1">addr</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1357.1"> command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1358.1">ip addr show</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1359.1">Create a configuration file inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1360.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1361.1">etc/sysconfig/network</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1362.1"> directory:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1363.1">sudo nano /etc/sysconfig/network/ifcfg-eth0</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1364.1">Provide relevant information for the </span><span class="No-Break"><span class="koboSpan" id="kobo.1365.1">DHCP configuration:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1366.1">BOOTPROTO='dhcp'</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1367.1">STARTMODE='auto'</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1368.1">ZONE=public</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1369.1">Restart the </span><span class="No-Break"><span class="koboSpan" id="kobo.1370.1">Wicked service:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1371.1">sudo systemctl restart wicked</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1372.1">Check for connectivity by using either a web browser on your system or the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1373.1">ping</span></strong><span class="koboSpan" id="kobo.1374.1"> command. </span><span class="koboSpan" id="kobo.1374.2">Here’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1375.1">an example:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1376.1">ping google.com</span></strong></pre></li> </ul>
<p><span class="koboSpan" id="kobo.1377.1">In the following section, we</span><a id="_idIndexMarker1073"/><span class="koboSpan" id="kobo.1378.1"> will show you how to set up a static </span><span class="No-Break"><span class="koboSpan" id="kobo.1379.1">IP configuration.</span></span></p>
<h4><span class="koboSpan" id="kobo.1380.1">Static IP configuration</span></h4>
<p><span class="koboSpan" id="kobo.1381.1">To set up a static IP configuration, you</span><a id="_idIndexMarker1074"/><span class="koboSpan" id="kobo.1382.1"> would need to manually provide variables for the configuration files. </span><span class="koboSpan" id="kobo.1382.2">These files are the same ones that were presented in the previous section. </span><span class="koboSpan" id="kobo.1382.3">The location of the files is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1383.1">/etc/sysconfig/network</span></strong><span class="koboSpan" id="kobo.1384.1">. </span><span class="koboSpan" id="kobo.1384.2">For example, you can create a new file for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1385.1">eth0</span></strong><span class="koboSpan" id="kobo.1386.1"> device connection and provide the information you want. </span><span class="koboSpan" id="kobo.1386.2">Let’s look at an example of using our openSUSE Leap server VM. </span><span class="koboSpan" id="kobo.1386.3">However, before doing this, we advise you to open the manual pages for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1387.1">ifcfg</span></strong><span class="koboSpan" id="kobo.1388.1"> utility as they provide valuable information on the variables used for </span><span class="No-Break"><span class="koboSpan" id="kobo.1389.1">this exercise.</span></span></p>
<p><span class="koboSpan" id="kobo.1390.1">Therefore, we will set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1391.1">ifcfg</span></strong><span class="koboSpan" id="kobo.1392.1"> configuration file </span><span class="No-Break"><span class="koboSpan" id="kobo.1393.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1394.1">First, we will check for the IP address and the network device name; in our case, the dynamically allocated IP is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1395.1">192.168.122.146</span></strong><span class="koboSpan" id="kobo.1396.1"> and the device’s name </span><span class="No-Break"><span class="koboSpan" id="kobo.1397.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1398.1">eth0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1399.1">:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer210">
<span class="koboSpan" id="kobo.1400.1"><img alt="Figure 7.21 – IP and device information" src="image/B19682_07_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1401.1">Figure 7.21 – IP and device information</span></p>
<ul>
<li><span class="koboSpan" id="kobo.1402.1">Go to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1403.1">/etc/sysconfig/network</span></strong><span class="koboSpan" id="kobo.1404.1"> directory and edit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1405.1">ifcfg-eth0</span></strong><span class="koboSpan" id="kobo.1406.1"> file; we will use the following variables</span><a id="_idIndexMarker1075"/><span class="koboSpan" id="kobo.1407.1"> for static </span><span class="No-Break"><span class="koboSpan" id="kobo.1408.1">IP configuration:</span></span><ul><li><strong class="source-inline"><span class="koboSpan" id="kobo.1409.1">BOOTPROTO='static'</span></strong><span class="koboSpan" id="kobo.1410.1">: This allows us to use a fixed IP address that will be provided by using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1411.1">IPADDR variable</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1412.1">STARTMODE='auto'</span></strong><span class="koboSpan" id="kobo.1413.1">: The interface will be automatically enabled </span><span class="No-Break"><span class="koboSpan" id="kobo.1414.1">on boot</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1415.1">IPADDR='192.168.122.144'</span></strong><span class="koboSpan" id="kobo.1416.1">: The IP address we choose for </span><span class="No-Break"><span class="koboSpan" id="kobo.1417.1">the machine</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1418.1">ZONE='public'</span></strong><span class="koboSpan" id="kobo.1419.1">: The zone used by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1420.1">firewalld</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1421.1"> utility</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1422.1">PREFIXLEN='24'</span></strong><span class="koboSpan" id="kobo.1423.1">: The number of bits in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1424.1">IPADDR</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1425.1"> variable</span></span></li></ul><p class="list-inset"><span class="koboSpan" id="kobo.1426.1">This will look </span><span class="No-Break"><span class="koboSpan" id="kobo.1427.1">as follows:</span></span></p></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer211">
<span class="koboSpan" id="kobo.1428.1"><img alt="Figure 7.22 – New variables for static IP configuration" src="image/B19682_07_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1429.1">Figure 7.22 – New variables for static IP configuration</span></p>
<ul>
<li><span class="koboSpan" id="kobo.1430.1">Save the changes to the new file and restart the </span><span class="No-Break"><span class="koboSpan" id="kobo.1431.1">Wicked daemon:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1432.1">sudo systemctl restart wickedd.service</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1433.1">Enable the interface so that the </span><span class="No-Break"><span class="koboSpan" id="kobo.1434.1">changes appear:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1435.1">sudo wicked ifup eth0</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1436.1">Run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1437.1">ip addr show</span></strong><span class="koboSpan" id="kobo.1438.1"> command </span><a id="_idIndexMarker1076"/><span class="koboSpan" id="kobo.1439.1">again to check for the new </span><span class="No-Break"><span class="koboSpan" id="kobo.1440.1">IP address:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer212">
<span class="koboSpan" id="kobo.1441.1"><img alt="Figure 7.23 – New IP address assigned to eth0" src="image/B19682_07_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1442.1">Figure 7.23 – New IP address assigned to eth0</span></p>
<p><span class="koboSpan" id="kobo.1443.1">At this point, you know how to configure networking devices in all major Linux distributions, using their preferred utilities. </span><span class="koboSpan" id="kobo.1443.2">We’ve merely scratched the surface of this matter, but we’ve provided sufficient information for you to start working with network interfaces in Linux. </span><span class="koboSpan" id="kobo.1443.3">For more information, feel free to read the manual pages freely provided with your operating system. </span><span class="koboSpan" id="kobo.1443.4">In the next section, we will approach the matter of </span><span class="No-Break"><span class="koboSpan" id="kobo.1444.1">hostname configuration.</span></span></p>
<h3><span class="koboSpan" id="kobo.1445.1">Hostname configuration</span></h3>
<p><span class="koboSpan" id="kobo.1446.1">To retrieve </span><a id="_idIndexMarker1077"/><span class="koboSpan" id="kobo.1447.1">the current hostname on a Linux machine, we can use either the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1448.1">hostname</span></strong><span class="koboSpan" id="kobo.1449.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1450.1">hostnamectl</span></strong><span class="koboSpan" id="kobo.1451.1"> command, </span><span class="No-Break"><span class="koboSpan" id="kobo.1452.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1453.1">
hostname</span></pre> <p><span class="koboSpan" id="kobo.1454.1">The most convenient way to change the hostname is with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1455.1">hostnamectl</span></strong><span class="koboSpan" id="kobo.1456.1"> command. </span><span class="koboSpan" id="kobo.1456.2">We can change the hostname to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1457.1">earth</span></strong><span class="koboSpan" id="kobo.1458.1"> using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1459.1">set-hostname</span></strong><span class="koboSpan" id="kobo.1460.1"> parameter of </span><span class="No-Break"><span class="koboSpan" id="kobo.1461.1">the command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1462.1">
sudo hostnamectl set-hostname earth</span></pre> <p><span class="koboSpan" id="kobo.1463.1">Let’s verify the hostname change with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1464.1">hostname</span></strong><span class="koboSpan" id="kobo.1465.1"> command again. </span><span class="koboSpan" id="kobo.1465.2">You could use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1466.1">hostnamectl</span></strong><span class="koboSpan" id="kobo.1467.1"> command to verify the hostname. </span><span class="koboSpan" id="kobo.1467.2">The output of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1468.1">hostnamectl</span></strong><span class="koboSpan" id="kobo.1469.1"> command provides more detailed information compared to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1470.1">hostname</span></strong><span class="koboSpan" id="kobo.1471.1"> command, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1472.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer213">
<span class="koboSpan" id="kobo.1473.1"><img alt="Figure 7.24 – Retrieving the current hostname with the different commands" src="image/B19682_07_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1474.1">Figure 7.24 – Retrieving the current hostname with the different commands</span></p>
<p><span class="koboSpan" id="kobo.1475.1">Alternatively, we </span><a id="_idIndexMarker1078"/><span class="koboSpan" id="kobo.1476.1">can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1477.1">hostname</span></strong><span class="koboSpan" id="kobo.1478.1"> command to change the hostname </span><em class="italic"><span class="koboSpan" id="kobo.1479.1">temporarily</span></em><span class="koboSpan" id="kobo.1480.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1481.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1482.1">
sudo hostname jupiter</span></pre> <p><span class="koboSpan" id="kobo.1483.1">However, this change will not survive a reboot unless we also change the hostname in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1484.1">/etc/hostname</span></strong><span class="koboSpan" id="kobo.1485.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1486.1">/etc/hosts</span></strong><span class="koboSpan" id="kobo.1487.1"> files. </span><span class="koboSpan" id="kobo.1487.2">When editing these two files, change your hostname accordingly. </span><span class="koboSpan" id="kobo.1487.3">The following screenshot shows the succession </span><span class="No-Break"><span class="koboSpan" id="kobo.1488.1">of commands:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer214">
<span class="koboSpan" id="kobo.1489.1"><img alt="Figure 7.25 – The /etc/hostname and /etc/hosts files" src="image/B19682_07_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1490.1">Figure 7.25 – The /etc/hostname and /etc/hosts files</span></p>
<p><span class="koboSpan" id="kobo.1491.1">After the hostname reconfiguration, a logout followed by a login would usually reflect the changes. </span><span class="koboSpan" id="kobo.1491.2">Hostnames are important for coherent network management, where each system on the network should have relevant hostnames set up. </span><span class="koboSpan" id="kobo.1491.3">In the following section, you’ll learn about network services </span><span class="No-Break"><span class="koboSpan" id="kobo.1492.1">in Linux.</span></span></p>
<h1 id="_idParaDest-134"><a id="_idTextAnchor150"/><span class="koboSpan" id="kobo.1493.1">Working with network services</span></h1>
<p><span class="koboSpan" id="kobo.1494.1">In this section, we’ll enumerate some of the most common network services running on Linux. </span><span class="koboSpan" id="kobo.1494.2">Not all </span><a id="_idIndexMarker1079"/><span class="koboSpan" id="kobo.1495.1">the services mentioned here are installed or enabled by default on your Linux platform of choice. </span><a href="B19682_09.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1496.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.1497.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1498.1">Securing</span></em><em class="italic"><span class="koboSpan" id="kobo.1499.1"> Linux</span></em><span class="koboSpan" id="kobo.1500.1">, and </span><a href="B19682_10.xhtml#_idTextAnchor212"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1501.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.1502.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1503.1">Disaster Recovery, Diagnostics, and Troubleshooting</span></em><span class="koboSpan" id="kobo.1504.1">, will dive deeper into how to install and configure some of them. </span><span class="koboSpan" id="kobo.1504.2">Our focus in this section remains on what these network services are, how they work, and the networking protocols they use </span><span class="No-Break"><span class="koboSpan" id="kobo.1505.1">for communication.</span></span></p>
<p><span class="koboSpan" id="kobo.1506.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.1507.1">network service</span></strong><span class="koboSpan" id="kobo.1508.1"> is typically a system </span><a id="_idIndexMarker1080"/><span class="koboSpan" id="kobo.1509.1">process that implements application layer (OSI </span><em class="italic"><span class="koboSpan" id="kobo.1510.1">Layer 7</span></em><span class="koboSpan" id="kobo.1511.1">) functionality for data communication purposes. </span><span class="koboSpan" id="kobo.1511.2">Network services are usually designed as peer-to-peer or </span><span class="No-Break"><span class="koboSpan" id="kobo.1512.1">client-server architectures.</span></span></p>
<p><span class="koboSpan" id="kobo.1513.1">In peer-to-peer networking, multiple network nodes each run their own equally privileged instance of a network service while sharing and exchanging a common set of data. </span><span class="koboSpan" id="kobo.1513.2">Take, for example, a network of DNS servers, all sharing and updating their domain </span><span class="No-Break"><span class="koboSpan" id="kobo.1514.1">name records.</span></span></p>
<p><span class="koboSpan" id="kobo.1515.1">Client-server networking usually involves one or more server nodes on a network and multiple clients communicating with any of these servers. </span><span class="koboSpan" id="kobo.1515.2">An example of a client-server network service is SSH. </span><span class="koboSpan" id="kobo.1515.3">An SSH client connects to a remote SSH server via a secure Terminal session, perhaps for remote </span><span class="No-Break"><span class="koboSpan" id="kobo.1516.1">administration purposes.</span></span></p>
<p><span class="koboSpan" id="kobo.1517.1">Each of the following subsections briefly describes a network service, and we encourage you to explore topics related to these network services in </span><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1518.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.1519.1"> or other relevant titles recommended at the end of this chapter. </span><span class="koboSpan" id="kobo.1519.2">Let’s start with </span><span class="No-Break"><span class="koboSpan" id="kobo.1520.1">DHCP servers.</span></span></p>
<h2 id="_idParaDest-135"><a id="_idTextAnchor151"/><span class="koboSpan" id="kobo.1521.1">DHCP servers</span></h2>
<p><span class="koboSpan" id="kobo.1522.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.1523.1">DHCP server</span></strong><span class="koboSpan" id="kobo.1524.1"> uses the DHCP protocol to enable devices on a network to request an IP address that’s been </span><a id="_idIndexMarker1081"/><span class="koboSpan" id="kobo.1525.1">assigned dynamically. </span><span class="koboSpan" id="kobo.1525.2">The DHCP protocol was briefly described in the </span><em class="italic"><span class="koboSpan" id="kobo.1526.1">TCP/IP protocols</span></em><span class="koboSpan" id="kobo.1527.1"> section earlier in </span><span class="No-Break"><span class="koboSpan" id="kobo.1528.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.1529.1">A computer </span><a id="_idIndexMarker1082"/><span class="koboSpan" id="kobo.1530.1">or device requesting a DHCP service sends out a broadcast message (or query) on the network to locate a DHCP server, which, in turn, provides the requested IP address and other information. </span><span class="koboSpan" id="kobo.1530.2">Communication between the DHCP client (device) and the server uses the </span><span class="No-Break"><span class="koboSpan" id="kobo.1531.1">DHCP protocol.</span></span></p>
<p><span class="koboSpan" id="kobo.1532.1">The DHCP protocol’s initial </span><em class="italic"><span class="koboSpan" id="kobo.1533.1">discovery</span></em><span class="koboSpan" id="kobo.1534.1"> workflow between a client and a server operates at the data link layer (</span><em class="italic"><span class="koboSpan" id="kobo.1535.1">Layer 2</span></em><span class="koboSpan" id="kobo.1536.1">) in the OSI model. </span><span class="koboSpan" id="kobo.1536.2">Since Layer 2 uses network frames as PDUs, the DHCP discovery packets cannot transcend the local network boundary. </span><span class="koboSpan" id="kobo.1536.3">In other words, a DHCP client can only initiate communication with a </span><em class="italic"><span class="koboSpan" id="kobo.1537.1">local</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.1538.1">DHCP server.</span></span></p>
<p><span class="koboSpan" id="kobo.1539.1">After the initial </span><em class="italic"><span class="koboSpan" id="kobo.1540.1">handshake</span></em><span class="koboSpan" id="kobo.1541.1"> (on Layer 2), DHCP turns to UDP as its transport protocol, using datagram sockets (</span><em class="italic"><span class="koboSpan" id="kobo.1542.1">Layer 4</span></em><span class="koboSpan" id="kobo.1543.1">). </span><span class="koboSpan" id="kobo.1543.2">Since UDP is a connectionless protocol, a DHCP client and server exchange messages without a prior arrangement. </span><span class="koboSpan" id="kobo.1543.3">Consequently, both endpoints (client and server) require a well-known DHCP communication port for the back-and-forth data exchange. </span><span class="koboSpan" id="kobo.1543.4">These are the well-known ports </span><strong class="source-inline"><span class="koboSpan" id="kobo.1544.1">68</span></strong><span class="koboSpan" id="kobo.1545.1"> (for a DHCP server) and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1546.1">67</span></strong><span class="koboSpan" id="kobo.1547.1"> (for a </span><span class="No-Break"><span class="koboSpan" id="kobo.1548.1">DHCP client).</span></span></p>
<p><span class="koboSpan" id="kobo.1549.1">A DHCP server maintains a collection of IP addresses and other client configuration data (such as MAC addresses and domain server addresses) for each device on the network requesting a </span><span class="No-Break"><span class="koboSpan" id="kobo.1550.1">DHCP service.</span></span></p>
<p><span class="koboSpan" id="kobo.1551.1">DHCP servers </span><a id="_idIndexMarker1083"/><span class="koboSpan" id="kobo.1552.1">use a </span><strong class="bold"><span class="koboSpan" id="kobo.1553.1">leasing mechanism</span></strong><span class="koboSpan" id="kobo.1554.1"> to assign IP addresses dynamically. </span><span class="koboSpan" id="kobo.1554.2">Leasing an IP address is subject to a </span><strong class="bold"><span class="koboSpan" id="kobo.1555.1">lease time</span></strong><span class="koboSpan" id="kobo.1556.1">, either finite or infinite. </span><span class="koboSpan" id="kobo.1556.2">When the lease of an IP address expires, the DHCP server may reassign it to a different client upon request. </span><span class="koboSpan" id="kobo.1556.3">A device would hold on to its dynamic IP address by regularly requesting a </span><strong class="bold"><span class="koboSpan" id="kobo.1557.1">lease renewal</span></strong><span class="koboSpan" id="kobo.1558.1"> from the </span><a id="_idIndexMarker1084"/><span class="koboSpan" id="kobo.1559.1">DHCP server. </span><span class="koboSpan" id="kobo.1559.2">Failing to do so would result in the potential loss of the device’s dynamic IP address. </span><span class="koboSpan" id="kobo.1559.3">A late (or post-lease) DHCP request would possibly result in a new IP address being acquired if the previous address had already been allocated by the </span><span class="No-Break"><span class="koboSpan" id="kobo.1560.1">DHCP server.</span></span></p>
<p><span class="koboSpan" id="kobo.1561.1">A simple way to query the DHCP server from a Linux machine is by invoking the </span><span class="No-Break"><span class="koboSpan" id="kobo.1562.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1563.1">
ip route</span></pre> <p><span class="koboSpan" id="kobo.1564.1">This is the output of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1565.1">preceding command:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer215">
<span class="koboSpan" id="kobo.1566.1"><img alt="Figure 7.26 – Querying the IP route for DHCP information" src="image/B19682_07_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1567.1">Figure 7.26 – Querying the IP route for DHCP information</span></p>
<p><span class="koboSpan" id="kobo.1568.1">The first line of the output provides the DHCP </span><span class="No-Break"><span class="koboSpan" id="kobo.1569.1">server (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1570.1">192.168.122.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1571.1">).</span></span></p>
<p><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1572.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.1573.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1574.1">Configuring Linux Servers</span></em><span class="koboSpan" id="kobo.1575.1">, will further go into the practical details of installing and configuring a </span><span class="No-Break"><span class="koboSpan" id="kobo.1576.1">DHCP server.</span></span></p>
<p><span class="koboSpan" id="kobo.1577.1">For more </span><a id="_idIndexMarker1085"/><span class="koboSpan" id="kobo.1578.1">information on DHCP, please refer to </span><em class="italic"><span class="koboSpan" id="kobo.1579.1">RFC </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1580.1">2131</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1581.1"> (</span></span><a href="https://tools.ietf.org/html/rfc2131"><span class="No-Break"><span class="koboSpan" id="kobo.1582.1">https://tools.ietf.org/html/rfc2131</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1583.1">).</span></span></p>
<h2 id="_idParaDest-136"><a id="_idTextAnchor152"/><span class="koboSpan" id="kobo.1584.1">DNS servers</span></h2>
<p><span class="koboSpan" id="kobo.1585.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.1586.1">Domain Name Server</span></strong><span class="koboSpan" id="kobo.1587.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1588.1">DNS</span></strong><span class="koboSpan" id="kobo.1589.1">), also </span><a id="_idIndexMarker1086"/><span class="koboSpan" id="kobo.1590.1">known as a </span><strong class="bold"><span class="koboSpan" id="kobo.1591.1">name server</span></strong><span class="koboSpan" id="kobo.1592.1">, provides </span><a id="_idIndexMarker1087"/><span class="koboSpan" id="kobo.1593.1">a name-resolution mechanism by converting a hostname (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1594.1">wikipedia.org</span></strong><span class="koboSpan" id="kobo.1595.1">) into an IP address (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1596.1">208.80.154.224</span></strong><span class="koboSpan" id="kobo.1597.1">). </span><span class="koboSpan" id="kobo.1597.2">The name-resolution protocol is DNS, briefly described in the </span><em class="italic"><span class="koboSpan" id="kobo.1598.1">TCP/IP protocols</span></em><span class="koboSpan" id="kobo.1599.1"> section </span><a id="_idIndexMarker1088"/><span class="koboSpan" id="kobo.1600.1">earlier in this chapter. </span><span class="koboSpan" id="kobo.1600.2">In a DNS-managed TCP/IP network, computers and devices can also identify and communicate with each other via hostnames, not just </span><span class="No-Break"><span class="koboSpan" id="kobo.1601.1">IP addresses.</span></span></p>
<p><span class="koboSpan" id="kobo.1602.1">As a reasonable analogy, DNS very much resembles an address book. </span><span class="koboSpan" id="kobo.1602.2">Hostnames are relatively </span><a id="_idIndexMarker1089"/><span class="koboSpan" id="kobo.1603.1">easier to remember than IP addresses. </span><span class="koboSpan" id="kobo.1603.2">Even in a local network, with only a few computers and devices connected, it would be rather difficult to identify (or memorize) any of the hosts by simply using their IP address. </span><span class="koboSpan" id="kobo.1603.3">The internet relies on a globally distributed network of </span><span class="No-Break"><span class="koboSpan" id="kobo.1604.1">DNS servers.</span></span></p>
<p><span class="koboSpan" id="kobo.1605.1">There are </span><a id="_idIndexMarker1090"/><span class="koboSpan" id="kobo.1606.1">four different types of DNS servers: </span><strong class="bold"><span class="koboSpan" id="kobo.1607.1">recursive servers</span></strong><span class="koboSpan" id="kobo.1608.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.1609.1">root servers</span></strong><span class="koboSpan" id="kobo.1610.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.1611.1">top-level domain</span></strong><span class="koboSpan" id="kobo.1612.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1613.1">TLD</span></strong><span class="koboSpan" id="kobo.1614.1">) </span><strong class="bold"><span class="koboSpan" id="kobo.1615.1">servers</span></strong><span class="koboSpan" id="kobo.1616.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.1617.1">authoritative servers</span></strong><span class="koboSpan" id="kobo.1618.1">. </span><span class="koboSpan" id="kobo.1618.2">All these </span><a id="_idIndexMarker1091"/><span class="koboSpan" id="kobo.1619.1">DNS server </span><a id="_idIndexMarker1092"/><span class="koboSpan" id="kobo.1620.1">types work together to bring you the internet </span><a id="_idIndexMarker1093"/><span class="koboSpan" id="kobo.1621.1">as you experience it in </span><span class="No-Break"><span class="koboSpan" id="kobo.1622.1">your browser.</span></span></p>
<p><span class="koboSpan" id="kobo.1623.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.1624.1">recursive DNS server</span></strong><span class="koboSpan" id="kobo.1625.1"> is a </span><a id="_idIndexMarker1094"/><span class="koboSpan" id="kobo.1626.1">resolver that helps you find the destination (IP) of a website you search for. </span><span class="koboSpan" id="kobo.1626.2">When you perform a lookup operation, a recursive DNS server is connected to different DNS servers to find the IP address that you are looking for and return it to you in the form of a website. </span><span class="koboSpan" id="kobo.1626.3">Recursive DNS lookups are faster as they cache every query that they perform. </span><span class="koboSpan" id="kobo.1626.4">In a recursive type of query, the DNS server calls itself and does the recursion while still sending the request to another DNS server to find </span><span class="No-Break"><span class="koboSpan" id="kobo.1627.1">the answer.</span></span></p>
<p><span class="koboSpan" id="kobo.1628.1">In contrast, an </span><strong class="bold"><span class="koboSpan" id="kobo.1629.1">iterative DNS</span></strong><span class="koboSpan" id="kobo.1630.1"> lookup </span><a id="_idIndexMarker1095"/><span class="koboSpan" id="kobo.1631.1">is done by every DNS server directly, without using caching. </span><span class="koboSpan" id="kobo.1631.2">For example, in an iterative query, each DNS server responds with the address of another DNS server, until one of them has the matching IP address for the hostname in question and responds to the client. </span><span class="koboSpan" id="kobo.1631.3">For more details on DNS server types, please check out the following Cloudflare learning </span><span class="No-Break"><span class="koboSpan" id="kobo.1632.1">solution: </span></span><a href="https://www.cloudflare.com/learning/dns/what-is-dns/"><span class="No-Break"><span class="koboSpan" id="kobo.1633.1">https://www.cloudflare.com/learning/dns/what-is-dns/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1634.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1635.1">DNS servers </span><a id="_idIndexMarker1096"/><span class="koboSpan" id="kobo.1636.1">maintain (and possibly share) a </span><a id="_idIndexMarker1097"/><span class="koboSpan" id="kobo.1637.1">collection of </span><strong class="bold"><span class="koboSpan" id="kobo.1638.1">database files</span></strong><span class="koboSpan" id="kobo.1639.1">, also known as </span><strong class="bold"><span class="koboSpan" id="kobo.1640.1">zone files</span></strong><span class="koboSpan" id="kobo.1641.1">, which are</span><a id="_idIndexMarker1098"/><span class="koboSpan" id="kobo.1642.1"> typically simple plaintext ASCII files that store the name and IP address mapping. </span><span class="koboSpan" id="kobo.1642.2">In Linux, one such DNS resolver file </span><span class="No-Break"><span class="koboSpan" id="kobo.1643.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1644.1">/etc/resolv.conf</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1645.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1646.1">To query </span><a id="_idIndexMarker1099"/><span class="koboSpan" id="kobo.1647.1">the DNS server managing the local machine, we can query the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1648.1">/etc/resolv.conf</span></strong><span class="koboSpan" id="kobo.1649.1"> file by running the </span><span class="No-Break"><span class="koboSpan" id="kobo.1650.1">following code:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1651.1">
cat /etc/resolv.conf | grep nameserver</span></pre> <p><span class="koboSpan" id="kobo.1652.1">The preceding code </span><a id="_idIndexMarker1100"/><span class="koboSpan" id="kobo.1653.1">yields the </span><span class="No-Break"><span class="koboSpan" id="kobo.1654.1">following output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer216">
<span class="koboSpan" id="kobo.1655.1"><img alt="Figure 7.27 – Querying DNS server using /etc/resolv.conf" src="image/B19682_07_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1656.1">Figure 7.27 – Querying DNS server using /etc/resolv.conf</span></p>
<p><span class="koboSpan" id="kobo.1657.1">A simple way to query name-server data for an arbitrary host on a network is by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1658.1">nslookup</span></strong><span class="koboSpan" id="kobo.1659.1"> tool. </span><span class="koboSpan" id="kobo.1659.2">If you don’t have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1660.1">nslookup</span></strong><span class="koboSpan" id="kobo.1661.1"> utility installed on your system, you may do so with the commands </span><span class="No-Break"><span class="koboSpan" id="kobo.1662.1">outlined here.</span></span></p>
<p><span class="koboSpan" id="kobo.1663.1">On Ubuntu/Debian, run the </span><span class="No-Break"><span class="koboSpan" id="kobo.1664.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1665.1">
sudo apt install dnsutils</span></pre> <p><span class="koboSpan" id="kobo.1666.1">On Fedora, run </span><span class="No-Break"><span class="koboSpan" id="kobo.1667.1">this command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1668.1">
sudo dnf install bind-utils</span></pre> <p><span class="koboSpan" id="kobo.1669.1">For example, to query the name-server information for a computer named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1670.1">neptune.local</span></strong><span class="koboSpan" id="kobo.1671.1"> in our local network, we can run the </span><span class="No-Break"><span class="koboSpan" id="kobo.1672.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1673.1">
nslookup neptune.local</span></pre> <p><span class="koboSpan" id="kobo.1674.1">The output is </span><span class="No-Break"><span class="koboSpan" id="kobo.1675.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer217">
<span class="koboSpan" id="kobo.1676.1"><img alt="Figure 7.28 – Querying name-server information with nslookup" src="image/B19682_07_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1677.1">Figure 7.28 – Querying name-server information with nslookup</span></p>
<p><span class="koboSpan" id="kobo.1678.1">We can also use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1679.1">nslookup</span></strong><span class="koboSpan" id="kobo.1680.1"> tool interactively. </span><span class="koboSpan" id="kobo.1680.2">For example, to query the name-server information for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1681.1">wikipedia.org</span></strong><span class="koboSpan" id="kobo.1682.1">, we can simply run the </span><span class="No-Break"><span class="koboSpan" id="kobo.1683.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1684.1">
nslookup</span></pre> <p><span class="koboSpan" id="kobo.1685.1">Then, in the interactive prompt, we must enter </span><strong class="source-inline"><span class="koboSpan" id="kobo.1686.1">wikipedia.org</span></strong><span class="koboSpan" id="kobo.1687.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.1688.1">illustrated here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer218">
<span class="koboSpan" id="kobo.1689.1"><img alt="Figure 7.29 – Using the nslookup tool interactively" src="image/B19682_07_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1690.1">Figure 7.29 – Using the nslookup tool interactively</span></p>
<p><span class="koboSpan" id="kobo.1691.1">To exit </span><a id="_idIndexMarker1101"/><span class="koboSpan" id="kobo.1692.1">the interactive shell mode, press </span><em class="italic"><span class="koboSpan" id="kobo.1693.1">Ctrl</span></em><span class="koboSpan" id="kobo.1694.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.1695.1">C</span></em><span class="koboSpan" id="kobo.1696.1">. </span><span class="koboSpan" id="kobo.1696.2">Here’s a </span><a id="_idIndexMarker1102"/><span class="koboSpan" id="kobo.1697.1">brief explanation of the information shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1698.1">preceding output:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1699.1">Server (address)</span></strong><span class="koboSpan" id="kobo.1700.1">: The loopback address (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1701.1">127.0.0.53</span></strong><span class="koboSpan" id="kobo.1702.1">) and port (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1703.1">53</span></strong><span class="koboSpan" id="kobo.1704.1">) of the DNS server </span><span class="No-Break"><span class="koboSpan" id="kobo.1705.1">running locally</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1706.1">Name</span></strong><span class="koboSpan" id="kobo.1707.1">: The internet domain we’re looking </span><span class="No-Break"><span class="koboSpan" id="kobo.1708.1">up (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1709.1">wikipedia.org</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1710.1">)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1711.1">Address</span></strong><span class="koboSpan" id="kobo.1712.1">: The IPv4 (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1713.1">91.198.174.192</span></strong><span class="koboSpan" id="kobo.1714.1">) and IPv6 (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1715.1">2620:0:862:ed1a::1</span></strong><span class="koboSpan" id="kobo.1716.1">) addresses that correspond to the lookup </span><span class="No-Break"><span class="koboSpan" id="kobo.1717.1">domain (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1718.1">wikipedia.org</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1719.1">)</span></span></li>
</ul>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1720.1">nslookup</span></strong><span class="koboSpan" id="kobo.1721.1"> is also capable of reverse DNS search when providing an IP address. </span><span class="koboSpan" id="kobo.1721.2">The following command retrieves the name server (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1722.1">dns.google</span></strong><span class="koboSpan" id="kobo.1723.1">) corresponding to the IP </span><span class="No-Break"><span class="koboSpan" id="kobo.1724.1">address </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1725.1">8.8.8.8</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1726.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1727.1">
nslookup 8.8.8.8</span></pre> <p><span class="koboSpan" id="kobo.1728.1">The preceding command yields the </span><span class="No-Break"><span class="koboSpan" id="kobo.1729.1">following output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer219">
<span class="koboSpan" id="kobo.1730.1"><img alt="Figure 7.30 – Reverse DNS search with nslookup" src="image/B19682_07_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1731.1">Figure 7.30 – Reverse DNS search with nslookup</span></p>
<p><span class="koboSpan" id="kobo.1732.1">For more information on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1733.1">nslookup</span></strong><span class="koboSpan" id="kobo.1734.1"> tool, you can refer to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1735.1">nslookup</span></strong><span class="koboSpan" id="kobo.1736.1"> system reference manual (</span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1737.1">man nslookup</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1738.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1739.1">Alternatively, we can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1740.1">dig</span></strong><span class="koboSpan" id="kobo.1741.1"> command-line utility. </span><span class="koboSpan" id="kobo.1741.2">If you don’t have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1742.1">dig</span></strong><span class="koboSpan" id="kobo.1743.1"> utility installed on your system, you can do so by installing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1744.1">dnsutils</span></strong><span class="koboSpan" id="kobo.1745.1"> package on Ubuntu/Debian or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1746.1">bind-utils</span></strong><span class="koboSpan" id="kobo.1747.1"> on Fedora platforms. </span><span class="koboSpan" id="kobo.1747.2">The related commands for installing the packages </span><a id="_idIndexMarker1103"/><span class="koboSpan" id="kobo.1748.1">were shown previously </span><span class="No-Break"><span class="koboSpan" id="kobo.1749.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1750.1">nslookup</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1751.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1752.1">For example, the </span><a id="_idIndexMarker1104"/><span class="koboSpan" id="kobo.1753.1">following command retrieves the name-server information for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1754.1">google.com</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1755.1"> domain:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1756.1">
dig google.com</span></pre> <p><span class="koboSpan" id="kobo.1757.1">This is the result (see the highlighted </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1758.1">ANSWER SECTION</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1759.1">):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer220">
<span class="koboSpan" id="kobo.1760.1"><img alt="Figure 7.31 – DNS lookup with dig" src="image/B19682_07_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1761.1">Figure 7.31 – DNS lookup with dig</span></p>
<p><span class="koboSpan" id="kobo.1762.1">To perform </span><a id="_idIndexMarker1105"/><span class="koboSpan" id="kobo.1763.1">a reverse DNS lookup with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1764.1">dig</span></strong><span class="koboSpan" id="kobo.1765.1">, we must specify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1766.1">-x</span></strong><span class="koboSpan" id="kobo.1767.1"> option, followed </span><a id="_idIndexMarker1106"/><span class="koboSpan" id="kobo.1768.1">by an IP address (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1769.1">8.8.4.4</span></strong><span class="koboSpan" id="kobo.1770.1">), </span><span class="No-Break"><span class="koboSpan" id="kobo.1771.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1772.1">
dig -x 8.8.4.4</span></pre> <p><span class="koboSpan" id="kobo.1773.1">This command yields the following output (see the highlighted </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1774.1">ANSWER SECTION</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1775.1">):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer221">
<span class="koboSpan" id="kobo.1776.1"><img alt="Figure 7.32 – Reverse DNS lookup with dig" src="image/B19682_07_32.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1777.1">Figure 7.32 – Reverse DNS lookup with dig</span></p>
<p><span class="koboSpan" id="kobo.1778.1">For more </span><a id="_idIndexMarker1107"/><span class="koboSpan" id="kobo.1779.1">information about the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1780.1">dig</span></strong><span class="koboSpan" id="kobo.1781.1"> command-line utility, please refer to the related system manual (</span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1782.1">man dig</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1783.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1784.1">The DNS protocol </span><a id="_idIndexMarker1108"/><span class="koboSpan" id="kobo.1785.1">operates at the application layer (</span><em class="italic"><span class="koboSpan" id="kobo.1786.1">Layer 7</span></em><span class="koboSpan" id="kobo.1787.1">) in the OSI model. </span><span class="koboSpan" id="kobo.1787.2">The standard DNS service’s well-known port </span><span class="No-Break"><span class="koboSpan" id="kobo.1788.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1789.1">53</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1790.1">.</span></span></p>
<p><a href="B19682_08.xhtml#_idTextAnchor164"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1791.1">Chapter 8</span></em></span></a><span class="koboSpan" id="kobo.1792.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1793.1">Linux </span></em><em class="italic"><span class="koboSpan" id="kobo.1794.1">Shell Scripting</span></em><span class="koboSpan" id="kobo.1795.1">, will cover the practical details of installing and configuring a DNS server in more detail. </span><span class="koboSpan" id="kobo.1795.2">For more information on DNS, you can refer to </span><em class="italic"><span class="koboSpan" id="kobo.1796.1">RFC </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1797.1">1035</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1798.1"> (</span></span><a href="https://www.ietf.org/rfc/rfc1035.txt"><span class="No-Break"><span class="koboSpan" id="kobo.1799.1">https://www.ietf.org/rfc/rfc1035.txt</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1800.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1801.1">The DHCP and DNS network services are arguably the closest to the TCP/IP networking stack while playing a crucial role when computers or devices are attached to a network. </span><span class="koboSpan" id="kobo.1801.2">After all, without proper IP addressing and name resolution, there’s no </span><span class="No-Break"><span class="koboSpan" id="kobo.1802.1">network communication.</span></span></p>
<p><span class="koboSpan" id="kobo.1803.1">There’s a lot more to distributed networking and related application servers than just strictly the pure network management stack performed by DNS and DHCP servers. </span><span class="koboSpan" id="kobo.1803.2">In the following sections, we’ll take a quick tour of some of the most relevant application servers running across distributed </span><span class="No-Break"><span class="koboSpan" id="kobo.1804.1">Linux systems.</span></span></p>
<h2 id="_idParaDest-137"><a id="_idTextAnchor153"/><span class="koboSpan" id="kobo.1805.1">Authentication servers</span></h2>
<p><span class="koboSpan" id="kobo.1806.1">Standalone Linux systems typically use the default authentication mechanism, where user credentials </span><a id="_idIndexMarker1109"/><span class="koboSpan" id="kobo.1807.1">are stored in the local filesystem (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1808.1">/etc/passwd</span></strong><span class="koboSpan" id="kobo.1809.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1810.1">/etc/shadow</span></strong><span class="koboSpan" id="kobo.1811.1">). </span><span class="koboSpan" id="kobo.1811.2">We explored the related user authentication </span><a id="_idIndexMarker1110"/><span class="koboSpan" id="kobo.1812.1">internals in </span><a href="B19682_04.xhtml#_idTextAnchor090"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1813.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.1814.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1815.1">Managing </span></em><em class="italic"><span class="koboSpan" id="kobo.1816.1">Users and Groups</span></em><span class="koboSpan" id="kobo.1817.1">. </span><span class="koboSpan" id="kobo.1817.2">However, as we extend the authentication boundary beyond the local machine – for example, accessing a file or email server – having the user credentials shared between the remote and localhosts would become a serious </span><span class="No-Break"><span class="koboSpan" id="kobo.1818.1">security issue.</span></span></p>
<p><span class="koboSpan" id="kobo.1819.1">Ideally, we should have a centralized authentication endpoint across the network that’s handled by a secure authentication server. </span><span class="koboSpan" id="kobo.1819.2">User credentials should be validated using robust encryption mechanisms before users can access remote </span><span class="No-Break"><span class="koboSpan" id="kobo.1820.1">system resources.</span></span></p>
<p><span class="koboSpan" id="kobo.1821.1">Let’s consider </span><a id="_idIndexMarker1111"/><span class="koboSpan" id="kobo.1822.1">the secure access to a network share on an arbitrary file server. </span><span class="koboSpan" id="kobo.1822.2">Suppose the access requires </span><strong class="bold"><span class="koboSpan" id="kobo.1823.1">Active Directory</span></strong><span class="koboSpan" id="kobo.1824.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1825.1">AD</span></strong><span class="koboSpan" id="kobo.1826.1">) user authentication. </span><span class="koboSpan" id="kobo.1826.2">Creating the related mount (share) locally on a user’s client machine will prompt for </span><a id="_idIndexMarker1112"/><span class="koboSpan" id="kobo.1827.1">user credentials. </span><span class="koboSpan" id="kobo.1827.2">The authentication request is made by the file server (on behalf of the client) to an authentication server. </span><span class="koboSpan" id="kobo.1827.3">If the authentication succeeds, the server share becomes available to the client. </span><span class="koboSpan" id="kobo.1827.4">The following diagram represents a simple remote authentication flow between a client and a server, using a </span><strong class="bold"><span class="koboSpan" id="kobo.1828.1">Lightweight Directory Access Protocol</span></strong><span class="koboSpan" id="kobo.1829.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1830.1">LDAP</span></strong><span class="koboSpan" id="kobo.1831.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.1832.1">authentication endpoint:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer222">
<span class="koboSpan" id="kobo.1833.1"><img alt="Figure 7.33 – Authentication workflow with LDAP" src="image/B19682_07_33.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1834.1">Figure 7.33 – Authentication workflow with LDAP</span></p>
<p><span class="koboSpan" id="kobo.1835.1">Here are some examples </span><a id="_idIndexMarker1113"/><span class="koboSpan" id="kobo.1836.1">of standard secure authentication </span><a id="_idIndexMarker1114"/><span class="koboSpan" id="kobo.1837.1">platforms (available </span><span class="No-Break"><span class="koboSpan" id="kobo.1838.1">for Linux):</span></span></p>
<ul>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1839.1">Kerberos</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1840.1"> (</span></span><a href="https://web.mit.edu/kerberos/"><span class="No-Break"><span class="koboSpan" id="kobo.1841.1">https://web.mit.edu/kerberos/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1842.1">)</span></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1843.1">LDAP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1844.1"> (</span></span><a href="https://www.redhat.com/en/topics/security/what-is-ldap-authentication"><span class="No-Break"><span class="koboSpan" id="kobo.1845.1">https://www.redhat.com/en/topics/security/what-is-ldap-authentication</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1846.1">)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1847.1">Remote Authentication Dial-In User Service</span></strong><span class="koboSpan" id="kobo.1848.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1849.1">RADIUS</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1850.1">) (</span></span><a href="https://freeradius.org/documentation/"><span class="No-Break"><span class="koboSpan" id="kobo.1851.1">https://freeradius.org/documentation/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1852.1">)</span></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1853.1">Diameter</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1854.1"> (</span></span><a href="https://www.f5.com/glossary/diameter-protocol"><span class="No-Break"><span class="koboSpan" id="kobo.1855.1">https://www.f5.com/glossary/diameter-protocol</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1856.1">)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1857.1">Terminal Access Controller Access-Control System</span></strong><span class="koboSpan" id="kobo.1858.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1859.1">TACACS+</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1860.1">) (</span></span><a href="https://datatracker.ietf.org/doc/rfc8907/"><span class="No-Break"><span class="koboSpan" id="kobo.1861.1">https://datatracker.ietf.org/doc/rfc8907/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1862.1">)</span></span></li>
</ul>
<p><a id="_idIndexMarker1115"/><span class="koboSpan" id="kobo.1863.1">A Linux LDAP authentication server can be </span><a id="_idIndexMarker1116"/><span class="koboSpan" id="kobo.1864.1">configured using OpenLDAP, which was covered in the first edition of </span><span class="No-Break"><span class="koboSpan" id="kobo.1865.1">this book.</span></span></p>
<p><span class="koboSpan" id="kobo.1866.1">In this section, we illustrated the authentication workflow with an example of using a file server. </span><span class="koboSpan" id="kobo.1866.2">To remain on topic, we’ll look at network file-sharing </span><span class="No-Break"><span class="koboSpan" id="kobo.1867.1">services next.</span></span></p>
<h2 id="_idParaDest-138"><a id="_idTextAnchor154"/><span class="koboSpan" id="kobo.1868.1">File sharing</span></h2>
<p><span class="koboSpan" id="kobo.1869.1">In common networking terms, </span><strong class="bold"><span class="koboSpan" id="kobo.1870.1">file sharing</span></strong><span class="koboSpan" id="kobo.1871.1"> represents a client machine’s ability to </span><em class="italic"><span class="koboSpan" id="kobo.1872.1">mount</span></em><span class="koboSpan" id="kobo.1873.1"> and access </span><a id="_idIndexMarker1117"/><span class="koboSpan" id="kobo.1874.1">a remote filesystem belonging to a server, as if it were local. </span><span class="koboSpan" id="kobo.1874.2">Applications running on the client machine would access the shared files </span><a id="_idIndexMarker1118"/><span class="koboSpan" id="kobo.1875.1">directly on the server. </span><span class="koboSpan" id="kobo.1875.2">For example, a text editor can load and modify a remote file, and then save it back to the same remote location, all in a seamless and transparent operation. </span><span class="koboSpan" id="kobo.1875.3">The underlying remoting process – the appearance of a remote filesystem acting as local – is made possible by file-sharing services </span><span class="No-Break"><span class="koboSpan" id="kobo.1876.1">and protocols.</span></span></p>
<p><span class="koboSpan" id="kobo.1877.1">For every file-sharing network protocol, there is a corresponding client-server file-sharing platform. </span><span class="koboSpan" id="kobo.1877.2">Although most network file servers (and clients) have cross-platform implementations, some operating system platforms are better suited for specific file-sharing protocols, as we’ll see in the following subsections. </span><span class="koboSpan" id="kobo.1877.3">Choosing between different file-server implementations and protocols is ultimately a matter of compatibility, security, </span><span class="No-Break"><span class="koboSpan" id="kobo.1878.1">and performance.</span></span></p>
<p><span class="koboSpan" id="kobo.1879.1">Here are some of the most common file-sharing protocols, with some brief descriptions </span><span class="No-Break"><span class="koboSpan" id="kobo.1880.1">for each:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1881.1">Server Message Block</span></strong><span class="koboSpan" id="kobo.1882.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1883.1">SMB</span></strong><span class="koboSpan" id="kobo.1884.1">): The SMB protocol provides network discovery and file- and printer-sharing </span><a id="_idIndexMarker1119"/><span class="koboSpan" id="kobo.1885.1">services. </span><span class="koboSpan" id="kobo.1885.2">SMB also supports </span><a id="_idIndexMarker1120"/><span class="koboSpan" id="kobo.1886.1">interprocess communication over a network. </span><span class="koboSpan" id="kobo.1886.2">SMB </span><a id="_idIndexMarker1121"/><span class="koboSpan" id="kobo.1887.1">is a relatively old protocol, developed by </span><strong class="bold"><span class="koboSpan" id="kobo.1888.1">International Business Machines Corporation</span></strong><span class="koboSpan" id="kobo.1889.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1890.1">IBM</span></strong><span class="koboSpan" id="kobo.1891.1">) in the 1980s. </span><span class="koboSpan" id="kobo.1891.2">Eventually, Microsoft took over and made some considerable alterations to what became the current version through multiple revisions (SMB 1.0, 2.0, 2.1, 3.0, 3.0.2, </span><span class="No-Break"><span class="koboSpan" id="kobo.1892.1">and 3.1.1).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1893.1">Common Internet File System</span></strong><span class="koboSpan" id="kobo.1894.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1895.1">CIFS</span></strong><span class="koboSpan" id="kobo.1896.1">): This protocol is a particular implementation of the SMB protocol. </span><span class="koboSpan" id="kobo.1896.2">Due to the underlying protocol similarity, SMB clients can </span><a id="_idIndexMarker1122"/><span class="koboSpan" id="kobo.1897.1">communicate with CIFS servers and vice versa. </span><span class="koboSpan" id="kobo.1897.2">Though </span><a id="_idIndexMarker1123"/><span class="koboSpan" id="kobo.1898.1">SMB and CIFS are idiomatically the same, their internal implementation of file locking, batch processing, and – ultimately – performance is quite different. </span><span class="koboSpan" id="kobo.1898.2">Apart from legacy systems, CIFS is rarely used these days. </span><span class="koboSpan" id="kobo.1898.3">SMB should always be preferred over CIFS, especially with the more recent revisions of SMB 2 or </span><span class="No-Break"><span class="koboSpan" id="kobo.1899.1">SMB 3.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1900.1">Samba</span></strong><span class="koboSpan" id="kobo.1901.1">: As with CIFS, Samba is another </span><a id="_idIndexMarker1124"/><span class="koboSpan" id="kobo.1902.1">implementation of the SMB protocol. </span><span class="koboSpan" id="kobo.1902.2">Samba provides file- and print-sharing services for Windows clients on a variety of server </span><a id="_idIndexMarker1125"/><span class="koboSpan" id="kobo.1903.1">platforms. </span><span class="koboSpan" id="kobo.1903.2">In other words, Windows clients can seamlessly access directories, files, and printers on a Linux Samba server, just as if they were communicating with a </span><span class="No-Break"><span class="koboSpan" id="kobo.1904.1">Windows server.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.1905.1">As of version 4, Samba natively supports Microsoft AD and Windows NT domains. </span><span class="koboSpan" id="kobo.1905.2">Essentially, a Linux Samba server can act as a domain controller on a Windows AD network. </span><span class="koboSpan" id="kobo.1905.3">Consequently, user credentials on the Windows domain can transparently be used on the Linux server without being recreated, and then manually kept in sync with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1906.1">AD users.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1907.1">Network File System</span></strong><span class="koboSpan" id="kobo.1908.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1909.1">NFS</span></strong><span class="koboSpan" id="kobo.1910.1">): This protocol was developed by Sun Microsystems and essentially </span><a id="_idIndexMarker1126"/><span class="koboSpan" id="kobo.1911.1">operates on the same premise as SMB – accessing </span><a id="_idIndexMarker1127"/><span class="koboSpan" id="kobo.1912.1">files over a network as if they were local. </span><span class="koboSpan" id="kobo.1912.2">NFS is not compatible with CIFS or SMB, meaning that NFS clients cannot communicate directly with SMB servers or </span><span class="No-Break"><span class="koboSpan" id="kobo.1913.1">vice versa.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1914.1">Apple Filing Protocol</span></strong><span class="koboSpan" id="kobo.1915.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1916.1">AFP</span></strong><span class="koboSpan" id="kobo.1917.1">): The AFP is </span><a id="_idIndexMarker1128"/><span class="koboSpan" id="kobo.1918.1">a proprietary </span><a id="_idIndexMarker1129"/><span class="koboSpan" id="kobo.1919.1">file-sharing protocol designed by Apple and exclusively operates in macOS network environments. </span><span class="koboSpan" id="kobo.1919.2">We should note that besides AFP, macOS systems also support standard file-sharing protocols, such as SMB </span><span class="No-Break"><span class="koboSpan" id="kobo.1920.1">and NFS.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1921.1">Most of the time, NFS is the file-sharing protocol of choice within Linux networks. </span><span class="koboSpan" id="kobo.1921.2">For mixed networking environments – such as Windows, Linux, and macOS interoperability – Samba and SMB are best suited for </span><span class="No-Break"><span class="koboSpan" id="kobo.1922.1">file sharing.</span></span></p>
<p><span class="koboSpan" id="kobo.1923.1">Some file-sharing protocols (such as SMB) also support print sharing and are used by print servers. </span><span class="koboSpan" id="kobo.1923.2">We’ll take a closer look at print </span><span class="No-Break"><span class="koboSpan" id="kobo.1924.1">sharing next.</span></span></p>
<h2 id="_idParaDest-139"><a id="_idTextAnchor155"/><span class="koboSpan" id="kobo.1925.1">Printer servers</span></h2>
<p><span class="koboSpan" id="kobo.1926.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.1927.1">printer server</span></strong><span class="koboSpan" id="kobo.1928.1"> (or </span><strong class="bold"><span class="koboSpan" id="kobo.1929.1">print server</span></strong><span class="koboSpan" id="kobo.1930.1">) connects a printer to client machines (computers or mobile devices) on </span><a id="_idIndexMarker1130"/><span class="koboSpan" id="kobo.1931.1">a network using a printing protocol. </span><span class="koboSpan" id="kobo.1931.2">Printing </span><a id="_idIndexMarker1131"/><span class="koboSpan" id="kobo.1932.1">protocols are responsible for the following remote printing tasks over </span><span class="No-Break"><span class="koboSpan" id="kobo.1933.1">a network:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1934.1">Discovering printers or </span><span class="No-Break"><span class="koboSpan" id="kobo.1935.1">print servers</span></span></li>
<li><span class="koboSpan" id="kobo.1936.1">Querying </span><span class="No-Break"><span class="koboSpan" id="kobo.1937.1">printer status</span></span></li>
<li><span class="koboSpan" id="kobo.1938.1">Sending, receiving, queueing, or canceling </span><span class="No-Break"><span class="koboSpan" id="kobo.1939.1">print jobs</span></span></li>
<li><span class="koboSpan" id="kobo.1940.1">Querying print </span><span class="No-Break"><span class="koboSpan" id="kobo.1941.1">job status</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1942.1">Common </span><a id="_idIndexMarker1132"/><span class="koboSpan" id="kobo.1943.1">printing protocols include </span><span class="No-Break"><span class="koboSpan" id="kobo.1944.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1945.1">Line Printer Daemon</span></strong><span class="koboSpan" id="kobo.1946.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1947.1">LPD</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1948.1">) protocol</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1949.1">Generic protocols</span></strong><span class="koboSpan" id="kobo.1950.1">, such as SMB </span><span class="No-Break"><span class="koboSpan" id="kobo.1951.1">and TELNET</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1952.1">Wireless printing</span></strong><span class="koboSpan" id="kobo.1953.1">, such as AirPrint </span><span class="No-Break"><span class="koboSpan" id="kobo.1954.1">by Apple</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1955.1">Internet printing protocols</span></strong><span class="koboSpan" id="kobo.1956.1">, such as Google </span><span class="No-Break"><span class="koboSpan" id="kobo.1957.1">Cloud Print</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1958.1">Among the generic printing protocols, SMB (also a file-sharing protocol) was previously described in the </span><em class="italic"><span class="koboSpan" id="kobo.1959.1">File sharing</span></em><span class="koboSpan" id="kobo.1960.1"> section. </span><span class="koboSpan" id="kobo.1960.2">The TELNET communication protocol was described in the </span><em class="italic"><span class="koboSpan" id="kobo.1961.1">Remote </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1962.1">access</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1963.1"> section.</span></span></p>
<p><span class="koboSpan" id="kobo.1964.1">File- and printer-sharing services are mostly about </span><em class="italic"><span class="koboSpan" id="kobo.1965.1">sharing</span></em><span class="koboSpan" id="kobo.1966.1"> documents, digital or printed, between computers on a network. </span><span class="koboSpan" id="kobo.1966.2">When it comes to </span><em class="italic"><span class="koboSpan" id="kobo.1967.1">exchanging</span></em><span class="koboSpan" id="kobo.1968.1"> documents, additional network services come into play, such as </span><em class="italic"><span class="koboSpan" id="kobo.1969.1">file transfer</span></em><span class="koboSpan" id="kobo.1970.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.1971.1">email</span></em><span class="koboSpan" id="kobo.1972.1"> services. </span><span class="koboSpan" id="kobo.1972.2">We’ll look at file </span><span class="No-Break"><span class="koboSpan" id="kobo.1973.1">transfer next.</span></span></p>
<h2 id="_idParaDest-140"><a id="_idTextAnchor156"/><span class="koboSpan" id="kobo.1974.1">File transfer</span></h2>
<p><span class="koboSpan" id="kobo.1975.1">FTP is a standard network protocol for transferring files between computers on a network. </span><span class="koboSpan" id="kobo.1975.2">FTP operates in a client-server environment, where an FTP client initiates a remote </span><a id="_idIndexMarker1133"/><span class="koboSpan" id="kobo.1976.1">connection to an FTP server, and files are </span><a id="_idIndexMarker1134"/><span class="koboSpan" id="kobo.1977.1">transferred in either direction. </span><span class="koboSpan" id="kobo.1977.2">FTP maintains a </span><strong class="bold"><span class="koboSpan" id="kobo.1978.1">control connection</span></strong><span class="koboSpan" id="kobo.1979.1"> and one or more </span><strong class="bold"><span class="koboSpan" id="kobo.1980.1">data connections</span></strong><span class="koboSpan" id="kobo.1981.1"> between the client and the server. </span><span class="koboSpan" id="kobo.1981.2">The control connection is generally established on the FTP server’s port </span><strong class="source-inline"><span class="koboSpan" id="kobo.1982.1">21</span></strong><span class="koboSpan" id="kobo.1983.1">, and it’s used for exchanging commands between the client and the server. </span><span class="koboSpan" id="kobo.1983.2">Data connections are exclusively used for data transfer and are negotiated between the client and the server (through the control connection). </span><span class="koboSpan" id="kobo.1983.3">Data connections usually involve ephemeral ports for inbound traffic, and they only stay open during the actual data transfer, closing immediately after the </span><span class="No-Break"><span class="koboSpan" id="kobo.1984.1">transfer completes.</span></span></p>
<p><span class="koboSpan" id="kobo.1985.1">FTP negotiates data connections in one of the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1986.1">two modes:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1987.1">Active mode</span></strong><span class="koboSpan" id="kobo.1988.1">: The FTP client </span><a id="_idIndexMarker1135"/><span class="koboSpan" id="kobo.1989.1">sends a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1990.1">PORT</span></strong><span class="koboSpan" id="kobo.1991.1"> command to the</span><a id="_idIndexMarker1136"/><span class="koboSpan" id="kobo.1992.1"> FTP server, signaling that the client </span><em class="italic"><span class="koboSpan" id="kobo.1993.1">actively</span></em><span class="koboSpan" id="kobo.1994.1"> provides the inbound port number for </span><span class="No-Break"><span class="koboSpan" id="kobo.1995.1">data connections</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1996.1">Passive mode</span></strong><span class="koboSpan" id="kobo.1997.1">: The FTP client </span><a id="_idIndexMarker1137"/><span class="koboSpan" id="kobo.1998.1">sends a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1999.1">PASV</span></strong><span class="koboSpan" id="kobo.2000.1"> command to the FTP server, indicating that the client </span><em class="italic"><span class="koboSpan" id="kobo.2001.1">passively</span></em><span class="koboSpan" id="kobo.2002.1"> awaits the server to supply the port </span><a id="_idIndexMarker1138"/><span class="koboSpan" id="kobo.2003.1">number for inbound </span><span class="No-Break"><span class="koboSpan" id="kobo.2004.1">data connections</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2005.1">FTP is a relatively </span><em class="italic"><span class="koboSpan" id="kobo.2006.1">messy</span></em><span class="koboSpan" id="kobo.2007.1"> protocol when it comes to firewall configurations due to the dynamic nature of the data connections involved. </span><span class="koboSpan" id="kobo.2007.2">The control connection port is usually well known (such as port </span><strong class="source-inline"><span class="koboSpan" id="kobo.2008.1">21</span></strong><span class="koboSpan" id="kobo.2009.1"> for insecure FTP) but data connections originate on a different port (usually </span><strong class="source-inline"><span class="koboSpan" id="kobo.2010.1">20</span></strong><span class="koboSpan" id="kobo.2011.1">) on either side, while on the receiving end, the inbound sockets are opened within a preconfigured ephemeral range (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2012.1">1024</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2013.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2014.1">65535</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2015.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.2016.1">FTP is most often implemented securely through either of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2017.1">following approaches:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.2018.1">FTP over SSL</span></strong><span class="koboSpan" id="kobo.2019.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2020.1">FTPS</span></strong><span class="koboSpan" id="kobo.2021.1">): SSL/TLS-encrypted </span><a id="_idIndexMarker1139"/><span class="koboSpan" id="kobo.2022.1">FTP connection. </span><span class="koboSpan" id="kobo.2022.2">The default FTPS control connection port </span><span class="No-Break"><span class="koboSpan" id="kobo.2023.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2024.1">990</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2025.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.2026.1">SSH File Transfer Protocol</span></strong><span class="koboSpan" id="kobo.2027.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2028.1">SFTP</span></strong><span class="koboSpan" id="kobo.2029.1">): </span><strong class="bold"><span class="koboSpan" id="kobo.2030.1">FTP</span></strong><span class="koboSpan" id="kobo.2031.1"> over </span><strong class="bold"><span class="koboSpan" id="kobo.2032.1">SSH</span></strong><span class="koboSpan" id="kobo.2033.1">. </span><span class="koboSpan" id="kobo.2033.2">The default SFTP control </span><a id="_idIndexMarker1140"/><span class="koboSpan" id="kobo.2034.1">connection port is </span><strong class="source-inline"><span class="koboSpan" id="kobo.2035.1">22</span></strong><span class="koboSpan" id="kobo.2036.1">. </span><span class="koboSpan" id="kobo.2036.2">For more information on the SSH protocol and client-server connectivity, refer to </span><em class="italic"><span class="koboSpan" id="kobo.2037.1">SSH</span></em><span class="koboSpan" id="kobo.2038.1"> in the </span><em class="italic"><span class="koboSpan" id="kobo.2039.1">Remote access</span></em><span class="koboSpan" id="kobo.2040.1"> section, later in </span><span class="No-Break"><span class="koboSpan" id="kobo.2041.1">this chapter.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2042.1">Next, we’ll </span><a id="_idIndexMarker1141"/><span class="koboSpan" id="kobo.2043.1">look at </span><a id="_idIndexMarker1142"/><span class="koboSpan" id="kobo.2044.1">mail servers and the underlying email </span><span class="No-Break"><span class="koboSpan" id="kobo.2045.1">exchange protocols.</span></span></p>
<h2 id="_idParaDest-141"><a id="_idTextAnchor157"/><span class="koboSpan" id="kobo.2046.1">Mail servers</span></h2>
<p><span class="koboSpan" id="kobo.2047.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.2048.1">mail server</span></strong><span class="koboSpan" id="kobo.2049.1"> (or </span><strong class="bold"><span class="koboSpan" id="kobo.2050.1">email server</span></strong><span class="koboSpan" id="kobo.2051.1">) is responsible for email delivery over a network. </span><span class="koboSpan" id="kobo.2051.2">A mail server can </span><a id="_idIndexMarker1143"/><span class="koboSpan" id="kobo.2052.1">either exchange emails between clients (users) on the </span><a id="_idIndexMarker1144"/><span class="koboSpan" id="kobo.2053.1">same network (domain) – within a company or organization – or deliver emails to other mail servers, possibly beyond the local network, such as </span><span class="No-Break"><span class="koboSpan" id="kobo.2054.1">the internet.</span></span></p>
<p><span class="koboSpan" id="kobo.2055.1">An email exchange usually involves the </span><span class="No-Break"><span class="koboSpan" id="kobo.2056.1">following actors:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2057.1">An </span><strong class="bold"><span class="koboSpan" id="kobo.2058.1">email client</span></strong><span class="koboSpan" id="kobo.2059.1"> application (such as Outlook </span><span class="No-Break"><span class="koboSpan" id="kobo.2060.1">or Gmail)</span></span></li>
<li><span class="koboSpan" id="kobo.2061.1">One or more </span><strong class="bold"><span class="koboSpan" id="kobo.2062.1">mail servers</span></strong><span class="koboSpan" id="kobo.2063.1"> (Exchange or </span><span class="No-Break"><span class="koboSpan" id="kobo.2064.1">Gmail server)</span></span></li>
<li><span class="koboSpan" id="kobo.2065.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.2066.1">recipients</span></strong><span class="koboSpan" id="kobo.2067.1"> involved in the email exchange – a </span><em class="italic"><span class="koboSpan" id="kobo.2068.1">sender</span></em><span class="koboSpan" id="kobo.2069.1"> and one or </span><span class="No-Break"><span class="koboSpan" id="kobo.2070.1">more </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2071.1">receivers</span></em></span></li>
<li><span class="koboSpan" id="kobo.2072.1">An </span><strong class="bold"><span class="koboSpan" id="kobo.2073.1">email protocol</span></strong><span class="koboSpan" id="kobo.2074.1"> that controls the communication between the email client and the </span><span class="No-Break"><span class="koboSpan" id="kobo.2075.1">mail servers</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2076.1">The most used email protocols are </span><strong class="bold"><span class="koboSpan" id="kobo.2077.1">POP3</span></strong><span class="koboSpan" id="kobo.2078.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.2079.1">IMAP</span></strong><span class="koboSpan" id="kobo.2080.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.2081.1">SMTP</span></strong><span class="koboSpan" id="kobo.2082.1">. </span><span class="koboSpan" id="kobo.2082.2">Let’s take a closer look at each of </span><span class="No-Break"><span class="koboSpan" id="kobo.2083.1">these protocols.</span></span></p>
<h3><span class="koboSpan" id="kobo.2084.1">POP3</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.2085.1">POP version 3</span></strong><span class="koboSpan" id="kobo.2086.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2087.1">POP3</span></strong><span class="koboSpan" id="kobo.2088.1">) is a standard email protocol for receiving and downloading emails from </span><a id="_idIndexMarker1145"/><span class="koboSpan" id="kobo.2089.1">a remote mail server to a local email client. </span><span class="koboSpan" id="kobo.2089.2">With POP3, emails are available for reading offline. </span><span class="koboSpan" id="kobo.2089.3">After being downloaded, emails are usually </span><a id="_idIndexMarker1146"/><span class="koboSpan" id="kobo.2090.1">removed from the POP3 server, thus saving up space. </span><span class="koboSpan" id="kobo.2090.2">Modern-day POP3 mail client-server implementations (Gmail, Outlook, and others) also have the option of keeping email copies on the server. </span><span class="koboSpan" id="kobo.2090.3">Persisting emails on the POP3 server becomes very important when users access emails from multiple locations (</span><span class="No-Break"><span class="koboSpan" id="kobo.2091.1">client applications).</span></span></p>
<p><span class="koboSpan" id="kobo.2092.1">The default POP3 ports are </span><span class="No-Break"><span class="koboSpan" id="kobo.2093.1">outlined here:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2094.1">110</span></strong><span class="koboSpan" id="kobo.2095.1">: For insecure (non-encrypted) </span><span class="No-Break"><span class="koboSpan" id="kobo.2096.1">POP3 connections</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2097.1">995</span></strong><span class="koboSpan" id="kobo.2098.1">: For secure POP3 using </span><span class="No-Break"><span class="koboSpan" id="kobo.2099.1">SSL/TLS encryption</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2100.1">POP3 is a relatively old email protocol that’s not always suitable for modern-day email communications. </span><span class="koboSpan" id="kobo.2100.2">When users access their emails from multiple devices, IMAP is a better choice. </span><span class="koboSpan" id="kobo.2100.3">We’ll look at the IMAP email </span><span class="No-Break"><span class="koboSpan" id="kobo.2101.1">protocol next.</span></span></p>
<h3><span class="koboSpan" id="kobo.2102.1">IMAP</span></h3>
<p><span class="koboSpan" id="kobo.2103.1">IMAP is a </span><a id="_idIndexMarker1147"/><span class="koboSpan" id="kobo.2104.1">standard email protocol for accessing emails on a remote </span><a id="_idIndexMarker1148"/><span class="koboSpan" id="kobo.2105.1">IMAP mail server. </span><span class="koboSpan" id="kobo.2105.2">With IMAP, emails are always retained on the mail server, while a copy of the emails is available for IMAP clients. </span><span class="koboSpan" id="kobo.2105.3">A user can access emails on multiple devices, each with their IMAP </span><span class="No-Break"><span class="koboSpan" id="kobo.2106.1">client application.</span></span></p>
<p><span class="koboSpan" id="kobo.2107.1">The default IMAP ports are </span><span class="No-Break"><span class="koboSpan" id="kobo.2108.1">outlined here:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2109.1">143</span></strong><span class="koboSpan" id="kobo.2110.1">: For insecure (non-encrypted) </span><span class="No-Break"><span class="koboSpan" id="kobo.2111.1">IMAP connections</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2112.1">993</span></strong><span class="koboSpan" id="kobo.2113.1">: For secure IMAP using </span><span class="No-Break"><span class="koboSpan" id="kobo.2114.1">SSL/TLS encryption</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2115.1">Both POP3 and IMAP are standard protocols for receiving emails. </span><span class="koboSpan" id="kobo.2115.2">To send emails, SMTP comes into play. </span><span class="koboSpan" id="kobo.2115.3">We’ll take a look at the SMTP email </span><span class="No-Break"><span class="koboSpan" id="kobo.2116.1">protocol next.</span></span></p>
<h3><span class="koboSpan" id="kobo.2117.1">SMTP</span></h3>
<p><span class="koboSpan" id="kobo.2118.1">SMTP is a </span><a id="_idIndexMarker1149"/><span class="koboSpan" id="kobo.2119.1">standard email protocol for sending </span><a id="_idIndexMarker1150"/><span class="koboSpan" id="kobo.2120.1">emails over a network or </span><span class="No-Break"><span class="koboSpan" id="kobo.2121.1">the internet.</span></span></p>
<p><span class="koboSpan" id="kobo.2122.1">The default SMTP ports are </span><span class="No-Break"><span class="koboSpan" id="kobo.2123.1">outlined here:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2124.1">25</span></strong><span class="koboSpan" id="kobo.2125.1">: For insecure (non-encrypted) </span><span class="No-Break"><span class="koboSpan" id="kobo.2126.1">SMTP connections</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2127.1">465</span></strong><span class="koboSpan" id="kobo.2128.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2129.1">587</span></strong><span class="koboSpan" id="kobo.2130.1">: For secure SMTP using </span><span class="No-Break"><span class="koboSpan" id="kobo.2131.1">SSL/TLS encryption</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2132.1">When using or implementing any of the standard email protocols described in this section, it is always recommended to use the corresponding secure implementation with the most up-to-date TLS encryption, if possible. </span><span class="koboSpan" id="kobo.2132.2">POP3, IMAP, and SMTP also support user authentication, an added layer of security – this is also recommended in commercial or </span><span class="No-Break"><span class="koboSpan" id="kobo.2133.1">enterprise-grade environments.</span></span></p>
<p><span class="koboSpan" id="kobo.2134.1">To get an idea of how the SMTP protocol operates, let’s go through some of the initial steps for initiating an SMTP handshake with Google’s Gmail </span><span class="No-Break"><span class="koboSpan" id="kobo.2135.1">SMTP server.</span></span></p>
<p><span class="koboSpan" id="kobo.2136.1">We will start by </span><a id="_idIndexMarker1151"/><span class="koboSpan" id="kobo.2137.1">connecting to the Gmail SMTP server, using a secure (TLS) connection via the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2138.1">openssl</span></strong><span class="koboSpan" id="kobo.2139.1"> command, </span><span class="No-Break"><span class="koboSpan" id="kobo.2140.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2141.1">
openssl s_client -starttls smtp -connect smtp.gmail.com:587</span></pre> <p><span class="koboSpan" id="kobo.2142.1">Here, we invoked </span><a id="_idIndexMarker1152"/><span class="koboSpan" id="kobo.2143.1">the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2144.1">openssl</span></strong><span class="koboSpan" id="kobo.2145.1"> command, simulated a client (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2146.1">s_client</span></strong><span class="koboSpan" id="kobo.2147.1">), started a TLS SMTP connection (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2148.1">-starttls smtp</span></strong><span class="koboSpan" id="kobo.2149.1">), and connected to the remote Gmail SMTP server on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.2150.1">587</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.2151.1">(-</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2152.1">connect smtp.gmail.com:587</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2153.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.2154.1">The Gmail SMTP server responds with a relatively long TLS handshake block that ends with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2155.1">following code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer223">
<span class="koboSpan" id="kobo.2156.1"><img alt="Figure 7.34 – Initial TLS handshake with a Gmail SMTP server" src="image/B19682_07_34.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2157.1">Figure 7.34 – Initial TLS handshake with a Gmail SMTP server</span></p>
<p><span class="koboSpan" id="kobo.2158.1">While still inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2159.1">openssl</span></strong><span class="koboSpan" id="kobo.2160.1"> command’s interactive prompt, we initiate the SMTP communication with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2161.1">HELO</span></strong><span class="koboSpan" id="kobo.2162.1"> command (spelled precisely as such). </span><span class="koboSpan" id="kobo.2162.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2163.1">HELO</span></strong><span class="koboSpan" id="kobo.2164.1"> command </span><em class="italic"><span class="koboSpan" id="kobo.2165.1">greets</span></em><span class="koboSpan" id="kobo.2166.1"> the server. </span><span class="koboSpan" id="kobo.2166.2">It is a specific SMTP command that starts the SMTP connection between a client and a server. </span><span class="koboSpan" id="kobo.2166.3">There is also an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2167.1">EHLO</span></strong><span class="koboSpan" id="kobo.2168.1"> variant, which is used for ESMTP service extensions. </span><span class="koboSpan" id="kobo.2168.2">Google expects the following </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2169.1">HELO</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2170.1"> greeting:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2171.1">
HELO hellogoogle</span></pre> <p><span class="koboSpan" id="kobo.2172.1">Another handshake follows, ending with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2173.1">250 smtp.gmail.com at your service</span></strong><span class="koboSpan" id="kobo.2174.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.2175.1">illustrated here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer224">
<span class="koboSpan" id="kobo.2176.1"><img alt="Figure 7.35 – The Gmail SMTP server is ready for communication" src="image/B19682_07_35.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2177.1">Figure 7.35 – The Gmail SMTP server is ready for communication</span></p>
<p><span class="koboSpan" id="kobo.2178.1">Next, the Gmail SMTP server requires authentication via the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2179.1">AUTH LOGIN</span></strong><span class="koboSpan" id="kobo.2180.1"> SMTP command. </span><span class="koboSpan" id="kobo.2180.2">We won’t go into further details, but the key point to be made here is that the SMTP protocol follows a plaintext command sequence between the client and the server. </span><span class="koboSpan" id="kobo.2180.3">It’s very </span><a id="_idIndexMarker1153"/><span class="koboSpan" id="kobo.2181.1">important to adopt a secure (encrypted) SMTP communication channel using TLS. </span><span class="koboSpan" id="kobo.2181.2">The same applies to any of the other email protocols (POP3 </span><span class="No-Break"><span class="koboSpan" id="kobo.2182.1">and IMAP).</span></span></p>
<p><span class="koboSpan" id="kobo.2183.1">So far, we’ve </span><a id="_idIndexMarker1154"/><span class="koboSpan" id="kobo.2184.1">covered several network services, some of them spanning multiple networks or even the internet. </span><span class="koboSpan" id="kobo.2184.2">Network packets carry data and destination addresses within the payload, but there are also synchronization signals between the communication endpoints, mostly to discern between sending and receiving workflows. </span><span class="koboSpan" id="kobo.2184.3">The synchronization of network packets is based on timestamps. </span><span class="koboSpan" id="kobo.2184.4">Reliable network communications would not be possible without a highly accurate time-synchronization between network nodes. </span><span class="koboSpan" id="kobo.2184.5">We’ll look at network </span><span class="No-Break"><span class="koboSpan" id="kobo.2185.1">timekeepers next.</span></span></p>
<h2 id="_idParaDest-142"><a id="_idTextAnchor158"/><span class="koboSpan" id="kobo.2186.1">NTP servers</span></h2>
<p><span class="koboSpan" id="kobo.2187.1">NTP is a </span><a id="_idIndexMarker1155"/><span class="koboSpan" id="kobo.2188.1">standard networking protocol for clock synchronization </span><a id="_idIndexMarker1156"/><span class="koboSpan" id="kobo.2189.1">between computers on a network. </span><span class="koboSpan" id="kobo.2189.2">NTP attempts to synchronize </span><a id="_idIndexMarker1157"/><span class="koboSpan" id="kobo.2190.1">the system clock on participating computers within a few milliseconds of </span><strong class="bold"><span class="koboSpan" id="kobo.2191.1">Coordinated Universal Time</span></strong><span class="koboSpan" id="kobo.2192.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2193.1">UTC</span></strong><span class="koboSpan" id="kobo.2194.1">) – the world’s </span><span class="No-Break"><span class="koboSpan" id="kobo.2195.1">time reference.</span></span></p>
<p><span class="koboSpan" id="kobo.2196.1">The NTP protocol’s implementation usually assumes a client-server model. </span><span class="koboSpan" id="kobo.2196.2">An NTP server acts as a time source on the network by either broadcasting or sending updated </span><strong class="bold"><span class="koboSpan" id="kobo.2197.1">timestamp datagrams</span></strong><span class="koboSpan" id="kobo.2198.1"> to clients. </span><span class="koboSpan" id="kobo.2198.2">An </span><a id="_idIndexMarker1158"/><span class="koboSpan" id="kobo.2199.1">NTP server continually adjusts its system clock according to well-known accurate time servers worldwide, using specialized algorithms to mitigate </span><span class="No-Break"><span class="koboSpan" id="kobo.2200.1">network latency.</span></span></p>
<p><span class="koboSpan" id="kobo.2201.1">A relatively easy way to check the NTP synchronization status on our Linux platform of choice is </span><a id="_idIndexMarker1159"/><span class="koboSpan" id="kobo.2202.1">by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2203.1">ntpstat</span></strong><span class="koboSpan" id="kobo.2204.1"> utility. </span><strong class="source-inline"><span class="koboSpan" id="kobo.2205.1">ntpstat</span></strong><span class="koboSpan" id="kobo.2206.1"> may not be </span><a id="_idIndexMarker1160"/><span class="koboSpan" id="kobo.2207.1">installed by default on our system. </span><span class="koboSpan" id="kobo.2207.2">On Ubuntu, we can install it with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2208.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2209.1">
sudo apt install ntpstat</span></pre> <p><span class="koboSpan" id="kobo.2210.1">On Fedora, we can install </span><strong class="source-inline"><span class="koboSpan" id="kobo.2211.1">ntpstat</span></strong><span class="koboSpan" id="kobo.2212.1"> with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2213.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2214.1">
sudo dnf install ntpstat</span></pre> <p><strong class="source-inline"><span class="koboSpan" id="kobo.2215.1">ntpstat</span></strong><span class="koboSpan" id="kobo.2216.1"> requires an NTP server to be running locally. </span><span class="koboSpan" id="kobo.2216.2">To set up a local NTP server, you will need to do the following (all examples shown here are for Ubuntu </span><span class="No-Break"><span class="koboSpan" id="kobo.2217.1">22.04.2 LTS):</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2218.1">Install the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2219.1">ntp</span></strong><span class="koboSpan" id="kobo.2220.1"> package with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2221.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2222.1">sudo apt install ntp</span></strong></pre></li> <li><span class="koboSpan" id="kobo.2223.1">Check for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2224.1">ntp</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2225.1">service’s status:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2226.1">sudo systemctl status ntp</span></strong></pre></li> <li><span class="koboSpan" id="kobo.2227.1">Enable the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2228.1">ntp</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2229.1"> service:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2230.1">sudo systemctl enable ntp</span></strong></pre></li> <li><span class="koboSpan" id="kobo.2231.1">Modify the </span><span class="No-Break"><span class="koboSpan" id="kobo.2232.1">firewall settings:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2233.1">sudo ufw allow from any to any port 123 proto udp</span></strong></pre></li> <li><span class="koboSpan" id="kobo.2234.1">Install the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2235.1">ntpdate</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2236.1"> package:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2237.1">sudo apt install ntpdate</span></strong></pre></li> <li><span class="koboSpan" id="kobo.2238.1">Restart the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2239.1">ntp</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2240.1"> service:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2241.1">sudo systemctl restart ntp</span></strong></pre></li> </ul>
<p><span class="koboSpan" id="kobo.2242.1">Before installing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2243.1">ntp</span></strong><span class="koboSpan" id="kobo.2244.1"> utility, take into account that Ubuntu is using another tool instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2245.1">ntpd</span></strong><span class="koboSpan" id="kobo.2246.1"> by default, named </span><strong class="source-inline"><span class="koboSpan" id="kobo.2247.1">timesyncd</span></strong><span class="koboSpan" id="kobo.2248.1">. </span><span class="koboSpan" id="kobo.2248.2">When installing </span><strong class="source-inline"><span class="koboSpan" id="kobo.2249.1">ntpd</span></strong><span class="koboSpan" id="kobo.2250.1">, the default utility will </span><span class="No-Break"><span class="koboSpan" id="kobo.2251.1">be disabled.</span></span></p>
<p><span class="koboSpan" id="kobo.2252.1">To query the NTP </span><a id="_idIndexMarker1161"/><span class="koboSpan" id="kobo.2253.1">synchronization status, we can run the </span><span class="No-Break"><span class="koboSpan" id="kobo.2254.1">following </span></span><span class="No-Break"><a id="_idIndexMarker1162"/></span><span class="No-Break"><span class="koboSpan" id="kobo.2255.1">command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2256.1">
ntpstat</span></pre> <p><span class="koboSpan" id="kobo.2257.1">This is </span><span class="No-Break"><span class="koboSpan" id="kobo.2258.1">the output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer225">
<span class="koboSpan" id="kobo.2259.1"><img alt="Figure 7.36 – Querying the NTP synchronization status with ntpstat" src="image/B19682_07_36.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2260.1">Figure 7.36 – Querying the NTP synchronization status with ntpstat</span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2261.1">ntpstat</span></strong><span class="koboSpan" id="kobo.2262.1"> provides the IP address of the NTP server the system is synchronized with (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2263.1">31.209.85.242</span></strong><span class="koboSpan" id="kobo.2264.1">), the synchronization margin (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2265.1">29</span></strong><span class="koboSpan" id="kobo.2266.1"> milliseconds), and the time-update polling interval (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2267.1">64</span></strong><span class="koboSpan" id="kobo.2268.1"> seconds). </span><span class="koboSpan" id="kobo.2268.2">To find out more about the NTP server, we can </span><strong class="source-inline"><span class="koboSpan" id="kobo.2269.1">dig</span></strong><span class="koboSpan" id="kobo.2270.1"> its IP address with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2271.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2272.1">
dig -x 31.209.85.242</span></pre> <p><span class="koboSpan" id="kobo.2273.1">It looks like it’s one of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2274.1">lwlcom</span></strong><span class="koboSpan" id="kobo.2275.1"> time servers (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2276.1">ntp1.lwlcom.net</span></strong><span class="koboSpan" id="kobo.2277.1">), as </span><span class="No-Break"><span class="koboSpan" id="kobo.2278.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer226">
<span class="koboSpan" id="kobo.2279.1"><img alt="Figure 7.37 – Querying the NTP synchronization status with ntpstat" src="image/B19682_07_37.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2280.1">Figure 7.37 – Querying the NTP synchr</span><a href="https://en.wikipedia.org/wiki/Network_Time_Protocol"><span class="koboSpan" id="kobo.2281.1">onization status with ntpstat</span></a></p>
<p><a href="https://en.wikipedia.org/wiki/Network_Time_Protocol"><span class="koboSpan" id="kobo.2282.1">The NTP client-server</span></a><span class="koboSpan" id="kobo.2283.1"> communication uses UDP as the transport protocol on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.2284.1">123</span></strong><span class="koboSpan" id="kobo.2285.1">. </span><a href="B19682_09.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2286.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.2287.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2288.1">Securing</span></em><em class="italic"><span class="koboSpan" id="kobo.2289.1"> Linux</span></em><span class="koboSpan" id="kobo.2290.1">, has a section dedicated to installing and configuring </span><a id="_idIndexMarker1163"/><span class="koboSpan" id="kobo.2291.1">an NTP server. </span><span class="koboSpan" id="kobo.2291.2">For more information on NTP, you can refer </span><span class="No-Break"><span class="koboSpan" id="kobo.2292.1">to </span></span><a href="https://en.wikipedia.org/wiki/Network_Time_Protocol"><span class="No-Break"><span class="koboSpan" id="kobo.2293.1">https://en.wikipedia.org/wiki/Network_Time_Protocol</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.2294.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2295.1">With that, our brief </span><a id="_idIndexMarker1164"/><span class="koboSpan" id="kobo.2296.1">journey into networking servers and protocols </span><a id="_idIndexMarker1165"/><span class="koboSpan" id="kobo.2297.1">has come to an end. </span><span class="koboSpan" id="kobo.2297.2">Everyday Linux administration tasks often require some sort of remote access to a system. </span><span class="koboSpan" id="kobo.2297.3">There are many ways to access and manage computers remotely. </span><span class="koboSpan" id="kobo.2297.4">The next section describes some of the most common remote-access facilities and related </span><span class="No-Break"><span class="koboSpan" id="kobo.2298.1">network protocols.</span></span></p>
<h2 id="_idParaDest-143"><a id="_idTextAnchor159"/><span class="koboSpan" id="kobo.2299.1">Remote access</span></h2>
<p><span class="koboSpan" id="kobo.2300.1">Most Linux </span><a id="_idIndexMarker1166"/><span class="koboSpan" id="kobo.2301.1">network services provide a relatively </span><a id="_idIndexMarker1167"/><span class="koboSpan" id="kobo.2302.1">limited </span><strong class="bold"><span class="koboSpan" id="kobo.2303.1">remote management</span></strong><span class="koboSpan" id="kobo.2304.1"> interface, with their management </span><strong class="bold"><span class="koboSpan" id="kobo.2305.1">command-line interface</span></strong><span class="koboSpan" id="kobo.2306.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2307.1">CLI</span></strong><span class="koboSpan" id="kobo.2308.1">) utilities predominantly operating locally on the </span><a id="_idIndexMarker1168"/><span class="koboSpan" id="kobo.2309.1">same system where the service runs. </span><span class="koboSpan" id="kobo.2309.2">Consequently, the related administrative tasks assume local Terminal access. </span><span class="koboSpan" id="kobo.2309.3">Direct console access to the system is sometimes not possible. </span><span class="koboSpan" id="kobo.2309.4">This is when remote-access servers come into play to enable a virtual Terminal login session with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2310.1">remote machine.</span></span></p>
<p><span class="koboSpan" id="kobo.2311.1">Let’s look at some of the most common remote-access services </span><span class="No-Break"><span class="koboSpan" id="kobo.2312.1">and applications.</span></span></p>
<h3><span class="koboSpan" id="kobo.2313.1">SSH</span></h3>
<p><span class="koboSpan" id="kobo.2314.1">SSH is perhaps the most popular secure login protocol for remote access. </span><span class="koboSpan" id="kobo.2314.2">SSH uses strong </span><a id="_idIndexMarker1169"/><span class="koboSpan" id="kobo.2315.1">encryption, combined with user authentication </span><a id="_idIndexMarker1170"/><span class="koboSpan" id="kobo.2316.1">mechanisms, for secure communication between a client and a server machine. </span><span class="koboSpan" id="kobo.2316.2">SSH servers are relatively easy to install and configure, and the </span><em class="italic"><span class="koboSpan" id="kobo.2317.1">Setting up an SSH server</span></em><span class="koboSpan" id="kobo.2318.1"> section in </span><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2319.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.2320.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2321.1">Configuring Linux Servers</span></em><span class="koboSpan" id="kobo.2322.1">, is dedicated to describing the related steps. </span><span class="koboSpan" id="kobo.2322.2">The default network port for SSH </span><span class="No-Break"><span class="koboSpan" id="kobo.2323.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2324.1">22</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2325.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2326.1">SSH supports the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2327.1">authentication types:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.2328.1">Public-key authentication</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.2329.1">Password authentication</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.2330.1">Keyboard-interactive authentication</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2331.1">The following sections provide brief descriptions of these forms of </span><span class="No-Break"><span class="koboSpan" id="kobo.2332.1">SSH authentication.</span></span></p>
<h4><span class="koboSpan" id="kobo.2333.1">Public-key authentication</span></h4>
<p><strong class="bold"><span class="koboSpan" id="kobo.2334.1">Public-key authentication</span></strong><span class="koboSpan" id="kobo.2335.1"> (or </span><strong class="bold"><span class="koboSpan" id="kobo.2336.1">SSH-key authentication</span></strong><span class="koboSpan" id="kobo.2337.1">) </span><a id="_idIndexMarker1171"/><span class="koboSpan" id="kobo.2338.1">is arguably </span><a id="_idIndexMarker1172"/><span class="koboSpan" id="kobo.2339.1">the most common type of </span><span class="No-Break"><span class="koboSpan" id="kobo.2340.1">SSH authentication.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.2341.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.2342.1">This section will use the terms </span><em class="italic"><span class="koboSpan" id="kobo.2343.1">public-key</span></em><span class="koboSpan" id="kobo.2344.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.2345.1">SSH-key</span></em><span class="koboSpan" id="kobo.2346.1"> interchangeably, mostly to reflect the related SSH authentication nomenclature in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2347.1">Linux community.</span></span></p>
<p><span class="koboSpan" id="kobo.2348.1">The SSH-key authentication mechanism uses a </span><em class="italic"><span class="koboSpan" id="kobo.2349.1">certificate/key</span></em><span class="koboSpan" id="kobo.2350.1"> pair – a </span><strong class="bold"><span class="koboSpan" id="kobo.2351.1">public</span></strong><span class="koboSpan" id="kobo.2352.1"> key (</span><em class="italic"><span class="koboSpan" id="kobo.2353.1">certificate</span></em><span class="koboSpan" id="kobo.2354.1">) and a </span><strong class="bold"><span class="koboSpan" id="kobo.2355.1">private</span></strong><span class="koboSpan" id="kobo.2356.1"> key. </span><span class="koboSpan" id="kobo.2356.2">An SSH certificate/key pair is usually created with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2357.1">ssh-keygen</span></strong><span class="koboSpan" id="kobo.2358.1"> tool, using </span><a id="_idIndexMarker1173"/><span class="koboSpan" id="kobo.2359.1">standard encryption algorithms such as the </span><strong class="bold"><span class="koboSpan" id="kobo.2360.1">Rivest–Shamir–Adleman</span></strong><span class="koboSpan" id="kobo.2361.1"> algorithm (</span><strong class="bold"><span class="koboSpan" id="kobo.2362.1">RSA</span></strong><span class="koboSpan" id="kobo.2363.1">) or the </span><strong class="bold"><span class="koboSpan" id="kobo.2364.1">Digital Signature </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2365.1">Algorithm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2366.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2367.1">DSA</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2368.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.2369.1">The SSH </span><a id="_idIndexMarker1174"/><span class="koboSpan" id="kobo.2370.1">public-key authentication supports either </span><strong class="bold"><span class="koboSpan" id="kobo.2371.1">user-based authentication</span></strong><span class="koboSpan" id="kobo.2372.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.2373.1">host-based authentication</span></strong><span class="koboSpan" id="kobo.2374.1"> models. </span><span class="koboSpan" id="kobo.2374.2">The two models differ in the ownership of the certificate/key pairs involved. </span><span class="koboSpan" id="kobo.2374.3">With client authentication, each user has a certificate/key pair for SSH access. </span><span class="koboSpan" id="kobo.2374.4">On the other hand, host authentication involves a single certificate/key pair per </span><span class="No-Break"><span class="koboSpan" id="kobo.2375.1">system (host).</span></span></p>
<p><span class="koboSpan" id="kobo.2376.1">Both SSH-key authentication models are illustrated and explained in the following sections. </span><span class="koboSpan" id="kobo.2376.2">The basic SSH handshake and authentication workflows are the same for </span><span class="No-Break"><span class="koboSpan" id="kobo.2377.1">both models:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2378.1">First, the SSH client generates a secure certificate/key pair and shares its public key with the SSH server. </span><span class="koboSpan" id="kobo.2378.2">This is a one-time operation for enabling </span><span class="No-Break"><span class="koboSpan" id="kobo.2379.1">public-key authentication.</span></span></li>
<li><span class="koboSpan" id="kobo.2380.1">When a </span><a id="_idIndexMarker1175"/><span class="koboSpan" id="kobo.2381.1">client initiates the SSH handshake, the server asks for </span><a id="_idIndexMarker1176"/><span class="koboSpan" id="kobo.2382.1">the client’s public key and verifies it against its allowed public keys. </span><span class="koboSpan" id="kobo.2382.2">If there’s a match, the SSH handshake succeeds, the server shares its public key with the client, and the SSH session </span><span class="No-Break"><span class="koboSpan" id="kobo.2383.1">is established.</span></span></li>
<li><span class="koboSpan" id="kobo.2384.1">Further client-server communication follows standard encryption/decryption workflows. </span><span class="koboSpan" id="kobo.2384.2">The client encrypts the data with its private key, while the server decrypts the data with the client’s public key. </span><span class="koboSpan" id="kobo.2384.3">When responding to the client, the server encrypts the data with its own private key, and the client decrypts the data with the server’s </span><span class="No-Break"><span class="koboSpan" id="kobo.2385.1">public key.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2386.1">SSH public-key </span><a id="_idIndexMarker1177"/><span class="koboSpan" id="kobo.2387.1">authentication is also known as </span><strong class="bold"><span class="koboSpan" id="kobo.2388.1">passwordless authentication</span></strong><span class="koboSpan" id="kobo.2389.1">, and it’s frequently used in automation scripts where commands are executed over multiple remote SSH connections without prompting for </span><span class="No-Break"><span class="koboSpan" id="kobo.2390.1">a password.</span></span></p>
<p><span class="koboSpan" id="kobo.2391.1">Let’s take a closer look at the user-based and host-based public-key </span><span class="No-Break"><span class="koboSpan" id="kobo.2392.1">authentication mechanisms:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.2393.1">User-based authentication</span></strong><span class="koboSpan" id="kobo.2394.1">: This is the most common SSH public-key authentication mechanism. </span><span class="koboSpan" id="kobo.2394.2">According</span><a id="_idIndexMarker1178"/><span class="koboSpan" id="kobo.2395.1"> to this model, every user connecting </span><a id="_idIndexMarker1179"/><span class="koboSpan" id="kobo.2396.1">to a remote SSH server has its own SSH key. </span><span class="koboSpan" id="kobo.2396.2">Multiple user accounts on the same host (or domain) would have different SSH keys, each with its own access to the remote SSH server, as suggested in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2397.1">following figure:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer227">
<span class="koboSpan" id="kobo.2398.1"><img alt="Figure 7.38 – User-based key authentication" src="image/B19682_07_38.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2399.1">Figure 7.38 – User-based key authentication</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.2400.1">Host-based authentication</span></strong><span class="koboSpan" id="kobo.2401.1">: This is another form of </span><a id="_idIndexMarker1180"/><span class="koboSpan" id="kobo.2402.1">SSH public-key authentication and involves a single SSH key per system (host) to connect to a remote SSH server, as illustrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2403.1">following figure:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer228">
<span class="koboSpan" id="kobo.2404.1"><img alt="Figure 7.39 – Host-based key authentication" src="image/B19682_07_39.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2405.1">Figure 7.39 – Host-based key authentication</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.2406.1">With host-based authentication, the underlying SSH key can only authenticate SSH sessions that originated from a single client host. </span><span class="koboSpan" id="kobo.2406.2">Host-based authentication allows multiple </span><a id="_idIndexMarker1181"/><span class="koboSpan" id="kobo.2407.1">users to connect from the same host to a remote SSH server. </span><span class="koboSpan" id="kobo.2407.2">If a user attempts to use a host-based SSH key from a different machine </span><a id="_idIndexMarker1182"/><span class="koboSpan" id="kobo.2408.1">than the one allowed by the SSH server, access will </span><span class="No-Break"><span class="koboSpan" id="kobo.2409.1">be denied.</span></span></p>
<p><span class="koboSpan" id="kobo.2410.1">Sometimes, a mix of the two public-key authentications is used – user- and host-based authentication –an approach that provides an increased level of security to </span><span class="No-Break"><span class="koboSpan" id="kobo.2411.1">SSH access.</span></span></p>
<p><span class="koboSpan" id="kobo.2412.1">When security is not critical, simpler SSH authentication mechanisms could be more suitable. </span><span class="koboSpan" id="kobo.2412.2">Password authentication is one </span><span class="No-Break"><span class="koboSpan" id="kobo.2413.1">such mechanism.</span></span></p>
<h4><span class="koboSpan" id="kobo.2414.1">Password authentication</span></h4>
<p><strong class="bold"><span class="koboSpan" id="kobo.2415.1">Password authentication</span></strong><span class="koboSpan" id="kobo.2416.1"> requires a simple set of credentials from the SSH client, such as a username </span><a id="_idIndexMarker1183"/><span class="koboSpan" id="kobo.2417.1">and password. </span><span class="koboSpan" id="kobo.2417.2">The SSH server </span><a id="_idIndexMarker1184"/><span class="koboSpan" id="kobo.2418.1">validates the user credentials, either based on the local user accounts (in </span><strong class="source-inline"><span class="koboSpan" id="kobo.2419.1">/etc/passwd</span></strong><span class="koboSpan" id="kobo.2420.1">) or select user accounts defined in the SSH server configuration (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2421.1">/etc/ssh/sshd_config</span></strong><span class="koboSpan" id="kobo.2422.1">). </span><span class="koboSpan" id="kobo.2422.2">The SSH server configuration described in </span><a href="B19682_09.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2423.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.2424.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2425.1">Securing</span></em><em class="italic"><span class="koboSpan" id="kobo.2426.1"> Linux</span></em><span class="koboSpan" id="kobo.2427.1">, further elaborates on </span><span class="No-Break"><span class="koboSpan" id="kobo.2428.1">this subject.</span></span></p>
<p><span class="koboSpan" id="kobo.2429.1">Besides local authentication, SSH can also leverage remote authentication methods such as Kerberos, LDAP, RADIUS, and others. </span><span class="koboSpan" id="kobo.2429.2">In such cases, the SSH server delegates the user authentication to a remote authentication server, as described in the </span><em class="italic"><span class="koboSpan" id="kobo.2430.1">Authentication servers</span></em><span class="koboSpan" id="kobo.2431.1"> section earlier in </span><span class="No-Break"><span class="koboSpan" id="kobo.2432.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.2433.1">Password authentication requires either user interaction or some automated way to provide the required credentials. </span><span class="koboSpan" id="kobo.2433.2">Another similar authentication mechanism is keyboard-interactive authentication, </span><span class="No-Break"><span class="koboSpan" id="kobo.2434.1">described next.</span></span></p>
<h4><span class="koboSpan" id="kobo.2435.1">Keyboard-interactive authentication</span></h4>
<p><strong class="bold"><span class="koboSpan" id="kobo.2436.1">Keyboard-interactive authentication</span></strong><span class="koboSpan" id="kobo.2437.1"> is based on a dialogue of multiple challenge-response sequences between the SSH client (user) and the SSH server. </span><span class="koboSpan" id="kobo.2437.2">This dialogue is a plaintext exchange of questions and answers, where the server may prompt the user for any number of challenges. </span><span class="koboSpan" id="kobo.2437.3">In some respect, password authentication is a </span><strong class="bold"><span class="koboSpan" id="kobo.2438.1">single-challenge interactive </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2439.1">authentication</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2440.1"> mechanism.</span></span></p>
<p><span class="koboSpan" id="kobo.2441.1">The </span><em class="italic"><span class="koboSpan" id="kobo.2442.1">interactive</span></em><span class="koboSpan" id="kobo.2443.1"> connotation of this authentication method could lead us to think that </span><a id="_idIndexMarker1185"/><span class="koboSpan" id="kobo.2444.1">user interaction </span><a id="_idIndexMarker1186"/><span class="koboSpan" id="kobo.2445.1">would be mandatory for the related implementation. </span><span class="koboSpan" id="kobo.2445.2">Not really. </span><span class="koboSpan" id="kobo.2445.3">Keyboard-interactive authentication could also serve implementations of authentication mechanisms based on custom protocols, where the underlying message exchange would be modeled as an </span><span class="No-Break"><span class="koboSpan" id="kobo.2446.1">authentication protocol.</span></span></p>
<p><span class="koboSpan" id="kobo.2447.1">Before moving on to other remote access protocols, we should call out the wide use of SSH due to its security, versatility, and performance. </span><span class="koboSpan" id="kobo.2447.2">However, SSH connectivity may not always be possible or adequate in specific scenarios. </span><span class="koboSpan" id="kobo.2447.3">In such cases, </span><em class="italic"><span class="koboSpan" id="kobo.2448.1">TELNET</span></em><span class="koboSpan" id="kobo.2449.1"> may come to the rescue. </span><span class="koboSpan" id="kobo.2449.2">We’ll take a look at </span><span class="No-Break"><span class="koboSpan" id="kobo.2450.1">it next.</span></span></p>
<h3><span class="koboSpan" id="kobo.2451.1">TELNET</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.2452.1">TELNET</span></strong><span class="koboSpan" id="kobo.2453.1"> is an </span><a id="_idIndexMarker1187"/><span class="koboSpan" id="kobo.2454.1">application-layer protocol for </span><a id="_idIndexMarker1188"/><span class="koboSpan" id="kobo.2455.1">bidirectional network communication that uses a plaintext CLI with a remote host. </span><span class="koboSpan" id="kobo.2455.2">Historically, TELNET was among the first remote-connection protocols, but it always lacked secure implementation. </span><span class="koboSpan" id="kobo.2455.3">SSH eventually became the standard way to log in from one computer to another, yet TELNET has its advantages over SSH when it comes to troubleshooting various application-layer protocols, such as web- or email-server communication. </span><span class="koboSpan" id="kobo.2455.4">You will learn more about how to use TELNET in </span><a href="B19682_09.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2456.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.2457.1">, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2458.1">Securing</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2459.1"> Linux</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2460.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2461.1">TELNET </span><a id="_idIndexMarker1189"/><span class="koboSpan" id="kobo.2462.1">and SSH are command-line-driven remote-access </span><a id="_idIndexMarker1190"/><span class="koboSpan" id="kobo.2463.1">interfaces. </span><span class="koboSpan" id="kobo.2463.2">There are cases </span><a id="_idIndexMarker1191"/><span class="koboSpan" id="kobo.2464.1">when a direct desktop connection is needed to a remote machine through a </span><strong class="bold"><span class="koboSpan" id="kobo.2465.1">graphical user interface</span></strong><span class="koboSpan" id="kobo.2466.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2467.1">GUI</span></strong><span class="koboSpan" id="kobo.2468.1">). </span><span class="koboSpan" id="kobo.2468.2">We’ll look at desktop </span><span class="No-Break"><span class="koboSpan" id="kobo.2469.1">sharing next.</span></span></p>
<h3><span class="koboSpan" id="kobo.2470.1">VNC</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.2471.1">Virtual Network Computing</span></strong><span class="koboSpan" id="kobo.2472.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2473.1">VNC</span></strong><span class="koboSpan" id="kobo.2474.1">) is a desktop-sharing platform that allows users to access </span><a id="_idIndexMarker1192"/><span class="koboSpan" id="kobo.2475.1">and control a remote computer’s GUI. </span><span class="koboSpan" id="kobo.2475.2">VNC is </span><a id="_idIndexMarker1193"/><span class="koboSpan" id="kobo.2476.1">a cross-platform client-server application. </span><span class="koboSpan" id="kobo.2476.2">A VNC server running on a Linux machine, for example, allows desktop </span><a id="_idIndexMarker1194"/><span class="koboSpan" id="kobo.2477.1">access to multiple VNC clients running on Windows or macOS systems. </span><span class="koboSpan" id="kobo.2477.2">The VNC network communication uses the </span><strong class="bold"><span class="koboSpan" id="kobo.2478.1">Remote Framebuffer</span></strong><span class="koboSpan" id="kobo.2479.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2480.1">RFB</span></strong><span class="koboSpan" id="kobo.2481.1">) protocol, defined by </span><em class="italic"><span class="koboSpan" id="kobo.2482.1">RFC 6143</span></em><span class="koboSpan" id="kobo.2483.1">. </span><span class="koboSpan" id="kobo.2483.2">Setting up a VNC server is relatively simple. </span><span class="koboSpan" id="kobo.2483.3">VNC assumes the presence of a graphical desktop system. </span><span class="koboSpan" id="kobo.2483.4">More details on this will be provided in </span><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2484.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.2485.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2486.1">Configuring </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2487.1">Linux Servers</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2488.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2489.1">This </span><a id="_idIndexMarker1195"/><span class="koboSpan" id="kobo.2490.1">concludes our section about network services and protocols. </span><span class="koboSpan" id="kobo.2490.2">We tried to cover the most common concepts about general-purpose network servers and applications, mostly operating in a client-server or distributed fashion. </span><span class="koboSpan" id="kobo.2490.3">With each network server, we described the related network protocols and some of the internal aspects involved. </span><a href="B19682_09.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2491.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.2492.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2493.1">Securing Linux</span></em><span class="koboSpan" id="kobo.2494.1">, and </span><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2495.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.2496.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2497.1">Configuring Linux Servers</span></em><span class="koboSpan" id="kobo.2498.1">, will showcase practical implementations for some of these </span><span class="No-Break"><span class="koboSpan" id="kobo.2499.1">network servers.</span></span></p>
<p><span class="koboSpan" id="kobo.2500.1">In the next section, our focus will turn to network </span><span class="No-Break"><span class="koboSpan" id="kobo.2501.1">security internals.</span></span></p>
<h1 id="_idParaDest-144"><a id="_idTextAnchor160"/><span class="koboSpan" id="kobo.2502.1">Understanding network security</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.2503.1">Network security</span></strong><span class="koboSpan" id="kobo.2504.1"> represents the processes, actions, and policies to prevent, monitor, and protect unauthorized </span><a id="_idIndexMarker1196"/><span class="koboSpan" id="kobo.2505.1">access to computer networks. </span><span class="koboSpan" id="kobo.2505.2">Network security paradigms span a vast array of technologies, tools, and practices. </span><span class="koboSpan" id="kobo.2505.3">Here are a few </span><span class="No-Break"><span class="koboSpan" id="kobo.2506.1">important ones:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.2507.1">Access control</span></strong><span class="koboSpan" id="kobo.2508.1">: Selectively restricting access based on user authentication and </span><a id="_idIndexMarker1197"/><span class="koboSpan" id="kobo.2509.1">authorization mechanisms. </span><span class="koboSpan" id="kobo.2509.2">Examples of access control include users, groups, and permissions. </span><span class="koboSpan" id="kobo.2509.3">Some of the related concepts were covered in </span><a href="B19682_04.xhtml#_idTextAnchor090"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2510.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.2511.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2512.1">Managing </span></em><em class="italic"><span class="koboSpan" id="kobo.2513.1">Users </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2514.1">and Groups</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2515.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.2516.1">Application security</span></strong><span class="koboSpan" id="kobo.2517.1">: Securing </span><a id="_idIndexMarker1198"/><span class="koboSpan" id="kobo.2518.1">and protecting server and end user applications (email, web, and mobile apps). </span><span class="koboSpan" id="kobo.2518.2">Examples </span><a id="_idIndexMarker1199"/><span class="koboSpan" id="kobo.2519.1">of application security include </span><strong class="bold"><span class="koboSpan" id="kobo.2520.1">Security-Enhanced Linux</span></strong><span class="koboSpan" id="kobo.2521.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2522.1">SELinux</span></strong><span class="koboSpan" id="kobo.2523.1">), strongly encrypted connections, antivirus, and anti-malware programs. </span><span class="koboSpan" id="kobo.2523.2">We’ll cover </span><strong class="bold"><span class="koboSpan" id="kobo.2524.1">SELinux</span></strong><span class="koboSpan" id="kobo.2525.1"> in </span><a href="B19682_10.xhtml#_idTextAnchor212"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2526.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.2527.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2528.1">Disaster Recovery, Diagnostics, </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2529.1">and Troubleshooting</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2530.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.2531.1">Endpoint security</span></strong><span class="koboSpan" id="kobo.2532.1">: Securing </span><a id="_idIndexMarker1200"/><span class="koboSpan" id="kobo.2533.1">and protecting servers and end user devices (smartphones, laptops, and desktop PCs) on the network. </span><span class="koboSpan" id="kobo.2533.2">Examples of endpoint security include </span><em class="italic"><span class="koboSpan" id="kobo.2534.1">firewalls</span></em><span class="koboSpan" id="kobo.2535.1"> and various intrusion-detection mechanisms. </span><span class="koboSpan" id="kobo.2535.2">We’ll look at firewalls in </span><a href="B19682_10.xhtml#_idTextAnchor212"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2536.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.2537.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2538.1">Disaster Recovery, Diagnostics, </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2539.1">and Troubleshooting</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2540.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.2541.1">Network segmentation</span></strong><span class="koboSpan" id="kobo.2542.1">: Partitioning </span><a id="_idIndexMarker1201"/><span class="koboSpan" id="kobo.2543.1">computer networks into smaller segments or </span><strong class="bold"><span class="koboSpan" id="kobo.2544.1">virtual LANs</span></strong><span class="koboSpan" id="kobo.2545.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2546.1">VLANs</span></strong><span class="koboSpan" id="kobo.2547.1">). </span><span class="koboSpan" id="kobo.2547.2">This is </span><a id="_idIndexMarker1202"/><span class="koboSpan" id="kobo.2548.1">not to be confused with subnetting, which is a logical division of networks </span><span class="No-Break"><span class="koboSpan" id="kobo.2549.1">through addressing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.2550.1">VPNs</span></strong><span class="koboSpan" id="kobo.2551.1">: Accessing </span><a id="_idIndexMarker1203"/><span class="koboSpan" id="kobo.2552.1">corporate networks using a secure encrypted tunnel from public networks or the internet. </span><span class="koboSpan" id="kobo.2552.2">We’ll look at VPNs in more detail in </span><a href="B19682_09.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2553.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.2554.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2555.1">Securing Linux</span></em><span class="koboSpan" id="kobo.2556.1">, and </span><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2557.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.2558.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2559.1">Configuring </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2560.1">Linux Servers</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2561.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2562.1">In everyday Linux administration, setting up a network security perimeter should always follow the paradigms enumerated previously, roughly in the order listed. </span><span class="koboSpan" id="kobo.2562.2">Starting with access-control mechanisms and ending with VPNs, securing a network takes an </span><em class="italic"><span class="koboSpan" id="kobo.2563.1">inside-out</span></em><span class="koboSpan" id="kobo.2564.1"> approach, from local systems and networks to firewalls, VLANs, </span><span class="No-Break"><span class="koboSpan" id="kobo.2565.1">and VPNs.</span></span></p>
<h1 id="_idParaDest-145"><a id="_idTextAnchor161"/><span class="koboSpan" id="kobo.2566.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.2567.1">This chapter provided a relatively condensed view of basic Linux networking principles. </span><span class="koboSpan" id="kobo.2567.2">We learned about network communication layers and protocols, IP addressing schemes, TCP/IP configurations, well-known network application servers, and VPN. </span><span class="koboSpan" id="kobo.2567.3">A good grasp of networking paradigms will give Linux administrators a more comprehensive view of the distributed systems and underlying communication between the application </span><span class="No-Break"><span class="koboSpan" id="kobo.2568.1">endpoints involved.</span></span></p>
<p><span class="koboSpan" id="kobo.2569.1">Some of the theoretical aspects covered in this chapter will be taken for a practical spin in </span><a href="B19682_13.xhtml#_idTextAnchor276"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2570.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.2571.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2572.1">Configuring Linux Servers</span></em><span class="koboSpan" id="kobo.2573.1">, where we’ll focus on real-world implementations of network servers. </span><a href="B19682_10.xhtml#_idTextAnchor212"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2574.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.2575.1">, </span><em class="italic"><span class="koboSpan" id="kobo.2576.1">Disaster Recovery, Diagnostics, and Troubleshooting</span></em><span class="koboSpan" id="kobo.2577.1">, will further explore network security internals and practical Linux firewalls. </span><span class="koboSpan" id="kobo.2577.2">Everything we have learned so far will serve as a good foundation for the assimilation of these </span><span class="No-Break"><span class="koboSpan" id="kobo.2578.1">upcoming chapters.</span></span></p>
<p><span class="koboSpan" id="kobo.2579.1">The following chapter will introduce you to Linux shell scripting, where you will learn about the most common shell features and how to use decisions, loops, variables, arrays, </span><span class="No-Break"><span class="koboSpan" id="kobo.2580.1">and functions.</span></span></p>
<h1 id="_idParaDest-146"><a id="_idTextAnchor162"/><span class="koboSpan" id="kobo.2581.1">Questions</span></h1>
<p><span class="koboSpan" id="kobo.2582.1">Here’s a quick quiz to outline and test some of the essential concepts covered in </span><span class="No-Break"><span class="koboSpan" id="kobo.2583.1">this chapter:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.2584.1">How does the OSI model compare to the </span><span class="No-Break"><span class="koboSpan" id="kobo.2585.1">TCP/IP model?</span></span><p class="list-inset"><strong class="bold"><span class="koboSpan" id="kobo.2586.1">Hint</span></strong><span class="koboSpan" id="kobo.2587.1">: </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2588.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.2589.1">.2</span></em><span class="koboSpan" id="kobo.2590.1"> could be </span><span class="No-Break"><span class="koboSpan" id="kobo.2591.1">of help.</span></span></p></li>
<li><span class="koboSpan" id="kobo.2592.1">Think of a couple of TCP/IP protocols and try to see where and how they operate in some of the network administration tasks or applications you are </span><span class="No-Break"><span class="koboSpan" id="kobo.2593.1">familiar with.</span></span></li>
<li><span class="koboSpan" id="kobo.2594.1">At what networking layer does the HTTP protocol operate? </span><span class="koboSpan" id="kobo.2594.2">How </span><span class="No-Break"><span class="koboSpan" id="kobo.2595.1">about DNS?</span></span><p class="list-inset"><strong class="bold"><span class="koboSpan" id="kobo.2596.1">Hint</span></strong><span class="koboSpan" id="kobo.2597.1">: Both operate on the </span><span class="No-Break"><span class="koboSpan" id="kobo.2598.1">same layer.</span></span></p></li>
<li><span class="koboSpan" id="kobo.2599.1">What is the network class for IP </span><span class="No-Break"><span class="koboSpan" id="kobo.2600.1">address </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2601.1">192.168.0.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2602.1">?</span></span><p class="list-inset"><strong class="bold"><span class="koboSpan" id="kobo.2603.1">Hint</span></strong><span class="koboSpan" id="kobo.2604.1">: Refer to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2605.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2606.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2607.1">.</span></span></p></li>
<li><span class="koboSpan" id="kobo.2608.1">What is the network prefix that corresponds to network </span><span class="No-Break"><span class="koboSpan" id="kobo.2609.1">mask </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2610.1">255.255.0.0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2611.1">?</span></span><p class="list-inset"><strong class="bold"><span class="koboSpan" id="kobo.2612.1">Hint</span></strong><span class="koboSpan" id="kobo.2613.1">: Check out </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2614.1">Figure </span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2615.1">7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2616.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2617.1"> again.</span></span></p></li>
<li><span class="koboSpan" id="kobo.2618.1">How do you configure a static IP address using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2619.1">nmcli</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2620.1"> utility?</span></span><p class="list-inset"><strong class="bold"><span class="koboSpan" id="kobo.2621.1">Hint</span></strong><span class="koboSpan" id="kobo.2622.1">: Use </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2623.1">connection modify</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2624.1">.</span></span></p></li>
<li><span class="koboSpan" id="kobo.2625.1">How do you change the hostname of a </span><span class="No-Break"><span class="koboSpan" id="kobo.2626.1">Linux machine?</span></span><p class="list-inset"><strong class="bold"><span class="koboSpan" id="kobo.2627.1">Hint</span></strong><span class="koboSpan" id="kobo.2628.1">: Use the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2629.1">hostnamectl</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2630.1"> utility.</span></span></p></li>
<li><span class="koboSpan" id="kobo.2631.1">What is the difference between the POP3 and IMAP </span><span class="No-Break"><span class="koboSpan" id="kobo.2632.1">email protocols?</span></span></li>
<li><span class="koboSpan" id="kobo.2633.1">How does SSH host-based authentication differ from user-based SSH </span><span class="No-Break"><span class="koboSpan" id="kobo.2634.1">key authentication?</span></span></li>
<li><span class="koboSpan" id="kobo.2635.1"> What is the difference between SSH </span><span class="No-Break"><span class="koboSpan" id="kobo.2636.1">and TELNET?</span></span></li>
</ol>
<h1 id="_idParaDest-147"><a id="_idTextAnchor163"/><span class="koboSpan" id="kobo.2637.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.2638.1">For more information about what was covered in this chapter, please refer to the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2639.1">Packt titles:</span></span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.2640.1">Linux Administration Best Practices</span></em><span class="koboSpan" id="kobo.2641.1">, by Scott </span><span class="No-Break"><span class="koboSpan" id="kobo.2642.1">Alan Miller</span></span></li>
<li><em class="italic"><span class="koboSpan" id="kobo.2643.1">Linux for Networking Professionals</span></em><span class="koboSpan" id="kobo.2644.1">, by </span><span class="No-Break"><span class="koboSpan" id="kobo.2645.1">Rob VandenBrink</span></span></li>
</ul>
</div>
</body></html>