- en: Linux Security Problem
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux 安全问题
- en: A Linux machine is only as secure as the administrator configures it to be.
    Once we have installed the Linux distribution of our choice and have removed all
    the unnecessary packages post installation, we can start working on the security
    aspect of the system by fine-tuning the installed software and services.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 一台 Linux 机器的安全性取决于管理员的配置。我们安装完自己选择的 Linux 发行版并移除所有不必要的包之后，可以通过微调已安装的软件和服务来开始处理系统的安全问题。
- en: 'In this chapter, we will discuss the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Configuring server security
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置服务器安全
- en: Security policy—server security
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全策略—服务器安全
- en: Defining security controls
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义安全控制
- en: Missing backup plans
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺乏备份计划
- en: 'The following recipes will be covered in the chapter:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下内容：
- en: Checking the integrity of installation medium using checksum
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用校验和检查安装介质的完整性
- en: Using LUKS disk encryption
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 LUKS 磁盘加密
- en: Making use of `sudoers`—configuring `sudo` access
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用`sudoers`—配置`sudo`权限
- en: Scanning hosts with Nmap
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Nmap 扫描主机
- en: Gaining root on a vulnerable Linux system
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取脆弱的 Linux 系统的 root 权限
- en: Missing backup plans
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺乏备份计划
- en: Security policy
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全策略
- en: A security policy is a definition that outlines the rules and practices to be
    followed for computer network security in an organization. How the organization
    should manage, protect, and distribute sensitive data is defined in the security
    policy.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 安全策略是一个定义，概述了组织在计算机网络安全方面应遵循的规则和做法。安全策略定义了组织应如何管理、保护和分发敏感数据。
- en: Developing a security policy
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 制定安全策略
- en: When creating a security policy you should keep in mind that it should be simple
    and easy for all the users to follow. The objective of the policy should be to
    protect the data while keeping the privacy of the users.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建安全策略时，您应该牢记它应该简洁易懂，便于所有用户遵循。策略的目标应该是在保护数据的同时，保持用户的隐私。
- en: 'It should be developed around these points:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 它应围绕以下几点进行开发：
- en: Accessibility to the system
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统的可访问性
- en: Software installation rights on the system
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统上的软件安装权限
- en: Data permission
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据权限
- en: Recovery from failure
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从故障中恢复
- en: When developing a security policy, a user should be using only those services
    for which permission has been granted. Anything that is not permitted should be
    restricted in the policy. Let's look at some common Linux security myths.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在制定安全策略时，用户应仅使用已获得授权的服务。任何不允许的行为都应在策略中加以限制。让我们来看一些常见的 Linux 安全误区。
- en: Linux security myths
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux 安全误区
- en: You might feel nervous while planning to use Linux-based systems in your business.
    This may be due to some false rumors about security in Linux that the systems
    might have fallen prey to any of the myths out there.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在计划在您的业务中使用基于 Linux 的系统时，您可能会感到紧张。这可能是由于一些关于 Linux 安全的错误传言，认为这些系统可能已成为某些安全误区的受害者。
- en: Myth – as Linux is open source, it is considered to be insecure
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 误区 – 由于 Linux 是开源的，因此它被认为不安全
- en: Linux, being a free and open source operating system, has its own advantages.
    It includes a large base of developers who constantly audit the source code for
    any possible security risks; the Linux community can provide fast support and
    fixes for any potential security problem. Patches are released quickly for testing
    by the community so they don't have to deal with the clumsy administration that
    other Unix vendors may have to deal with.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 作为一个免费和开源的操作系统，拥有许多优势。它包括一个庞大的开发者基础，这些开发者不断审计源代码，寻找潜在的安全风险；Linux 社区能够为任何可能的安全问题提供快速的支持和修复。补丁会快速发布给社区进行测试，因此它们不必处理其他
    Unix 供应商可能遇到的繁琐管理问题。
- en: Due to the massive worldwide user base, Linux's security gets tested across
    huge range of computing environments, thus making it one of the most stable and
    secure operating systems. As Linux is open to scrutiny by developers across the
    world, it helps Linux derive superior security in the ways the privileges are
    assigned. The way in which these privileges are assigned in a Linux system is
    also a security feature derived from the open source code of the system.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 由于全球庞大的用户群体，Linux 的安全性在各种计算环境中得到了广泛的测试，从而使其成为最稳定、最安全的操作系统之一。由于 Linux 开放供全球开发者审查，它有助于在权限分配的方式上提高安全性。Linux
    系统中这些权限的分配方式也是源自开源代码的安全特性。
- en: Myth – Linux is an experts-only system, and only they know how to configure
    their systems in terms of security
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 误区 – Linux 仅适用于专家，只有他们知道如何在安全方面配置系统
- en: Assuming that Linux is for experts who know how to deal with viruses is a misconception.
    Linux has evolved to become one of the friendliest OSes that can be used by anyone,
    whether novice or experts.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 假设Linux仅适用于懂得如何处理病毒的专家是一个误解。Linux已经发展成了一个适合任何人使用的最友好的操作系统之一，无论是新手还是专家。
- en: Linux is secure because of its strong architecture. Regular users on a Linux
    system possess low-privileged accounts rather than having root privileges.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Linux因其强大的架构而安全。Linux系统上的普通用户拥有低权限账户，而不是root权限。
- en: Myth – Linux is virus free
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 错误观念——Linux是没有病毒的
- en: Due to its strong architecture, even if a Linux system gets compromised, viruses
    would not have root access and thus will not be able to cause any major damage
    to the system.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 由于其强大的架构，即使Linux系统被攻破，病毒也无法获得root权限，因此无法对系统造成重大损害。
- en: Even on Linux servers, several levels of security are implemented and they are
    updated more often, again helping to secure the servers from viruses.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 即使在Linux服务器上，也会实施多个级别的安全措施，并且它们会更频繁地更新，从而有助于保护服务器免受病毒侵害。
- en: There are still a number of viruses that target Linux, thus making it not completely
    virus free. But most of the viruses that exist for Linux are non-destructive in
    nature.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 仍然存在一些针对Linux的病毒，因此它并非完全没有病毒。但大多数存在的Linux病毒性质上是非破坏性的。
- en: Configuring server security
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置服务器安全
- en: Once a Linux server is created, the immediate next step is to implement security
    procedures to make sure that any kind of threat should not cause the system to
    be compromised. A major reason for malicious attacks on Linux servers have been
    poorly implemented security or existing vulnerabilities. When configuring a server,
    the security policies need to be implemented properly to create a secure environment
    that will help prevent your business from getting hacked.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 创建Linux服务器后，紧接着的步骤是实施安全程序，确保任何威胁都不会导致系统被攻击。对Linux服务器恶意攻击的一个主要原因是安全措施实施不当或存在漏洞。在配置服务器时，安全策略需要正确实施，以创建一个安全的环境，帮助防止您的业务被黑客攻击。
- en: How to do it...
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Let us have a look for each and every configuration.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们逐一查看每个配置。
- en: User management
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户管理
- en: 'Follow these steps to configure server security:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置服务器安全：
- en: When a Linux server is created, the first user created by default is always
    the root user. This root user should be used for initial configuration only.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当创建Linux服务器时，默认创建的第一个用户始终是root用户。该root用户仅应用于初始配置。
- en: Once initial configuration is done, this root user should be disabled via SSH.
    This will make it difficult for any hacker to gain access to your Linux machine.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始配置完成后，应通过SSH禁用此root用户。这将使黑客更难以访问您的Linux机器。
- en: Further, a secondary user should be created to log in and administer the machine.
    This user can be allowed sudo permissions if administrative actions need to be
    performed.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，应创建一个二级用户来登录并管理机器。如果需要执行管理操作，可以授予该用户sudo权限。
- en: Password policy
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 密码策略
- en: 'Follow these steps to configure server security:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置服务器安全：
- en: When creating user accounts, ensure the use of strong passwords. If allowed,
    keep the length of the password to between 12 to 14 characters.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建用户账户时，确保使用强密码。如果允许，密码长度应保持在12到14个字符之间。
- en: If possible, generate passwords randomly, and include lowercase and uppercase
    letters, numbers, and symbols.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果可能，随机生成密码，并包括小写字母、大写字母、数字和符号。
- en: Avoid using password combinations that could be easily guessed, such as dictionary
    words, keyboard patterns, usernames, ID numbers, and so on.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 避免使用容易猜测的密码组合，如字典单词、键盘模式、用户名、身份证号等。
- en: Avoid using the same password twice.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 避免重复使用相同的密码。
- en: Configuration policy
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置策略
- en: 'Follow these steps to configure server security:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置服务器安全：
- en: The operating system on the server should be configured in accordance with the
    guidelines approved for InfoSec.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务器上的操作系统应根据批准的InfoSec指南进行配置。
- en: Any service or application not being used should be disabled, wherever possible.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任何未使用的服务或应用程序应尽可能禁用。
- en: Every access to the services and applications on the server should be monitored
    and logged. It should also be protected through access-control methods. An example
    of this will be covered in [Chapter 3](dd9ad20f-3479-47df-8819-358a6d9354ca.xhtml),
    *Local Filesystem Security*.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务器上服务和应用程序的每次访问都应进行监控和记录。还应通过访问控制方法进行保护。此示例将在[第3章](dd9ad20f-3479-47df-8819-358a6d9354ca.xhtml)中讨论，*本地文件系统安全*。
- en: The system should be kept updated and any recent security patches, if available,
    should be installed as soon as possible
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 系统应保持更新，并且应尽快安装任何可用的最新安全补丁。
- en: Avoid using the root account as much as possible. It is better to use the security
    principles that require least access to perform a function.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尽量避免使用root账户。最好使用需要最低权限才能执行功能的安全原则。
- en: Any kind of privileged access must be performed over a secure channel connection
    (SSH) wherever possible.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任何特权访问必须尽可能通过安全通道连接（SSH）进行。
- en: Access to the server should be in a controlled environment.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务器的访问应在受控环境中进行。
- en: Monitoring policy
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控策略
- en: 'All security-related actions on server systems must be logged and audit reports
    should be saved as follows:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务器系统上的所有安全相关操作必须进行日志记录，并且审核报告应按如下方式保存：
- en: For a period of one month, all security-related logs should be kept online
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有与安全相关的日志应保持在线一个月。
- en: For a period of one month, the daily backups, as well as the weekly backups
    should be retained
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有每日备份和每周备份应保留一个月。
- en: For a minimum of two years, the monthly full backups should be retained
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 至少保留两年的每月完整备份
- en: Any event related to security being compromised should be reported to the InfoSec
    team. They shall then review the logs and report the incident to the IT department.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任何与安全相关的事件发生泄露时，应报告给InfoSec团队。随后，他们将审查日志并将事件报告给IT部门。
- en: 'Some examples of security-related events are as follows:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一些安全相关事件的示例如下：
- en: Port-scanning-related attacks
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口扫描相关攻击
- en: Access to privileged accounts without authorization
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 未经授权访问特权账户
- en: Unusual occurrences due to a particular application on the host
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于主机上的某个特定应用程序而导致的异常情况
- en: How it works...
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Following the policies as given here helps in the base configuration of the
    internal server that is owned or operated by the organization. Implementing the
    policy effectively will minimize unauthorized access to any sensitive and proprietary
    information.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 遵循此处给出的策略有助于组织拥有或运营的内部服务器的基本配置。有效实施该策略将最大限度地减少对任何敏感和专有信息的未经授权访问。
- en: Security policy – server security
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全策略 – 服务器安全
- en: A major reason for malicious attacks on Linux servers has been poorly implemented
    security or existing vulnerabilities. When configuring a server, the security
    policies need to be implemented properly and ownership needs to be taken for proper
    customization of the server.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 对Linux服务器的恶意攻击的主要原因之一是安全实施不当或现有漏洞。在配置服务器时，需要正确实施安全策略，并对服务器的适当定制负责。
- en: How to do it…
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何执行…
- en: Let's have a look and various security policies
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下各种安全策略
- en: General policy
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一般策略
- en: 'Let''s discuss the various security policies:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们讨论各种安全策略：
- en: The administration of all the internal servers in an organization is the responsibility
    of a dedicated team that should also keep watch for any kind of compliance issues.
    If a compliance issues occurs, the team should immediately review and implement
    an updated security policy.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 组织内所有服务器的管理由一个专门的团队负责，该团队还应监控任何合规性问题。如果发生合规性问题，该团队应立即审查并实施更新的安全策略。
- en: 'When configuring internal servers, they must be registered in such a way that
    the identification of the servers can be done on the basis of the following information:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在配置内部服务器时，必须以如下方式进行注册，以便根据以下信息识别服务器：
- en: Location of the server
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器的位置
- en: Operating system version and hardware configuration
  id: totrans-81
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统版本和硬件配置
- en: Services and applications running on the server
  id: totrans-82
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器上运行的服务和应用程序
- en: Any kind of information in the organization's management system must always
    be kept up to date.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 组织的管理系统中的任何信息必须始终保持最新。
- en: Configuration policy
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置策略
- en: 'Let''s discuss the various security policies:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们讨论各种安全策略：
- en: The operating system on the server should be configured in accordance with the
    guidelines approved for InfoSec.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务器上的操作系统应按照InfoSec批准的指南进行配置。
- en: Any service or application not being used should be disabled, wherever possible.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任何未使用的服务或应用程序应尽可能禁用。
- en: Every access to the services and applications on the server should be monitored
    and logged. It should also be protected through access-control methods. An example
    of this will be covered in [Chapter 3](dd9ad20f-3479-47df-8819-358a6d9354ca.xhtml),
    *Local FileSystem Security.*
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对服务器上所有服务和应用程序的访问应进行监控和记录，并应通过访问控制方法进行保护。有关示例将在[第3章](dd9ad20f-3479-47df-8819-358a6d9354ca.xhtml)中介绍，*本地文件系统安全*。
- en: The system should be kept updated and any recent security patches, if available,
    should be installed as soon as possible
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 系统应保持更新，任何可用的最新安全补丁应尽快安装。
- en: Avoid using the root account as much as possible. It is better to use security
    principles that require least access to perform a function.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尽量避免使用root账户。最好使用最小权限原则来执行功能。
- en: Any kind of privileged access must be performed over a secure channel connection
    (SSH), wherever possible.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任何类型的特权访问都必须通过安全通道连接（SSH）进行，尽可能地。
- en: Access to the server should be in a controlled environment.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问服务器应在受控环境下进行。
- en: Monitoring policy
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控策略
- en: 'Let''s discuss the various security policies:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们讨论一下各种安全策略：
- en: 'All security-related actions on server systems must be logged and audit reports
    should be saved as follows:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有与安全相关的服务器系统操作必须记录日志，并且审计报告应按如下方式保存：
- en: For a period of one month, all the security-related logs should be kept online
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在一个月的时间内，所有与安全相关的日志应保持在线。
- en: For a period of one month, the daily backups, as well as the weekly backups,
    should be retained
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在一个月的时间内，日常备份以及每周备份应予以保留。
- en: For a minimum of two years, the monthly full backups should be retained
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 至少保留两年的月度完整备份。
- en: Any event related to security being compromised should be reported to the InfoSec
    team. They shall then review the logs and report the incident to the IT department.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任何与安全相关的事件如果被泄露，应该报告给信息安全团队。然后他们会审查日志并将事件报告给IT部门。
- en: 'Some examples of security related events are as follows:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一些与安全相关的事件示例如下：
- en: Port-scanning-related attacks
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与端口扫描相关的攻击
- en: Access to privileged accounts without authorization
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 未经授权访问特权账户
- en: Unusual occurrences due to a particular application on the host
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主机上由特定应用程序引起的异常事件
- en: How it works…
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Following the policies as given here helps the base configuration of the internal
    server that is owned or operated by the organization. Implementing the policy
    effectively will minimize unauthorized access to any sensitive and proprietary
    information.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 遵循这里给出的策略有助于组织所拥有或运营的内部服务器的基础配置。有效实施该策略将最小化对任何敏感和专有信息的未经授权访问。
- en: Defining security controls
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定义安全控制
- en: Securing a Linux server starts with the process of hardening the system, and
    to do this it's important to define a list of security controls. A security controls
    list (or security checklist) confirms that proper security controls have been
    implemented.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 加固Linux服务器的过程从加固系统开始，为此，定义安全控制列表非常重要。安全控制列表（或安全检查清单）可以确认已实施适当的安全控制措施。
- en: How to do it...
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何执行...
- en: Let's have a look at various security control checklists.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下各种安全控制检查表。
- en: Installation
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装
- en: 'Now we will look into each security control checklist:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将查看每个安全控制检查表：
- en: Installation media such as CD-ROM/DVD/ISO should be checked by using checksum
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装介质如CD-ROM/DVD/ISO应通过使用校验和进行检查。
- en: A minimal base installation should be done when creating the server
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在创建服务器时，应进行最小基础安装。
- en: It is good practice to create separate filesystems for `/home`, and `/tmp`
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`/home`和`/tmp`创建单独的文件系统是一种良好的做法。
- en: It is good practice to install minimum software on the server to minimize the
    chances of vulnerability
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在服务器上安装最小软件是一种良好的实践，可以最大限度地减少漏洞的可能性。
- en: Always keep the Linux kernel and software up to date
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 始终保持Linux内核和软件的最新状态。
- en: Boot and disk
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启动和磁盘
- en: 'Now we will look into each security control checklist:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将查看每个安全控制检查表：
- en: Encrypt partitions using disk encryption methods such as LUKS.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用如LUKS等磁盘加密方法对分区进行加密。
- en: Limit access to BIOS by configuring a BIOS password.
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过配置BIOS密码限制对BIOS的访问。
- en: Limit bootable devices and allow only devices such as disk to be booted.
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制可启动设备，仅允许像磁盘这样的设备启动。
- en: Configure a password to access the single user mode boot loader.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置密码以访问单用户模式的引导加载程序。
- en: Network and services
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络与服务
- en: 'Now we will look into each security control checklist:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将查看每个安全控制检查表：
- en: Determine the services running by checking the open network ports.
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过检查打开的网络端口来确定正在运行的服务。
- en: Use a firewall such as `iptables/nftables` to limit access to the services as
    per need.
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用防火墙，如`iptables/nftables`，根据需要限制对服务的访问。
- en: Encrypt all data transmitted over the network.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加密所有通过网络传输的数据。
- en: Avoid using services such as FTP, Telnet, and Rlogin/Rsh.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免使用 FTP、Telnet、Rlogin/Rsh 等服务。
- en: Any unwanted services should be disabled.
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应禁用任何不必要的服务。
- en: A centralized authentication service should be used.
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应使用集中式认证服务。
- en: Intrusion detection and Denial of Service (DoS)
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 入侵检测和拒绝服务（DoS）
- en: 'Now we will look into each security control checklist:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将查看每个安全控制检查表：
- en: File integrity tools such as AIDE, Samhain, and AFICK should be installed and
    configured for monitoring important files.
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应安装并配置文件完整性工具，如 AIDE、Samhain 和 AFICK，用于监控重要文件。
- en: Use a malware scanner such as CalmAV to protect against malicious scripts.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用恶意软件扫描工具，如 CalmAV，来防止恶意脚本。
- en: Configure system logging to a remote machine for the purpose of detection, forensics,
    and archiving.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置系统日志记录到远程机器，用于检测、取证和归档。
- en: Deter brute-force attacks by using anti brute-force tools for authentication
    attempts.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用反暴力破解工具来防止暴力破解攻击。
- en: Auditing and availability
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 审计和可用性
- en: 'Now we will look into each security control checklist:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将查看每个安全控制检查表：
- en: Read through logs to monitor for suspicious activity.
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读日志以监控可疑活动。
- en: Configure auditd configuration to perform system accounting.
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 auditd 配置以执行系统帐务。
- en: Ensure backup is working, and also check restores.
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保备份正常工作，并检查恢复。
- en: How it works...
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: Implementing these security controls minimizes the security risk to your Linux
    server. This helps protect your data from the hands of hackers.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 实施这些安全控制措施可以最小化 Linux 服务器的安全风险，帮助保护数据免受黑客攻击。
- en: Checking the integrity of installation medium by using checksum
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用校验和检查安装介质的完整性
- en: Whenever you download an image file of any Linux distribution, it should always
    be checked for correctness and safety. This can be done by generating an MD5 hash
    after downloading the image file and then comparing the generated hash with the
    hash generated by the organization supplying the image file.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 每当你下载任何 Linux 发行版的镜像文件时，都应该检查文件的正确性和安全性。这可以通过下载镜像文件后生成 MD5 哈希，然后将生成的哈希与提供镜像文件的组织生成的哈希进行比较来完成。
- en: This helps in checking the integrity of the downloaded file. If the original
    file was tampered with it can be detected using the MD5 hash comparison. The larger
    the file size, the higher the possibility of changes in the file. It is always
    recommended you do an MD5 hash comparison for files such as the operating system
    installation CD.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这有助于检查下载文件的完整性。如果原始文件被篡改，通过 MD5 哈希比较可以检测到。文件大小越大，文件变化的可能性越高。强烈建议你对操作系统安装光盘等文件进行
    MD5 哈希比较。
- en: Getting ready
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 做好准备
- en: '`md5sum` is normally installed in most Linux distributions, so installation
    is not required.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '`md5sum` 通常已在大多数 Linux 发行版中安装，因此无需安装。'
- en: How to do it…
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何执行……
- en: 'Perform the following steps:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Open the Linux Terminal and then change the directory to the folder containing
    the downloaded ISO file.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Linux 终端，然后将目录切换到包含已下载 ISO 文件的文件夹。
- en: Because Linux is case sensitive, type the correct spelling for the folder name.
    Downloads are not the same as downloads in Linux.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Linux 对大小写敏感，输入文件夹名称时请确保拼写正确。在 Linux 中，Downloads 与 downloads 并不相同。
- en: 'After changing to the download directory, type the following command:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换到下载目录后，输入以下命令：
- en: '[PRE0]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'md5sum will then print the calculated hash in a single line as shown here:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: md5sum 将以单行形式打印计算的哈希，如下所示：
- en: '[PRE1]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now we can compare the hash calculated by this command with the hash on the
    UbuntuHashes page ([https://help.ubuntu.com/community/UbuntuHashes](https://help.ubuntu.com/community/UbuntuHashes)).
    After opening the UbuntuHashes page, we just need to copy this previously calculated
    hash, in the Find box of the browser (by pressing *Ctrl* + *F*).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以将此命令计算出的哈希与 UbuntuHashes 页面上的哈希进行比较（[https://help.ubuntu.com/community/UbuntuHashes](https://help.ubuntu.com/community/UbuntuHashes)）。打开
    UbuntuHashes 页面后，我们只需要将之前计算出的哈希复制到浏览器的查找框中（通过按 *Ctrl* + *F*）。
- en: How it works…
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: If the calculated hash and the hash on the UbuntuHashes page match, then the
    downloaded file is not damaged. In case the hashes don't match, then there is
    a possibility that the file might be tampered or is damaged. Try downloading the
    file again. If the issue still persists, it is recommended you report the issue
    to the administrator of the server.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果计算出的哈希值与UbuntuHashes页面上的哈希值匹配，则表示下载的文件没有损坏。如果哈希值不匹配，则可能是文件已被篡改或损坏。尝试重新下载文件。如果问题仍然存在，建议向服务器管理员报告该问题。
- en: See also
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另见
- en: 'Here’s something extra in case you want to go the extra mile: the GUI checksum
    calculator available for Ubuntu.'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想再进一步，下面是一个额外的内容：适用于Ubuntu的GUI校验和计算器。
- en: Sometimes, it’s really inconvenient to use the Terminal for doing checksums.
    You need to know the right folder of the downloaded file and also the exact filename.
    This makes it difficult to remember the exact commands.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候，使用终端进行校验和检查真的很不方便。你需要知道下载文件的正确文件夹和准确的文件名，这让记住确切的命令变得很困难。
- en: As a solution, there is the very small and simple software – **GtkHash**.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 作为解决方案，有一个非常小巧简单的软件——**GtkHash**。
- en: 'You can download the tool here: [http://gtkhash.sourceforge.net/](http://gtkhash.sourceforge.net/).'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在这里下载该工具：[http://gtkhash.sourceforge.net/](http://gtkhash.sourceforge.net/)。
- en: 'Or you can install it by using the following command:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，你也可以使用以下命令安装它：
- en: '[PRE2]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Using LUKS disk encryption
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用LUKS磁盘加密
- en: In enterprises, small business, and government offices, the users may have to
    secure their systems in order to protect their private data, which includes customers
    details, important files, contact details, and so on. To help with this, Linux
    provides a good number of cryptographic techniques that can be used to protect
    data on physical devices such as hard disk or removable media. One such cryptographic
    technique is using **Linux Unified Key Setup** (**LUKS**)-on-disk-format. This
    technique allows the encryption of Linux partitions.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在企业、小型企业和政府办公室中，用户可能需要保护他们的系统，以保护个人数据，包括客户信息、重要文件、联系方式等。为此，Linux提供了许多加密技术，可以用来保护硬盘或可移动介质等物理设备上的数据。一个这样的加密技术是使用**Linux统一密钥设置**（**LUKS**）磁盘格式。此技术允许加密Linux分区。
- en: This is what LUKS does**:**
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 这是LUKS的功能**：**
- en: The entire block device can be encrypted using LUKS; it's well suited for protecting
    the data on removable storage media or the laptop disk drives
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 整个块设备可以使用LUKS进行加密；它非常适合保护可移动存储介质或笔记本硬盘上的数据。
- en: LUKS uses the existing device mapper kernel subsystem
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LUKS使用现有的设备映射内核子系统
- en: It also provides passphrase strengthening, which helps protect against dictionary
    attacks
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它还提供了密码短语强化功能，有助于防止字典攻击。
- en: Getting ready
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: For the following process to work, it is necessary that a separate partition
    is also created while installing Linux, which will be encrypted using LUKS.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让以下过程顺利进行，在安装Linux时需要创建一个单独的分区，该分区将使用LUKS进行加密。
- en: Configuring LUKS using the steps given will remove all data on the partition
    being encrypted. So, before starting the process of using LUKS, make sure you
    take a backup of the data to some external source.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 按照给定步骤配置LUKS将删除加密分区上的所有数据。因此，在开始使用LUKS之前，请确保将数据备份到外部来源。
- en: How to do it...
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To begin with manually encrypting directories, perform the following steps:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 要手动加密目录，请执行以下步骤：
- en: 'Install `cryptsetup` as shown here, which is a utility used for setting up
    encrypted filesystems:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照此处所示安装`cryptsetup`，它是用于设置加密文件系统的工具：
- en: '[PRE3]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The preceding command generates the following output:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令生成以下输出：
- en: '![](img/b167735b-b91c-4f98-a760-a9c7b363ed2f.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b167735b-b91c-4f98-a760-a9c7b363ed2f.png)'
- en: 'Encrypt your `/dev/sdb1` partition, which is a removable device. To encrypt
    the partition, type the following command:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加密你的`/dev/sdb1`分区，它是一个可移动设备。要加密该分区，请输入以下命令：
- en: '[PRE4]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The preceding command generates the following output:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令生成以下输出：
- en: '![](img/3439b7f1-428c-4d08-adb6-018e8b74c545.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3439b7f1-428c-4d08-adb6-018e8b74c545.png)'
- en: This command initializes the partition and also sets a passphrase. Make sure
    you note the passphrase for further use.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 该命令初始化分区并设置一个密码短语。请确保记下密码短语，以便后续使用。
- en: Now open the newly created encrypted device by creating a mapping:![](img/5bee70ce-7cbf-4f52-b45c-8e19eca573d0.png)
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在通过创建映射打开新创建的加密设备：![](img/5bee70ce-7cbf-4f52-b45c-8e19eca573d0.png)
- en: 'Check to confirm that the device is present:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查以确认设备是否存在：
- en: '[PRE5]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The preceding command generates the following output:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令生成以下输出：
- en: '![](img/c5331396-f706-4d28-be1b-488f94acdb5a.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5331396-f706-4d28-be1b-488f94acdb5a.png)'
- en: Check the status of the mapping using the following command:![](img/b5ef027e-03c5-4fd3-af32-500fc11f1606.png)
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令检查映射状态：![](img/b5ef027e-03c5-4fd3-af32-500fc11f1606.png)
- en: Dump LUKS headers using the following command:![](img/4b7ead46-bd0c-4a7a-9e96-2d7f076f8459.png)
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令导出 LUKS 头部信息：![](img/4b7ead46-bd0c-4a7a-9e96-2d7f076f8459.png)
- en: Next, write zeros to `/dev/mapper/backup2` encrypted device:![](img/9be3c11f-79b0-4bde-b9ff-314ce6f5b67a.png)
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，将零写入 `/dev/mapper/backup2` 加密设备：![](img/9be3c11f-79b0-4bde-b9ff-314ce6f5b67a.png)
- en: As the `dd` command may take hours to complete, we use the `pv` command to monitor
    the progress.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 `dd` 命令可能需要几个小时才能完成，我们使用 `pv` 命令来监控进度。
- en: 'Now create a filesystem:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在创建文件系统：
- en: '[PRE6]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The preceding command generates the following output:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令生成以下输出：
- en: '![](img/6a252565-418a-4f73-9840-20bca3a3c53e.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a252565-418a-4f73-9840-20bca3a3c53e.png)'
- en: Then mount the new filesystem and confirm the filesystem is visible:![](img/18c573e9-648b-4096-a4c8-d5bfc735a7bb.png)![](img/32a3072d-be95-4186-98f4-df53e0539ce3.png)
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后挂载新文件系统并确认文件系统是否可见：![](img/18c573e9-648b-4096-a4c8-d5bfc735a7bb.png)![](img/32a3072d-be95-4186-98f4-df53e0539ce3.png)
- en: Congratulations! You have successfully created an encrypted partition. Now,
    you can keep all your data safe, even when the computer is off.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！你已成功创建加密分区。现在，即使电脑关机，你也能保证数据安全。
- en: There's more...
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Perform the following commands to unmount and secure the data on the partition:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令来卸载并保护分区上的数据：
- en: '[PRE7]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'To remount the encrypted partition, perform the following steps:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 要重新挂载加密分区，请执行以下步骤：
- en: '[PRE8]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](img/10b38d18-558f-45fc-9ab3-eb70f0f1dd66.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](img/10b38d18-558f-45fc-9ab3-eb70f0f1dd66.png)'
- en: Make use of sudoers – configuring sudo access
  id: totrans-208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用 sudoers —— 配置 sudo 访问权限
- en: Sudoer is the functionality of the Linux system that can be used by an administrator
    to provide administrative access to a trusted regular user, without actually sharing
    the root user's password. The administrator simply needs to add the regular user
    in the sudoers list.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: Sudoer 是 Linux 系统的一个功能，管理员可以通过它向受信任的普通用户提供管理员访问权限，而无需实际共享 root 用户的密码。管理员只需将普通用户添加到
    sudoers 列表中。
- en: Once a user has been added to the sudoers list, they can execute any administrative
    command by preceding it with sudo. Then the user would be asked to enter their
    own password. After this, the administrative command would be executed the same
    way as by the root user.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦用户被添加到 sudoers 列表中，他们就可以通过在命令前加上 sudo 来执行任何管理员命令。接着，系统会要求用户输入自己的密码。之后，管理员命令将以与
    root 用户相同的方式执行。
- en: Getting ready
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: As the file for the configuration is pre-defined and the commands used are inbuilt,
    nothing extra is needed to be configured before starting the steps.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 由于配置文件是预定义的且使用的命令是内建的，因此在开始步骤之前不需要进行额外配置。
- en: How to do it…
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Perform the following steps:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: 'You will first create a normal account and then give it sudo access. Once done,
    you will be able to use the `sudo` command from the new account and then execute
    the administrative commands. Follow the steps given to configure sudo access.
    First, use the root account to log in to the system then create a user account
    using the `useradd` command, as shown. Replace USERNAME in the command with any
    name of your choice:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先创建一个普通账户，然后为其提供 sudo 权限。完成后，你将能够从新账户使用 `sudo` 命令，并执行管理员命令。按照给定步骤配置 sudo 访问权限。首先，使用
    root 账户登录系统，然后使用 `useradd` 命令创建一个用户账户，如下所示。将命令中的 USERNAME 替换为你选择的任何名字：
- en: '![](img/6abf9ec2-b568-468b-bf57-ad9ccf6536f5.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6abf9ec2-b568-468b-bf57-ad9ccf6536f5.jpg)'
- en: Now, using the `passwd` command set a password for the new user account, as
    shown:![](img/a918c81c-b939-4008-ac05-75a13ae8b01b.jpg)
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用 `passwd` 命令为新用户账户设置密码，如下所示：![](img/a918c81c-b939-4008-ac05-75a13ae8b01b.jpg)
- en: Now edit the `/etc/sudoers` file by running the `visudo` as shown. The policies
    applied when using the `sudo` command, are defined by the `/etc/sudoers` file:![](img/d0551b98-bb15-4f75-9b5d-4ca86eeda37c.jpg)
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在通过运行 `visudo` 编辑 `/etc/sudoers` 文件，如下所示。使用 `sudo` 命令时应用的策略由 `/etc/sudoers`
    文件定义：![](img/d0551b98-bb15-4f75-9b5d-4ca86eeda37c.jpg)
- en: Once the file is open in the editor, search for the following lines which allow
    sudo access to the users in the test group:![](img/aaf80c52-3f18-42d5-b8e9-486b96fe231b.jpg)
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开文件后，搜索以下行，这些行允许测试组的用户获得 sudo 访问权限：![](img/aaf80c52-3f18-42d5-b8e9-486b96fe231b.jpg)
- en: You can enable the given configuration by deleting the comment character (`#`)
    at the beginning of the second line. Once the changes are done, save the file
    and exit from the editor. Now using the `usermod` command, add the previously
    created user to the test group:![](img/996f892a-30c6-4e92-9905-948079b84720.jpg)
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以通过删除第二行开头的注释字符（`#`）来启用给定的配置。更改完成后，保存文件并退出编辑器。现在，使用 `usermod` 命令将先前创建的用户添加到测试组中：![](img/996f892a-30c6-4e92-9905-948079b84720.jpg)
- en: Now you need to check whether the configuration created now allows the new user
    account to run commands using `sudo`.
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您需要检查当前创建的配置是否允许新用户帐户使用 `sudo` 执行命令。
- en: To switch to the newly created user account, use the `su` option:![](img/ebbb55fa-77af-4c4c-910d-c294150c29e3.jpg)
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要切换到新创建的用户帐户，请使用 `su` 选项：![](img/ebbb55fa-77af-4c4c-910d-c294150c29e3.jpg)
- en: Now use the `groups` command to confirm the presence of the user account in
    the test group:![](img/305ed1ed-cbc3-4b28-94cb-572d20f86aa4.jpg)
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用 `groups` 命令确认该用户帐户是否在测试组中：![](img/305ed1ed-cbc3-4b28-94cb-572d20f86aa4.jpg)
- en: 'Finally, run the `whoami` command with `sudo` from the new account. As you
    have executed a command using `sudo` for the first time using this new user account,
    the default banner message will be displayed for the `sudo` command. The screen
    will also ask for the user account password to be entered:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，从新帐户运行带有 `sudo` 的 `whoami` 命令。由于您是第一次使用该新用户帐户通过 `sudo` 执行命令，因此会显示 `sudo`
    命令的默认横幅消息。屏幕还会要求输入用户帐户密码：
- en: '![](img/718f4426-3745-48de-83db-b0750f256cbf.jpg)'
  id: totrans-225
  prefs: []
  type: TYPE_IMG
  zh: '![](img/718f4426-3745-48de-83db-b0750f256cbf.jpg)'
- en: The last line of the output shown is the username returned by the `whoami` command.
    If `sudo` is configured correctly this value will be root.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出的最后一行是 `whoami` 命令返回的用户名。如果 `sudo` 配置正确，该值将是 root。
- en: You have successfully configured a user with sudo access. You can now log in
    to this user account and use `sudo` to run commands the same way as you would
    from the root user.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 您已成功配置了一个具有 `sudo` 权限的用户。现在，您可以登录此用户帐户，并像使用 root 用户一样使用 `sudo` 执行命令。
- en: How it works…
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: When you create a new account, it does not have the permission to run administrator
    commands. However, after editing the `/etc/sudoers` file, and making appropriate
    entry to grant sudo access to the new user account, you can start using the new
    user account to run all administrator commands.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 当您创建一个新帐户时，它没有运行管理员命令的权限。然而，在编辑 `/etc/sudoers` 文件并进行适当的条目以授予新用户帐户 `sudo` 访问权限后，您就可以开始使用新帐户执行所有管理员命令。
- en: There’s more…
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容…
- en: Here are some extra measures that you can take to ensure total security.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些您可以采取的额外措施，以确保完全的安全性。
- en: Vulnerability assessment
  id: totrans-232
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 漏洞评估
- en: A vulnerability assessment is the process of auditing your network and system
    security, through which you can come to know about the confidentiality, integrity,
    and availability of your network. The first phase in vulnerability assessment
    is reconnaissance, and this further leads to the phase of system readiness, in
    which we mainly check for all known vulnerabilities in the target. Next follows
    the phase of reporting in which we group all the vulnerabilities found into categories
    of low, medium, and high risk.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 漏洞评估是审计您的网络和系统安全的过程，通过该过程，您可以了解网络的机密性、完整性和可用性。漏洞评估的第一阶段是侦察，这将进一步引导进入系统准备阶段，在该阶段我们主要检查目标中所有已知的漏洞。接下来是报告阶段，我们将所有发现的漏洞分为低风险、中等风险和高风险类别。
- en: Scanning hosts with Nmap
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Nmap 扫描主机
- en: Nmap, which can be used for scanning a network, is one of the most popular tools
    included in Linux. It has been in existence for many years, and is currently one
    of the preferred tools for gathering information about a network. Nmap can be
    used by administrators on their networks to find any open ports and the host systems.
    When performing vulnerability assessments, Nmap is surely a tool not to be missed.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap 是用于扫描网络的工具，是 Linux 中最流行的工具之一。它已经存在多年，目前是收集网络信息的首选工具之一。Nmap 可以由管理员在其网络上使用，用于查找任何开放端口和主机系统。在进行漏洞评估时，Nmap
    绝对是一个不容错过的工具。
- en: Getting ready
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Most Linux versions come with Nmap installed. The first step is to check whether
    you already have it by using the following command:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数 Linux 版本都预装了 Nmap。第一步是使用以下命令检查您是否已安装它：
- en: '[PRE9]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'If Nmap exists, you should see output similar to this:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 Nmap 存在，您应该看到类似以下的输出：
- en: '![](img/ace504d0-5e56-4838-9d43-486b78ee3b1f.png)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ace504d0-5e56-4838-9d43-486b78ee3b1f.png)'
- en: 'If Nmap is not already installed, you can download and install it from this
    link: [https://nmap.org/download.html.](https://nmap.org/download.html)'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Nmap尚未安装，你可以通过以下链接下载并安装它：[https://nmap.org/download.html](https://nmap.org/download.html)
- en: 'The following command will quickly install Nmap on your system:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令将快速在你的系统上安装Nmap：
- en: '[PRE10]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: How to do it...
  id: totrans-244
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Follow these steps for scanning hosts with Nmap:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描主机时请按照以下步骤操作：
- en: The most common use of Nmap is to find all the hosts online within a given IP
    range. The default command used takes some time to scan the complete network,
    depending on the number of hosts in the network.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Nmap最常见的用途是查找给定IP范围内的所有在线主机。所使用的默认命令需要一些时间来扫描完整的网络，这取决于网络中主机的数量。
- en: The following screenshot shows an example:![](img/6d0f40a6-9684-4bf9-8dba-0ab67c72254c.png)
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下截图展示了一个例子：![](img/6d0f40a6-9684-4bf9-8dba-0ab67c72254c.png)
- en: To perform a SYN scan on a particular IP from a subnet, use the following command:![](img/bfcfa8dc-27e9-4c7e-857a-219e59cf9215.png)
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要对子网中的特定IP执行SYN扫描，请使用以下命令：![](img/bfcfa8dc-27e9-4c7e-857a-219e59cf9215.png)
- en: If SYN scan does not work properly, you can also use Stealth scan:![](img/e98d5af2-a766-4b63-8bf4-6277d0a4591c.png)
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果SYN扫描不能正常工作，你也可以使用隐形扫描：![](img/e98d5af2-a766-4b63-8bf4-6277d0a4591c.png)
- en: To detect the version number of the services running on the remote host, you
    can perform Service Version Detection scan as follows:![](img/2edf882c-0432-4645-9d68-7aee019184c0.png)
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要检测远程主机上运行的服务版本号，可以执行服务版本检测扫描，如下所示：![](img/2edf882c-0432-4645-9d68-7aee019184c0.png)
- en: 'If you want to detect the operating system running on the remote host, run
    the following command:'
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想检测远程主机上运行的操作系统，请运行以下命令：
- en: '[PRE11]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](img/538f3a50-00ef-404a-a8e2-4de873a3e642.png)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
  zh: '![](img/538f3a50-00ef-404a-a8e2-4de873a3e642.png)'
- en: The output here has been truncated:![](img/f6f73b30-6cc2-47b8-81dd-e857bc631921.png)
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这里的输出已被截断：![](img/f6f73b30-6cc2-47b8-81dd-e857bc631921.png)
- en: If you wish to scan only for a particular port, such as `80`, run the command:![](img/9fdc5fa0-42c5-4377-81bf-e4f892b59866.png)
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你只想扫描某个特定端口，如`80`，请运行以下命令：![](img/9fdc5fa0-42c5-4377-81bf-e4f892b59866.png)
- en: How it works...
  id: totrans-256
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Nmap checks for the services that are listening by testing the most common network
    communication ports. This information helps the network administrator to close
    all unwanted or unused ports and services. The previous examples show how to use
    port scanning and Nmap as a powerful tool to study the network around us.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap通过测试最常见的网络通信端口来检查正在监听的服务。此信息有助于网络管理员关闭所有不需要或未使用的端口和服务。之前的示例展示了如何使用端口扫描以及如何利用Nmap作为强大的工具来研究我们周围的网络。
- en: See also
  id: totrans-258
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参见
- en: Nmap also has scripting features that we can use to write custom scripts. These
    scripts can be used with Nmap to automate and extend the scanning capabilities
    of Nmap.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap还具有脚本功能，可以用来编写自定义脚本。这些脚本可以与Nmap一起使用，自动化并扩展Nmap的扫描能力。
- en: 'You can find more information about using Nmap at its official homepage: [https://nmap.org/](https://nmap.org/).
    [](https://nmap.org/)'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在Nmap的官方网站找到更多关于使用Nmap的信息：[https://nmap.org/](https://nmap.org/)
- en: Gaining root on a vulnerable Linux system
  id: totrans-261
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取有漏洞的Linux系统的root权限
- en: When trying to learn how to scan and exploit a Linux machine, one major problem
    we encounter is where to try. For this purpose, the Metasploit team has developed
    and released a virtual machine called *Metasploitable*. This machine has been
    made vulnerable purposefully, having many services running unpatched. Due to this,
    it has become a great platform for practicing or developing penetration testing
    skills. In this section, we will learn how to scan a Linux system and then, using
    the scanning result, how to find a service that is vulnerable. Using that vulnerable
    service, we shall gain root access to the system.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 当尝试学习如何扫描并利用Linux机器时，我们遇到的一个主要问题是哪里可以进行尝试。为此，Metasploit团队开发并发布了一款虚拟机，名为*Metasploitable*。这台机器故意设为有漏洞，运行了许多未打补丁的服务。因此，它成为了一个非常适合练习或开发渗透测试技能的平台。在本节中，我们将学习如何扫描Linux系统，并通过扫描结果，找到一个有漏洞的服务。利用这个漏洞服务，我们将获取系统的root权限。
- en: Getting ready
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Kali Linux and the Metasploitable VMware system will be used in this section.
    The image file of Metasploitable can be downloaded from these links:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将使用Kali Linux和Metasploitable VMware系统。Metasploitable的镜像文件可以从以下链接下载：
- en: '[http://sourceforge.net/projects/metasploitable/files/Metasploitable2/](http://sourceforge.net/projects/metasploitable/files/Metasploitable2/)'
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://sourceforge.net/projects/metasploitable/files/Metasploitable2/](http://sourceforge.net/projects/metasploitable/files/Metasploitable2/)'
- en: '[https://images.offensive-security.com/virtual-images/kali-linux-2018.2-vm-i386.zip](https://images.offensive-security.com/virtual-images/kali-linux-2018.2-vm-i386.zip)'
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://images.offensive-security.com/virtual-images/kali-linux-2018.2-vm-i386.zip](https://images.offensive-security.com/virtual-images/kali-linux-2018.2-vm-i386.zip)'
- en: How to do it...
  id: totrans-267
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: The Metasploit Framework is an open source tool used by security professionals
    globally to perform penetration tests by executing exploit code on target systems
    from within the framework. It comes pre-installed with Kali Linux (the preferred
    choice of distribution for security professionals).
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit框架是一个开源工具，全球的安全专业人员使用它通过在框架内执行漏洞代码来进行渗透测试。它预装在Kali Linux中（Kali Linux是安全专家的首选发行版）。
- en: 'Follow these steps to gain root access to a vulnerable Linux system:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤获得对易受攻击的Linux系统的root访问权限：
- en: 'First open the Metasploit console on the Kali system by running the following
    command:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先通过运行以下命令在Kali系统上打开Metasploit控制台：
- en: '[PRE12]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](img/2dd9b486-0260-495a-93cd-b1df58aef53d.png)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2dd9b486-0260-495a-93cd-b1df58aef53d.png)'
- en: At the bottom of the screen, you should get the Metasploit framework prompt
    denoted by `msf>`.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕底部，你应该看到由`msf>`表示的Metasploit框架提示符。
- en: 'Next, we need to scan the target, which is `192.168.0.102` in this example,
    using Nmap:'
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要使用Nmap扫描目标（在本示例中是`192.168.0.102`）：
- en: 'The following screenshot shows the output of the command:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了命令的输出：
- en: '![](img/c45f87d1-d84e-4f21-8fcc-6e9cce8ae326.png)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c45f87d1-d84e-4f21-8fcc-6e9cce8ae326.png)'
- en: In the previous command, you can see there are many services running on different
    ports. Among them you can see FTP is also running on port `21`.
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的命令中，你可以看到许多服务正在不同的端口上运行。其中你可以看到FTP也在端口`21`上运行。
- en: We will focus on the FTP service for now. From the output shown, you can see
    that the FTP service is provided by the vsftpd application version 2.3.4.
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们现在重点关注FTP服务。从输出结果中可以看到，FTP服务由vsftpd应用程序版本2.3.4提供。
- en: 'Now lets try to find an exploit for `vsftpd` within the Metasploit framework
    by simply executing the command `search` `vsftpd.` Here is the output:'
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们尝试在Metasploit框架中为`vsftpd`寻找一个漏洞，通过简单地执行命令`search vsftpd`。以下是输出结果：
- en: '![](img/da12ffaa-43b9-4a7a-9dbb-08dce8378529.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![](img/da12ffaa-43b9-4a7a-9dbb-08dce8378529.png)'
- en: The search results are showing a module, VSFTPD Backdoor Command Execution,
    with an excellent rating, which means that this exploit will work perfectly fine.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索结果显示了一个模块——VSFTPD后门命令执行，评分非常高，这意味着这个漏洞可以完美地工作。
- en: Now run the following commands to use the exploit and check its options:![](img/00538b6b-cc3d-4fb6-bf02-5f2b8cd9e63e.png)
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行以下命令来使用漏洞并检查其选项：![](img/00538b6b-cc3d-4fb6-bf02-5f2b8cd9e63e.png)
- en: As you can see from the screenshot, you need to set the value of `RHOST`, which
    is `192.168.1.102` in our case.
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如截图所示，你需要设置`RHOST`的值，在我们的例子中是`192.168.1.102`。
- en: 'Set the value for `RHOST` and then run the exploit as shown here:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置`RHOST`的值，然后按照如下所示执行漏洞：
- en: '![](img/cb65f99b-068b-4222-a564-394a8002ff95.png)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb65f99b-068b-4222-a564-394a8002ff95.png)'
- en: Once the exploit runs successfully, you will get root access, as shown in the
    preceding screenshot.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦漏洞成功执行，你将获得root访问权限，如前面的截图所示。
- en: How it works...
  id: totrans-287
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: We first did an Nmap scan to check for running services and open ports and found
    the FTP service running. Then we tried to find the version of the FTP service.
    Once we got the information, we searched for any exploit available for VSFTPD.
    The VSFTPD backdoor module that was found in the search result is actually a code
    that is being sent to the target machine by the Metasploit framework. The code
    gets executed on the target machine due to a module of the VSFTPD being improperly
    programmed. Once the code gets executed, we get a root shell access on our Kali
    machine
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先进行了Nmap扫描，检查运行的服务和开放的端口，并发现FTP服务正在运行。然后我们尝试找出FTP服务的版本。一旦获取了信息，我们就搜索是否有适用于VSFTPD的漏洞。搜索结果中找到的VSFTPD后门模块，实际上是Metasploit框架发送到目标机器的代码。由于VSFTPD的某个模块编写不当，代码会在目标机器上执行。一旦代码执行，我们就能在Kali机器上获得root
    shell访问权限。
- en: Using the exploit found for VSFTPD, we tried to attack the target system and
    got the root shell on it.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 使用找到的VSFTPD漏洞，我们尝试攻击目标系统并获得了root shell。
- en: There's more...
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多…
- en: Let's learn about a few more exploits and attacks that are common in Linux.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们了解一些Linux中常见的其他漏洞和攻击方式。
- en: Missing backup plans
  id: totrans-292
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 缺少备份计划
- en: In this era of malicious attacks and dangerous cyberattacks, your data is never
    safe. Your data needs something more than just protection. Its needs insurance
    in the form of backups. At any point of time, if your data is lost, having data
    backups ensures that your business can be up and running in no time.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个充满恶意攻击和危险网络攻击的时代，数据永远不安全。你的数据需要的不仅仅是保护，它还需要备份作为保险。在任何时候，如果你的数据丢失，拥有数据备份可以确保你的业务能够迅速恢复运行。
- en: Getting ready
  id: totrans-294
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: When we talk about data backup in Linux, choosing the best backup tool that
    matches your business needs is essential. Everyone needs to have a data backup
    tool that is dependable, but it's not necessary to spend too much to get a tool
    that has features that meets your needs. The backup tool should allow you to have
    local backups, remote backups, one-time backups, scheduled backups, and many other
    features.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们谈论 Linux 中的数据备份时，选择一个与业务需求相匹配的最佳备份工具是至关重要的。每个人都需要一个可靠的数据备份工具，但不需要花费过多，以便获得满足需求的功能。备份工具应该允许你进行本地备份、远程备份、一次性备份、定期备份等许多功能。
- en: How to do it...
  id: totrans-296
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Let's look at a few outstanding backup tools for Linux.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下几个出色的 Linux 备份工具。
- en: fwbackups
  id: totrans-298
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: fwbackups
- en: This is the easiest of all Linux backup tools. fwbackups has a user-friendly
    interface and it can be used for single backups and also for recurring scheduled
    backups.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 这是所有 Linux 备份工具中最简单的。fwbackups 具有用户友好的界面，可以用于单次备份，也可以用于定期备份。
- en: Local as well as remote backups can be done in various formats, such as `tar`,
    `tar.gz`, `tar.bz`, or `rsync` format. A single file or an entire computer can
    be backed up using this tool.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过各种格式进行本地和远程备份，例如 `tar`、`tar.gz`、`tar.bz` 或 `rsync` 格式。可以使用该工具备份单个文件或整个计算机。
- en: Using this tool, backup and restoring can be done easily. Incremental or differential
    backups can be done to speed the process.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 使用该工具，备份和恢复可以轻松完成。增量或差异备份可以加速该过程。
- en: rsync
  id: totrans-302
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: rsync
- en: This is one of the most widely used backup solutions for Linux. It can be used
    for incremental backups, whether local or remote.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 这是最广泛使用的 Linux 备份解决方案之一。它可用于增量备份，无论是本地备份还是远程备份。
- en: '`rsync` can be used to update directory trees and filesystems while preserving
    links, ownerships, permissions, and privileges.'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: '`rsync` 可以在保持链接、所有权、权限和特权的同时，更新目录树和文件系统。'
- en: Being a command-line tool, `rsync` is perfect for creating simple scripts to
    use in conjunction with `cron`, so as to create automated backups.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一款命令行工具，`rsync` 非常适合用来创建简单的脚本，结合 `cron` 使用，以便实现自动化备份。
- en: Amanda (Advanced Maryland Automatic Network Disk Archiver)
  id: totrans-306
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Amanda（高级马里兰自动网络磁盘归档器）
- en: This is a free and open source tool developed for "*moderately sized computer
    centers*". It is designed for performing the backup of multiple machines over
    the network to tape drives, disks, or optical disks.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个为“*中型计算机中心*”开发的免费开源工具。它旨在通过网络对多台机器进行备份，备份目标可以是磁带驱动器、磁盘或光盘。
- en: Amanda can be used to backup about everything on a diverse network, using a
    combination of a master backup server and Linux or Windows.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: Amanda 可以用于备份多样化网络中的几乎所有内容，结合主备份服务器与 Linux 或 Windows 系统使用。
- en: LVM snapshots and hardware snapshots can also be handled using this tool.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: LVM 快照和硬件快照也可以通过该工具进行处理。
- en: Simple Backup Solution (SBS)
  id: totrans-310
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简单备份解决方案（SBS）
- en: Primarily targeted at desktop backup, SBS can be used to backup files and directories.
    It also allows regular expressions to be used for exclusion purposes.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: SBS 主要针对桌面备份，可以用于备份文件和目录。它还允许使用正则表达式进行排除操作。
- en: It includes pre-defined backup configurations that can be used to back up directories
    such as `/var/`, `/etc/`, `/usr/local`.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 它包括预定义的备份配置，可以用来备份如 `/var/`、`/etc/`、`/usr/local` 等目录。
- en: SBS can be used for custom backups, manual backups and scheduled backups, and
    is not limited to just pre-defined backups.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: SBS 可用于自定义备份、手动备份和定期备份，并不限于仅仅预定义的备份。
- en: Bacula
  id: totrans-314
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Bacula
- en: Bacula is a free and open source tool and requires client programs to be installed
    on each system targeted for backup. All these systems are controlled using a server
    that centrally handles the backup rules.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: Bacula 是一个免费开源工具，需要在每个目标系统上安装客户端程序，所有这些系统通过一个集中控制的服务器来管理备份规则。
- en: Bacula has its own file format, which is not proprietary as the tool is open
    source.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: Bacula 有自己的文件格式，并不是专有的，因为该工具是开源的。
- en: Routine full and incremental backups can be done using the tool and it offers
    better support for setups if multiple servers are being used with their own tape
    drives.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用该工具进行常规的全量和增量备份，如果使用多个服务器并配有独立磁带驱动器，它还提供更好的配置支持。
- en: Encryption and RAID is supported by Bacula. Scripting language for customizing
    your backup jobs is also offered by Bacula, which can be used to incorporate encryption.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: Bacula支持加密和RAID。Bacula还提供了自定义备份任务的脚本语言，可以用来集成加密功能。
- en: How it works...
  id: totrans-319
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: A backup tool is necessary for anyone in the IT industry or a computer power
    user. The backup tool should be capable of scheduled backups, one-time backups,
    local backups, remote backups, and many other features.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 备份工具对于任何IT行业从业者或计算机重度用户都是必需的。该备份工具应支持定时备份、一键备份、本地备份、远程备份以及许多其他功能。
