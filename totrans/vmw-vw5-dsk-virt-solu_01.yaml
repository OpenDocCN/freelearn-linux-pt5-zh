- en: Chapter 1. Components of VMware View
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章. VMware View的组成部分
- en: '**Virtualization**, the technology of abstracting the operating systems from
    the underlying physical server components, has become a cornerstone of the data
    center architecture. Virtualization allows organizations to run not just one operating
    system per physical server in the data center, but tens, dozens, or even hundreds,
    on a single physical server. The benefits of virtualization are many, including
    a reduction in hardware, power, and cooling costs. In addition, virtualization
    allows for new techniques of distribution and resilience to be applied, such as
    **VMware Distributed Resource Scheduler (DRS)** and **VMware High Availability
    (HA)**. Server virtualization, the virtualization of server operating systems
    on server hardware, is now a mainstream technology, which is readily accepted,
    adopted, and implemented in organizations across the world.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**虚拟化**，即将操作系统与底层物理服务器组件进行抽象的技术，已经成为数据中心架构的基石。虚拟化使得组织能够在数据中心的单台物理服务器上运行多个操作系统，不仅仅是一个，而是几十个，甚至上百个。虚拟化的好处有很多，包括减少硬件、能源和冷却成本。此外，虚拟化还可以应用新的分布式和弹性技术，如**VMware分布式资源调度器
    (DRS)**和**VMware高可用性 (HA)**。服务器虚拟化，即在服务器硬件上虚拟化服务器操作系统，已经成为一种主流技术，全球各地的组织都在广泛接受、采用和实施。'
- en: '**Virtual Desktop Infrastructure (VDI)**, the virtualization of desktop operating
    systems on server hardware, is another story.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '**虚拟桌面基础架构 (VDI)**，即在服务器硬件上虚拟化桌面操作系统，是另一个话题。'
- en: The reason for the slower adoption of the virtual desktops was originally due
    to many factors, including an immature technology, lack of general understanding
    of a comprehensive solution, a proven delivery methodology, and a clear understanding
    of the success criteria of a given virtual desktop project.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟桌面推广较慢的原因最初是由于多种因素，包括技术尚不成熟、缺乏对全面解决方案的普遍理解、缺乏经过验证的交付方法以及对虚拟桌面项目成功标准的明确理解。
- en: Today, many of these hurdles have been removed. The supporting technologies
    from communication protocols to computing density, platform stability, and desirable
    end devices, now exist. Design methodologies have been built by some of the largest
    integrators in the world; yet virtual desktop projects continue to fail, falter,
    or stall.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，许多障碍已经被消除。从通信协议到计算密度、平台稳定性以及理想的终端设备，相关的支持技术现已存在。全球一些最大的集成商已经建立了设计方法；然而，虚拟桌面项目仍然面临失败、停滞或受阻的情况。
- en: This book will provide the architect, the engineer, the project manager, the
    freelance consultant, or the contractor, with a proven blueprint for success.
    More importantly, this book will teach the key success criteria to measure the
    most important design considerations to make and how to tip the probability of
    the project's success and sign-off in your favor.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将为架构师、工程师、项目经理、自由顾问或承包商提供一套经过验证的成功蓝图。更重要的是，本书将教授关键的成功标准，帮助读者衡量最重要的设计考虑因素，并如何提高项目成功率并确保顺利通过验收。
- en: Before these concepts can be covered in depth, it is important to understand
    the components of a **virtual desktop (vDesktop)** solution. The technology in
    this book focuses on VMware View, which is a market leader in VDI. While some
    concepts in this book apply specifically to VMware View-based solutions, many
    of the topics will help a VDI architect of any technology plan and build for success.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入讨论这些概念之前，理解**虚拟桌面 (vDesktop)** 解决方案的组成部分是非常重要的。本书中的技术重点是VMware View，它是VDI领域的市场领导者。虽然本书中的一些概念专门适用于基于VMware
    View的解决方案，但许多话题将帮助任何技术的VDI架构师规划并构建成功的解决方案。
- en: Core components of VMware View
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VMware View的核心组件
- en: 'This book assumes a familiarity with server virtualization, more specifically,
    VMware vSphere (sometimes referred to as ESX by industry graybeards). Therefore,
    this chapter will focus on:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本书假设读者已经熟悉服务器虚拟化，特别是VMware vSphere（行业内一些资深人士有时称之为ESX）。因此，本章将重点讨论：
- en: The VMware vCenter Server
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware vCenter Server
- en: The types of View Connection Server
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: View连接服务器的类型
- en: Agent and client software
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理和客户端软件
- en: vCenter Server
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: vCenter Server
- en: 'VMware vCenter is a required component of a VMware View solution. This is because
    the View Connection Server interacts with the underlying **Virtual Infrastructure
    (VI)** through vCenter Web Service (typically over port 443). vCenter is also
    responsible for the complementary components of a VMware View solution provided
    by the underlying VMware vSphere, including VMotion and DRS (used to balance the
    virtual desktop load on the physical hosts). When an end customer purchases VMware
    View bundles, VMware vCenter is automatically included and does not need to be
    purchased via a separate **Stock Keeping Unit (SKU)**. In the environments leveraging
    vSphere for server virtualization, vCenter Server is likely to already exist.
    To ensure a level set on the capabilities that VMware vCenter Server provides,
    the key terminologies are listed as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: VMware vCenter 是 VMware View 解决方案的必需组件。这是因为 View Connection Server 通过 vCenter
    Web Service（通常通过 443 端口）与底层的**虚拟基础架构（VI）**进行交互。vCenter 还负责 VMware vSphere 提供的
    VMware View 解决方案的补充组件，包括 VMotion 和 DRS（用于平衡物理主机上的虚拟桌面负载）。当最终客户购买 VMware View 套件时，VMware
    vCenter 会自动包含在内，无需单独通过**库存单位（SKU）**购买。在利用 vSphere 进行服务器虚拟化的环境中，vCenter Server
    很可能已经存在。为了确保了解 VMware vCenter Server 提供的功能，以下列出了关键术语：
- en: '**vMotion:** It is the ability to live migrate a running virtual machine from
    one physical server to another with no downtime.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**vMotion：** 它是将运行中的虚拟机从一台物理服务器迁移到另一台物理服务器的能力，且没有停机时间。'
- en: '**DRS:** It is the vCenter Server capability that balances virtual machines
    across physical servers participating in the same vCenter Server cluster.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DRS：** 它是 vCenter Server 的功能，可以在参与同一 vCenter Server 集群的物理服务器之间平衡虚拟机负载。'
- en: '**Cluster:** It is a collection of physical servers that have access to the
    same networks and shared storage. The physical servers participating in a vCenter
    cluster have their resources (for example, CPU, memory, and so on) logically pooled
    for virtual machine consumption.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**集群：** 它是一个物理服务器的集合，这些服务器可以访问相同的网络和共享存储。参与 vCenter 集群的物理服务器将它们的资源（例如 CPU、内存等）逻辑地汇集起来，以供虚拟机使用。'
- en: '**HA:** It is the vCenter Server capability that protects against the failure
    of a physical server. HA will power up virtual machines that reside on the failed
    physical server on available physical servers in the same cluster.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**HA：** 它是 vCenter Server 的功能，旨在防止物理服务器故障。HA 会在同一集群中的可用物理服务器上启动驻留在故障物理服务器上的虚拟机。'
- en: '**Folder:** It is a logical grouping of virtual machines, displayed within
    the vSphere Client.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件夹：** 它是虚拟机的逻辑分组，在 vSphere 客户端中显示。'
- en: '**vSphere Client:** It is the client-side software used to connect to vCenter
    Servers (or physical servers running vSphere) for management, monitoring, configuration,
    and other related tasks.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**vSphere 客户端：** 它是客户端软件，用于连接到 vCenter Servers（或运行 vSphere 的物理服务器）进行管理、监控、配置及其他相关任务。'
- en: '**Resource pool:** It is a logical pool of resources (for example, CPU, memory,
    and so on). The virtual machines (or the groups of virtual machines) residing
    in the same resource pool will share a predetermined amount of resources.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源池：** 它是资源的逻辑池（例如 CPU、内存等）。位于同一资源池中的虚拟机（或虚拟机组）将共享预定的资源量。'
- en: Designing a VMware View solution often touches on typical server virtualization
    design concepts such as the proper cluster design. Owing to this overlap in design
    concepts between server virtualization and VDI, many server virtualization engineers
    apply exactly the same principles from one solution to the other.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 设计 VMware View 解决方案时，通常会涉及到典型的服务器虚拟化设计概念，例如正确的集群设计。由于服务器虚拟化和 VDI 之间设计概念的重叠，许多服务器虚拟化工程师将相同的原则从一个解决方案应用到另一个解决方案中。
- en: The first misstep that a VDI architect can take is that VDI is not server virtualization
    and should not be treated as such. Server virtualization is the virtualization
    of server operating systems. While it is true that VDI does use some server virtualization
    (for the connection infrastructure, for example), there are many concepts that
    are new and critical to understand for success.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: VDI 架构师常犯的第一个错误是将 VDI 视为服务器虚拟化并以相同的方式对待它。服务器虚拟化是对服务器操作系统的虚拟化。虽然 VDI 确实使用一些服务器虚拟化技术（例如用于连接基础设施），但有许多新概念对于成功至关重要，需要理解清楚。
- en: The second misstep a VDI architect can make is in understanding the pure scale
    of some VDI solutions. For the average server virtualization administrator with
    no VDI in their environment, he/she may be tasked with managing a dozen physical
    servers with a few hundred virtual machines. The authors of this book have been
    involved in VDI solutions involving tens of thousands of vDesktops, well beyond
    the limits of a traditional VMware vSphere design.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: VDI 架构师可能犯的第二个错误是未能理解某些 VDI 解决方案的真正规模。对于没有 VDI 环境的普通服务器虚拟化管理员来说，他/她可能只需要管理十几台物理服务器和几百台虚拟机。本书的作者曾参与过涉及数万台
    vDesktops 的 VDI 解决方案，远远超出了传统 VMware vSphere 设计的限制。
- en: VDI is often performed on a different scale. The concepts of architectural scaling
    are covered later in this book, but many of the scaling concepts revolve around
    the limits of VMware vCenter Server. It should be noted that VMware vCenter Server
    was originally designed to be the central management point for the enterprise
    server virtualization environments. While VMware continues to work on its ability
    to scale, designing around VMware vCenter server will be important.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: VDI 通常在不同的规模上进行。架构扩展的概念将在本书后面讨论，但许多扩展概念围绕着 VMware vCenter Server 的限制。需要注意的是，VMware
    vCenter Server 最初是为了作为企业服务器虚拟化环境的中央管理点而设计的。虽然 VMware 持续改进其扩展能力，但围绕 VMware vCenter
    Server 进行设计仍然非常重要。
- en: So why do we need VMware vCenter in the first place, for the VDI architect?
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，VDI 架构师为什么一开始就需要 VMware vCenter 呢？
- en: 'VMware vCenter is the gateway for all virtual machine tasks in a VMware View
    solution. This includes the following tasks:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: VMware vCenter 是 VMware View 解决方案中所有虚拟机任务的网关。包括以下任务：
- en: The creation of virtual machine folders to organize vDesktops
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建虚拟机文件夹以组织 vDesktops
- en: The creation of resource pools to segregate physical resources for different
    groups of vDesktops
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建资源池，将物理资源为不同组的 vDesktops 进行隔离
- en: The creation of vDesktops
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: vDesktops 的创建
- en: The creation of snapshots![vCenter Server](img/1124EN_01_01.jpg)
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快照的创建![vCenter Server](img/1124EN_01_01.jpg)
- en: VMware vCenter is not used to broker the connection of an end device to a vDesktop.
    Therefore, an outage of VMware vCenter should not impact inbound connections to
    already-provisioned vDesktops as it will prevent additional vDesktops from being
    built, refreshed, or deleted.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: VMware vCenter 不用于管理终端设备与 vDesktop 之间的连接。因此，VMware vCenter 的故障不应影响已配置的 vDesktops
    的入站连接，因为它只会阻止新的 vDesktops 的创建、刷新或删除。
- en: Because of vCenter Server's importance in a VDI solution, additional steps are
    often taken to ensure its availability even beyond the considerations made in
    a typical server virtualization solution.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 vCenter Server 在 VDI 解决方案中的重要性，通常会采取额外的步骤来确保其可用性，甚至超出典型服务器虚拟化解决方案中的考虑事项。
- en: Later in this book, there is a question asking whether an incumbent vCenter
    Server should be used for an organization's VDI or whether a secondary vCenter
    Server infrastructure should be built.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 本书后面有一个问题，询问是否应该使用现有的 vCenter Server 为组织的 VDI 提供服务，还是应该构建一个新的 vCenter Server
    基础设施。
- en: View Connection Server
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: View Connection Server
- en: View Connection Server is the primary component of a VMware View solution; if
    VMware vCenter Server is the gateway for management communication to the virtual
    infrastructure and the underlying physical servers, the VMware View Connection
    Server is the gateway that end users pass through to connect to their vDesktop.
    In classic VDI terms, it is VMware's broker that connects end users with workspaces
    (physical or virtual). View Connection Server is the central point of management
    for the VDI solution and is used to manage almost the entire solution infrastructure.
    However, there will be times when the architect will need to make considerations
    to vCenter cluster configurations, as discussed later in this book. In addition,
    there may be times when the VMware View administrator will need access to the
    vCenter Server.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: View Connection Server 是 VMware View 解决方案的核心组件；如果 VMware vCenter Server 是虚拟基础设施和底层物理服务器管理通信的网关，那么
    VMware View Connection Server 就是终端用户连接到其 vDesktop 的网关。用传统的 VDI 术语来说，它是 VMware
    的代理，连接终端用户与工作空间（无论是物理还是虚拟）。View Connection Server 是 VDI 解决方案的管理中心点，用于管理几乎整个解决方案的基础设施。然而，架构师在设计时有时需要考虑
    vCenter 集群配置，如本书后面所讨论的那样。此外，VMware View 管理员有时也需要访问 vCenter Server。
- en: The types of VMware View Connection Servers
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VMware View Connection Servers 的类型
- en: There are several options available when installing the VMware View Connection
    Server. Therefore, it is important to understand the different types of View Connection
    Servers and the role they play in a given VDI solution.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 VMware View Connection Server 时有多种选项可供选择。因此，理解不同类型的 View Connection Server
    及其在给定 VDI 解决方案中的作用至关重要。
- en: 'Following are the three configurations in which View Connection Server can
    be installed:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是 View Connection Server 可以安装的三种配置：
- en: '**Full:** This option installs all the components of View Connection Server,
    including a fresh **Lightweight Directory Access Protocol (LDAP)** instance.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**完全安装：** 此选项安装所有 View Connection Server 组件，包括一个新的 **轻量级目录访问协议（LDAP）** 实例。'
- en: '**Security:** This option installs only the necessary components for the View
    Connection portal. View Security Servers do not need to belong to an Active Directory
    domain (unlike the View Connection Server) as they do not access any authentication
    components (for example, Active Directory).'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性：** 此选项仅安装 View Connection 门户所需的组件。View 安全服务器无需属于 Active Directory 域（与
    View Connection Server 不同），因为它们不访问任何身份验证组件（例如，Active Directory）。'
- en: '**Replica:** This option creates a replica of an existing View Connection Server
    instance for load balancing or high availability purposes. The authentication/LDAP
    configuration is copied from the existing View Connection Server.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**副本：** 此选项为现有的 View Connection Server 实例创建副本，用于负载均衡或高可用性目的。认证/LDAP 配置将从现有的
    View Connection Server 复制。'
- en: Note
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Our goal is to design the solutions that are highly available for our end customers.
    Therefore, all the designs will leverage two or more View Connection Servers (for
    example, one Full and one Replica).
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们的目标是设计对最终客户高度可用的解决方案。因此，所有设计将利用两个或更多的 View Connection Server（例如，一个完全安装和一个副本）。
- en: 'The following services are installed during a Full installation of View Connection
    Server:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在完全安装 View Connection Server 时，将安装以下服务：
- en: VMware View Connection Server
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware View Connection Server
- en: VMware View Framework Component
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware View 框架组件
- en: VMware View Message Bus Component
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware View 消息总线组件
- en: VMware View Script Host
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware View 脚本主机
- en: VMware View Security Gateway Component
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware View 安全网关组件
- en: VMware View Web Component
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware View Web 组件
- en: VMware VDMDS
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware VDMDS
- en: VMware VDMDS provides the LDAP directory services.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: VMware VDMDS 提供 LDAP 目录服务。
- en: View Agent
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: View Agent
- en: 'View Agent is a component that is installed on the target desktop, whether
    physical (seldom) or virtual (almost always). View Agent allows the View Connection
    Server to establish a connection to the desktop. View Agent also provides the
    following capabilities:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: View Agent 是安装在目标桌面上的组件，无论是物理的（很少）还是虚拟的（几乎总是）。View Agent 使 View Connection Server
    能够与桌面建立连接。View Agent 还提供以下功能：
- en: '**USB redirection:** It is defined as making a USB device — that is connected
    locally — appear to be connected to vDesktop'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**USB 重定向：** 它被定义为使一个本地连接的 USB 设备显示为连接到 vDesktop。'
- en: '**Single Sign-On (SSO):** It is done by using intelligent credential handling,
    which requires only one secured and successful authentication login request, as
    opposed to logging in multiple times (for example, at the connection server, vDesktop,
    and so on)'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**单点登录（SSO）：** 通过智能凭证处理来完成，要求只进行一次安全和成功的身份验证登录请求，而不是多次登录（例如，在连接服务器、vDesktop
    等处）。'
- en: '**Virtual printing via ThinPrint technology:** It is the ability to streamline
    printer driver management through the use of ThinPrint (OEM)'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通过 ThinPrint 技术的虚拟打印：** 它通过使用 ThinPrint（OEM）来简化打印机驱动程序的管理。'
- en: '**PCoIP connectivity:** It is the purpose-built VDI protocol made by Teradici
    and used by VMware in their VMware View solution'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PCoIP 连接性：** 这是由 Teradici 制作并在 VMware View 解决方案中使用的专用 VDI 协议。'
- en: '**Persona management:** It is the ability to manage a user profile across an
    entire desktop landscape; the technology comes via the **recovery time objective
    (RTO)** acquisition by VMware'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**个人管理：** 它是在整个桌面环境中管理用户配置文件的能力；该技术通过 VMware 收购的 **恢复时间目标（RTO）** 实现。'
- en: '**View Composer support:** It is the ability to use linked clones and thin
    provisioning to drastically reduce operational efforts in managing a mid-to-large-scale
    VMware View environment'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**View Composer 支持：** 它是使用链接克隆和精简配置的功能，能够大幅减少在管理中到大型 VMware View 环境中的操作工作量。'
- en: View Client
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: View 客户端
- en: 'View Client is a component that is installed on the end device (for example,
    the user''s laptop). View Client allows the device to connect to a View Connection
    Server, which then directs the device to an available desktop resource. Following
    are the two types of View Clients:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: View Client 是安装在终端设备上的组件（例如，用户的笔记本电脑）。View Client 允许设备连接到 View Connection Server，然后将设备引导到可用的桌面资源。以下是两种类型的
    View Client：
- en: View Client
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: View Client
- en: View Client with Local Mode
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带本地模式的 View Client
- en: These separate versions have their own unique installation bits (only one may
    be installed at a time). View Client provides all of the functionality needed
    for an online and connected worker. If Local Mode will be leveraged in the solution,
    View Client with Local Mode should be installed.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 这些独立版本有各自独特的安装文件（每次只能安装一个）。View Client 提供了在线连接工作的所有功能。如果解决方案中需要使用本地模式，则应安装带有本地模式的
    View Client。
- en: VMware View Local Mode is the ability to securely check out a vDesktop to a
    local device for use in disconnected scenarios (for example, in the middle of
    the jungle).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: VMware View 本地模式是能够将 vDesktop 安全地检查到本地设备中，以便在断开连接的场景下使用（例如，在丛林中）。
- en: There is roughly an 80 MB difference in the installed packages (View Client
    with Local Mode being larger). For most scenarios, 80 MB of disk space will not
    make or break the solution as even flash drives are well beyond an 80 MB threshold.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 安装包的大小差异约为 80 MB（带本地模式的 View Client 较大）。对于大多数场景来说，80 MB 的磁盘空间不会影响解决方案的可行性，因为即使是闪存驱动器也远超过
    80 MB 的阈值。
- en: 'In addition to providing the functionality of being able to connect to a desktop,
    View Client talks to View Agent to perform the following tasks:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 除了提供能够连接到桌面的功能外，View Client 还与 View Agent 通信，以执行以下任务：
- en: USB redirection
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB 重定向
- en: Single Sign-On
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单点登录
- en: Optional component — VMware View Composer
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可选组件 — VMware View Composer
- en: The components covered earlier in this chapter belong to the set of mandatory
    components in a VMware View solution. The major component that is optional in
    a VMware View solution is View Composer. It should be noted that when some third-party
    solutions such as Unidesk or storage-based cloning are used in conjunction with
    VMware View, View Composer is not used. This is because solutions such as Unidesk
    or storage-based cloning have their own approach for handling mass provisioning
    of vDesktops.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 本章之前介绍的组件属于 VMware View 解决方案中的必需组件。VMware View 解决方案中唯一可选的主要组件是 View Composer。需要注意的是，当一些第三方解决方案（如
    Unidesk 或基于存储的克隆）与 VMware View 一起使用时，View Composer 并不被使用。这是因为像 Unidesk 或基于存储的克隆等解决方案有自己的方式来处理
    vDesktops 的大规模配置。
- en: View Composer is used in the majority of view-based solutions today, but there
    are very valid scenarios and solutions that do not require the use of View Composer.
    As this book focuses on VMware View solutions and not VMware View with third-party
    components, View Composer will be discussed heavily throughout this book.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: View Composer 在当前大多数基于视图的解决方案中都被使用，但也有一些非常有效的场景和解决方案不需要使用 View Composer。由于本书专注于
    VMware View 解决方案，而不是 VMware View 与第三方组件的结合，View Composer 将在全书中进行详细讨论。
- en: Introduction to View Composer
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: View Composer 介绍
- en: View Composer is the component that manages the deployment of linked clones,
    described later in this chapter, for desktop VMs from a single base snapshot.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: View Composer 是管理链接克隆部署的组件，稍后将在本章中介绍，旨在通过单一基准快照为桌面虚拟机部署克隆。
- en: Note
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: View Composer is installed on vCenter Servers only.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: View Composer 仅安装在 vCenter 服务器上。
- en: View Composer also uses a separate database to store the information regarding
    mapping, deployment, and so on of the linked-clone desktops. This database can
    reside on the same database server as the existing vCenter database, assuming
    that it is a supported platform. However, the database itself must be unique to
    View Composer. This means that the View Composer database cannot use the existing
    vCenter Server database (but it could use the same server with a separate database
    instance).
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: View Composer 还使用一个独立的数据库来存储有关链接克隆桌面的映射、部署等信息。该数据库可以与现有的 vCenter 数据库位于同一数据库服务器上，前提是它是受支持的平台。然而，数据库本身必须是专用于
    View Composer 的。这意味着 View Composer 数据库不能使用现有的 vCenter Server 数据库（但可以使用同一服务器上的独立数据库实例）。
- en: In addition, a separate **Open Database Connectivity (ODBC)** connection must
    be set up on the vCenter Servers with the appropriate information for the View
    Composer database connection.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，必须在 vCenter 服务器上设置一个单独的 **开放数据库连接（ODBC）** 连接，并提供适当的 View Composer 数据库连接信息。
- en: Note
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If View Composer is used, only automatic pool types are supported. Also, the
    database instance must be unique to View Composer.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果使用View Composer，则仅支持自动池类型。此外，数据库实例必须是专用于View Composer的。
- en: Using vCenter's SQL Express Installation for View Composer
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用vCenter的SQL Express安装进行View Composer配置
- en: 'Small **Proof-of-Concept (PoC)** environments may want to leverage the existing
    SQL Express installation on their VMware vCenter Server. It is possible to leverage
    the same SQL Express instance as long as a separate database is created. To create
    a separate database, perform the following steps:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 小型**概念验证（PoC）**环境可能希望利用其VMware vCenter Server上的现有SQL Express安装。只要创建一个单独的数据库，就可以利用相同的SQL
    Express实例。要创建单独的数据库，请执行以下步骤：
- en: Download and install SQL Server Management Studio Express.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并安装SQL Server Management Studio Express。
- en: Connect to the vCenter Server instance of SQL Express.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接到SQL Express的vCenter Server实例。
- en: Right-click on the instance name and add a new database (for example, `View_Composer)`.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击实例名称，添加一个新数据库（例如，`View_Composer`）。
- en: Configure the ODBC connection and use`<vCenter Server>/SQLEXP_VIM` for the connection
    string. Replace`<vCenter Server>` with the appropriate information for your environment.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置ODBC连接，并使用`<vCenter Server>/SQLEXP_VIM`作为连接字符串。将`<vCenter Server>`替换为适合你环境的相关信息。
- en: Snapshots and linked clones
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 快照与链接克隆
- en: A snapshot saves a point-in-time state of a given virtual machine. Changes beyond
    the snapshot of the point-in-time are written to a delta disk while the original
    virtual disk (`.vmdk`) is marked as read-only. This preserves the point-in-time
    state of the virtual machine until the snapshot is deleted by an administrator.
    Multiple snapshots of a given virtual machine can be taken, and it is these point-in-time
    snapshots that are used as the basis for VMware View Composer linked clones.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 快照保存了给定虚拟机的某一时刻的状态。超出该时刻快照的变化将写入增量磁盘，而原始虚拟磁盘（`.vmdk`）则被标记为只读。这样可以保持虚拟机的时刻状态，直到管理员删除快照为止。可以为给定虚拟机拍摄多个快照，这些时刻快照作为VMware
    View Composer链接克隆的基础。
- en: Linked clones
  id: totrans-90
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 链接克隆
- en: A **linked clone** is a copy of a virtual machine based on a specific snapshot
    of that virtual machine (known as the **parent)**. When a linked clone pool is
    created, VMware View Composer creates a replica.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '**链接克隆**是基于虚拟机的特定快照（称为**父虚拟机**）创建的虚拟机副本。当创建链接克隆池时，VMware View Composer会创建一个副本。'
- en: The **replica** is the original read-only base virtual machine disk merged with
    a specific point-in-time snapshot chosen to be the point of deployment for a given
    VMware View desktop pool. Replicas are always thin provisioned.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '**副本**是原始只读基础虚拟机磁盘与特定时刻快照合并后的结果，该快照被选为给定VMware View桌面池的部署时刻。副本始终是精简配置的。'
- en: A View desktop pool can only point to one specific snapshot at a time but this
    can be changed easily through techniques discussed later in this book. A virtual
    machine can have multiple snapshots, thus a single virtual machine with multiple
    snapshots could be the foundation for all the View desktop pools in an environment.
    This allows each pool to be based off of their own (or the same) point-in-time
    snapshot. This is possible because View desktop pools using the linked clone technology
    do not actually use the base virtual machine snapshots; instead they use a replica
    (base virtual machine + snapshot).
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 一个View桌面池一次只能指向一个特定的快照，但可以通过本书后面讨论的技术轻松更改。一个虚拟机可以有多个快照，因此单个虚拟机与多个快照可以作为环境中所有View桌面池的基础。这允许每个池基于自己的（或相同的）时刻快照。这是可能的，因为使用链接克隆技术的View桌面池并不直接使用基础虚拟机快照，而是使用副本（基础虚拟机+快照）。
- en: While linked clones are based off of an original parent VM, each linked clone
    still has a unique **Media Access Control (MAC)** address and virtual machine
    **Universally Unique IDentifier (UUID)**.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然链接克隆是基于原始父虚拟机创建的，但每个链接克隆仍然具有唯一的**媒体访问控制（MAC）**地址和虚拟机**通用唯一标识符（UUID）**。
- en: '![Linked clones](img/1124EN_01_02.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![链接克隆](img/1124EN_01_02.jpg)'
- en: The preceding diagram illustrates a parent virtual machine with three snapshots
    (Snap1, Snap2, and Snap3). Each snapshot represents a different point in time
    of the virtual machine. For example, the Snap1 snapshot may have Office 2007 installed;
    the Snap2 snapshot may have Office 2010 installed; and the Snap3 snapshot may
    have Office 2010 and Visio 2010 installed. In this example, the Snap2 snapshot
    was chosen for virtual desktop deployment. Once this snapshot has been selected
    and the desktop pool has been enabled for provisioning, a replica is created.
    The replica does not copy the other Snap1 or Snap3 snapshot states.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 上图展示了一个包含三个快照（Snap1、Snap2 和 Snap3）的父虚拟机。每个快照表示虚拟机的不同时间点。例如，Snap1 快照可能安装了 Office
    2007，Snap2 快照可能安装了 Office 2010，Snap3 快照可能安装了 Office 2010 和 Visio 2010。在这个例子中，Snap2
    快照被选中用于虚拟桌面部署。一旦选择了该快照并启用了桌面池的配置，就会创建一个副本。这个副本不会复制其他 Snap1 或 Snap3 快照的状态。
- en: The use of a replica, which preserves the original parent vDesktop's snapshot
    state, allows the parent vDesktop to be powered on, patched, or altered without
    impacting on the state of the vDesktop using the replica. Again, this is because
    the replica is a copy of a parent vDesktop's snapshot, and not the actual parent
    vDesktop itself.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 使用副本可以保持原始父虚拟桌面的快照状态，从而允许父虚拟桌面在不影响使用副本的虚拟桌面状态的情况下进行开机、打补丁或修改。原因是副本是父虚拟桌面快照的副本，而不是实际的父虚拟桌面本身。
- en: Templates
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模板
- en: A **template** is a virtual machine that has been marked read-only by converting
    it into a template. A template is simply a virtual machine, which has had its
    `.vmx` configuration file converted into a `.vmxt` configuration file. Virtual
    machines are read-only virtual machines that are then used for cloning purposes.
    A virtual machine created from a virtual machine template is a direct copy of
    the original template. However, customization specifications can be used to alter
    certain aspects (for example, SID, hostname, IP address, and so on) of the newly
    created virtual machines. Customization specifications are created by using the
    Customization Specification Wizard in the vSphere Client when connected to a vCenter
    Server.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '**模板**是通过将虚拟机标记为只读并将其转换为模板而创建的虚拟机。模板只是一个虚拟机，它的 `.vmx` 配置文件被转换为 `.vmxt` 配置文件。虚拟机是只读虚拟机，之后用于克隆目的。从虚拟机模板创建的虚拟机是原始模板的直接副本。然而，可以使用自定义规范来更改新创建的虚拟机的某些方面（例如，SID、主机名、IP
    地址等）。自定义规范是通过在连接到 vCenter Server 的 vSphere 客户端中使用自定义规范向导创建的。'
- en: Full provisioning versus linked clones
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 完全配置与链接克隆的区别
- en: VMware View has the ability to use both full clones and linked clones. A **full
    clone** is a 1:1 independent copy of an existing VM template. This follows the
    same procedure as deploying a virtual machine from a template in VMware vCenter.
    A template is selected as the base for the vDesktops and (likely) a customization
    specification is also chosen.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: VMware View 可以同时使用完全克隆和链接克隆。**完全克隆**是现有虚拟机模板的 1:1 独立副本。这与从 VMware vCenter 中部署虚拟机模板的过程相同。选择一个模板作为虚拟桌面的基础，并（可能）选择自定义规范。
- en: 'A vDesktop that has been deployed using full provisioning (for example, think:
    virtual machine template) does not require access to the original template once
    it has been built.'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 使用完全配置（例如，虚拟机模板）部署的虚拟桌面在构建完成后不再需要访问原始模板。
- en: A linked clone uses one master VM and then creates a delta disk for each additional
    VM. The additional VMs have a pointer back to the master VM when they need to
    talk to their base image (for example, to access the core Windows OS components)
    but use their delta disk for any unique data for that particular VM or user (for
    example, `...\Documents and Settings\)`. A desktop built using the View Composer
    technology will have read-only access to the replica VM and read/write access
    to its delta disk.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 链接克隆使用一个主虚拟机，然后为每个额外的虚拟机创建一个增量磁盘。额外的虚拟机在需要访问其基础镜像时（例如，访问核心 Windows 操作系统组件）会指向主虚拟机，但对于该特定虚拟机或用户的任何独特数据（例如，`...\Documents
    and Settings\`）则使用其增量磁盘。使用 View Composer 技术构建的桌面将对副本虚拟机具有只读访问权限，并对其增量磁盘具有读写权限。
- en: Note
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Full clones are based off of a VM template, whereas linked clones are based
    off of a VM snapshot.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 完全克隆是基于虚拟机模板创建的，而链接克隆是基于虚拟机快照创建的。
- en: Types of disks
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 磁盘类型
- en: There are three types of disks — OS Disk, User Data Disk, and Temp Data Disk.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 有三种类型的磁盘——操作系统磁盘、用户数据磁盘和临时数据磁盘。
- en: OS Disk
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 操作系统磁盘
- en: The OS Disk stores the system data (for example, Windows 7) and provides the
    base for a functional desktop.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 操作系统磁盘存储系统数据（例如Windows 7），并为功能齐全的桌面提供基础。
- en: Secondary OS Disk
  id: totrans-110
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 次要操作系统磁盘
- en: The secondary OS Disk stores OS data that must be preserved during certain View
    Composer activities (such as Refresh or Recompose). Each virtual desktop will
    have a secondary OS Disk. These disks are typically 10 MB in size and are not
    configurable.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 次要操作系统磁盘存储必须在某些View Composer活动（如刷新或重新组合）期间保留的操作系统数据。每个虚拟桌面都将有一个次要操作系统磁盘。这些磁盘通常为10
    MB大小，且不可配置。
- en: The secondary OS Disk can only be stored on the same data store as the OS Disk.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 次要操作系统磁盘只能存储在与操作系统磁盘相同的数据存储中。
- en: User Data Disk
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 用户数据磁盘
- en: A persistent User Data Disk is an optional component of a VMware View virtual
    desktop. The User Data Disk stores user profile information. By storing this information
    on a persistent disk, View Composer actions such as Refresh and Recompose will
    not affect the user profile data. The alternative is to store this information
    inside the OS Disk, which would cause user profile data to be lost during a Refresh
    or Recompose task.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 持久用户数据磁盘是VMware View虚拟桌面的一个可选组件。用户数据磁盘用于存储用户配置文件信息。通过将这些信息存储在持久磁盘上，View Composer的操作（如刷新和重新组合）将不会影响用户配置文件数据。另一种方式是将这些信息存储在操作系统磁盘内，这将导致在刷新或重新组合任务期间丢失用户配置文件数据。
- en: The size of the User Data Disk is configurable. In addition, the persistent
    User Data Disk can be stored on the same data store as the OS Disk or on a separate
    data store.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 用户数据磁盘的大小是可配置的。此外，持久用户数据磁盘可以存储在与操作系统磁盘相同的数据存储中，或存储在单独的数据存储中。
- en: Temp Data Disk
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 临时数据磁盘
- en: A non-persistent Temp Data Disk is an optional component of a VMware View virtual
    desktop. It is also referred to as the **disposable disk**. The Temp Data Disk
    stores the OS swap file as well as temporary data that is created during a user
    session. By storing this information on a non-persistent disk, VMware View will
    delete all data stored on the disk whenever the virtual desktop is powered off.
    This can help minimize the growth (in MB) of the virtual desktop as disposable
    user interaction is discarded and does not become part of the standard OS Disk
    for each respective user.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 非持久临时数据磁盘是VMware View虚拟桌面的一个可选组件，也称为**一次性磁盘**。临时数据磁盘用于存储操作系统交换文件以及在用户会话期间创建的临时数据。通过将这些信息存储在非持久磁盘上，每当虚拟桌面关闭时，VMware
    View将删除存储在磁盘上的所有数据。这有助于减少虚拟桌面的增长（以MB为单位），因为一次性用户交互会被丢弃，并且不会成为每个用户标准操作系统磁盘的一部分。
- en: The size of the Temp Data Disk is configurable. The Temp Data Disk can only
    be stored on the same data store as the OS Disk.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 临时数据磁盘的大小是可配置的。临时数据磁盘只能存储在与操作系统磁盘相同的数据存储中。
- en: Many options of disk types and redirection
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 多种磁盘类型和重定向选项
- en: 'Following is a list of the available options of the disk types and the redirection:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是可用的磁盘类型和重定向选项列表：
- en: OS Disk
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统磁盘
- en: Linked clones (1)
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 链接克隆 (1)
- en: Full clones (2)
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完全克隆 (2)
- en: User Data
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户数据
- en: OS Disk (3)
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统磁盘 (3)
- en: Persistent disk (4)
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 持久磁盘 (4)
- en: Temp Data
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 临时数据
- en: OS Disk (5)
  id: totrans-128
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统磁盘 (5)
- en: Non-persistent disk (6)
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非持久磁盘 (6)
- en: 'The following diagram illustrates the preceding disk types and their redirection:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 下图说明了前述的磁盘类型及其重定向：
- en: '![Many options of disk types and redirection](img/1124EN_01_03.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![多种磁盘类型和重定向选项](img/1124EN_01_03.jpg)'
- en: In the preceding diagram, the secondary OS Disk is not illustrated as it is
    not a configurable option within VMware View.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图示中，未显示次要操作系统磁盘，因为它不是VMware View中的可配置选项。
- en: Thin provisioning versus thick provisioning
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 精简配置与厚配置
- en: When a virtual disk is created using **thin provisioning**, the disk only occupies
    the actual data size on the disk. For example, a virtual disk (`.vmdk`) that is
    20 GB in size but only has 8 GB of data will occupy only 8 GB on the data store.
    Two virtual desktops that have a 20 GB virtual disk but only 8 GB of data per
    disk will occupy 16 GB on the data store.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用**精简配置**创建虚拟磁盘时，磁盘只占用磁盘上实际的数据大小。例如，一个大小为20 GB但仅包含8 GB数据的虚拟磁盘（`.vmdk`）将只占用数据存储中的8
    GB。如果有两个虚拟桌面，每个桌面都有一个20 GB的虚拟磁盘，但每个磁盘只有8 GB的数据，这样它们将一起占用数据存储中的16 GB。
- en: When a VM that is using thin provisioning needs to write new data to the virtual
    disk (and thereby increase the size of the virtual disk), it does so in the blocks
    defined by the data store's block size. The data store's block size is defined
    prior to being formatted in the **Virtual Machine File System (VMFS)** format.
    In VMware vSphere 5, the newly created (versus upgraded from vSphere) data stores
    use a unified block size of 1 MB.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用精简配置的虚拟机需要将新数据写入虚拟磁盘（从而增加虚拟磁盘的大小）时，它会在数据存储的块大小所定义的块中进行操作。数据存储的块大小是在格式化为**虚拟机文件系统（VMFS）**格式之前定义的。在VMware
    vSphere 5中，新的（与从vSphere升级的不同）数据存储使用统一的1 MB块大小。
- en: For example, if the VM lives on a 500 GB VMFS-3, which is the data store that
    was formatted using a 2 MB block size, a 10 MB new write operation will require
    the write of 5 blocks (10 MB file/2 MB block size), which results in a less efficient
    use of the overall storage space.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果虚拟机位于一个500 GB的VMFS-3数据存储上，并且该数据存储是使用2 MB的块大小进行格式化的，那么一个10 MB的新写入操作将需要写入5个块（10
    MB文件/2 MB块大小），这导致整体存储空间的使用效率较低。
- en: Note
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Thin provisioning makes it possible to over-allocate the available storage and
    can introduce significant issues if not monitored and managed properly.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 精简配置使得可以超额分配可用存储，并且如果没有适当的监控和管理，可能会引入严重问题。
- en: When a virtual disk is created using **thick provisioning** (default), the disk
    occupies its entire allocated size on the disk. For example, a virtual disk that
    is 20 GB in size but only has 8 GB of data will occupy 20 GB on the data store.
    Two virtual desktops that have a 20 GB virtual disk but only 8 GB of data per
    disk will occupy 40 GB on the data store.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用**厚配置**（默认）创建虚拟磁盘时，磁盘占据其在磁盘上分配的整个大小。例如，一个大小为20 GB的虚拟磁盘，尽管只有8 GB的数据，但会在数据存储上占用20
    GB。如果有两个虚拟桌面，每个虚拟桌面都有一个20 GB的虚拟磁盘，但每个磁盘只有8 GB的数据，它们将占用数据存储上的40 GB。
- en: View Composer uses linked clone technology. A virtual desktop using this technology
    contains a pointer back to a replica of the original gold snapshot. To clarify,
    the pointer is not to the original (parent) vDesktop itself, but an exact copy
    (replica) of the parent vDesktop from a specific point in time. View Composer
    uses this technology so that each vDesktop doesn't need its own full-sized virtual
    disk. The pointer uses the replica for read-only access only and writes all changes
    to a secondary disk, called the delta disk.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: View Composer使用链接克隆技术。使用该技术的虚拟桌面包含一个指向原始金色快照副本的指针。需要澄清的是，该指针指向的不是原始（父）虚拟桌面本身，而是从某个特定时间点开始的父虚拟桌面的精确副本（副本）。View
    Composer使用此技术，以便每个虚拟桌面不需要自己的完整虚拟磁盘。指针仅对副本进行只读访问，并将所有更改写入一个辅助磁盘，称为增量磁盘。
- en: Delta disks can be viewed as a change record. Instead of defiling a gold snapshot,
    all changes (deltas) to the original disk are recorded outside of the gold snapshot,
    to the delta disk. This leaves the original gold snapshot in pristine condition
    while still allowing for a usable operating system that accepts changes made by
    the user and other applications.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 增量磁盘可以看作是变更记录。与修改金色快照不同，所有对原始磁盘的更改（增量）都会记录在金色快照之外，存储到增量磁盘中。这使得原始金色快照保持完好无损，同时仍然允许可用的操作系统接受用户和其他应用程序所做的更改。
- en: Reset, Refresh, Recompose, and Rebalance actions for linked clones
  id: totrans-142
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 链接克隆的重置、刷新、重组和再平衡操作
- en: 'When using linked clones, there are several actions that can be performed on
    the clones themselves. These actions are as follows:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 使用链接克隆时，可以对克隆本身执行几个操作。这些操作如下：
- en: '**Reset**'
  id: totrans-144
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**重置**'
- en: The Reset action is equivalent to hitting the **Reset** button on a virtual
    machine. This is an ungraceful restart of a virtual machine that is equivalent
    to pulling the power cable out of a desktop and then plugging it back in.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 重置操作相当于按下虚拟机的**重置**按钮。这是一个非优雅的虚拟机重启，相当于拔掉桌面电源线然后重新插入。
- en: '**Refresh**'
  id: totrans-146
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**刷新**'
- en: The Refresh action is an action that resets the delta disk back to its original
    state. OS delta disk bloat can happen as a user continues to write changes to
    his delta disk over time. Data inside the OS delta disk is lost during a Refresh
    action.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 刷新操作是将增量磁盘重置回其原始状态的操作。随着用户不断将更改写入其增量磁盘，操作系统增量磁盘可能会膨胀。刷新操作会导致操作系统增量磁盘中的数据丢失。
- en: Note
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The Refresh option is only available when using the persistent and automated
    linked clone desktop pools. During this action, data (for example, User Data)
    can potentially be lost if it is not redirected elsewhere (for example, a non-persistent
    disk).
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 刷新选项仅在使用持久化和自动化链接克隆桌面池时可用。在此操作期间，如果数据（例如用户数据）未重定向到其他位置（例如非持久磁盘），可能会丢失。
- en: '**Recompose**'
  id: totrans-150
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**重新合成**'
- en: 'The Recompose action is an action that is used to change the snapshot and/or
    parent VM that is used by the desktop pool:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 重新合成操作是用于更改桌面池所使用的快照和/或父虚拟机的操作：
- en: '![Recompose](img/1124EN_01_04.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![重新合成](img/1124EN_01_04.jpg)'
- en: In the preceding image, number 1 is the original mapping to a base snapshot,
    number 2 represents the available options during a Recompose action.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图像中，1 号是原始映射到基础快照，2 号表示在重新合成操作期间可用的选项。
- en: 'Administrators can use the Recompose action in the following scenarios:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 管理员可以在以下场景中使用重新合成操作：
- en: To change the linked clone pool to use a different snapshot (for example, Snapshot_B)
    of the original parent (for example, ParentVM_1) instead of the current one in
    use
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要更改链接克隆池以使用原始父虚拟机（例如 ParentVM_1）的不同快照（例如 Snapshot_B），而不是当前使用的快照
- en: To change the linked clone pool to use a snapshot (for example, Snapshot_A)
    of a different parent (for example, ParentVM_2) instead of the current parent
    in use
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要更改链接克隆池以使用不同父虚拟机（例如 ParentVM_2）的快照（例如 Snapshot_A），而不是当前正在使用的父虚拟机
- en: Note
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注释
- en: The Recompose option is only available when using the persistent and automated
    linked clone desktop pools.
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重新合成选项仅在使用持久化和自动化链接克隆桌面池时可用。
- en: '**Rebalance**'
  id: totrans-159
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '**重新平衡**'
- en: The Rebalance action is an action that will evenly distribute desktops across
    all of the available data stores in the desktop pool. The desktop must be in the
    ready, error, or customizing state (with no pending tasks or cancellations) to
    be rebalanced.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: Rebalance 动作是一种将桌面均匀分配到桌面池中所有可用数据存储的操作。桌面必须处于就绪、错误或自定义状态（且没有待处理任务或取消）才能进行重新平衡。
- en: A Rebalance action automatically executes the Refresh action on the desktop
    as well, which resets the OS Disk back to its original state.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: Rebalance 操作还会自动执行桌面的刷新操作，这将把操作系统磁盘重置为其原始状态。
- en: During a Rebalance action, the administrator can set whether to rebalance the
    desktop once the users log off of their desktop or to force all of the active
    users to log off.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行重新平衡操作时，管理员可以设置是否在用户注销桌面后重新平衡桌面，或者强制所有活跃用户注销。
- en: The Rebalance action is also the only supported way to move linked clones to
    a new data store.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: Rebalance 操作也是将链接克隆移至新数据存储的唯一支持方式。
- en: Optional component — VMware View Transfer Server
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可选组件 — VMware View 传输服务器
- en: The VMware View Transfer Server is a new component in VMware View since version
    4.5\. The transfer server's primary role is to deliver the desktop virtual machines
    from the data center to the end local device for use in an offline scenario. Running
    a vDesktop locally on the end device is known as Local Mode in VMware View.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: VMware View 传输服务器是自版本 4.5 以来 VMware View 中的新组件。传输服务器的主要作用是将桌面虚拟机从数据中心传输到最终本地设备，以便在离线场景中使用。在最终设备上本地运行虚拟桌面被称为
    VMware View 中的本地模式。
- en: The transfer server also manages the repository for the virtual desktops that
    will be available for Local Mode and provides synchronization capabilities between
    the local image and the desktop image residing in the data center.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 传输服务器还管理虚拟桌面的存储库，这些虚拟桌面将在本地模式下使用，并提供本地镜像与数据中心中桌面镜像之间的同步功能。
- en: Note
  id: totrans-167
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注释
- en: The transfer server cannot be installed alongside any other VMware View component.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 传输服务器不能与其他任何 VMware View 组件一起安装。
- en: 'The transfer server''s repository can live in:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 传输服务器的存储库可以存在于以下位置：
- en: A local directory on a local drive
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地驱动器上的本地目录
- en: Shared access via **Universal Naming Convention (UNC)**
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过 **通用命名约定 (UNC)** 的共享访问
- en: It is important to ensure that the transfer server's repository does not run
    out of space. For a point of reference, an average checked out Windows XP image
    will consume approximately 3 GB in the repository.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 确保传输服务器的存储库没有用完空间非常重要。作为参考，平均签出的 Windows XP 镜像将占用大约 3 GB 的存储空间。
- en: 'Additionally, the transfer server must use the following things:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，传输服务器必须使用以下组件：
- en: A static IP address
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 静态 IP 地址
- en: The LSI parallel SCSI controller
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LSI 并行 SCSI 控制器
- en: Checking out
  id: totrans-176
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 签出
- en: 'Checking out a virtual desktop is likely the most intensive operation the VMware
    Transfer Server will perform. The checkout operation involves downloading the
    entire published virtual desktop image from the View Transfer Server to the local
    client to be run in Local Mode; the local image is stored in an encrypted format
    and has a lifetime associated with the image. The checkout operation also places
    a lock on the virtual desktop to ensure that future inbound requests to the desktop
    from connecting to the instance running within the virtual infrastructure are
    prohibited:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 检查虚拟桌面可能是 VMware 传输服务器执行的最密集的操作。签出操作涉及将整个发布的虚拟桌面镜像从 View 传输服务器下载到本地客户端，并在本地模式下运行；本地镜像以加密格式存储，并与镜像关联一个生命周期。签出操作还会在虚拟桌面上设置一个锁，确保禁止未来任何来自虚拟基础设施内连接的桌面请求：
- en: '![Checking out](img/1124EN_01_05.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![检查中](img/1124EN_01_05.jpg)'
- en: Due to the network bandwidth used (copying gigabytes of data), the checkout
    process should be performed when the end device is on the same LAN as the VDI.
    Performing a checkout process over a 3G hotspot could take hours or even an entire
    day, depending on the size of the vDesktop infrastructure.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 由于使用了网络带宽（复制大量数据），签出过程应在最终设备与 VDI 位于同一局域网时进行。通过 3G 热点执行签出过程可能需要几个小时，甚至整整一天，具体取决于
    vDesktop 基础设施的大小。
- en: Checking in
  id: totrans-180
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检查中
- en: Checking in to a virtual desktop involves uploading the delta data and configurations
    to the VMware View vDesktop via the View Transfer Server. This data resides on
    the OS Disk and the User Data Disk (if it exists). The local copy of the base
    image is not uploaded as it has not been changed. The lock on the virtual desktop
    is released within the virtual infrastructure and future inbound connections to
    the desktop are directed to the virtual machine running within the data center
    (versus redirecting to Local Mode again).
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 检查虚拟桌面时，涉及将增量数据和配置上传到 VMware View vDesktop，通过 View 传输服务器传输。这些数据存储在操作系统磁盘和用户数据磁盘（如果存在）上。未更改的基础镜像不会被上传。虚拟桌面上的锁定在虚拟基础设施内被释放，未来对该桌面的任何入站连接都将指向数据中心内运行的虚拟机（而不是再次重定向到本地模式）。
- en: Replication
  id: totrans-182
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 复制
- en: 'Replication is the process of synchronizing a local vDesktop with its data
    center peer. Replication only transfers the delta data (changes generated by the
    user). Replication is managed by a replication policy, which configures settings
    such as frequency and user deferrals:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 复制是将本地虚拟桌面与其数据中心对等体同步的过程。复制仅传输增量数据（由用户生成的更改）。复制由复制策略管理，该策略配置如频率和用户推迟等设置：
- en: '![Replication](img/1124EN_01_06.jpg)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![复制](img/1124EN_01_06.jpg)'
- en: If changed user data from a Local Mode vDesktop is viewed as valuable data,
    it is important that a replication policy is defined with the View Admin console.
    Otherwise, if replication is not enforced, valuable data could be lost if an end
    device has a failure.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 如果本地模式虚拟桌面中的更改用户数据被视为有价值的数据，则需要在 View 管理控制台中定义复制策略。否则，如果没有强制复制，最终设备出现故障时，宝贵的数据可能会丢失。
- en: One of the benefits of VDI in general is the concept of keeping the data in
    the data center. Local Mode has several use cases (discussed later in this book)
    but does bring data back to the edge, even if encrypted. Local Mode should be
    used only in specific use cases and should not be looked at as a typical VMware
    View solution.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: VDI 的一个主要优势是将数据保存在数据中心的概念。本地模式有几个使用场景（本书后续会讨论），但它将数据带回边缘，即使是加密的。本地模式应仅在特定的使用场景下使用，不能将其视为典型的
    VMware View 解决方案。
- en: Rollback
  id: totrans-187
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 回滚
- en: 'Rollback is one method of removing access to a local desktop that has been
    checked out (the other method involves removing ownership). It is also possible
    for an end user to perform a rollback if it is allowed by the policy settings
    within View:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 回滚是一种移除已签出的本地桌面访问权限的方法（另一种方法是移除所有权）。如果视图中的策略设置允许，最终用户也可以执行回滚操作：
- en: '![Rollback](img/1124EN_01_07.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![回滚](img/1124EN_01_07.jpg)'
- en: 'A rollback performs the following actions:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 回滚执行以下操作：
- en: If the user is currently logged into the checked out local desktop, the session
    is terminated and the user is prohibited from logging back into the local desktop.
    A new check out task must be performed to restore the Local Mode functionality.
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果用户当前登录的是已签出的本地桌面，则该会话将被终止，且用户不能再次登录本地桌面。必须执行新的签出任务来恢复本地模式功能。
- en: If the user is not logged into the checked out local desktop, all future login
    requests are sent to the instance running in the data center. A new checkout task
    must be performed to restore the Local Mode functionality.
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果用户没有登录到已签出的本地桌面，所有后续的登录请求将被发送到数据中心运行的实例。必须执行一个新的签出任务才能恢复本地模式功能。
- en: Summary
  id: totrans-193
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter has provided a solid introduction to the components of a VMware
    View VDI solution, including VMware vSphere fundamentals. Without an understanding
    of the basic concepts of the VMware View architecture as well as the underlying
    VMware vSphere architecture, it will be very difficult to build a proper VMware
    View solution. For additional reading on either VMware View or VMware vSphere,
    please refer to the Administration, Evaluation, and Installation guides from VMware
    on the desired product set.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 本章提供了对VMware View VDI解决方案组件的一个坚实的介绍，包括VMware vSphere的基本知识。如果没有理解VMware View架构的基本概念以及底层VMware
    vSphere架构的基础，构建一个合适的VMware View解决方案将会非常困难。如需进一步阅读关于VMware View或VMware vSphere的内容，请参考VMware的管理、评估和安装指南，选择你需要的产品套件。
- en: The next chapter will cover how to collect an organization's inputs to ensure
    that a VMware View design meets the requirements for success. Collecting the requirements
    is a phase many VDI architects either skip or do in haste, resulting in a less-than-ideal
    end product. Once a VDI architect has performed several discovery engagements
    with an organization, it is certainly possible that he simply asks the likely
    pitfall questions (for example, "Will you be using a bidirectional audio?"), but
    until this level of comfort has been reached, performing a full discovery is advised.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将讲解如何收集组织的输入，以确保VMware View设计满足成功的要求。收集需求是许多VDI架构师跳过或匆忙完成的阶段，导致最终产品不尽如人意。一旦VDI架构师与一个组织进行了多次发现性接洽，他很可能只会问一些常见的陷阱问题（例如，“你们会使用双向音频吗？”），但在达到这种舒适度之前，建议进行全面的发现工作。
- en: Later in this book, the collected inputs of [Chapter 2](ch02.html "Chapter 2. Solution
    Methodology"), *Solution Methodology*, will be used to produce a working design
    for an organization.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 本书后续章节将使用[第2章](ch02.html "第2章 解决方案方法论")收集的输入，*解决方案方法论*，来为一个组织制定出有效的设计。
