- en: Chapter 6. Managing Files on Your System
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第六章：管理系统中的文件
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Downloading files from the server
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从服务器下载文件
- en: Uploading files to the server
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上传文件到服务器
- en: Managing files and directories on the server
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理服务器上的文件和目录
- en: Changing file ownership and permissions
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改文件的所有权和权限
- en: Setting up network-shared folders for Windows
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置Windows的网络共享文件夹
- en: Mounting a Windows-shared folder
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 挂载Windows共享文件夹
- en: Setting up an NFS-shared volume
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置NFS共享卷
- en: Mounting a remote NFS volume
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 挂载远程NFS卷
- en: Giving users access to your server via SFTP
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SFTP授予用户对服务器的访问权限
- en: Giving users access to your server via FTP
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过FTP授予用户对服务器的访问权限
- en: Introduction
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: Webmin provides facilities to transfer files to and from your server, as well
    as a full-fledged file manager, which can be run in your browser as a Java applet.
    In this chapter, we will go over using these functionalities to manage files on
    your server from Webmin without the need for additional tools.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin提供了将文件传输到服务器及从服务器传输文件的功能，并且还提供了一个完整的文件管理器，可以在浏览器中作为Java小应用运行。在本章中，我们将介绍如何使用这些功能通过Webmin管理服务器上的文件，而无需额外的工具。
- en: The second half of the chapter will demonstrate how you can use Webmin to set
    up file sharing on your local network using **Windows networking** (**CIFS**),
    **Network File System** (**NFS**), and **File Transfer Protocol** (**FTP**). If
    you would like to access your files from the Internet, the best solution would
    be to use the **Secure File Transfer Protocol** (**SFTP**) functionality, which
    is also covered in this chapter.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的后半部分将展示如何使用Webmin通过**Windows网络**（**CIFS**）、**网络文件系统**（**NFS**）和**文件传输协议**（**FTP**）设置本地网络上的文件共享。如果您想通过互联网访问您的文件，最佳的解决方案是使用**安全文件传输协议**（**SFTP**）功能，本章也涵盖了这一部分内容。
- en: The two recipes *Mounting a Windows-shared folder* and *Mounting a remote NFS
    volume* in this chapter demonstrate how Webmin can help you set up a CIFS or NFS
    client and make remote file resources available on your system.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的两个示例*挂载Windows共享文件夹*和*挂载远程NFS卷*展示了如何通过Webmin设置CIFS或NFS客户端，并使远程文件资源在您的系统上可用。
- en: Downloading files from the server
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从服务器下载文件
- en: You will often run into a situation where you need to view the contents of a
    file or download a file from your server. Webmin's **Upload and Download** module
    makes these tasks very easy.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 您经常会遇到需要查看文件内容或从服务器下载文件的情况。Webmin的**上传和下载**模块使这些任务变得非常简单。
- en: In this recipe, we'll inspect your system's hostname database file to check
    if you defined any local hostname entries that override domain names resolved
    by DNS. This file is stored in `/etc/hosts` on most systems.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，我们将检查系统的主机名数据库文件，查看您是否定义了任何本地主机名条目，这些条目会覆盖通过DNS解析的域名。这个文件大多数系统存储在`/etc/hosts`中。
- en: How to do it...
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Follow these steps to download a file from the server:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤从服务器下载文件：
- en: Navigate to **Others** | **Upload and Download**.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**其他** | **上传和下载**。
- en: Select the **Download from server** tab.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**从服务器下载**标签。
- en: Click the ellipsis (**…**) button in the **File to download** line.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**文件下载**行中的省略号（**…**）按钮。
- en: Select the file `hosts` located in the `/etc` directory in the file browser.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件浏览器中选择位于`/etc`目录下的`hosts`文件。
- en: Answer **Yes** to the question **Show in browser if possible?**.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于问题**是否在浏览器中显示（如果可能）？**请选择**是**。
- en: Click **Download**.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下载**。
- en: The `hosts` file will be displayed in your browser. If you would prefer to download
    your file to disk, simply answer **No** in step 5.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '`hosts`文件将在浏览器中显示。如果您希望将文件下载到磁盘，只需在第5步选择**否**。'
- en: How it works...
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何运作...
- en: 'Webmin accesses the file you select from your system disk. If the file contains
    text, it will be displayed directly in your browser. If you choose to download
    the file, Webmin will add HTTP headers (such as `Content-Disposition: Attachment`)
    to the response to force your browser to display a save dialog, which allows you
    to save the file on disk instead of displaying it.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 'Webmin从您选择的系统磁盘中访问文件。如果文件包含文本，它会直接在浏览器中显示。如果您选择下载文件，Webmin将向响应中添加HTTP头（如`Content-Disposition:
    Attachment`），迫使浏览器显示保存对话框，允许您将文件保存到磁盘，而不是在浏览器中显示。'
- en: See also
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: If you would like to download an entire directory including its content, take
    a look at the *Downloading a directory and its content* section in the *Managing
    files and directories on the server* recipe later on in this chapter.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您想下载整个目录及其内容，请查看本章稍后的*下载目录及其内容*部分，在*管理服务器上的文件和目录*食谱中可以找到相关信息。
- en: Uploading files to the server
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将文件上传到服务器
- en: Webmin's graphical interface allows you to easily upload files from your local
    computer to your server. Webmin also allows you to transfer files from a web URL
    directly onto your server, without the need to download them to your local computer
    first.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin的图形界面使您能够轻松地将文件从本地计算机上传到服务器。Webmin还允许您直接从Web URL将文件传输到服务器，而无需先下载到本地计算机。
- en: Getting ready
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备好
- en: In this recipe, we'll upload a default welcome message to be served by your
    Apache web server. Refer to [Chapter 8](ch08.html "Chapter 8. Running an Apache
    Web Server"), *Running an Apache Web Server*, for information about setting up
    Apache.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将上传一个默认的欢迎信息，由Apache Web服务器提供服务。有关设置Apache的信息，请参考[第8章](ch08.html "第8章.
    运行Apache Web服务器")，*运行Apache Web服务器*。
- en: If you would like to perform the same task, start by preparing a simple HTML
    file on your local system and saving it as `index.html`. You can of course follow
    the same steps to upload any other file to any location on your server.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望执行相同的任务，首先在本地系统中准备一个简单的HTML文件，并将其保存为`index.html`。您当然也可以按照相同的步骤上传其他任何文件到服务器上的任何位置。
- en: How to do it...
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Follow these steps to upload your files on the server:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤将文件上传到服务器：
- en: Navigate to **Others** | **Upload and Download**.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**其他** | **上传和下载**。
- en: Select the **Upload to server** tab.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**上传到服务器**选项卡。
- en: Click one of the four buttons in the **Files to upload** section and select
    your file from your local disk. Select additional files using the other buttons
    if needed.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**要上传的文件**部分点击四个按钮之一，从本地磁盘选择您的文件。如果需要，可以使用其他按钮选择额外的文件。
- en: Click the ellipsis (**…**) button to the far right of the **File or directory
    to upload to** field and use the file browser to select the directory into which
    you wish to upload your files. Choose `/var/www` for the default root directory
    from which Apache serves files.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**文件或目录上传到**字段右侧的省略号（**…**）按钮，使用文件浏览器选择要上传文件的目录。选择`/var/www`作为Apache提供文件的默认根目录。
- en: Set the user who will own the file on disk, or leave the field **Owned by user**
    set to `root`.![How to do it...](img/5849OS_06_08.jpg)
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置将拥有磁盘中文件的用户，或者将**由用户拥有**字段保持为`root`。[如何操作...](img/5849OS_06_08.jpg)
- en: Click the **Upload** button.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**上传**按钮。
- en: An upload progress window will pop up to inform you about the status of the
    upload. After the upload is complete, Webmin will display a screen informing you
    about how much data was uploaded onto your server.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 上传进度窗口将弹出，告知您上传状态。上传完成后，Webmin将显示一个屏幕，告知您上传到服务器的数据量。
- en: How it works...
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Webmin uses the HTTP protocol to transfer files onto your server. Uploaded files
    will belong to the user selected as owner. This functionality eliminates the need
    for any additional tools for simple tasks such as uploading a small number of
    files onto your server.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin使用HTTP协议将文件传输到您的服务器。上传的文件将属于选择的用户作为拥有者。此功能无需额外工具即可完成上传少量文件到服务器等简单任务。
- en: There's more...
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Webmin also allows you to transfer files from a web URL directly onto your server
    without the need to download them to your local computer first.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin还允许您直接从Web URL将文件传输到服务器，无需先下载到本地计算机。
- en: Downloading files from the Web directly onto your server
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从Web直接下载文件到服务器
- en: Let's say that you'd like to use jQuery on your welcome webpage. You can download
    the library directly onto your server if you know its URL. In case of jQuery,
    you can download it from [http://code.jquery.com/jquery-1.10.0.min.js](http://code.jquery.com/jquery-1.10.0.min.js).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您想在欢迎网页上使用jQuery。如果您知道它的URL，可以直接将库下载到服务器上。对于jQuery，您可以从[http://code.jquery.com/jquery-1.10.0.min.js](http://code.jquery.com/jquery-1.10.0.min.js)下载。
- en: Navigate to **Others** | **Upload and Download**.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**其他** | **上传和下载**。
- en: Select the **Download from web** tab.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**从Web下载**选项卡。
- en: Paste the required URLs in to the **URLs to download** text field.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将所需的URL粘贴到**要下载的URL**文本字段中。
- en: Click the ellipsis (**…**) button to the far right of the **Download to file
    or directory** field and use the file browser to select the directory into which
    you wish to upload your files. Choose `/var/www` for the default root directory
    from which Apache serves files.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**下载到文件或目录**字段右侧的省略号（**…**）按钮，并使用文件浏览器选择您希望上传文件的目录。选择`/var/www`作为默认的根目录，Apache将在该目录中提供文件。
- en: Set the user who will own the file on disk, or leave the field **Owned by user**
    set to `root`.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置将拥有文件的用户，或者将**由用户拥有**字段保持为`root`。
- en: Set **Download mode** to **Immediately, and show progress**.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**下载模式**设置为**立即，显示进度**。
- en: Click the **Download URLs** button.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**下载URLs**按钮。
- en: A download progress screen will appear, informing you about the status of the
    download.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 下载进度屏幕将显示，告知您下载的状态。
- en: Downloading files from the Web in the background
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在后台从网页下载文件
- en: If you want to download a large file from a slower server, Webmin allows you
    to schedule the download to be executed in the background.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望从较慢的服务器下载大文件，Webmin允许您安排下载在后台执行。
- en: In order to accomplish this, follow the steps in the *Downloading files from
    the Web directly onto your server* section, but set the **Download mode** field
    to **In background**. You can set the download time to the current time or later.
    If you configured Webmin to send mail, as discussed in [Chapter 1](ch01.html "Chapter 1. Setting
    Up Your System"), *Setting Up Your System*, you can instruct Webmin to notify
    you when the transfer is complete.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现这一点，按照*从网页直接下载文件到服务器*部分中的步骤操作，但将**下载模式**字段设置为**后台进行**。您可以将下载时间设置为当前时间或稍后时间。如果您已配置Webmin发送邮件，如[第1章](ch01.html
    "第1章 设置您的系统")中所述，*设置您的系统*，您可以指示Webmin在传输完成时通知您。
- en: Managing files and directories on the server
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在服务器上管理文件和目录
- en: Webmin provides a simple but capable file manager, which you can access directly
    in the browser.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin提供了一个简单但功能强大的文件管理器，您可以直接在浏览器中访问它。
- en: Getting ready
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Webmin's file manager runs as a Java applet. In order to use it, you will need
    to install Java on your local machine and enable its use in the browser. You do
    not need to install Java on your server.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin的文件管理器作为Java小程序运行。为了使用它，您需要在本地计算机上安装Java并启用其在浏览器中的使用。您不需要在服务器上安装Java。
- en: How to do it...
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: In this recipe, we'll discuss basic functions of the file manager, such as copying
    and moving files on your server.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论文件管理器的基本功能，例如在服务器上复制和移动文件。
- en: '![How to do it...](img/5849OS_06_01.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/5849OS_06_01.jpg)'
- en: Webmin's File Manager
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin的文件管理器
- en: Copying or moving a file or directory
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 复制或移动文件或目录
- en: 'Perform the following steps to create or move a file or directory:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以创建或移动文件或目录：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航至**其他** | **文件管理器**。
- en: Browse the filesystem to a directory that contains a file or directory you wish
    to manipulate and click the file to select it.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到包含您希望操作的文件或目录的目录，并单击文件进行选择。
- en: Click the **Copy** button in the toolbar to copy the file or the **Cut** button
    to move it.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击工具栏中的**复制**按钮以复制文件，或单击**剪切**按钮以移动文件。
- en: Browse the filesystem to the destination directory.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到目标目录。
- en: Click the **Paste** button.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**粘贴**按钮。
- en: The file will be transferred from source directory to the destination directory.
    If the destination directory already contains a file with the same name, a dialog
    will appear in which you can specify an alternate name or the same name to overwrite
    the destination file.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 文件将从源目录传输到目标目录。如果目标目录已经包含同名文件，则会弹出对话框，您可以指定备用名称或选择相同名称以覆盖目标文件。
- en: Renaming a file or directory
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 重命名文件或目录
- en: 'Perform the following steps to rename a file or directory:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以重命名文件或目录：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航至**其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains the file or directory
    you wish to rename and click the filename to select it.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到包含您希望重命名的文件或目录的目录，然后单击文件名以选择它。
- en: Click the **Rename** button and provide the new filename in the pop-up dialog.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**重命名**按钮，并在弹出对话框中提供新文件名。
- en: Click the **Rename** button in the pop-up dialog.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击弹出对话框中的**重命名**按钮。
- en: Deleting a file or directory
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 删除文件或目录
- en: 'Perform the following steps to delete a file or directory:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以删除文件或目录：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航至**其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains the file or directory
    you wish to delete and click the filename to select it.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到包含你想删除的文件或目录的目录，并点击文件名进行选择。
- en: Click the **Delete** button.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**删除**按钮。
- en: Confirm by clicking the **Delete** button in the pop-up dialog.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出对话框中点击**删除**按钮确认删除。
- en: Editing a file on the server
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编辑服务器上的文件
- en: 'Perform the following steps to edit a file on the server:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤编辑服务器上的文件：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains the file you wish to
    edit and click the filename to select it.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到包含你希望编辑的文件的目录，并点击文件名进行选择。
- en: Click the **Edit** button.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**编辑**按钮。
- en: Edit the file content in the pop-up dialog.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出对话框中编辑文件内容。
- en: Click the **Save and close** button in the pop-up dialog to finish editing.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出对话框中点击**保存并关闭**按钮以完成编辑。
- en: Creating a directory on the server
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在服务器上创建目录
- en: 'Perform the following steps to create a directory on the server:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤在服务器上创建目录：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**其他** | **文件管理器**。
- en: Browse the filesystem to the directory in which you wish to create a subdirectory.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到你希望创建子目录的目录。
- en: Find the **New** button with an icon of a directory and click it.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到带有目录图标的**新建**按钮并点击它。
- en: Provide the full path for the new directory by appending the name of the new
    directory to the path in the pop-up window.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出窗口中，通过将新目录的名称附加到路径上，提供新目录的完整路径。
- en: Click the **Create** button in the pop-up dialog.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击弹出对话框中的**创建**按钮。
- en: Creating a new file on the server
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在服务器上创建新文件
- en: 'Perform the following steps to create a new file on the server:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤在服务器上创建新文件：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**其他** | **文件管理器**。
- en: Browse the filesystem to the directory in which you wish to create a new file.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到你希望创建新文件的目录。
- en: Find the **New** button with an icon of a blank file and click it.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到带有空白文件图标的**新建**按钮并点击它。
- en: Provide the full path for the new file by appending the name of the new file
    to the path provided in the **Filename** field in the pop-up window.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出窗口中的**文件名**字段中，通过将新文件的名称附加到提供的路径中，提供新文件的完整路径。
- en: You can optionally place initial content in the file by entering it in the large
    text area.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以选择在大文本框中输入内容来为文件添加初始内容。
- en: Click the **Save and close** button in the pop-up dialog to create the new file.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出对话框中点击**保存并关闭**按钮以创建新文件。
- en: Creating a symbolic link on the server
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在服务器上创建符号链接
- en: 'In many instances, you will find it useful to create symbolic links to files
    or directories in another location. For most practical purposes, symbolic links
    behave like the objects they link to, but they are only pointers to the original
    location. This means that you can have access to a single directory or file from
    many filesystem paths. Perform the following steps to create a symbolic link on
    the server:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，创建指向其他位置的文件或目录的符号链接非常有用。对于大多数实际用途，符号链接的行为就像它们所链接的对象，但它们只是指向原始位置的指针。这意味着你可以通过多个文件系统路径访问同一个目录或文件。执行以下步骤在服务器上创建符号链接：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**其他** | **文件管理器**。
- en: Browse the filesystem to the directory in which you wish to create a new symbolic
    link.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到你希望创建新符号链接的目录。
- en: Find the **New** button with an arrow icon, which symbolizes the link.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到带有箭头图标的**新建**按钮，表示链接。
- en: In the **Link from** field, enter the full path of the link you wish to create.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**链接来源**字段中，输入你希望创建链接的完整路径。
- en: In the **Link to** field, enter the full path of the file or directory you're
    creating a link for.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**链接到**字段中，输入你要创建链接的文件或目录的完整路径。
- en: Click the **Create** button to create the link.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**按钮以创建链接。
- en: Tip
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Symbolic links can reference absolute paths (those starting with the root directory
    `/`), but they can also reference relative paths. In relative paths, two dots
    denote the parent of the directory in which the link is placed. For instance,
    if we have `file` in directory `A` and want to make a link to it in a sibling
    directory `B`, we could make a link to `../A/file`. This way, we can move both
    directories `A` and `B` together to another location and the symbolic link would
    still point to the same file.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 符号链接可以引用绝对路径（以根目录 `/` 开头），也可以引用相对路径。在相对路径中，两个点表示链接所在目录的父目录。例如，如果我们在目录 `A` 中有
    `file` 文件，并且想在兄弟目录 `B` 中创建链接，我们可以将链接指向 `../A/file`。这样，我们可以将 `A` 和 `B` 两个目录一起移动到另一个位置，而符号链接仍然指向相同的文件。
- en: Downloading a directory and its content
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 下载目录及其内容
- en: 'Webmin''s file manager allows you to download an entire directory, including
    its content, as a compressed archive file, as shown in the following steps:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin 的文件管理器允许你下载整个目录及其内容，作为一个压缩档案文件，具体步骤如下：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 **其他** | **文件管理器**。
- en: Browse the filesystem to the parent directory of the directory you would like
    to download.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统到你想下载的目录的父目录。
- en: Click the name of the directory to select it.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击目录的名称以选择它。
- en: Click the **Save** button in the toolbar.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击工具栏中的**保存**按钮。
- en: In the pop-up dialog, click the **TAR.GZ** button to download the directory
    as a tape archive file compressed by GZIP.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出的对话框中，点击**TAR.GZ**按钮，将目录下载为一个由 GZIP 压缩的磁带档案文件。
- en: Note
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The tape archive (TAR) file format is able to preserve most metadata about the
    files you're downloading, such as ownership, permissions, and extended file attributes
    (although not SELinux contexts or POSIX ACLs).
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 磁带档案（TAR）文件格式能够保留你下载文件的大多数元数据，如所有权、权限和扩展文件属性（尽管无法保留 SELinux 上下文或 POSIX ACLs）。
- en: You can also choose to download the file in a ZIP format, which may be easier
    to extract on some systems, but metadata about the files will be lost.
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你也可以选择以 ZIP 格式下载文件，这在某些系统上可能更容易提取，但文件的元数据将丢失。
- en: Save the file on your local computer.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文件保存到本地计算机。
- en: Extracting files from a compressed archive
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从压缩档案中提取文件
- en: 'If you have a compressed archive on your server in the ZIP, TAR, or GZIP format,
    Webmin''s file manager will allow you to extract its content by performing the
    following steps:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的服务器上有 ZIP、TAR 或 GZIP 格式的压缩档案，Webmin 的文件管理器允许你通过以下步骤提取其内容：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 **其他** | **文件管理器**。
- en: Browse the filesystem to the directory that contains the archive file.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统到包含归档文件的目录。
- en: Click the name of the archive file to select it.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击归档文件的名称以选择它。
- en: Click the **Extract** button in the toolbar.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击工具栏中的**提取**按钮。
- en: Click **Yes** in the pop-up dialog.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出对话框中点击**是**。
- en: Note
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Please note that if your directory already contains files with the same names
    as files in your archive, they will be overwritten without further confirmation
    prompts.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，如果你的目录中已包含与归档中文件同名的文件，这些文件将被覆盖，而不会进一步提示确认。
- en: How it works...
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: Webmin's file manager runs in the Java Virtual Machine on your local PC. The
    Java applet is embedded in Webmin's webpage and can be accessed in the browser.
    Whenever you perform an action in the file manager, the Java applet sends a request
    to your server with instructions about what actions should be performed.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin 的文件管理器在你本地计算机的 Java 虚拟机中运行。Java 小程序嵌入在 Webmin 的网页中，可以通过浏览器访问。每当你在文件管理器中执行一个操作时，Java
    小程序会向你的服务器发送一个请求，包含应执行的操作指令。
- en: Note
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: File manager requests are sent using the HTTP protocol. The instructions will
    be encrypted by SSL if you enabled HTTPS support in Webmin.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 文件管理请求通过 HTTP 协议发送。如果你在 Webmin 中启用了 HTTPS 支持，指令将通过 SSL 加密。
- en: Webmin performs those instructions on the server and sends back information
    about their effect along with other information needed to display on the next
    screen in the file manager window.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin 在服务器上执行这些指令，并将它们的效果信息及其他显示所需的信息发送回文件管理器窗口的下一屏幕。
- en: See also
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For more information about the functioning of Webmin's file manager, refer to
    the *Changing file ownership and permissions* recipe in this chapter.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关 Webmin 文件管理器功能的更多信息，请参考本章中的*更改文件所有权和权限*一节。
- en: Changing file ownership and permissions
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更改文件所有权和权限
- en: Webmin's file manager allows you to manipulate standard POSIX file ownership
    and permissions. The user interface for this function is easy to use and powerful,
    allowing you to modify files recursively, but distinguish between files and directories.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin的文件管理器允许您操作标准的POSIX文件所有权和权限。该功能的用户界面易于使用且功能强大，允许您递归修改文件，但能够区分文件和目录。
- en: 'Every filesystem node (file, directory, and so on) on a UNIX-like system is
    owned by a single user and a single group. The system also stores permission information
    for each node with separate permissions for the file owner, group, and everybody
    else. Standard permissions are listed in the following table:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在类UNIX系统中，每个文件系统节点（文件、目录等）都由一个用户和一个组拥有。系统还会为每个节点存储权限信息，包括文件所有者、组和其他用户的权限。标准权限如下表所示：
- en: '| Binary notation | Octal notation | Permission name | Description |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 二进制表示法 | 八进制表示法 | 权限名称 | 描述 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| `000` | `0` | None | No permission of any kind. |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| `000` | `0` | 无 | 没有任何权限。 |'
- en: '| `001` | `1` | Execute | Execute a program file or traverse a directory.In
    most cases, read permission is also needed. |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| `001` | `1` | 执行 | 执行程序文件或遍历目录。在大多数情况下，也需要读权限。 |'
- en: '| `010` | `2` | Write | Write to file or create file entries in directory.
    |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| `010` | `2` | 写 | 写入文件或在目录中创建文件条目。 |'
- en: '| `100` | `4` | Read | Read file content or list directory content. |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| `100` | `4` | 读取 | 读取文件内容或列出目录内容。 |'
- en: '| `011` | `3` | Write and execute | Combinations of the mentioned permissions.
    |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| `011` | `3` | 写和执行 | 以上提到的权限组合。 |'
- en: '| `101` | `5` | Read and execute |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| `101` | `5` | 读和执行 |'
- en: '| `110` | `6` | Read and write |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| `110` | `6` | 读写 |'
- en: '| `111` | `7` | Read, write, and execute |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| `111` | `7` | 读、写和执行 |'
- en: The octal notation is commonly used as it is the most concise. For instance,
    commonly used permissions for files are denoted as `644`, which specify `6` (read
    and write bits) for the file owner, `4` (read bit) for the file's group and all
    other users. We could specify the permissions as `640` to deny access to any user
    from outside our group.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 八进制表示法通常使用，因为它是最简洁的。例如，常用的文件权限表示为`644`，其中`6`（读写位）表示文件所有者的权限，`4`（读位）表示文件所属组和所有其他用户的权限。我们可以将权限设置为`640`，以禁止任何不属于我们组的用户访问。
- en: The standard permissions for a directory, on the other hand, are denoted as
    `755`, which is similar to `644` but adds the execute bit to all permissions allowing
    everyone to enter the directory.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，目录的标准权限表示为`755`，它与`644`类似，但为所有权限添加了执行位，允许所有人进入目录。
- en: Note
  id: totrans-165
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Be careful when setting the third permission for others as this applies to everyone
    with access to your system.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 设置第三种权限时要小心，因为此权限适用于所有可以访问您系统的用户。
- en: If you copy a directory from another system to your server, the ownership and
    permission information can be lost or improperly set. In this recipe, we'll edit
    a directory recursively to change the owner and permission for the directory and
    its content. We'll set the permission to `644` on all files and `755` on all subdirectories.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您从另一个系统复制目录到您的服务器，目录的所有权和权限信息可能会丢失或设置不当。在本教程中，我们将递归地编辑目录，改变目录及其内容的所有者和权限。我们会将所有文件的权限设置为`644`，并将所有子目录的权限设置为`755`。
- en: Getting ready
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In this recipe, we'll be using Webmin's file manager, which runs as a Java applet.
    In order to use it, you will need to install Java on your local machine and enable
    its use in the browser. You do not need to install Java on your server.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将使用Webmin的文件管理器，它作为一个Java小程序运行。为了使用它，您需要在本地计算机上安装Java并启用浏览器中的Java功能。您不需要在服务器上安装Java。
- en: How to do it...
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s begin. Perform the following steps to change the file ownership and
    permissions:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧。按照以下步骤更改文件的所有权和权限：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains a file or directory you
    wish to manipulate and click the directory name to select it.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到包含您要操作的文件或目录的目录，并点击目录名称以选择它。
- en: First, we'll set the permission `755` on the directory and all of its content.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们将为目录及其所有内容设置权限`755`。
- en: Click the **Info** button in the toolbar.
  id: totrans-175
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏中的**信息**按钮。
- en: 'Mark the checkboxes next to **Read** and **List** for all types: **User**,
    **Group**, and **Other**.'
  id: totrans-176
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**用户**、**组**和**其他**的所有类型下，勾选**读取**和**列出**复选框。
- en: Mark the checkbox next to **Write** only for **User** (owner) and make sure
    that **Write** permission is not marked for **Group** and **Other**.
  id: totrans-177
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 仅为 **用户**（所有者）勾选 **写入** 权限，确保 **组** 和 **其他** 没有勾选 **写入** 权限。
- en: Set the **Apply changes to** option to **This directory and all subdirectories
    and files**.![How to do it...](img/5849OS_06_09.jpg)
  id: totrans-178
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 **应用更改到** 选项设置为 **此目录及所有子目录和文件**。![如何操作...](img/5849OS_06_09.jpg)
- en: Click the **Save** button.
  id: totrans-179
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **保存** 按钮。
- en: Next, we'll set the permission `644` only on files in the directory and its
    subdirectories.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将只对目录及其子目录中的文件设置权限 `644`。
- en: Click the **Info** button in the toolbar.
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏中的 **信息** 按钮。
- en: 'Uncheck the **List** permissions of all types: **User**, **Group**, and **Other**.'
  id: totrans-182
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 取消勾选所有类型的 **列出** 权限：**用户**、**组** 和 **其他**。
- en: Set the **Apply changes to:** option to **Files under this directory and subdirectories**.
  id: totrans-183
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 **应用更改到：** 选项设置为 **此目录及其子目录下的文件**。
- en: Click the **Save** button.
  id: totrans-184
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **保存** 按钮。
- en: How it works...
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Webmin's file manager runs in the Java Virtual Machine on your local PC. The
    Java applet is embedded in Webmin's webpage and can be accessed in the browser.
    Whenever you perform an action in the file manager, the Java applet sends an HTTP
    request to your server with instructions on what actions should be performed.
    Webmin performs those instructions on the server and sends back information about
    their effect along with the other information needed to display on the next screen
    in the file manager window.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin 的文件管理器在本地计算机的 Java 虚拟机上运行。Java 小程序嵌入在 Webmin 的网页中，可以通过浏览器访问。每当你在文件管理器中执行一个操作时，Java
    小程序会向服务器发送一个 HTTP 请求，指示应该执行哪些操作。Webmin 会在服务器上执行这些操作，并将它们的效果以及显示在文件管理器窗口下一屏所需的其他信息一并返回。
- en: There's more...
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Webmin's file manager has a number of other options related to file permissions.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin 的文件管理器有许多与文件权限相关的其他选项。
- en: Enabling the setuid bit on an executable file
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 启用可执行文件的 setuid 位
- en: 'Normally, when a user executes a program from a file, that program will run
    with the permissions of that user. In special cases, when an executable file is
    marked with the `setuid` (set user ID upon execution) bit, then the executed program
    will run with the permissions of the owner of the executable, not the user who
    is running the program. This is useful in situations where a user has to write
    something to a file he or she would not normally have access to. For example,
    when a user updates his or her password, they change the `shadow` file in the
    `/etc` directory, which normal users don''t have access to. Follow these steps
    to set the setuid bit on a file:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，当用户从文件中执行程序时，该程序会以该用户的权限运行。在特殊情况下，当一个可执行文件被标记为 `setuid`（执行时设置用户 ID）位时，执行的程序将以可执行文件的所有者权限运行，而不是运行程序的用户权限。这在用户必须向通常没有访问权限的文件写入数据时非常有用。例如，当用户更新自己的密码时，他们会修改
    `/etc` 目录下的 `shadow` 文件，普通用户没有权限访问该文件。按照以下步骤为文件设置 setuid 位：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入 **其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains the file you wish to
    manipulate and click the filename to select it.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统，找到包含你希望操作的文件的目录，并点击文件名进行选择。
- en: Click the **Info** button in the toolbar.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏中的 **信息** 按钮。
- en: Mark the checkbox labeled **Setuid** under **Ownership**.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **所有权** 下勾选标记为 **Setuid** 的复选框。
- en: Click the **Save** button.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **保存** 按钮。
- en: Setting the sticky bit on a directory
  id: totrans-196
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为目录设置 sticky 位
- en: The `sticky` bit is a useful feature of directories on modern UNIX-like systems.
    If a directory has the `sticky` bit set, then files contained within the directory
    can only be edited or deleted by their respective owners or the root user, regardless
    of what the other file permissions dictate. A good example of this is the `/tmp`
    directory, where every user may create files, but they can only delete and rename
    files they own.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '`sticky` 位是现代 UNIX 类系统中目录的一个有用特性。如果一个目录设置了 `sticky` 位，那么目录中的文件只能由各自的拥有者或 root
    用户编辑或删除，不管其他文件权限如何。这一特性通常应用于 `/tmp` 目录，在这个目录中，所有用户都可以创建文件，但只能删除或重命名自己拥有的文件。'
- en: 'Webmin''s file manager allows you to set the `sticky` bit on directories by
    performing the following steps:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: Webmin 的文件管理器允许你通过以下步骤在目录上设置 `sticky` 位：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入 **其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains the directory you wish
    to manipulate and click the directory name to select it.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统到包含您要操作的目录的目录，然后点击目录名称进行选择。
- en: Click the **Info** button in the toolbar.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏中的**信息**按钮。
- en: Mark the checkbox labeled **Sticky** under **Permissions**.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**权限**下勾选标有**粘滞**的复选框。
- en: Click the **Save** button.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Changing ACLs on a directory
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更改目录上的 ACL
- en: If your system supports filesystem **Access Control Lists** (**ACLs**), you
    can use them to specify additional permissions on files and directories. For example,
    you may choose to set default permissions which will be applied to all new files
    created in a directory. If you have a directory where Webmin places backup files,
    you may choose to make backups inaccessible to other users by default.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的系统支持文件系统**访问控制列表**（**ACL**），您可以使用它们为文件和目录指定额外的权限。例如，您可以选择设置默认权限，这些权限将应用于目录中创建的所有新文件。如果您有一个
    Webmin 用于存放备份文件的目录，您可以选择默认情况下使备份对其他用户不可访问。
- en: 'You can use Webmin to manipulate ACLs by using the following steps:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过以下步骤使用 Webmin 操作 ACL：
- en: Navigate to **Others** | **File Manager**.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**其他** | **文件管理器**。
- en: Browse the filesystem to the directory, which contains the directory you wish
    to manipulate and click the directory name to select it.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览文件系统到包含您要操作的目录的目录，然后点击目录名称进行选择。
- en: Click the **ACL** button in the toolbar.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏中的**ACL**按钮。
- en: From the dropdown, select **Default Others** and click the **Add ACL of type**
    button.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择**默认其他**，然后点击**添加类型的 ACL**按钮。
- en: Uncheck all boxes for **Read**, **Write**, and **Execute**.![Changing ACLs on
    a directory](img/5849OS_06_10.jpg)
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 取消勾选**读取**、**写入**和**执行**的所有框。![更改目录上的 ACL](img/5849OS_06_10.jpg)
- en: Click the **Save** button in the **Create ACL** window and the **Save** button
    in the main ACL window.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**创建 ACL**窗口中点击**保存**按钮，然后在主 ACL 窗口中点击**保存**按钮。
- en: Setting up network-shared folders for Windows
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为 Windows 设置网络共享文件夹
- en: A server running on a local area network can be quite useful as a repository
    of shared files. If other computers in your local network are running Microsoft
    Windows, your best choice for setting up a network file server is the Windows
    standard **Common Internet File System** (**CIFS**) protocol. Webmin can assist
    you with setting up network shares of this type by installing and helping you
    configure the Samba package utilities.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在局域网上运行的服务器可以作为共享文件的存储库非常有用。如果您本地网络中的其他计算机运行的是 Microsoft Windows，设置网络文件服务器的最佳选择是
    Windows 标准的**公共互联网文件系统**（**CIFS**）协议。Webmin 可以通过安装并帮助您配置 Samba 包实用工具来协助您设置这种类型的网络共享。
- en: Tip
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: It wouldn't be a good idea to use Windows file sharing on the open Internet.
    Computers out in the open are regularly scanned for vulnerabilities of the Windows
    file sharing protocol and you could fall victim to an attack if an exploit becomes
    widespread before a security patch is developed and applied on your system.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 不建议在公开的互联网环境中使用 Windows 文件共享。外部计算机经常扫描 Windows 文件共享协议的漏洞，如果在安全补丁发布并应用之前，某个漏洞被广泛利用，您可能会成为攻击的受害者。
- en: Make sure that your firewall blocks incoming external network traffic on **User
    Datagram Protocol** (**UDP**) ports 137, 138, and 139 as well as TCP ports 137,
    139, and 445\. All of these ports are used by Windows file sharing and should
    only be accessible to trusted computers on your local network.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您的防火墙阻止**用户数据报协议**（**UDP**）端口 137、138 和 139，以及 TCP 端口 137、139 和 445 的外部网络流量。这些端口用于
    Windows 文件共享，应仅允许本地网络中的受信任计算机访问。
- en: If you need to make network assets available via the Internet, a better choice
    would be to use the SFTP or FTP protocols, described later in this chapter.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要通过互联网提供网络资产，使用本章后面将介绍的 SFTP 或 FTP 协议会是一个更好的选择。
- en: Getting ready
  id: totrans-219
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to set up Windows file sharing on your server, you need to install
    the Samba package from your distribution repository. If Samba is already installed,
    you will find the **Samba Windows File Sharing** module in the **Servers** section
    of Webmin's main menu; otherwise, you will find it in the **Un-used Modules**
    section.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在您的服务器上设置 Windows 文件共享，您需要从您的发行版仓库安装 Samba 包。如果 Samba 已经安装，您将在 Webmin 主菜单的**服务器**部分找到**Samba
    Windows 文件共享**模块；否则，您会在**未使用的模块**部分找到它。
- en: On most systems, Webmin will be able to download the Samba package and its dependencies
    automatically. Navigate to **Un-used Modules** | **Samba Windows File Sharing**
    and click the link to download and install the package. Alternatively, you can
    follow the *Installing software packages* recipe from [Chapter 1](ch01.html "Chapter 1. Setting
    Up Your System"), *Setting Up Your System*, and install the package named `samba`.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数系统中，Webmin能够自动下载Samba包及其依赖项。请导航到**未使用的模块** | **Samba Windows文件共享**并点击链接下载并安装该软件包。或者，你也可以按照[第1章](ch01.html
    "第1章. 设置系统")中*安装软件包*的步骤，安装名为`samba`的软件包。
- en: Note
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: At the time of this publication, Webmin supports Samba Version 3 series, not
    yet the newer Samba 4.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书发布时，Webmin支持的是Samba 3系列，而不是更新的Samba 4。
- en: After installation, follow the *Allowing access to a service through the firewall*
    recipe from [Chapter 3](ch03.html "Chapter 3. Securing Your System"), *Securing
    Your System*, to unblock TCP ports 137, 139, and 445 and UDP ports 137-139.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，按照[第3章](ch03.html "第3章. 安全设置")中*通过防火墙允许访问服务*的步骤，解锁TCP端口137、139和445以及UDP端口137-139。
- en: '![Getting ready](img/5849OS_06_03.jpg)'
  id: totrans-225
  prefs: []
  type: TYPE_IMG
  zh: '![准备就绪](img/5849OS_06_03.jpg)'
- en: Follow the *Controlling which system services are started at boot* recipe from
    [Chapter 1](ch01.html "Chapter 1. Setting Up Your System"), *Setting Up Your System*,
    to make sure that services `nmb`, `smb`, and `winbind` are started and set to
    start automatically at boot time.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 请按照[第1章](ch01.html "第1章. 设置系统")中*控制启动时哪些系统服务被启动*的步骤，确保`nmb`、`smb`和`winbind`服务被启动并设置为开机自动启动。
- en: Finally, we can set how our server will be visible on the network. Navigate
    to **Servers** | **Samba Windows File Sharing** | **Windows Networking** and set
    **Workgroup** to `WORKGROUP` or another name used in your organization. Set **Server
    description** to the name by which you want the server to be visible on the network.
    You can set the description field to `%h`, which will cause Samba to use the server's
    default hostname.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们可以设置服务器在网络中的可见性。请导航到**服务器** | **Samba Windows文件共享** | **Windows网络**，将**工作组**设置为`WORKGROUP`或你的组织中使用的其他名称。将**服务器描述**设置为你希望服务器在网络中显示的名称。你可以将描述字段设置为`%h`，这会导致Samba使用服务器的默认主机名。
- en: How to do it...
  id: totrans-228
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: In this recipe, we will create a shared network folder available to the users
    of Windows. Linux and OS X are also capable of accessing CIFS servers, so this
    type of network-attached storage will be broadly available on your local network.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个步骤中，我们将创建一个共享的网络文件夹，供Windows用户使用。Linux和OS X也能够访问CIFS服务器，因此这种类型的网络附加存储将广泛可用于你的本地网络。
- en: Creating a UNIX pseudo user
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建UNIX伪用户
- en: 'We will create a shared network folder accessible to multiple users. This shared
    resource must be stored on our server''s disk and will have to belong to a UNIX
    user. In order to simplify management of file ownership and permissions, we will
    create a special pseudo user named `samba`. This user will not be associated with
    any one person and the account will not have the ability to log into our system.
    The user will simply own all files in the shared directory, which we''ll create
    in `/srv/samba`. Follow the *Creating a system user account* recipe from [Chapter
    2](ch02.html "Chapter 2. User Management"), *User Management*, to create a pseudo
    user. Use the following settings:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建一个可以供多个用户访问的共享网络文件夹。这个共享资源必须存储在我们服务器的磁盘上，并且必须属于一个UNIX用户。为了简化文件所有权和权限的管理，我们将创建一个名为`samba`的特殊伪用户。这个用户不与任何一个人关联，并且该账户无法登录到我们的系统。该用户将仅拥有共享目录中的所有文件，目录将创建在`/srv/samba`。请按照[第2章](ch02.html
    "第2章. 用户管理")中*创建系统用户账户*的步骤来创建一个伪用户。使用以下设置：
- en: '**Username**: `samba`'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**: `samba`'
- en: '**Real name**: `Samba Network Pseudo-user`'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**真实姓名**: `Samba网络伪用户`'
- en: '**Home directory**: `/srv/samba`'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主目录**: `/srv/samba`'
- en: '**Shell**: **/usr/sbin/nologin**'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Shell**: **/usr/sbin/nologin**'
- en: Note
  id: totrans-236
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The `nologin` binary may be placed under another path, such as `/sbin/nologin`,
    on your system. You may also use `/bin/false`, which will not return a polite
    message to the user but also prevents logging in.
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`nologin`二进制文件可能位于其他路径下，如`/sbin/nologin`。你也可以使用`/bin/false`，该命令不会返回礼貌的提示信息，但同样会阻止用户登录。'
- en: '**Password**: **No login allowed**'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**: **不允许登录**'
- en: '**Primary group**: **New group with same name as user**'
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主组**: **与用户同名的新组**'
- en: '**Copy template files to home directory?**: **No**'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**将模板文件复制到主目录？**: **否**'
- en: '**Create user in other modules?**: **No**'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**是否在其他模块中创建用户?**：**否**'
- en: 'These settings are shown in the following screenshot:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 这些设置显示在以下截图中：
- en: '![Creating a UNIX pseudo user](img/5849OS_06_02.jpg)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![创建 UNIX 伪用户](img/5849OS_06_02.jpg)'
- en: Creating a Samba shared network folder
  id: totrans-244
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建 Samba 共享网络文件夹
- en: 'The next step is creating the actual shared network resource. Webmin makes
    this part quite easy. Perform the following steps to create a shared network folder:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是创建实际的共享网络资源。Webmin 使这部分变得非常简单。按照以下步骤创建共享网络文件夹：
- en: Navigate to **Servers** | **Samba Windows File Sharing**.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**服务器** | **Samba Windows 文件共享**。
- en: Click the **Create a new file share** link.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建新的文件共享**链接。
- en: Set **Share name** to `SharedFolder` or a more appropriate description.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**共享名称**设置为`SharedFolder`或更合适的描述。
- en: Set **Directory to share** to `/srv/samba`.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**共享目录**设置为`/srv/samba`。
- en: Since we already created the directory when setting up a pseudo user account,
    answer **No** to **Automatically create directory?**.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们在设置伪用户账户时已经创建了目录，因此对于**是否自动创建目录?**，选择**否**。
- en: Set both **Available** and **Browseable** to **Yes**.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**可用**和**可浏览**都设置为**是**。
- en: Click the **Create** button.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**按钮。
- en: Creating Samba user accounts
  id: totrans-253
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建 Samba 用户账户
- en: 'Samba stores its own list of users separate from your system''s user list.
    Webmin allows you to easily create Samba user accounts for system users by performing
    the following steps:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: Samba 存储着独立于系统用户列表的用户列表。Webmin 允许你通过执行以下步骤轻松地为系统用户创建 Samba 用户账户：
- en: Navigate to **Servers** | **Samba Windows File Sharing**.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**服务器** | **Samba Windows 文件共享**。
- en: Click **Convert Users** in the **Samba Users** section.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**Samba 用户**部分点击**转换用户**。
- en: Set **Unix users to convert** to **Only listed users or UID ranges** and use
    the ellipsis button (**...**) to bring up the user-selector pop up and select
    a user you wish to grant Samba access to.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**转换 Unix 用户**设置为**仅列出的用户或 UID 范围**，然后使用省略号按钮（**...**）打开用户选择弹出窗口，选择一个你希望授予
    Samba 访问权限的用户。
- en: Set **For newly created users, set the password to** to **Use this password**
    and type in a password for the user.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**为新创建的用户设置密码为**设置为**使用此密码**，并为该用户输入密码。
- en: Click the **Convert Users** button.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**转换用户**按钮。
- en: Tip
  id: totrans-260
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: The user may change his or her password through Usermin. Refer to the *Installing
    Usermin* recipe in [Chapter 2](ch02.html "Chapter 2. User Management"), *User
    Management*, for information about setting up Usermin.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以通过 Usermin 更改其密码。有关设置 Usermin 的信息，请参见[第 2 章](ch02.html "第2章 用户管理")中的*安装
    Usermin*配方，*用户管理*部分。
- en: If the user's name and password on your Samba server matches their username
    and password on Windows, they should be able to authenticate transparently, without
    retyping their password when accessing shared folders.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户在 Samba 服务器上的用户名和密码与其 Windows 上的用户名和密码匹配，他们应该能够透明地进行身份验证，在访问共享文件夹时无需重新输入密码。
- en: Granting Samba users access to the shared folder
  id: totrans-263
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 授予 Samba 用户访问共享文件夹的权限
- en: 'The final part of the process is to grant Samba users access to the shared
    folder we created. We''ll also inform Samba that it should set UNIX ownership
    of all incoming files to the pseudo user `samba` created in the preceding section.
    Perform the following steps to grant Samba users access to the shared folder:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 过程的最后一步是授予 Samba 用户访问我们创建的共享文件夹的权限。我们还将告知 Samba，应将所有传入文件的 UNIX 所有权设置为在前一部分中创建的伪用户`samba`。按照以下步骤授予
    Samba 用户访问共享文件夹的权限：
- en: Navigate to **Servers** | **Samba Windows File Sharing**.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**服务器** | **Samba Windows 文件共享**。
- en: Click the name of the share we just created.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击我们刚创建的共享的名称。
- en: On the **Edit File Share** screen, click the **Security and Access Control**
    icon.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**编辑文件共享**屏幕上，点击**安全性与访问控制**图标。
- en: Set **Writable?** to **Yes**.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**可写?**设置为**是**。
- en: Set **Read/write users** to a list of users who should have write access to
    the shared folder. Use the ellipsis (**...**) button to bring up the helpful user-selector
    pop up.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**可读/写用户**设置为应该具有写入权限的用户列表。使用省略号（**...**）按钮打开有用的用户选择弹出窗口。
- en: Click the **Save** button.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Back on the **Edit File Share** screen, click the **File Permissions** icon.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到**编辑文件共享**屏幕，点击**文件权限**图标。
- en: Set **Force Unix user** and **Force Unix group** to `samba`.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**强制 UNIX 用户**和**强制 UNIX 组**设置为`samba`。
- en: Click the **Save** button.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Note
  id: totrans-274
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'If you''re running **Security Enhanced Linux** (**SELinux**), you may run into
    a problem wherein your users are able to access shares but cannot list, read,
    or write files. This is caused by SELinux blocking what it considers unauthorized
    access to the underlying directory. You may overcome this problem by either disabling
    SELinux or configuring a SELinux security context for `/srv/samba`. Take a look
    at this link for more information: [http://fedoraproject.org/wiki/SELinux/samba](http://fedoraproject.org/wiki/SELinux/samba).'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在运行**Security Enhanced Linux**（**SELinux**），你可能会遇到一个问题，即用户能够访问共享文件，但无法列出、读取或写入文件。这是因为SELinux阻止了它认为未经授权的对底层目录的访问。你可以通过禁用SELinux或为`/srv/samba`配置SELinux安全上下文来解决此问题。有关更多信息，请查看此链接：[http://fedoraproject.org/wiki/SELinux/samba](http://fedoraproject.org/wiki/SELinux/samba)。
- en: After a moment, you should be able to access your shares from other computers
    on the network. Look for your server in the Windows network `WORKGROUP` or in
    the **Shared** sidebar of Finder on OS X.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 稍等片刻，你应该能够从网络上的其他计算机访问你的共享文件。在Windows网络`WORKGROUP`中查找你的服务器，或在OS X的**Shared**侧边栏中查找。
- en: How it works...
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: Samba's configuration is stored in `/etc/smb.conf` or `/etc/samba/smb.conf`
    depending on the operating system. Webmin's graphical interface allows you to
    edit options stored in this and associated files to modify Samba's configuration
    without learning this file's complex syntax. Samba automatically re-reads its
    configuration quite often, so there should be no need to restart `smb` and associated
    daemons after making most common configuration changes.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: Samba的配置存储在`/etc/smb.conf`或`/etc/samba/smb.conf`中，具体取决于操作系统。Webmin的图形界面使你能够编辑存储在此文件及相关文件中的选项，从而修改Samba的配置，无需学习该文件复杂的语法。Samba会自动频繁重新读取其配置，因此在进行大多数常见配置更改后，通常不需要重新启动`smb`及相关守护进程。
- en: There's more...
  id: totrans-279
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多……
- en: 'There is quite a lot more you can do with Samba, but we don''t have space here
    to cover it all. Topics we have to omit include: sharing server-attached printers
    on your network, authenticating users using Microsoft''s Active Directory services,
    setting up access control lists to maintain file ownership on both Windows and
    UNIX systems, and so on.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以做很多与Samba相关的操作，但这里没有足够的空间来涵盖所有内容。我们不得不省略的话题包括：在你的网络上共享服务器连接的打印机、使用微软的Active
    Directory服务进行用户身份验证、设置访问控制列表以维护Windows和UNIX系统上的文件所有权等。
- en: In the rest of this section, we'll cover just a few additional features Webmin
    can help you with.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节的其余部分，我们将介绍Webmin可以帮助您完成的其他一些功能。
- en: Sharing home directories
  id: totrans-282
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 共享主目录
- en: 'On many systems, Samba creates home directory shares automatically. This allows
    users to access files stored in their home directories on your server over the
    network. If this is a feature you didn''t intend to activate, you can disable
    it temporarily or delete the share configuration permanently. Here are the steps
    to make home directories unavailable:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多系统中，Samba会自动创建主目录共享。这允许用户通过网络访问存储在其主目录中的文件。如果这是一个你不打算启用的功能，你可以暂时禁用它或永久删除该共享配置。以下是使主目录不可用的步骤：
- en: Navigate to **Servers** | **Samba Windows File Sharing**.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**Servers** | **Samba Windows File Sharing**。
- en: Click **SharedFolder**.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**SharedFolder**。
- en: Set **Available?** to **No**.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置**Available?**为**No**。
- en: Click the **Save** button.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Save**按钮。
- en: Checking who's connected and disconnecting sessions
  id: totrans-288
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检查谁已连接并断开会话
- en: 'If you would like to see who''s connected to your server via Samba and disconnect
    them, perform the following steps:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想查看谁通过Samba连接到你的服务器并断开连接，请执行以下步骤：
- en: Navigate to **Servers** | **Samba Windows File Sharing**.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**Servers** | **Samba Windows File Sharing**。
- en: Click the **View all connections** link.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**View all connections**链接。
- en: Mark the process IDs associated with the sessions you would like to disconnect.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 标记与您想要断开连接的会话相关的进程ID。
- en: Click the **Disconnect Selected Users** button.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Disconnect Selected Users**按钮。
- en: Note
  id: totrans-294
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Disconnecting a user whose files are open may bring programs on their Windows
    machine to a halt. Use caution when disconnecting users.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 断开一个正在打开文件的用户可能会导致他们Windows机器上的程序停止运行。断开用户时请小心。
- en: Debugging Samba
  id: totrans-296
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 调试Samba
- en: 'If you run into problems with Samba, you should check for error messages in
    its log files. Samba''s log messages are stored in `/var/log/samba`. You will
    find multiple files there, as the server keeps separate files for each connecting
    client. By default, Samba''s logging is very quiet because logging every action
    would seriously slow the service down. If you''re having problems, you may wish
    to temporarily increase the verbosity of Samba''s logging; just make sure to set
    it back to defaults when you''re done. Perform the following steps to change Samba''s
    log verbosity level:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Servers** | **Samba Windows File Sharing** | **Miscellaneous Options**.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Debug Level** to a higher value. Start with **1** and increase it further
    if you still don't find useful information in the log files.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Save** button.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the **Samba Windows File Sharing** screen, click the **Restart Samba Servers**
    button. This will output information about how the server starts to log messages,
    which may contain useful diagnostic messages.
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mounting a Windows-shared folder
  id: totrans-302
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: It's quite common for network attached storage volumes to use the CIFS protocol.
    Tools that allow setting up such sharing are built into popular operating systems
    such as Microsoft Windows and OS X. Many NAS devices also use this protocol, often
    running a version of the Samba package for Linux. Mounting CIFS shares in desktop
    environments is quite simple, but what if you want your server to have permanent
    access to a CIFS volume? Webmin can help you set up an automounting network filesystem
    that will connect to a remote CIFS server during system boot.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-304
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Before your system can access CIFS network volumes, you will need to install
    an additional package typically named `cifs-utils`. Refer to the *Installing software
    packages* recipe from [Chapter 1](ch01.html "Chapter 1. Setting Up Your System"),
    *Setting Up Your System*, for information about how to install packages using
    Webmin.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-306
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Follow these steps to mount a Windows shared folder in your filesystem:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
- en: Because we'll need to store the CIFS user credentials (username and password)
    in plain text, we need to start by creating a protected hidden file. Create a
    file on your server with the path `/root/.smbcredentials` and write the following
    lines in it, replacing `cifsusername` and `cifspassword` with the username and
    password of a user with access to the CIFS shared folder. Set the file's owner
    to `root` and permissions to `600`.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-309
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Tip
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: You can use Webmin's file manager to create the file and edit its permissions.
    Check the *Managing files and directories on the server* recipe in this chapter.
  id: totrans-311
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Navigate to **System** | **Disk and Network Filesystems**.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Common Internet Filesystem (cifs)** from the **Type** dropdown.
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Add Mount** button.
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Mounted as** to a local path such as `/mnt/remoteshare`.
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Save mount?** to **Save and mount at boot**.
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Server Name** to the IP or fully qualified domain name of the remote CIFS
    server.
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Share Name** to the name of the remote share. If you created the share
    using the recipe in this chapter, the name would be `SharedFolder`.
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Credentials File** to `/root/.smbcredentials`.
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **User files are owned by** to `root`.
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Group files are owned** by to `users`.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  id: totrans-322
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: You may specify another user or create a special pseudo user for use with Samba,
    as described in the *Setting up network-shared folders for Windows* recipe in
    this chapter.
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Set **File** **permissions** to `0660`.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Directory permissions** to `0770`.
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Create** button.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![How to do it...](img/5849OS_06_04.jpg)'
  id: totrans-327
  prefs: []
  type: TYPE_IMG
- en: How it works...
  id: totrans-328
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `/etc/fstab` directory contains information about all filesystems mounted
    by your system during boot. This includes both local disks and remote network
    volumes. When creating a permanent CIFS mount, Webmin creates an additional line
    in your file. This line will have the following format:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The preceding line contains the following information:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
- en: '`192.168.1.50`: This is the IP or domain name of the CIFS server.'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`sharedfolder`: This is the name of the CIFS share.'
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/mnt/remoteshare`: This is the local file path to the directory where the
    share will be mounted.'
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/root/.smbcredentials`: This is the path to the file that stores the CIFS
    username and password.'
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`uid=0`: This specifies that shared files are owned by the user `root`.'
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`gid=100`: This specifies that shared files are owned by the `users` group,
    which will usually allow all of your system users to access them.'
  id: totrans-337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`file_mode=0660` and `dir_mode=0770`: These specify the permissions displayed
    on all shared files—read, write, and list—for all members of the `users` group.'
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-339
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you want to mount a CIFS share once and not make it a permanent fixture of
    your server's filesystem, you can simplify this recipe.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
- en: Follow the steps given in the *How to do it...* section in this recipe, but
    instead of creating a credentials file, put the username and password in the **Login
    Name** and **Login Password** fields. Also set **Save Mount** to **Don't save**.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
- en: 'This is equivalent to executing the following command:'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-343
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Setting up an NFS-shared volume
  id: totrans-344
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Network File System** (**NFS**) is a distributed filesystem protocol designed
    to allow systems to share file resources over the network. An NFS server can export
    part of its filesystem, and then a remote client system can mount the exported
    directories as part of its local filesystem. Webmin can assist you with exporting
    directories for sharing using NFS.'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-346
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: NFS v3 preserves UNIX permissions and file ownership, but the job of checking
    who's who is left up to the client system. That means that if the NFS server has
    a user with a `uid` value of `500`, then the same user should have the same `uid`
    number on the NFS client system. Otherwise, his files may be assigned to a different
    user or no user at all. This is an important security consideration when setting
    up NFS servers and clients. Make sure that both systems have the same user accounts.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: NFS v3 保留 UNIX 权限和文件所有权，但检查谁是谁的工作由客户端系统完成。这意味着，如果 NFS 服务器上的某个用户的 `uid` 值为 `500`，那么该用户在
    NFS 客户端系统上的 `uid` 也应该相同。否则，他的文件可能会被分配给其他用户，或者根本没有用户。这是设置 NFS 服务器和客户端时需要考虑的重要安全因素。确保两台系统具有相同的用户账户。
- en: Getting ready
  id: totrans-348
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: The NFS server may come built into your system at installation. If it is, Webmin
    should recognize it and enable the NFS Exports module. If you find the module
    listed in the **Networking** section of the menu, the NFS server should already
    be installed; otherwise, we'll need to install it.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: NFS 服务器可能在安装时已经内置在您的系统中。如果是这样，Webmin 应该会识别它并启用 NFS 导出模块。如果您在菜单的**网络**部分看到该模块，说明
    NFS 服务器已经安装；否则，我们需要手动安装它。
- en: Depending on your system, the NFS server comes in a package named `nfs-kernel-server`
    or `nfs-utils`. Find the appropriate package in your repository and install it.
    Refer to the *Installing software packages* recipe in [Chapter 1](ch01.html "Chapter 1. Setting
    Up Your System"), *Setting Up Your System*, for more information.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您的系统，NFS 服务器可能会打包为 `nfs-kernel-server` 或 `nfs-utils`。在您的仓库中找到合适的包并安装。有关更多信息，请参考[第
    1 章](ch01.html "第 1 章. 配置您的系统")中的*安装软件包*部分，*配置您的系统*。
- en: Go to **System** | **Bootup and Shutdown** and verify that the `rpcbind` service
    is running on our system. If it isn't, select it and click the **Start Now and
    On Boot** button.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 转到**系统** | **启动与关闭**，并验证 `rpcbind` 服务是否在我们的系统上运行。如果没有，请选择它并点击**立即启动并开机启动**按钮。
- en: Tip
  id: totrans-352
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Running an NFS server on a system protected by firewall is a little tricky.
    Port numbers for various components of the NFS server that are listening are assigned
    dynamically and can change over time. You can coerce your system to assign static
    port numbers to the NFS-related services through editing configuration files.
    The location of these files and their syntax is specific to your system distribution
    and version. Do a web search for `nfs iptables` and the name of your OS to find
    instructions specific to your system.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 在防火墙保护的系统上运行 NFS 服务器有些棘手。NFS 服务器的各个组件的端口号是动态分配的，可能会随时间变化。您可以通过编辑配置文件强制系统为 NFS
    相关服务分配静态端口号。这些文件的位置和语法取决于您的系统发行版和版本。请搜索 `nfs iptables` 以及您的操作系统名称，查找适合您系统的操作说明。
- en: If your system is running on a secure internal network protected by a firewall
    on another machine, you can also consider disabling the firewall on your NFS server.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的系统运行在一个受防火墙保护的安全内部网络中，且防火墙位于另一台机器上，您也可以考虑禁用 NFS 服务器上的防火墙。
- en: How to do it...
  id: totrans-355
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'In this recipe, we will export `/home/shared` and make it available to users
    of a remote system with the IP 192.168.1.60\. We will use the simpler and more
    broadly supported NFS Version 3\. Perform the following steps to set up an NFS
    shared volume:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将导出 `/home/shared` 并使其可供远程系统的用户使用，目标 IP 地址为 `192.168.1.60`。我们将使用更简单且广泛支持的
    NFS 版本 3。按照以下步骤设置 NFS 共享卷：
- en: Navigate to **Networking** | **NFS Exports**.
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**网络** | **NFS 导出**。
- en: Click the **Add a new export** link.
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加新的导出**链接。
- en: Set **NFS Version** to **3**.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**NFS 版本**设置为**3**。
- en: Note
  id: totrans-360
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You may not see the version selection screen when setting up the first NFS export.
    Don't worry about that; Version 3 is the default.
  id: totrans-361
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在设置第一个 NFS 导出时，您可能看不到版本选择屏幕。不要担心，版本 3 是默认设置。
- en: Set **Directory to export** to `/home/shared`.
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**要导出的目录**设置为`/home/shared`。
- en: Set **Export** to **Host(s)** and specify the destination host IP or domain
    name, for example, `192.168.1.60`.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**导出**设置为**主机(s)**，并指定目标主机的 IP 地址或域名，例如 `192.168.1.60`。
- en: Set **Read-only?** to **No**.
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**只读?**设置为**否**。
- en: Set **Trust remote users** to **Everyone except root** as shown in the following
    screenshot:![How to do it...](img/5849OS_06_05.jpg)
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**信任远程用户**设置为**除了 root 之外的所有人**，如下图所示：![如何操作...](img/5849OS_06_05.jpg)
- en: Tip
  id: totrans-366
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: 'The `root` user account is "squashed" by default when traversing NFS. This
    means that `root` from the client system appears as the user `nobody` on the server.
    You can change this behavior using the **Trust remote users: Everyone** option
    (which sets the `no_root_squash` flag on the export). This has serious security
    considerations and should only be done if absolutely necessary as you must trust
    all users with root access to all remote machines allowed to mount this share.'
  id: totrans-367
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click the **Create** button.
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Back on the **NFS Exports** screen, click the **Apply Changes** button.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-370
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'NFS exports are listed in `/etc/exports`. When creating an export, Webmin adds
    a line to this file, which is read by the NFS server. For instance, the export
    we created would be represented by this simple entry:'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-372
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The first field in the line represents the directory that will be exported (`/home/shared`),
    followed by the IP or domain name of the machine, which will be able to access
    the export and options. In this simple case, the only option present is `rw`,
    which designates that the export can be mounted in read-write mode.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-374
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If you want to check which exports are currently being served by your NFS server,
    you can execute the following command:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-376
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Granting access to multiple clients
  id: totrans-377
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If you would like to make the NFS export available to more than one machine,
    you can specify the hosts in terms of a wildcard. For instance, to make the export
    available to all servers in the `intra.mydomain.com` domain, you could set **Host(s)**
    to `*.intra.mydomain.com`.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
- en: If you would rather specify a subnet, you can use the **IPv4 Network** and **Netmask**
    fields instead. For instance, to make your export available to all machines with
    IPs in the 192.168.1.0-192.168.1.255 range, you would set **IPv4 Network** to
    `192.168.1.0` and **Netmask** to `24`.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
- en: See also
  id: totrans-380
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Take a look at the *Mounting a remote NFS volume* recipe in this chapter for
    information about how you can make use of the exported folder on a client machine.
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mounting a remote NFS volume
  id: totrans-382
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If your server has access to a remote volume exported using NFS, Webmin can
    assist you with mounting the volume as part of your filesystem.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-384
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: NFS client support may come installed by default on your system or have been
    installed together with NFS server software. Verify that the package named `nfs-utils`
    or `nfs-common` (depending on your system) is installed, or install it if needed.
    Refer to the *Inspecting installed software packages* and *Installing software
    packages* recipes in [Chapter 1](ch01.html "Chapter 1. Setting Up Your System"),
    *Setting Up Your System*, for more information.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-386
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In this recipe, we''ll mount the `/home/shared` directory exported by a remote
    NFS server with the IP 192.168.1.50 in the local mount point `/mnt/remoteshare`.
    Perform the following steps to mount a remote NFS volume:'
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Networking** | **NFS Exports**.
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Network Filesystem (nfs)** from the **Type** dropdown.
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Add mount** button.
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Mounted as** to `/mnt/remoteshare`.
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **NFS Hostname** to `192.168.1.50`.
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **NFS Directory** to `/home/shared`.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  id: totrans-394
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: At this stage, it's a good idea to click the ellipsis (**…**) button next to
    the **NFS Directory** field. A list of available exported directories should appear.
    If it does not, there may be a problem with the network connection or the NFS
    server is not exporting the directory to our client system properly.
  id: totrans-395
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Set **Wait until network interfaces are up?** to **Yes**.
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Retry mounts in background?** to **Yes**.
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Allow user interrupt?** to **Yes** as shown in the following screenshot:![How
    to do it...](img/5849OS_06_06.jpg)
  id: totrans-398
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Create** button.
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-400
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: During boot, your system mounts filesystems based on a description placed in
    `/etc/fstab`. When creating a permanent mount point, Webmin adds a line to this
    file corresponding to the NFS export.
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
- en: 'This is the entry created by this recipe:'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-403
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The preceding entry contains the following fields:'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
- en: '`192.168.1.50:/home/shared` specifies the address of the remote server and
    the path of the exported directory separated by a colon.'
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/mnt/remoteshare` specifies the local mount point location.'
  id: totrans-406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`nfs` specifies that the entry represents an NFS export.'
  id: totrans-407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`_netdev,intr,bg` field specifies mounting options, which we selected when
    creating the share. For instance, the `_netdev` option tells the system to wait
    for mounting until the network is available.'
  id: totrans-408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The final two fields set to `0` specify that this filesystem should not be considered
    during backup or disk checking.
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-410
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You don''t have to make an entry in `/etc/fstab` to mount an NFS volume temporarily.
    You can do this through Webmin; just set the **Save** option to **Don''t save**.
    This is equivalent to issuing the following command:'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-412
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Mounting NFS v4 exports
  id: totrans-413
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Webmin can also mount shares exported by NFS Version 4\. In this version of
    NFS, the organization of exports is slightly different. Directories are not exported
    one by one, but rather as part of an entire pseudo filesystem. You mount this
    entire filesystem in your mount point, and the exported directories become subdirectories
    of the mount point.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
- en: The differences in creating an NFS v4 mount point using Webmin are twofold.
    You should select **Network Filesystem v4 (nfs4)** from the **Type** dropdown
    and set **NFS Directory** to `/` since the entire exported filesystem will be
    mounted in one location.
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
- en: See also
  id: totrans-416
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Take a look at the *Setting up an NFS-shared volume* recipe in this chapter
    for information about how you can set up NFS exports on your server.
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Giving users access to your server via SFTP
  id: totrans-418
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Users may need to transfer files to and from your server over the Internet.
    You can enable this facility in a simple and secure way using **SSH File Transfer
    Protocol** (**SFTP**). Setting this up does not require installing any software
    other than the SSH server, which you are most likely running anyway, to control
    your server remotely. All users who have access to SSH may also use SFTP client
    programs (such as Filezilla) to access your server.
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, we will set up an account for a user who will be able to transfer
    files to your server but will not have shell access to your system.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-421
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you haven't installed the SSH server on your system yet, follow the *Installing
    software packages* recipe in [Chapter 1](ch01.html "Chapter 1. Setting Up Your
    System"), *Setting Up Your System*, to install the `openssh-server` package.
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
- en: After installation, follow the *Allowing access to a service through the firewall*
    recipe from [Chapter 3](ch03.html "Chapter 3. Securing Your System"), *Securing
    Your System*, to unblock TCP port 22.
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-424
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In order to enable SFTP-only access to a user, we will have to set the user''s
    shell to the `sftp-server` program. Let''s begin by finding the location of this
    program on your system:'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Servers** | **SSH Server** | **Edit Config Files**.
  id: totrans-426
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Make sure that the `sshd_config` (server configuration) file is selected from
    the dropdown and not the `ssh_config` file (default client configuration).
  id: totrans-427
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Find the line beginning with `Subsystem sftp`. On my Debian system, this line
    is as follows:'
  id: totrans-428
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-429
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: This means that the SFTP server binary is located at `/usr/lib/openssh/sftp-server`.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
- en: 'The next step is to add the path to the SFTP server binary to the list of available
    user shells listed in the `/etc/shells` file. You can do this by executing the
    following command as the user `root`:'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-432
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Follow these steps to grant users SFTP access to your server without granting
    them the ability to log in:'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **System** | **Users and Groups**.
  id: totrans-434
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the name of a user you would like to give SFTP access but not allow the
    ability to log in otherwise.
  id: totrans-435
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Change the users' **Shell** to `sftp-server`, which should be present in the
    dropdown list of available shells.
  id: totrans-436
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The user will now be able to access your server over SFTP. The user will not
    have the ability to log into your system's command-line shell.
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-438
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Users with shell set to `sftp-server` have access to your server's entire filesystem,
    in accordance with Unix permissions. You can grant users read and write permissions
    to other directories on your system if you want them to access files there.
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
- en: To create additional SFTP-only users, follow the *Creating a system user account*
    recipe from [Chapter 2](ch02.html "Chapter 2. User Management"), *User Management*,
    but make sure to set their **Shell** to `sftp-server`.
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-441
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: When users connect to your server over SFTP, the first directory listing they
    will see is their home directory. Keep in mind that you can set a user's home
    directory to any place in the filesystem. You could also make life easier for
    your users by creating symbolic links in their home directories to locations on
    the system that they should be able to access most easily.
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-443
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The user's shell program is the first program started by the system for the
    user when they log in. If this shell is `sftp-server`, then the user can only
    interact with this program. This is what is needed for transferring files, but
    it won't allow the user to perform other actions on your system or start other
    programs.
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
- en: The definitions of user accounts are stored in `/etc/passwd`. Webmin edits this
    file when we create accounts or change users' shell program settings.
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
- en: See also
  id: totrans-446
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For information about setting up a dedicated FTP service, take a look at the
    *Giving users access to your server via FTP* recipe in this chapter.
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Giving users access to your server via FTP
  id: totrans-448
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The **File Transfer Protocol** (**FTP**) is one of the most popular data exchange
    protocols on the Internet. FTP servers allow your users to authenticate and upload
    files onto your machine. This type of access does not require granting users other
    privileges on your server and you may restrict access over FTP to a user's home
    directory.
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-450
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Please note that FTP is a very insecure protocol, because the username and password
    are exchanged without encryption unless you enable TLS. If your server is running
    in an untrusted network, consider running SFTP instead.
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-452
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The first step toward allowing your users to access your system via FTP is
    to install an FTP server daemon. We''ll be using the stable and feature-rich ProFTPd
    server, which Webmin supports well. Follow these steps to set up an FTP server:'
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Un-used Modules** | **ProFTPD Server**.
  id: totrans-454
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the link; this instructs Webmin to download and install the package automatically.
  id: totrans-455
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  id: totrans-456
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: At this stage, you may run into a problem if the ProFTPD package is not found
    in your system distribution's package repository. Most distributions include ProFTPD
    packages, but you may need to activate an additional repository.
  id: totrans-457
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'For instance, if you''re running a Linux distribution from the RedHat family
    (RHEL, CentOS, Fedora, and so on), you should add the **Extra Packages for Enterprise
    Linux** (**EPEL**) repository by executing a command as shown in the following:'
  id: totrans-458
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-459
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: On 32-bit (i386) systems, substitute `x86_64` with `i386`.
  id: totrans-460
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: At the time of writing this book, the latest version of EPEL's index is 6.8;
    check what the latest version currently is at the EPEL site and modify the URL
    in the command if needed. More information can be found at [http://fedoraproject.org/wiki/EPEL](http://fedoraproject.org/wiki/EPEL).
  id: totrans-461
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Refresh the page to update Webmin's interface.
  id: totrans-462
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to **System** | **Bootup and Shutdown**, check the box next to `proftpd`,
    and click the **Start Now and On Boot** button.
  id: totrans-463
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If the server doesn''t start, run the following command to check your configuration:'
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-465
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'You may see a warning such as this:'
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-467
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'This means that your server cannot determine its own IP address based on its
    hostname. The easiest way to fix this is to follow these steps:'
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Networking** | **Network Configuration** | **Host Addresses**.
  id: totrans-469
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Add a new host address** link.
  id: totrans-470
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Specify **IP Address** as `127.0.0.1` and **Hostnames** as `server-name`. Just
    substitute `server-name` with your server's hostname.
  id: totrans-471
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Create** button.
  id: totrans-472
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  id: totrans-473
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: 'This adds the following line to your `/etc/hosts` file:'
  id: totrans-474
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-475
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Opening FTP access in your firewall
  id: totrans-476
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If clients connect to your server from behind a firewall, you should use passive
    mode for establishing FTP connections. Follow these steps to tell ProFTPd which
    range of ports it should use for passive connections and then to open those ports
    along with port `21` on your firewall.
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Servers** | **ProFTPD Server** | **Networking Options**.
  id: totrans-478
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **PASV port range** to a range within the IANA-recommended numbering for
    dynamic ports. For instance, between `60000` and `60099`. The size of this range
    determines how many concurrent clients can connect to your server in passive mode.
  id: totrans-479
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Save** button.
  id: totrans-480
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Back on the **ProFTPd Server** module page, click the **Apply Changes** button.
  id: totrans-481
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Follow the *Allowing access to a service through the firewall* recipe from
    [Chapter 3](ch03.html "Chapter 3. Securing Your System"), *Securing Your System*,
    and allow incoming TCP connections on port `21` and ports in the range set above
    `60000`-`60099` as shown in the following screenshot:'
  id: totrans-482
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Opening FTP access in your firewall](img/5849OS_06_07.jpg)'
  id: totrans-483
  prefs: []
  type: TYPE_IMG
- en: At this stage, your FTP server should be up and running. Try to connect to it
    from another computer using an FTP client. Try to log in as any regular user other
    then root.
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-485
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'If you''re using SELinux, you may be unable to log into your FTP server and
    may find strange `Permission denied` error messages in ProFTPd''s log. If this
    is the case, you''ll need to set a SELinux flag, which allows FTP access. You
    can do this by executing one of the following commands:'
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
- en: 'To allow FTP access to user home directories only, use this:'
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-488
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'To allow FTP access to the entire filesystem, use this:'
  id: totrans-489
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-490
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: How it works...
  id: totrans-491
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Webmin is able to download and install the ProFTPd package using your system's
    package management system. The package comes with a startup script through which
    we started the server and set it to launch during system startup.
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
- en: Passive and active FTP connections
  id: totrans-493
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'File Transfer Protocol uses two simultaneous connections to exchange data between
    the server and client. One connection is used to send instructions (command channel)
    and the other to transfer files (data channel). The command channel is always
    opened by the client, which establishes a connection with your server on a port
    dedicated to FTP (usually, number 21). The data channel, however, can be opened
    in two different ways:'
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
- en: '**Active (non-passive)**: The server actively opens the data connection to
    the client. This is not a popular method, because client machines are often hidden
    behind multiple layers of firewalls and NATs, which makes the connection impossible.'
  id: totrans-495
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Passive**: Here, the server sends the client a port number and then passively
    waits for the client to connect to that port. The number of the port is assigned
    dynamically from a range of ephemeral port numbers. The **Internet Assigned Numbers
    Authority** (**IANA**) suggests using numbers between 49152 and 65535 for dynamic
    ports.'
  id: totrans-496
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Global configuration and virtual servers
  id: totrans-497
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The ProFTPd service can run multiple virtual servers with different configurations.
    Each virtual server runs on a different IP, so if your server is connected to
    the network or multiple networks using different interfaces, you can set up a
    different FTP server with a different configuration on each IP. The server-specific
    settings are accessible in Webmin via the **Virtual Servers** section. It will
    contain at least one configuration—**Default Server**. Settings in the **Global
    Configuration** section apply to all servers, but each virtual server may choose
    whether to use the default global value or override it. In most cases, your server
    will only run one virtual server. In such cases, there is no practical difference
    between storing settings in the **Global Configuration** or the **Default Server**
    sections. You should keep this in mind, however, because if you change a setting
    in **Global Configuration** and the change does not seem to have an effect, it
    may be overridden in the **Default Server** configuration.
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-499
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The ProFTPd server is very flexible. Here are some common options you may wish
    to set.
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
- en: Restricting access to users' home directories
  id: totrans-501
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'If you would like users to be able to access only files in their home directories
    using FTP, perform the following steps:'
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Servers** | **ProFTPD Server**.
  id: totrans-503
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Default Server** in the **Virtual Servers** section.
  id: totrans-504
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Files and Directories**.
  id: totrans-505
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the **Limit users to directories** section, select **Home directory**.
  id: totrans-506
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Save** button.
  id: totrans-507
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Denying FTP access to some users
  id: totrans-508
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'If you would like to deny some users access over FTP, perform the following
    steps:'
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Servers** | **ProFTPD Server** | **Denied FTP Users**.
  id: totrans-510
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will see a list of system users who are denied access over FTP. Add the
    usernames of users you would like to prevent from accessing your server over FTP
    to the end of the list (one username per line).
  id: totrans-511
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Save** button.
  id: totrans-512
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: FTP-only users
  id: totrans-513
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'You may allow users to access your server over FTP, but prevent them from being
    able to log into your server otherwise, by performing the following steps:'
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **System** | **Users and Groups**.
  id: totrans-515
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the username of the user you want to restrict from logging in.
  id: totrans-516
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set user's **Shell** to `/usr/sbin/nologin`.
  id: totrans-517
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  id: totrans-518
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: The `nologin` binary may be placed under another path, such as `/sbin/nologin`,
    on your system.
  id: totrans-519
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click the **Save** button.
  id: totrans-520
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: See also
  id: totrans-521
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You may enable file sharing on your server without installing an additional
    FTP server, relying on the SSH server instead. For more information, take a look
    at the *Giving users access to your server via SFTP* recipe in this chapter.
  id: totrans-522
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
