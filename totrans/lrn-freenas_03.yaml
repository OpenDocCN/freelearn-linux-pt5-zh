- en: Chapter 4. Connecting to the FreeNAS
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第4章 连接到 FreeNAS
- en: The strength of the FreeNAS server is that so many different operating systems
    can connect to it and use its services. In this chapter, we shall look at the
    different services and protocols supported by FreeNAS, and see examples of how
    various platforms like Windows, OS X, and Linux can use the FreeNAS server for
    file sharing, backup, and streaming multimedia.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS 服务器的强大之处在于许多不同的操作系统可以连接到它并使用它的服务。在本章中，我们将探讨 FreeNAS 支持的不同服务和协议，并展示如何在
    Windows、OS X 和 Linux 等平台上使用 FreeNAS 服务器进行文件共享、备份和流媒体处理。
- en: Introduction
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: The FreeNAS server is "multi lingual" in that it can talk to many different
    types of computers system using a variety of protocols. Before looking at each
    of these protocols individually, it is worth looking at them as a whole and seeing
    why each protocol exists and for which job is it best suited.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS 服务器是“多语言”的，因为它可以通过多种协议与不同类型的计算机系统通信。在详细了解每个协议之前，值得先整体了解它们，看看每个协议的存在意义以及它最适合处理哪些任务。
- en: The table below lists each protocol along with which type of computer (Windows,
    Apple Mac etc) can connect to the FreeNAS server using that protocol. Some protocols
    are native to a particular platform, for examples CIFS is native protocol for
    Windows machines, but other operating systems like OS X can "talk" CIFS as well.
    Also listed, is the main use of that protocol.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 下表列出了每个协议及其可以连接到 FreeNAS 服务器的计算机类型（Windows、Apple Mac 等）。某些协议是某个平台的原生协议，例如 CIFS
    是 Windows 机器的原生协议，但其他操作系统如 OS X 也能“支持” CIFS。同时，还列出了该协议的主要用途。
- en: '|   | Windows | OS X | Linux/UNIX | Usage |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '|   | Windows | OS X | Linux/UNIX | 用途 |'
- en: '| CIFS | Yes. Native. | Yes. Built in. | Yes. Built in. | File sharing |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '| CIFS | 是的，原生支持。 | 是的，内置支持。 | 是的，内置支持。 | 文件共享 |'
- en: '| NFS | Yes. Requires 3rd party software. | Yes. Native. | Yes. Native. | File
    sharing |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '| NFS | 是的，需要第三方软件。 | 是的，原生支持。 | 是的，原生支持。 | 文件共享 |'
- en: '| FTP | Yes. Built in or you can use 3rd party software. | Yes. Built in and
    you can use 3rd party software. | Yes. Built in and you can use 3rd party software.
    | Uploading and downloading files |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '| FTP | 是的，内置支持，或者你可以使用第三方软件。 | 是的，内置支持，且你可以使用第三方软件。 | 是的，内置支持，且你可以使用第三方软件。
    | 上传和下载文件 |'
- en: '| RSYNCD | Yes. Requires 3rd party software. | Yes. Built in and you can use
    3rd party software. | Yes. Built in. | Backups and synchronization. |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| RSYNCD | 是的，需要第三方软件。 | 是的，内置支持，你也可以使用第三方软件。 | 是的，内置支持。 | 备份与同步 |'
- en: '| Unison | Yes. Requires 3rd party software. | Yes. Requires 3rd party software.
    | Yes. Requires 3rd party software. | Backups and synchronization. |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| Unison | 是的，需要第三方软件。 | 是的，需要第三方软件。 | 是的，需要第三方软件。 | 备份与同步 |'
- en: '| AFP | No. | Native. | No. | File sharing for Apple |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| AFP | 否。 | 原生支持。 | 否。 | Apple 的文件共享 |'
- en: '| UPnP | Yes. Requires 3rd party software. | Yes. Requires 3rd party software.
    | Yes. Requires 3rd party software or a specialized distribution (see below).
    | Streaming media |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| UPnP | 是的，需要第三方软件。 | 是的，需要第三方软件。 | 是的，需要第三方软件或专门的发行版（见下文）。 | 流媒体 |'
- en: '| iSCSI | Yes. Built in to some versions of Windows, e.g. Windows Vista. |
    Yes. Requires 3rd party software. | Yes. Built in. | Connecting to remote raw
    disks with the SCSI over IP protocol. |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| iSCSI | 是的，一些 Windows 版本内置支持，例如 Windows Vista。 | 是的，需要第三方软件。 | 是的，内置支持。 |
    使用 IP 上的 SCSI 协议连接远程原始磁盘 |'
- en: In this chapter, we are going to look in detail at the various protocols. To
    help you in this, it will be best if you have a test FreeNAS server up and running
    and you have followed the quick installation and configuration guide in Chapter
    2.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将详细探讨各种协议。为了帮助你理解，最好有一个正在运行的测试 FreeNAS 服务器，并且你已经按照第2章的快速安装和配置指南进行了操作。
- en: Connecting via CIFS
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过 CIFS 连接
- en: The Common Internet File System (CIFS) is the standard way in which files are
    accessed on a remote Windows computer. Developed and maintained by Microsoft for
    use on their Windows platform, it has also been implemented on most major operating
    systems including OS X and Linux using 3rd party software, the most popular of
    which is called Samba. Samba is open source software that provides remote file
    access services to CIFS clients on a variety of platforms (including to Windows
    clients). Samba is included in the FreeNAS server.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 通用互联网文件系统（CIFS）是访问远程 Windows 计算机文件的标准方式。它由微软开发并维护，用于其 Windows 平台，此外，CIFS 还在包括
    OS X 和 Linux 在内的大多数主要操作系统上通过第三方软件实现，其中最流行的叫做 Samba。Samba 是一个开源软件，它为 CIFS 客户端提供远程文件访问服务，支持多个平台（包括
    Windows 客户端）。Samba 已包含在 FreeNAS 服务器中。
- en: The abilities of CIFS are actually larger than just accessing files. With it,
    other resources like printers can also be shared on the network, but for FreeNAS,
    CIFS is used to share disks on the server and make them available to other computers
    that understand the CIFS protocol. This means that Windows, Linux, and OS X machines
    are all capable of accessing files on the FreeNAS server via the CIFS protocol.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: CIFS 的功能实际上比仅仅访问文件要大。通过它，网络上的其他资源，如打印机，也可以共享。但对于 FreeNAS，CIFS 用于共享服务器上的磁盘，并使其他理解
    CIFS 协议的计算机能够访问它们。这意味着 Windows、Linux 和 OS X 机器都可以通过 CIFS 协议访问 FreeNAS 服务器上的文件。
- en: Note
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Sometimes, when reading about CIFS, you might read the term SMB or Server Message
    Block. SMB was the original name of the CIFS protocol and was the result of work
    done by IBM and then later Microsoft. In 1996, SMB was renamed CIFS.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，在阅读 CIFS 相关内容时，您可能会看到“SMB”或“服务器消息块”（Server Message Block）这个术语。SMB 是 CIFS
    协议的原始名称，它源自 IBM 和后来的微软的工作。1996 年，SMB 被重命名为 CIFS。
- en: Configure CIFS on the FreeNAS Server
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 FreeNAS 服务器上的 CIFS
- en: Before attempting to connect another computer to the FreeNAS server via CIFS,
    you need to be sure that CIFS is correctly configured on the FreeNAS server.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在尝试通过 CIFS 将另一台计算机连接到 FreeNAS 服务器之前，您需要确保在 FreeNAS 服务器上正确配置了 CIFS。
- en: '1\. Go to Services: **CIFS/SMB**. This page contains two tabs, first, the **settings**
    page and then the **shares** page. First of all, make sure that the service is
    enabled by ticking the "Enable" box in the title bar of the configuration table.'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1\. 转到服务：**CIFS/SMB**。此页面包含两个标签，首先是 **设置** 页面，然后是 **共享** 页面。首先，确保通过勾选配置表标题栏中的“启用”框来启用该服务。
- en: 2\. To get CIFS working with the default settings, you need to set as a minimum
    the Authentication system, the NetBios Name, and the Workgroup. Authentication
    should be left at Anonymous for the moment. We will look more at authentication
    and user management in FreeNAS in the next chapter. The NetBios Name is the name
    that the FreeNAS server will have on the Windows network. When you want to access
    the server, Windows lets you use a friendly name rather than the IP. For this
    example, we will use the name FreeNAS. Finally, you need to enter the workgroup.
    All Windows machines belong either to a workgroup or a domain.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2\. 要使 CIFS 在默认设置下工作，您需要至少设置认证系统、NetBios 名称和工作组。认证暂时应保持为匿名。我们将在下一章中深入讨论 FreeNAS
    中的认证和用户管理。NetBios 名称是 FreeNAS 服务器在 Windows 网络中使用的名称。当您想要访问服务器时，Windows 允许您使用一个友好的名称，而不是
    IP 地址。在本示例中，我们将使用名称 FreeNAS。最后，您需要输入工作组。所有 Windows 计算机都属于一个工作组或一个域。
- en: Note
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Workgroups and Domains**'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**工作组和域**'
- en: Home networks and small office LANs use workgroups, which are essentially collections
    of computers that share a similar tag or designation. On a home network, there
    is normally only 1 workgroup called "WORKGROUP" (or MSHOME if you mainly have
    Windows XP machines. For the small office environment, there might be 2 or 3 workgroups,
    maybe "SALES", "ENGINEERING", and "ACCOUNTS". The workgroup links the machines
    together so that when the network is viewed, these machines will be grouped together.
    There are typically no more than ten to twenty computers in a workgroup and all
    the computers must be on the same local network.
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 家庭网络和小型办公室局域网使用工作组，工作组本质上是共享相似标签或名称的计算机集合。在家庭网络中，通常只有一个名为“WORKGROUP”（如果主要使用
    Windows XP 计算机，则可能是 MSHOME）的工作组。对于小型办公室环境，可能有 2 或 3 个工作组，分别是“SALES”（销售）、“ENGINEERING”（工程）和“ACCOUNTS”（财务）。工作组将计算机连接在一起，这样当查看网络时，这些计算机会被分组在一起。工作组中的计算机通常不超过十到二十台，且所有计算机必须在同一局域网内。
- en: Larger business networks use domains rather than workgroups. In a domain, there
    is a server (called the domain controller) that controls the resources and security
    in that domain. Once a user has a domain account, they can log on to any computer
    in the domain without needing a local account on any particular machine. Domains
    can have thousands of computers spread across several networks.
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 较大的企业网络使用域而非工作组。在域中，存在一台服务器（称为域控制器），它负责控制该域中的资源和安全性。一旦用户拥有域帐户，他们就可以登录域内的任何计算机，而不需要在任何特定机器上拥有本地帐户。域可以包含数千台计算机，分布在多个网络中。
- en: 3\. Enter in the workgroup name for the FreeNAS server. It will probably be
    WORKGROUP or maybe XPHOME if you have many Windows XP machines on your network.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3\. 输入 FreeNAS 服务器的工作组名称。如果你网络中有许多 Windows XP 机器，它可能是 WORKGROUP，或者是 XPHOME。
- en: '4\. The next step is to configure what disks are shared on the network. Click
    on **Save and Restart** at the bottom of the page and then click the **Shares**
    tab at the top. Here is where you add disks to be shared on the network via the
    CIFS protocol. You can only share previously configured disks. If you have disks
    that need to be added to the FreeNAS, go to the Disk: menu. For more information,
    see the quick start guide in Chapter 2 or for advanced information, go to Chapter
    6.'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4\. 下一步是配置共享在网络上的磁盘。点击页面底部的 **保存并重启**，然后点击顶部的 **共享** 标签。在这里，你可以添加通过 CIFS 协议共享的磁盘。你只能共享已配置的磁盘。如果有需要添加到
    FreeNAS 的磁盘，请前往磁盘菜单。有关更多信息，请参阅第二章的快速入门指南，或查看第六章获取高级信息。
- en: '5\. Click the add circle. You are now in **Services: CIFS/SMB: Share: Add**.
    The minimum data here is the **Name** you want to give the share, a Comment or
    description about the share and where the share is, the Path.'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5\. 点击添加圆圈。现在你进入了 **服务：CIFS/SMB：共享：添加** 页面。这里的最少数据是你要为共享指定的 **名称**，关于共享的注释或描述，以及共享的位置——路径。
- en: 6\. Name and comment should be easy enough to fill in. For this example, we
    will use store and a storage place respectively. Now, for the path. In FreeNAS,
    all disks are mounted under **/mnt**. This means that the path will be something
    like **/mnt/diskname**. To find the right path name, click on **...** This will
    bring up a new window.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 6\. 名称和注释应该很容易填写。对于这个示例，我们将分别使用 store 和 storage place 作为名称。现在是路径部分。在 FreeNAS
    中，所有磁盘都挂载在 **/mnt** 目录下。这意味着路径将类似于 **/mnt/diskname**。要找到正确的路径名称，请点击 **...**，这将弹出一个新窗口。
- en: '![Configure CIFS on the FreeNAS Server](img/4688_04_01.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![配置 FreeNAS 服务器上的 CIFS](img/4688_04_01.jpg)'
- en: 'At the top, you will see **/mnt** and then further down **store**. This is
    the name of the disk that was configured in **Disks: Mount Point: Add**. Click
    on store and the path will change to **/mnt/path**.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在顶部，你会看到 **/mnt**，然后更下方是 **store**。这就是在 **磁盘：挂载点：添加** 中配置的磁盘名称。点击 store，路径将更改为
    **/mnt/path**。
- en: '![Configure CIFS on the FreeNAS Server](img/4688_04_02.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![配置 FreeNAS 服务器上的 CIFS](img/4688_04_02.jpg)'
- en: 7\. Click on **OK**, then on **Add**, and finally, apply the changes.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 7\. 点击 **确定**，然后点击 **添加**，最后应用更改。
- en: At this point, CIFS is configured and ready to go. Before looking at how the
    different versions of Windows, as well as OS X and Linux, can connect to FreeNAS
    using CIFS, let us look in details at the other parameters.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，CIFS 已配置完成并准备就绪。在了解不同版本的 Windows 以及 OS X 和 Linux 如何使用 CIFS 连接到 FreeNAS 之前，让我们详细了解一下其他参数。
- en: CIFS Settings Explained
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CIFS 设置说明
- en: '| Parameter | Meaning |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| --- | --- |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Description | Server description. This can be left blank but you may find
    including a description useful. |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| 描述 | 服务器描述。这个字段可以留空，但你可能会发现添加描述会很有用。 |'
- en: '| Dos charset | This is the charset FreeNAS uses when communicating with Windows
    9x/Me clients. It will talk Unicode to all newer clients. The default is CP850,
    which is perfect for English and other Western European Languages. |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| Dos 字符集 | 这是 FreeNAS 与 Windows 9x/Me 客户端通信时使用的字符集。它将与所有较新的客户端进行 Unicode 通信。默认是
    CP850，这对于英语和其他西欧语言非常合适。 |'
- en: '| Unix charset | This is the charset used internally by FreeNAS. The default
    is UTF-8, which is fine for most systems and covers all characters in all languages.
    |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| Unix 字符集 | 这是 FreeNAS 内部使用的字符集。默认是 UTF-8，适用于大多数系统，并涵盖所有语言的所有字符。 |'
- en: '| Log Level | Sets the amount of log/debug messages that are sent to the log
    file. These can be read in Diagnostics: Logs: System. You should leave this on
    Minimum unless you are trying to solve a CIFS connection problem. |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| 日志级别 | 设置发送到日志文件的日志/调试消息的数量。可以在“诊断：日志：系统”中查看这些信息。除非你正在尝试解决 CIFS 连接问题，否则应将其保持为最低。
    |'
- en: '| Local Master Browser | Allows FreeNAS to try and become a local master browser.Inside
    the My Network Places (or the equivalent in Vista), icons represent machines.
    The local master browser collates information to create this browse list.You can
    safely leave this at Yes, unless you are running the FreeNAS inside a domain,
    when it is best to set it to No. |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| 本地主浏览器 | 允许 FreeNAS 尝试成为本地主浏览器。在“我的网络邻居”（或 Vista 中的等效位置）中，图标表示计算机。本地主浏览器收集信息以创建浏览列表。除非你在域中运行
    FreeNAS，否则可以将此项安全地设置为“是”。'
- en: '| Time server | If your FreeNAS server has an accurate clock, you can instruct
    it to advertise itself as an SMB time server to Windows clients. |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| 时间服务器 | 如果你的 FreeNAS 服务器有准确的时钟，你可以指示它将自己作为 SMB 时间服务器向 Windows 客户端广播。 |'
- en: '| WINS server | WINS (Windows Internetworking Name Server) allows the FreeNAS
    server to discover the friendly CIFS name of machines on other networks. You can
    set up FreeNAS to use a WINS server somewhere else on the network by simply pointing
    it to the IP address of the WINS server.If you are using FreeNAS just for machines
    on the local LAN, then you can leave this empty. |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| WINS 服务器 | WINS（Windows 网络名称服务器）允许 FreeNAS 服务器发现其他网络上计算机的友好 CIFS 名称。你可以通过将其指向
    WINS 服务器的 IP 地址来设置 FreeNAS 使用网络上的其他 WINS 服务器。如果你仅在本地局域网中使用 FreeNAS，那么可以将此项留空。
    |'
- en: CIFS Advanced Settings
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CIFS 高级设置
- en: These are advanced parameters and you should only change them if you know what
    you are doing and why you would want to change them. For 99.9% of all cases, these
    parameters can be left alone.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是高级参数，只有在你知道自己在做什么并且了解为什么要更改它们时，才应进行更改。在 99.9% 的情况下，这些参数可以保持不变。
- en: '| Parameter | Meaning |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| Create mask | Every data file created on the FreeNAS has some default read
    and write permissions. Use this option to override the file creation permissions.
    (0666 by default).See the tip below for more information. |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| 创建掩码 | 每个在 FreeNAS 上创建的数据文件都有一些默认的读写权限。使用此选项覆盖文件创建权限。（默认 0666）。有关更多信息，请参阅下面的提示。
    |'
- en: '| Directory mask | All directories that are created on the FreeNAS server have
    default read and write permissions. Use this option to override the directory
    creation permissions (0777 by default).See the tip below for more information.
    |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| 目录掩码 | 在 FreeNAS 服务器上创建的所有目录都有默认的读写权限。使用此选项覆盖目录创建权限（默认 0777）。有关更多信息，请参阅下面的提示。
    |'
- en: '| Send Buffer Size | Size of send buffer (16384 by default). For Windows 95/98,
    you have to use a 8192 buffer size. |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| 发送缓冲区大小 | 发送缓冲区的大小（默认 16384）。对于 Windows 95/98，你需要使用 8192 缓冲区大小。 |'
- en: '| Receive Buffer Size | Size of receive buffer (16384 by default). For Windows
    95/98, you have to use a 8192 buffer size. |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| 接收缓冲区大小 | 接收缓冲区的大小（默认 16384）。对于 Windows 95/98，你需要使用 8192 缓冲区大小。 |'
- en: '| Large read/write | Use the new 64k streaming read and write variant SMB requests
    introduced with Windows 2000. |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| 大文件读写 | 使用 Windows 2000 引入的新 64k 流媒体读写变种 SMB 请求。 |'
- en: '| EA support | Extended attribute support. Allow clients to attempt to store
    OS/2 style extended attributes on a share. |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| 扩展属性支持 | 扩展属性支持。允许客户端尝试在共享上存储 OS/2 风格的扩展属性。 |'
- en: Note
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Create Mask**'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**创建掩码**'
- en: In FreeBSD (and most UNIX operating systems), each file or directory has 3 levels
    of read/write permissions. User, Group, and World. The permission to read, write
    or execute a file can be set at each level.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FreeBSD（以及大多数 UNIX 操作系统）中，每个文件或目录有三个级别的读/写权限：用户、组和世界。可以在每个级别设置读取、写入或执行文件的权限。
- en: When FreeNAS creates files that have been copied over the network, a default
    set of file permissions is set for that file. This is determined by the default
    create and directory masks (see above).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 当 FreeNAS 创建通过网络复制的文件时，会为该文件设置一组默认的文件权限。这是由默认的创建和目录掩码决定的（见上文）。
- en: 'Using a numbering scheme, the create or directory mask has four number places
    starting always with 0, for example 0744, representing the three levels. The first
    number on the left side is for "user", the middle one is for "group", and the
    right-hand one for "world." Here is what each number means:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 使用数字方案，创建或目录掩码有四个数字位置，始终从 0 开始，例如 0744，表示三个级别。左侧的第一个数字表示“用户”，中间的数字表示“组”，右侧的数字表示“世界”。以下是每个数字的含义：
- en: 0 = no access, 1 = execute only, 2 = write only, 3 = write and execute, 4 =
    read only, 5 = read and execute, 6 = read and write, 7 = read, write and execute
    (full access).
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 0 = 无访问权限，1 = 仅执行，2 = 仅写入，3 = 写入和执行，4 = 仅读取，5 = 读取和执行，6 = 读取和写入，7 = 读取、写入和执行（完全访问）。
- en: Options when Adding Shares
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加共享时的选项
- en: 'Like the general CIF settings, there are several different options available
    when you add a share on the **Services: CIFS/SMB: Share: Add page**. Here is a
    brief look at those options and what they do.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 与一般的 CIF 设置类似，当你在 **服务：CIFS/SMB：共享：添加页面** 中添加共享时，有几种不同的选项可供选择。这里简要介绍这些选项及其作用。
- en: '| Parameter | Meaning |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| --- | --- |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Browseable | This controls whether this share is seen in the list of available
    shares in a net view and in the browse list. If it is not browseable, the share
    is still accessible but only when the address is specified directly. |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| 可浏览 | 该设置控制是否在网络视图和浏览列表中显示此共享。如果不可浏览，该共享仍然可访问，但只能在直接指定地址时访问。 |'
- en: '| Inherit permissions | The permissions on new files and directories are normally
    governed by create mask and directory mask, but the inherit permissions parameter
    overrides this. This can be particularly useful on systems with many users to
    allow a single share to be used flexibly by each user. |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| 继承权限 | 新文件和目录的权限通常由创建掩码和目录掩码控制，但继承权限参数会覆盖这些设置。这在有很多用户的系统中特别有用，可以让每个用户灵活使用同一个共享。
    |'
- en: '| Recycle bin | This will create a recycle bin on the share. If you create
    the recycle bin, you have to empty it manually. |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| 回收站 | 这将在共享上创建一个回收站。如果你创建了回收站，你必须手动清空它。 |'
- en: '| Hosts allow | This parameter is a comma, space, or tab delimited set of hosts
    that are permitted to access this share. Use the keyword ALL to permit access
    for everyone. Leave this field empty to disable this setting. |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| 允许主机 | 该参数是一个由逗号、空格或制表符分隔的主机集，允许访问此共享。使用关键词 ALL 允许所有人访问。如果不填写此字段，则会禁用此设置。
    |'
- en: '| Hosts deny | This parameter is a comma, space, or tab delimited set of host
    that are NOT permitted to access this share. Where the lists conflict, the allow
    list takes precedence. In the event that it is necessary to deny all by default,
    use the keyword ALL (or the netmask 0.0.0.0/0) and then explicitly specify to
    the host''s allow parameter those hosts that should be permitted access. Leave
    this field empty to disable this setting. |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '| 拒绝主机 | 该参数是一个由逗号、空格或制表符分隔的主机集，不允许访问此共享。在列表冲突时，允许列表优先。如果需要默认拒绝所有主机，请使用关键词
    ALL（或子网掩码 0.0.0.0/0），然后明确指定允许访问的主机。若不填写此字段，则会禁用此设置。 |'
- en: What does It Mean to Map a Network Drive?
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 映射网络驱动器是什么意思？
- en: When accessing files over the network, there are two ways to find the data.
    One is to browse to it using the *My Network Places* (or similar depending on
    your version of Windows). Here, you can find a machine and then drill down until
    you find the folder you want. The other option is to mount the remote shared folder
    as a drive on your machine. This *network drive* always takes you to the right
    place where the data is on the remote server. You can also configure it to be
    mounted every time you start windows. This is particularly useful for something
    like the FreeNAS server as the storage space made available is always available
    on your PC.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 当通过网络访问文件时，有两种方式可以找到数据。一种是通过 *我的网络邻居*（或根据你 Windows 版本不同而名称略有不同）浏览到它。在这里，你可以找到一台计算机，然后逐层深入，直到找到你想要的文件夹。另一种方法是将远程共享文件夹挂载为你计算机上的一个驱动器。这个
    *网络驱动器* 会始终带你到远程服务器上正确的位置，你的数据所在。你还可以配置它在每次启动 Windows 时自动挂载。这对于像 FreeNAS 服务器这样的情况尤其有用，因为它提供的存储空间始终可以在你的
    PC 上访问。
- en: Connecting with CIFS via Windows Millennium
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过 Windows Millennium 连接 CIFS
- en: Double click on **My Network Places**. Here, you can browse the local network
    and see recently accessed network resources.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 双击 **我的网络邻居**。在这里，你可以浏览本地网络并查看最近访问的网络资源。
- en: 1\. Double clicking on **Entire Network** will take you to a list of the workgroups
    and domains on your local network. On a small network, this may well just be one
    workgroup, mostly likely **WORKGROUP** or **MSHOME**.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1\. 双击 **整个网络** 将带你进入本地网络上的工作组和域列表。在一个小网络中，这可能只有一个工作组，最可能的是 **WORKGROUP** 或
    **MSHOME**。
- en: '![Connecting with CIFS via Windows Millennium](img/4688_04_03.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![通过 Windows Millennium 连接 CIFS](img/4688_04_03.jpg)'
- en: 2\. Double click on **Workgroup** and you will see a list of machines in that
    workgroup.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2\. 双击 **工作组**，你将看到该工作组中的计算机列表。
- en: 3\. Find the FreeNAS server, it is probably called **Freenas**. Now double click
    on it and you will see a list of available shares on the FreeNAS server.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3\. 查找 FreeNAS 服务器，它可能叫做 **Freenas**。现在双击它，你将看到 FreeNAS 服务器上可用的共享列表。
- en: 4\. If you are using a test FreeNAS server setup according to the quick installation
    guide in chapter 2 then you will only see one share called *store*. If you double
    click on *store*, you will have access to that storage space on the FreeNAS server.
    You can try copying some files to *store* and see the FreeNAS server in action.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4\. 如果你使用的是根据第2章快速安装指南设置的测试FreeNAS服务器，那么你只会看到一个名为*store*的共享。如果双击*store*，你将能够访问FreeNAS服务器上的该存储空间。你可以尝试将一些文件复制到*store*中，看看FreeNAS服务器如何运作。
- en: Note
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To save time finding the FreeNAS server, you can just enter its address directly
    in the Address bar in My Network Places. The address is in the form **\\server\share**
    so in our example we would use **\\freenas\store**.
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了节省寻找FreeNAS服务器的时间，你可以直接在“我的网络位置”的地址栏中输入其地址。地址的格式为**\\server\share**，所以在我们的示例中，我们将使用**\\freenas\store**。
- en: Now just hit *Enter* and you will have access to the FreeNAS server.
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在只需按下*Enter*，你就可以访问FreeNAS服务器了。
- en: 5\. There are a couple of ways to map a network drive in Windows Millennium.
    One is that when you have the FreeNAS machine open in My Network Places. Rather
    than double clicking on store, you can right-hand click on it instead. This will
    produce a small menu. Now click on **Map Network Drive...**
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5\. 在Windows Millennium中有几种方法可以映射网络驱动器。一种方法是在“我的网络位置”中打开FreeNAS机器。与其双击*store*，不如右键单击它。这将弹出一个小菜单。现在点击**映射网络驱动器...**
- en: '![Connecting with CIFS via Windows Millennium](img/4688_04_04.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![通过Windows Millennium连接CIFS](img/4688_04_04.jpg)'
- en: Now, choose the drive letter you wish to map to this network share and tick
    **Reconnect at logon** if you want the drive to be automatically mounted when
    you start Windows.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，选择你希望映射到该网络共享的驱动器字母，如果希望每次启动Windows时自动挂载该驱动器，请勾选**开机时重新连接**。
- en: Once you have done this, the network drive will appear in *My Computer* and
    you can use it much like you would any other hard drive on your machine.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此操作后，网络驱动器将出现在*我的电脑*中，你可以像使用其他硬盘一样使用它。
- en: Using CIFS with Windows XP
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Windows XP的CIFS
- en: Assuming your FreeNAS and your Windows XP machine are in the same workgroup,
    when you open *My Network Places*, the *store* share on the *Freenas* server should
    appear automatically. If it doesn't, wait a few moments (as sometimes it takes
    Windows a few minutes to collate the list of all available resources in the workgroup)
    and press *F5* to refresh the display.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你的FreeNAS和Windows XP计算机在同一个工作组内，当你打开*我的网络位置*时，*store*共享应该会自动显示。如果没有显示，请稍等片刻（因为有时Windows需要几分钟来整理工作组中所有可用资源的列表），然后按*F5*刷新显示。
- en: Another way to get to the FreeNAS server is to click on **View workgroup computers**
    in the **Network Task** panel which is on the left side of the window. This will
    show you all the computers in your workgroup that should include the FreeNAS server.
    From here, you can drill down and find the network share *store*.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种访问FreeNAS服务器的方法是点击窗口左侧的**查看工作组计算机**，这是**网络任务**面板中的选项。这样你可以看到工作组中所有的计算机，应该包括FreeNAS服务器。在这里，你可以进一步查找并找到网络共享*store*。
- en: Like Windows Millennium and Windows Vista, you can enter the address of the
    FreeNAS server directly in the address bar of the *My Network Places* window.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 像Windows Millennium和Windows Vista一样，你可以直接在*我的网络位置*窗口的地址栏中输入FreeNAS服务器的地址。
- en: To map a drive from *My Network Places* to the FreeNAS server, find the *Freenas*
    machine either through the workgroup or by entering its name in the address bar.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 要将驱动器从*我的网络位置*映射到FreeNAS服务器，首先通过工作组找到*Freenas*计算机，或者在地址栏中输入它的名称。
- en: 1\. Right-click the shared folder that you want to map, and then click **Map
    Network Drive**.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1\. 右键点击你想映射的共享文件夹，然后点击**映射网络驱动器**。
- en: 2\. Click the drive letter that you want to use, and then specify whether you
    want to reconnect every time that you log on to your computer.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2\. 点击你想使用的驱动器字母，然后指定是否希望每次登录计算机时自动重新连接。
- en: Note
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Network drives are mapped by using letters starting from the letter Z. This
    is the default drive letter for the first mapped drive you create. However, you
    can select another letter if you want to use a letter other than Z.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 网络驱动器通过从字母Z开始的字母映射。这是你创建的第一个映射驱动器的默认驱动器字母。不过，如果你想使用Z以外的字母，可以选择其他字母。
- en: 3\. Click **Finish**.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3\. 点击**完成**。
- en: 4\. A window opens that displays the contents of the store share that you have
    mapped and the drive letter (for example Z) will be available in **My Computer**.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4\. 会打开一个窗口，显示你已映射的*store*共享内容，且驱动器字母（例如Z）将在**我的电脑**中显示。
- en: '![Using CIFS with Windows XP](img/4688_04_05.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![使用 CIFS 与 Windows XP 配合](img/4688_04_05.jpg)'
- en: FreeNAS, CIFS, and Windows Vista
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FreeNAS、CIFS 和 Windows Vista
- en: Accessing the FreeNAS server via CIFS in Windows Vista is very similar to the
    previous versions of Windows and was also covered in chapter 2\. In summary, open
    the Network and Sharing Center by clicking **Network** on the Start menu. When
    the window appears, Vista will automatically scan the network for any shared network
    resources. When it has finished, you will see the available machines on the network
    including FREENAS.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows Vista 中通过 CIFS 访问 FreeNAS 服务器与以前版本的 Windows 非常相似，之前在第 2 章也有介绍。总的来说，点击**网络**按钮打开“网络和共享中心”。当窗口出现时，Vista
    会自动扫描网络中的共享资源。扫描完成后，您将看到网络中可用的计算机，包括 FREENAS。
- en: Also, to access the FreeNAS server without using the Network and Sharing Center,
    click **Start**, and type **\\freenas** and then press *Enter*. This will bring
    up the shares available on the FreeNAS server directly.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，要在不使用“网络和共享中心”的情况下访问 FreeNAS 服务器，点击 **开始**，输入 **\\freenas**，然后按 *Enter* 键。这将直接显示
    FreeNAS 服务器上的共享资源。
- en: To map a network drive, click **Start**, and type **\\freenas**, and then press
    *Enter*. Right-hand click the shares you wish to map (e.g. store) and click on
    the **Map Network Drive..**. item that appears in the menu. Like XP, network drives
    are mapped by using letters starting from the letter Z. This is the default drive
    letter for the first mapped drive you create. However, you can select another
    letter if you want to use a letter other than Z. Click **Finish** and the drive
    will be mapped.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 要映射网络驱动器，点击 **开始**，输入 **\\freenas**，然后按 *Enter* 键。右键点击您想映射的共享（例如 store），并点击菜单中出现的
    **映射网络驱动器..** 项。与 XP 类似，网络驱动器通过字母进行映射，从字母 Z 开始。这是您创建的第一个映射驱动器的默认驱动器字母。不过，如果您希望使用
    Z 以外的字母，可以选择其他字母。点击 **完成**，驱动器将被映射。
- en: Accessing the FreeNAS via CIFS from Linux
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从 Linux 访问 FreeNAS 的 CIFS
- en: All the popular Linux distributions support the CIFS protocol using a piece
    of software called Samba. Samba is an open source suite that allows users of non-Windows
    operating systems, like Linux, to interoperate with Windows machines and servers.
    The goal behind the Samba project is one of removing barriers to interoperability.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 所有流行的 Linux 发行版都通过一个名为 Samba 的软件支持 CIFS 协议。Samba 是一个开源套件，允许非 Windows 操作系统（如
    Linux）的用户与 Windows 计算机和服务器进行互操作。Samba 项目的目标是消除互操作性障碍。
- en: Using the client aspects of Samba (as Samba is also a server) in Linux is easy.
    For example in Kubuntu, to get a listing similar to My Network Places in Windows,
    open Konqueror and enter **smb:/** in the address bar. This will then show you
    the workgroups available. From here, you can drill down to the FreeNAS server
    and the store share. This should work for all KDE-based distributions like Mandriva
    and SuSE. Alternatively, you use the **Remote Places** icon that you will find
    on the System Menu (which isn't to be confused with the K Menu). Here, you can
    click on **Samba Shares**, which will take you to the smb:/ listing.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Linux 中使用 Samba 客户端（因为 Samba 也可以作为服务器使用）非常简单。例如，在 Kubuntu 中，要获取类似 Windows
    中的“我的网络位置”的列表，打开 Konqueror 并在地址栏输入 **smb:/**。这时将显示可用的工作组。从这里，您可以深入到 FreeNAS 服务器及其共享目录。这对所有基于
    KDE 的发行版（如 Mandriva 和 SuSE）都适用。或者，您可以使用系统菜单上的 **远程位置** 图标（这与 K 菜单不同）。在这里，您可以点击
    **Samba 共享**，这将带您进入 smb:/ 列表。
- en: '![Accessing the FreeNAS via CIFS from Linux](img/4688_04_06.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![通过 CIFS 从 Linux 访问 FreeNAS](img/4688_04_06.jpg)'
- en: A CIFS Connection from OS X
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从 OS X 连接 CIFS
- en: Apple's OS X operating system has full Windows connectivity. With the release
    of OS X 10.5 Leopard, it's easy of use has also been improved. Leopard will automatically
    detect the available CIFS shared resources available on the local area network.
    They appear in the Finder window on the left-hand-side under SHARED. Click on
    the resource you want to use (in case of FreeNAS, it will say "freenas SMB Service")
    and from there, you just access them as you would any other folder.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 苹果的 OS X 操作系统完全支持 Windows 连接。随着 OS X 10.5 Leopard 的发布，其易用性也得到了改进。Leopard 会自动检测局域网中可用的
    CIFS 共享资源。它们会出现在 Finder 窗口左侧的 **共享** 部分。点击您想使用的资源（在 FreeNAS 的情况下，会显示“freenas SMB
    服务”），然后您就可以像访问其他文件夹一样访问它们。
- en: '![A CIFS Connection from OS X](img/4688_04_07.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![从 OS X 连接 CIFS](img/4688_04_07.jpg)'
- en: FTP
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FTP
- en: While CIFS and NFS are file system protocols, which means that whole file systems
    can be shared on the network and other computers can uses those file systems as
    if they were attached locally, FTP is more limited in that it is designed just
    to for the transfer of files from one computer to another. In CIFS and NFS, when
    you read or write to files, they remain on the remote server, whereas with FTP,
    files are transferred from the server to the local machine or vice-versa. Any
    changes you make to the files once downloaded to your computer, will not be reflected
    in the files on the server.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然CIFS和NFS是文件系统协议，这意味着可以在网络上共享整个文件系统，并且其他计算机可以像本地附加一样使用这些文件系统，但FTP在设计上更为有限，仅用于从一台计算机向另一台计算机传输文件。在CIFS和NFS中，当您读取或写入文件时，它们仍然位于远程服务器上，而使用FTP时，文件会从服务器传输到本地计算机或反之。一旦您下载到计算机上的文件并对其进行更改，这些更改将不会反映在服务器上的文件中。
- en: 'The main use of the FTP protocol is for downloading files from the server onto
    the local computer. Files can be uploaded once to the server (also by FTP) and
    then downloaded many times by those who need the files. This can be useful in
    one of two ways:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: FTP协议的主要用途是从服务器下载文件到本地计算机。文件可以通过FTP上传到服务器（也可以通过FTP），然后那些需要文件的人可以多次下载文件。这在以下两种情况下很有用：
- en: For the small office or home environment, it is perfect as a repository for
    downloaded software and drivers. As all web browsers have support for FTP, it
    means that files can be downloaded on to the local machine with just a standard
    web browser, or more complex FTP clients can be used.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于小型办公室或家庭环境，它非常适合作为下载软件和驱动程序的存储库。由于所有的Web浏览器都支持FTP，这意味着只需使用标准的Web浏览器就可以将文件下载到本地计算机，或者可以使用更复杂的FTP客户端。
- en: In the business environment, if there is a company Intranet, then links from
    the various internal websites can link to files on the FreeNAS server via FTP.
    This is particularly useful if there are large files to be downloaded that don't
    need to reside on the web server.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在企业环境中，如果有公司内部网络（Intranet），那么各个内部网站的链接可以通过FTP链接到FreeNAS服务器上的文件。如果需要下载不必存放在Web服务器上的大文件，这一点尤为有用。
- en: FTP also supports the uploading of files to the server. Here, those responsible
    for the Intranet or file repository upload the files to the FreeNAS server and
    then those needing the files can download them as described above.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: FTP还支持将文件上传到服务器。在这里，负责Intranet或文件存储库的人员将文件上传到FreeNAS服务器，需要这些文件的人员可以像上述描述的那样下载它们。
- en: 'To configure the FTP service, go to **Services: FTP** and tick the **Enable**
    box. Click **Save and Restart** and FTP is configured. The rest of the settings
    can be left as they are. But should you consider changing any of them, below is
    a table of what each parameter means.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '要配置FTP服务，请转到**服务: FTP**并勾选**启用**框。点击**保存并重新启动**，FTP即配置完成。其余设置可以保持不变。但如果考虑更改任何设置，下面是每个参数的表格说明。'
- en: '| Parameter | Meaning |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| --- | --- |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| TCP port | If, for networking reasons, you need to change the port for FTP,
    you can change it here. The default is port 21. |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| TCP端口 | 如果出于网络原因需要更改FTP端口，则可以在这里更改。默认端口是21。'
- en: '| Number of clients | Maximum number of simultaneous clients. |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| 客户端数 | 最大同时客户端数。'
- en: '| Max. conn. per IP | Maximum number of connections per IP address (0 = unlimited).
    |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| 最大连接数每IP | 每个IP地址的最大连接数（0 = 无限制）。'
- en: '| Timeout | Maximum idle time in minutes. |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| 超时 | 最大空闲时间（以分钟为单位）。'
- en: '| Permit root login | Specifies whether connecting user is allowed to log in
    as superuser (root) directly. Use this option with care as enabling it can be
    a security risk. |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| 允许root登录 | 指定是否允许连接用户直接以超级用户（root）身份登录。请谨慎使用此选项，因为启用它可能存在安全风险。'
- en: '| Anonymous login | Enable anonymous login. |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| 匿名登录 | 启用匿名登录。'
- en: '| Local User | Enable local user login. |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| 本地用户 | 启用本地用户登录。'
- en: '| Banner | Greeting banner displayed by FTP when a connection first comes in.
    |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| 横幅 | FTP在第一次连接时显示的问候横幅。'
- en: 'There are also several advanced FTP options. The table below describes them:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 还有几个高级FTP选项。下表描述了它们：
- en: '| Parameter | Meaning |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| --- | --- |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Create mask | Use this option to set a new default file creation mask (077
    is the initial default). |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '| 创建掩码 | 使用此选项设置新的默认文件创建掩码（初始默认为077）。'
- en: '| Directory mask | Use this option to set a new default directory creation
    mask (022 is the initial default). |'
  id: totrans-131
  prefs: []
  type: TYPE_TB
  zh: '| 目录掩码 | 使用此选项设置新的默认目录创建掩码（初始默认为022）。'
- en: '| FXP | Enable FXP protocol. FXP allows transfers between two remote servers
    without any file data going to the client asking for the transfer (insecure!).
    |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '| FXP | 启用FXP协议。FXP允许在两台远程服务器之间进行传输，而不需要任何文件数据传输到请求传输的客户端（不安全！）。 |'
- en: '| NAT mode | Force NAT mode. Enable this if your FTP server is behind a NAT
    box that doesn''t support applicative FTP proxying. |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| NAT模式 | 强制使用NAT模式。如果你的FTP服务器位于不支持应用层FTP代理的NAT设备后面，请启用此选项。 |'
- en: '| Keep all files | Allow users to resume and upload files, but NOT to delete
    or rename them. Directories can be removed, but only if they are empty. However,
    overwriting existing files is still allowed. |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| 保留所有文件 | 允许用户恢复和上传文件，但不能删除或重命名它们。目录可以被删除，但只能在为空时删除。然而，仍然允许覆盖现有文件。 |'
- en: '| chroot everyone | chroot() everyone, but root. |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| chroot所有人 | 除root外，对所有人使用chroot()。 |'
- en: '| Passive IP address | Force the specified IP address in reply to a PASV/EPSV/SPSV
    command. If the server is behind a masquerading (NAT) box that doesn''t properly
    handle stateful FTP masquerading, put the IP address of that box here. If you
    have a dynamic IP address, you can put the public host name of your gateway, which
    will be resolved every time a new client will connect. |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '| 被动IP地址 | 强制在回应PASV/EPSV/SPSV命令时使用指定的IP地址。如果服务器位于一个没有正确处理状态FTP伪装的NAT设备后面，请将该设备的IP地址放在这里。如果你有动态IP地址，可以放入网关的公共主机名，每次新客户端连接时都会解析这个主机名。
    |'
- en: '| pasv_min_port | The minimum port to allocate for PASV style data connections
    (0 = use any port). |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '| pasv_min_port | 分配给PASV风格数据连接的最小端口（0 = 使用任何端口）。 |'
- en: '| pasv_max_port | The maximum port to allocate for PASV style data connections
    (0 = use any port). |'
  id: totrans-138
  prefs: []
  type: TYPE_TB
  zh: '| pasv_max_port | 分配给PASV风格数据连接的最大端口（0 = 使用任何端口）。 |'
- en: Using the Command Line FTP Client
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用命令行FTP客户端
- en: In chapter 2, we saw how to use the free FTP client, CoreFTP, to connect from
    a Windows machine to the FreeNAS server, and we also mentioned the built-in FTP
    client that comes with Windows Explorer. All the major operating systems (including
    Windows also) include a built in command line FTP program. They are all essentially
    the same regardless of operating system so if you know how to use the command
    line FTP program on OS X, you will be able to manage on Linux and so on. For this
    example we will use Apple's OS X.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二章中，我们展示了如何使用免费的FTP客户端CoreFTP从Windows机器连接到FreeNAS服务器，我们还提到过Windows资源管理器自带的内建FTP客户端。所有主要的操作系统（包括Windows）都包含一个内建的命令行FTP程序。它们本质上是相同的，不管操作系统是什么，所以如果你知道如何使用OS
    X上的命令行FTP程序，你也能在Linux等操作系统上管理。对于本例，我们将使用苹果的OS X。
- en: 'To start, you need to open a terminal window (on OS X or Linux) or a command
    prompt (on Windows). To connect to the FreeNAS server you type:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，你需要打开一个终端窗口（在OS X或Linux上）或命令提示符（在Windows上）。要连接到FreeNAS服务器，你需要输入：
- en: '[PRE0]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Where `192.168.1.250` is the IP address of the FreeNAS server, you will need
    to enter the IP address of the FreeNAS if yours is different.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，`192.168.1.250`是FreeNAS服务器的IP地址，如果你的IP地址不同，需要输入你自己的FreeNAS IP地址。
- en: 'The first thing you need to enter is a user name, for now we will use anonymous
    FTP, which means that anyone can access the FTP. The next chapter we will look
    at user management and authentication. So enter:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个需要输入的是用户名，现在我们将使用匿名FTP，这意味着任何人都可以访问FTP。下一章我们将讨论用户管理和认证。所以输入：
- en: '[PRE1]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now, you will need to enter a password. As we are doing an anonymous login,
    any password will do, including just pressing *ENTER*.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你需要输入密码。因为我们进行的是匿名登录，任何密码都可以，包括直接按*ENTER*。
- en: You will then be in the FTP program and you will see the prompt **ftp>**.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 然后你会进入FTP程序，并看到**ftp>**提示符。
- en: 'To see a listing of what is in the directory, we use the `ls` command. So type
    `ls` and then press *ENTER*. The result will be something similar to this:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看目录中的文件列表，我们使用`ls`命令。所以输入`ls`然后按*ENTER*。结果会类似于以下内容：
- en: '[PRE2]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The important line amongst all this information is the line starting with `drwxrwxrwx`.
    You will see on the right-hand-side the word store. This is the disk called store
    that was added, formated, and mounted in the quick start guide of chapter 2\.
    The `drwxrwxrwx` shows us that it is a directory (because of the leading `d`)
    and that everyone has read, write, and execute permissions.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些信息中，重要的一行是以`drwxrwxrwx`开头的那一行。你会在右侧看到“store”这个词。这就是在第二章快速入门指南中添加、格式化并挂载的名为store的磁盘。`drwxrwxrwx`告诉我们它是一个目录（因为前面的`d`），并且每个人都有读、写和执行权限。
- en: 'We now want to change directory to *store*, to do this we use the `cd` command:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们想要切换到*store*目录，使用`cd`命令来实现：
- en: '[PRE3]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Doing a directory listing of the store folder reveals:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 对存储文件夹进行目录列出后显示：
- en: '[PRE4]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This is Service Pack 4 for Windows 2000\. I have copied to my FreeNAS server
    as an example. If I have one or more Windows 2000 machines on my network, which
    need to be upgraded to service pack 4, I can download the file from the FreeNAS
    server and run it on each machine.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 这是Windows 2000的服务包4。我已将其复制到我的FreeNAS服务器上作为示例。如果我的网络中有一台或多台需要升级到服务包4的Windows
    2000计算机，我可以从FreeNAS服务器上下载该文件，并在每台计算机上运行。
- en: 'To get the file and download it on to my machine, I use the `get` command:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获取文件并将其下载到我的计算机上，我使用`get`命令：
- en: '[PRE5]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The transfer will start and will finish with a summary like this:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 传输将开始，并以类似以下内容的摘要结束：
- en: '[PRE6]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: To exit the FTP program, just type `quit`.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 要退出FTP程序，只需键入`quit`。
- en: 'Here are a few more FTP commands to help you on your way:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有更多FTP命令帮助你前进：
- en: '| Command | Description |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| 命令 | 描述 |'
- en: '| Delete | Deletes a file in the current remote directory. |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| 删除 | 删除当前远程目录中的文件。 |'
- en: '| lcd | Changes directory on your local machine. |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| lcd | 更改本地计算机上的目录。 |'
- en: '| mkdir | Makes a new directory within the current remote directory. |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| mkdir | 在当前远程目录内创建一个新目录。 |'
- en: '| mget | Copies multiple files from the remote machine to the local machine;
    you are prompted for a y/n answer before transferring each file unless you use
    the prompt off command before hand. |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| mget | 将多个文件从远程计算机复制到本地计算机；在传输每个文件之前，会提示你回答y/n，除非你事先使用了关闭提示命令。 |'
- en: '| mput | Copies multiple files from the local machine to the remote machine;
    you are prompted for a y/n answer before transferring each file, unless you use
    the prompt off command before hand. |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| mput | 将多个文件从本地计算机复制到远程计算机；在传输每个文件之前，会提示你回答y/n，除非你事先使用了关闭提示命令。 |'
- en: '| put | Copies a file from the local machine to the remote machine. |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| put | 将一个文件从本地计算机复制到远程计算机。 |'
- en: '| pwd | Displays the current working directory on the remote machine. |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| pwd | 显示远程计算机上的当前工作目录。 |'
- en: '| rmdir | Deletes a directory in the current remote directory. |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| rmdir | 删除当前远程目录中的目录。 |'
- en: Using a Web Browser for FTP
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用网页浏览器进行FTP
- en: 'All web browsers contain a simple FTP client and it is possible to browse the
    FTP areas and download files. Start your web browser and then in the address bar,
    enter:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 所有网页浏览器都包含一个简单的FTP客户端，可以浏览FTP区域并下载文件。启动你的网页浏览器，然后在地址栏中输入：
- en: '[PRE7]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Notice that the address starts with `ftp://` and NOT `http://`.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，地址以`ftp://`开头，而不是`http://`。
- en: 'The web browser will show something like this:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 网页浏览器将显示如下内容：
- en: '![Using a Web Browser for FTP](img/4688_04_08.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![使用网页浏览器进行FTP](img/4688_04_08.jpg)'
- en: Here, the web browser shows *store*, the disk that was previously configured.
    Unlike CIFS, you don't need to add each disk individually; all the disks mounted
    are available.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，网页浏览器显示了*store*，这是先前配置的磁盘。与CIFS不同，你不需要单独添加每个磁盘；所有已挂载的磁盘都可以使用。
- en: 'If you click **store**, you will be taken into the **store** folder and you
    will see something like this:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击**store**，你将进入**store**文件夹，看到如下内容：
- en: '![Using a Web Browser for FTP](img/4688_04_09.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![使用网页浏览器进行FTP](img/4688_04_09.jpg)'
- en: From here, you can click on the Service Pack and the web browser will start
    to download it for you.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你可以点击服务包，网页浏览器将开始为你下载它。
- en: NFS
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: NFS
- en: The Network Filing System is the UNIX equivalent to the CIFS protocol. Although
    there are 3rd party packages to allow Windows machines to use NFS resources, NFS
    has remained most dominant on the UNIX/Linux operating systems.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 网络文件系统（NFS）是UNIX系统等同于CIFS协议的技术。虽然有第三方包可以让Windows计算机使用NFS资源，但NFS在UNIX/Linux操作系统上仍然占据主导地位。
- en: 'To configure the NFS service, go to the **Services: NFS** page. As with all
    the other services, to enable it you need to tick the Enable box.'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置NFS服务，请进入**服务：NFS**页面。与其他所有服务一样，要启用它，你需要勾选启用框。
- en: There are few parameters for NFS, but they are important.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: NFS的参数很少，但它们非常重要。
- en: Note
  id: totrans-185
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The following instructions are for the 0.68 series of FreeNAS releases. The
    0.69 and 0.7 versions of FreeNAS treat NFS slightly differently but essentially
    the ideas are the same.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 以下说明适用于0.68系列的FreeNAS版本。0.69和0.7版本的FreeNAS在处理NFS时略有不同，但本质上的思想是相同的。
- en: 'In 0.69 and 0.7 please note the following differences:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 在0.69和0.7版本中，请注意以下差异：
- en: 'The Services: NFS settings page now has two tabs; *Settings* and *Shares*.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 服务：NFS设置页面现在有两个选项卡；*设置*和*共享*。
- en: 'The Settings tab has a new parameter: *Number of servers* that specifies how
    many NFS processes to create. There needs to be enough processes to handle the
    maximum level of concurrency from NFS clients on the network. A typical figure
    would be four to six.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 设置选项卡有一个新参数：*服务器数量*，它指定要创建多少个NFS进程。需要有足够的进程来处理来自网络上NFS客户端的最大并发量。典型的数字是四到六个。
- en: The NFS set-up now has the concept of shares (very similar to that of CIFS),
    to make a folder or disk available on the network a 'share' must be created for
    it. To do this you click on the *Shares* tab and click the Add circle.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 现在的NFS设置有了共享（share）这个概念（与CIFS非常相似），要使文件夹或磁盘在网络上可用，必须为其创建一个“共享”。为此，你需要点击*共享*选项卡，并点击添加按钮。
- en: The rest of the parameters described below are now set on a per share basis
    and not for the whole server.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 以下描述的其余参数现在是按共享（share）单独设置的，而不是针对整个服务器。
- en: The first parameter is *Map all users to root*. This means that on the FreeNAS
    machine remote users will have root privilege (or administrator right in Windows
    terminology) while accessing the disks over NFS. This is generally a bad idea
    and while the default is *yes*, it is best to change it to *no*. Also, any OS
    X clients connecting to the FreeNAS via NFS will issue a few warnings about needing
    usernames and passwords. When *Map all users to root* is set to *no*, this doesn't
    happen.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个参数是*将所有用户映射为root*。这意味着在FreeNAS机器上，远程用户在通过NFS访问磁盘时将拥有root权限（或Windows术语中的管理员权限）。这通常是一个不好的做法，尽管默认设置是*是*，但最好将其更改为*否*。另外，任何通过NFS连接到FreeNAS的OS
    X客户端将会发出一些警告，提示需要用户名和密码。当*将所有用户映射为root*设置为*否*时，这些警告就不会出现。
- en: The second parameter is the list of authorized networks that are allowed to
    connect to the FreeNAS server via NFS. This list of authorized networks is defined
    by setting which group of addresses can access the server.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个参数是授权网络列表，允许通过NFS连接到FreeNAS服务器。这个授权网络列表是通过设置哪些地址组可以访问服务器来定义的。
- en: 'If your FreeNAS server has a netmask of 255.255.255.0 (which is most probably
    the case) then:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的FreeNAS服务器的子网掩码是255.255.255.0（这很可能是默认情况），那么：
- en: Click the add circle and enter the first 3 numbers of the IP address of the
    FreeNAS server (with . in between) and then finish it with dot zero (.0). For
    example, if the IP address of the FreeNAS server is 192.168.1.250, then you would
    enter 192.168.1.0 for the authorized network. Finally, select 24 (in other words
    255.255.255.0) in the drop down box.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 点击添加按钮，输入FreeNAS服务器IP地址的前三个数字（中间有点），然后以点零（.0）结束。例如，如果FreeNAS服务器的IP地址是192.168.1.250，那么你需要输入192.168.1.0作为授权网络。最后，在下拉框中选择24（也就是255.255.255.0）。
- en: If you are using a netmask of 255.255.0.0, then you need to enter the first
    2 numbers of the IP address and end with dot zero dot zero (.0.0), for example
    192.168.0.0\. Set the drop down box to 16.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的子网掩码是255.255.0.0，那么你需要输入IP地址的前两个数字，并以点零点零（.0.0）结束，例如192.168.0.0。将下拉框设置为16。
- en: If you are using a netmask of 255.0.0.0, then you need to enter just the first
    number of the IP address and end with dot zero dot zero dot zero (.0.0.0), e.g.
    192.0.0.0\. The drop down box needs to be set to 8.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的子网掩码是255.0.0.0，那么你只需要输入IP地址的第一个数字，并以点零点零点零（.0.0.0）结束，例如192.0.0.0。下拉框需要设置为8。
- en: 'If you are unsure what the value of the netmask is, then go to Interfaces:
    LAN and see the IP Address field. You need to set the drop down box in the Services:
    NFS page to that of the value of the drop down box in the IP Address field.'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不确定子网掩码的值是什么，请转到接口：LAN并查看IP地址字段。你需要在服务：NFS页面的下拉框中设置与IP地址字段下拉框中的值相同的选项。
- en: Using NFS from OS X
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从OS X使用NFS
- en: At the core of Apple's OS X, is the open source UNIX operating system called
    Darwin. As a result, OS X natively understands the NFS protocol. To connect to
    the FreeNAS server from OS X, open the Finder and the Go->Connect to Server...
    (Or Apple-K as a shortcut)
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 苹果OS X的核心是一个名为Darwin的开源UNIX操作系统。因此，OS X本身就理解NFS协议。要从OS X连接到FreeNAS服务器，请打开Finder，选择Go->连接到服务器...（或者使用快捷键Apple-K）。
- en: 'In the Server Address field enter:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在服务器地址字段中输入：
- en: '[PRE8]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The address is made up of 3 parts. First is `nfs://`, which tells OS X that
    we want to talk via NFS. Then comes the address of the FreeNAS server (192.168.1.250,
    change this accordingly) and finally, the resource to which we want to connect.
    All the disks are exported as /mnt/name. In this case, the name is store as we
    previously defined *store* in Disks: Mount Point: Management. Once mounted, it
    will appear under SHARED in the Finder on the left-hand side.'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 地址由三部分组成。首先是 `nfs://`，告诉 OS X 我们要通过 NFS 进行通信。接着是 FreeNAS 服务器的地址（192.168.1.250，根据需要修改），最后是我们要连接的资源。所有磁盘都作为
    /mnt/name 导出。在这个例子中，名称是 store，因为我们之前在“磁盘：挂载点：管理”中定义了 *store*。挂载后，它会出现在 Finder
    左侧的“共享”下。
- en: Mount FreeNAS via NFS on Linux
  id: totrans-204
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 Linux 上通过 NFS 挂载 FreeNAS
- en: The particular Linux distribution you are using may have a graphical to mount
    NFS shares, but the lowest common denominator that works for all Linux versions
    is to use the command line.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 您使用的特定 Linux 发行版可能有图形界面工具来挂载 NFS 共享，但适用于所有 Linux 版本的最低通用标准是使用命令行。
- en: To mount the FreeNAS server via NFS is easy and also mostly the same as in OS
    X, but rather than entering the command in the GUI, it is entered at the command
    line. In Linux, to mount any type of device, remote or local, you need to have
    a mount point, a place to peg the mounted resource. So open a terminal window
    and become root (usually with the *su* command, or alternatively you can prefix
    *sudo* in front of the following commands).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 通过 NFS 挂载 FreeNAS 服务器非常简单，且大部分与 OS X 相同，但与在 GUI 中输入命令不同，它是在命令行中输入的。在 Linux 中，要挂载任何类型的设备，无论是远程的还是本地的，都需要有一个挂载点，即一个用于挂载资源的位置。所以，打开一个终端窗口并以
    root 身份登录（通常使用 *su* 命令，或者您也可以在以下命令前加上 *sudo*）。
- en: 'First, you need to change directory to the /mnt directory:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要切换到 /mnt 目录：
- en: '[PRE9]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Now create a directory to peg the FreeNAS server to:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 现在创建一个目录以挂载 FreeNAS 服务器：
- en: '[PRE10]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'And now mount the FreeNAS server:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 现在挂载 FreeNAS 服务器：
- en: '[PRE11]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Once completed, all the files and folders on the disk *store* on the FreeNAS
    server will appear under `/mnt/freenas`. So using earlier examples, you will find
    the Windows 2000 Service Pack 4 at `/mnt/freenas/W2KSP4_EN.EXE`, not that it would
    be much good here!
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，磁盘上存储在 FreeNAS 服务器上的所有文件和文件夹将出现在 `/mnt/freenas` 下。因此，使用之前的示例，您将会在 `/mnt/freenas/W2KSP4_EN.EXE`
    找到 Windows 2000 Service Pack 4，不过这里可能没什么用处！
- en: RSYNCD, Unison, AFP, and UPnP
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: RSYNCD、Unison、AFP 和 UPnP
- en: CIFS, NFS, and FTP are the 3 main file access protocols for FreeNAS, however,
    FreeNAS doesn't stop there, it has another 4 protocols for different specialized
    tasks including backups and streaming multimedia.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: CIFS、NFS 和 FTP 是 FreeNAS 的三种主要文件访问协议，但 FreeNAS 不止如此，它还有另外四种协议用于不同的专门任务，包括备份和流媒体多媒体。
- en: Using RSYNC for Backups
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 RSYNC 进行备份
- en: RSYNC copies files between machines in an efficient manner and is therefore
    excellent for making backups. The RSYNC protocol allows RSYNC to transfer just
    the differences between two sets of files across the network connection, using
    an efficient algorithm. RSYNC is a client/server system meaning that a server
    is running to receive the backup file and a client sends the files from the local
    machine. For FreeNAS, this means that the RSYNC service can be configured and
    computers on your network can be backed up to it using an RSYNC client.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: RSYNC 以高效的方式在机器之间复制文件，因此非常适合做备份。RSYNC 协议允许 RSYNC 仅传输两组文件之间的差异，通过高效的算法进行传输。RSYNC
    是一个客户端/服务器系统，意味着有一个服务器在运行以接收备份文件，而客户端则从本地机器发送文件。对于 FreeNAS，这意味着可以配置 RSYNC 服务，并且您网络中的计算机可以使用
    RSYNC 客户端备份到它。
- en: 'To enable the RSYNC service, tick the Enable box on the Services: **RSYNCD:
    Server** page. The other parameters you can leave at their defaults.'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '要启用 RSYNC 服务，请在服务页面 **RSYNCD: 服务器** 上勾选启用框。其他参数可以保持默认设置。'
- en: 'RSYNC is essentially a command line tool with a Linux/UNIX background, however,
    there are some Windows programs for handling backups via RSYNC. For more information,
    visit the websites:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: RSYNC 本质上是一个命令行工具，具有 Linux/UNIX 背景，但也有一些 Windows 程序可以通过 RSYNC 进行备份管理。欲了解更多信息，请访问以下网站：
- en: DeltaCopy ([http://www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp](http://www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp))
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DeltaCopy ([http://www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp](http://www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp))
- en: NasBackup ([http://www.nasbackup.com](http://www.nasbackup.com))
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NasBackup ([http://www.nasbackup.com](http://www.nasbackup.com))
- en: Both of these tools are open source and free to download and use without restriction.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个工具都是开源的，并且可以免费下载和使用，没有任何限制。
- en: 'From the Linux (or OS X) command line, you can start a backup of files on the
    local machine like this:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Linux（或 OS X）命令行，你可以像这样开始备份本地机器上的文件：
- en: '[PRE12]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This will backup the directory `/home/user/backup` to the FreeNAS onto the store
    disk. The `-a` parameter put RSYNC into archive mode, which means that any subdirectories
    will also be copied while preserving time stamps.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 这将把目录 `/home/user/backup` 备份到 FreeNAS 上的存储磁盘。`-a` 参数将 RSYNC 设置为归档模式，这意味着任何子目录也将被复制，同时保留时间戳。
- en: As before, you need to change the IP address (192.168.1.250) to the IP address
    of your FreeNAS server.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，你需要将 IP 地址（192.168.1.250）更改为你的 FreeNAS 服务器的 IP 地址。
- en: Note
  id: totrans-227
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: FreeNAS can also act as a RSYNC client, which means it send files from the server
    to another server and so, allowing the FreeNAS server to be backed up. We will
    look at this in more detail in chapter 7.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS 还可以作为 RSYNC 客户端，这意味着它可以将文件从服务器发送到另一台服务器，从而允许 FreeNAS 服务器进行备份。我们将在第七章中更详细地讨论这一点。
- en: Using Unison for Backups and Synchronization
  id: totrans-229
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Unison 进行备份和同步
- en: Unison is a file-synchronization tool for UNIX and Windows. It allows two replicas
    of a collection of files and directories to be stored on different hosts (or different
    disks on the same host), modified separately, and then brought up-to-date by propagating
    the changes in each replica to the other. It is similar to RSYNC in that it can
    perform mirroring/synchronization of two directories, but unlike RSYNC, Unison
    can deal with updates to both copies of a distributed directory structure. Updates
    that do not conflict are propagated automatically. Conflicting updates are detected
    and displayed. Unison is open source and is published under the GNU Public License.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: Unison 是一个用于 UNIX 和 Windows 的文件同步工具。它允许将一组文件和目录的两个副本存储在不同的主机（或同一主机上的不同磁盘）上，分别修改，然后通过将每个副本中的更改传播到另一个副本来更新它们。它与
    RSYNC 类似，都可以执行两个目录的镜像/同步操作，但与 RSYNC 不同，Unison 可以处理分布式目录结构中两个副本的更新。没有冲突的更新会自动传播。冲突的更新会被检测并显示。Unison
    是开源的，且根据 GNU 公共许可证发布。
- en: 'To enable the Unison service, go to **Services: Unison** and tick the Enable
    box. You need to choose which share the unison service will use and you can probably
    leave the other settings to their defaults.'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用 Unison 服务，请转到**服务：Unison**并勾选启用框。你需要选择 Unison 服务将使用的共享，并且可以将其他设置保留为默认值。
- en: 'For Unison to work, the Secure Shell (SSH) must be enabled (Services: SSH)
    and the user must have shell access enabled (Access: Users).'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让 Unison 正常工作，必须启用安全外壳（SSH）（服务：SSH），且用户必须启用 Shell 访问（访问：用户）。
- en: SSH and user administration are covered in detail in the next chapter.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: SSH 和用户管理将在下一章中详细介绍。
- en: Connecting to FreeNAS via AFP
  id: totrans-234
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过 AFP 连接到 FreeNAS
- en: Like CIFS for Windows and NFS for UNIX, Apple also have a file system protocol
    called AFP (Apple Filing Protocol). It allows Apple Macs to connect natively to
    the FreeNAS server. As with CIFS, the Mac will automatically discover any AFP
    services offered on the local area network. The AFP service will appear in the
    **SHARED** section in the Finder.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 与 Windows 的 CIFS 和 UNIX 的 NFS 类似，Apple 也有一个名为 AFP（Apple Filing Protocol）的文件系统协议。它允许
    Apple Mac 本地连接到 FreeNAS 服务器。与 CIFS 一样，Mac 会自动发现本地网络上提供的任何 AFP 服务。AFP 服务将在 Finder
    的**共享**部分出现。
- en: '![Connecting to FreeNAS via AFP](img/4688_04_11.jpg)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![通过 AFP 连接到 FreeNAS](img/4688_04_11.jpg)'
- en: 'To enable AFP, go to the **Services: AFP** page, and tick the Enable box. Now
    tick the **Enable guest access** box and click **Save and Restart**. The local
    authentication method will be looked at in the next chapter along with all other
    user management issues. AFP will now be running. Go to your Mac and you will find
    the server as described above.'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用 AFP，请转到**服务：AFP**页面，勾选启用框。接着勾选**启用来宾访问**框并点击**保存并重启**。本地认证方法将在下一章中与所有其他用户管理问题一起讨论。AFP
    现在已启动。前往你的 Mac，你将看到如上所述的服务器。
- en: 'There are a few options available when configuring AFP, here is a brief look
    at them:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 配置 AFP 时有一些选项，下面是对它们的简要介绍：
- en: '| Parameter | Meaning |'
  id: totrans-239
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 说明 |'
- en: '| --- | --- |'
  id: totrans-240
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Server Name | Name of the server. If this field is left empty, the default
    server is specified. |'
  id: totrans-241
  prefs: []
  type: TYPE_TB
  zh: '| 服务器名称 | 服务器的名称。如果此字段为空，则指定默认服务器。 |'
- en: '| Authentication | Guest access or local user authentication. You must select
    one of these, select guest access for the anonymous access. |'
  id: totrans-242
  prefs: []
  type: TYPE_TB
  zh: '| 认证 | 来宾访问或本地用户认证。你必须选择其中之一，如果选择匿名访问，请选择来宾访问。 |'
- en: Streaming Media with UPnP
  id: totrans-243
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 UPnP 进行流媒体
- en: UPnP (Universal Plug and Play) is a set of network protocols that allow devices
    to connect seamlessly and to simplify the implementation of networks in the home.
    It is popular for easily enabling the streaming of multimedia data from a server
    to a client. In the FreeNAS context, UPnP allows a previously configured directory
    to be made available to a UPnP multimedia client such as a wireless media center
    that attaches to your TV. The UPnP client will find the FreeNAS server via the
    UPnP protocols and play (via a selection menu) the multimedia files stored in
    the FreeNAS server.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: UPnP（即插即用）是一组网络协议，允许设备无缝连接并简化家庭网络的实现。它因轻松启用从服务器到客户端的多媒体数据流而广受欢迎。在 FreeNAS 环境中，UPnP
    允许将先前配置的目录提供给 UPnP 多媒体客户端，如连接到电视的无线媒体中心。UPnP 客户端将通过 UPnP 协议找到 FreeNAS 服务器，并通过选择菜单播放存储在
    FreeNAS 服务器中的多媒体文件。
- en: 'To enable UPnP, go to the **Services: UPnP** page and tick the Enable box.'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用 UPnP，请进入**服务：UPnP**页面并勾选启用框。
- en: You can leave the name and the network interface at their defaults.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将名称和网络接口保持默认设置。
- en: Now, you need to add which disks you would like to share on the FreeNAS server.
    Clicking the add circle will bring up the familiar window for selecting which
    disks to share. In our test setup, we need to share **/mnt/store**. Enter this
    and the click **Add**.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您需要选择要在 FreeNAS 服务器上共享的磁盘。点击添加圆圈将弹出一个熟悉的窗口，供您选择要共享的磁盘。在我们的测试设置中，我们需要共享**/mnt/store**。输入此路径后，点击**添加**。
- en: Finally, click **Save and Restart**.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，点击**保存并重启**。
- en: 'There are also a few parameters that can be changed:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些可以更改的参数：
- en: '| Parameter | Meaning |'
  id: totrans-250
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| --- | --- |'
  id: totrans-251
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Port | Enter a custom port number for the HTTP server if you want to override
    the default (49152). Only dynamic or private ports can be used (from 49152 through
    65535). |'
  id: totrans-252
  prefs: []
  type: TYPE_TB
  zh: '| 端口 | 如果您希望覆盖默认端口（49152），请输入自定义端口号。只能使用动态或私有端口（从49152到65535）。 |'
- en: '| Profile | Compliant profile to be used. UPnP has several profiles and you
    need to adjust this according to which device you are streaming to. If you are
    using a Microsoft''s Xbox 360 then select Xbox 360, if you are using a Digital
    Living Network Alliance (formerly Digital Home Working Group) compliant device
    then select DLNA. |'
  id: totrans-253
  prefs: []
  type: TYPE_TB
  zh: '| 配置文件 | 要使用的符合规范的配置文件。UPnP 有多个配置文件，您需要根据所使用的设备来调整。如果您使用的是微软的 Xbox 360，则选择
    Xbox 360；如果您使用的是符合数字生活网络联盟（前身为数字家庭工作组）标准的设备，则选择 DLNA。 |'
- en: '| Control web page | Enable control web page. Accessible through [http://ip_address:port/web/ushare.html](http://ip_address:port/web/ushare.html).
    This is a rudimentary web page that allows you to add more shares. It is also
    the page Windows will show as you double click on the FreeNAS UPnP icon. |'
  id: totrans-254
  prefs: []
  type: TYPE_TB
  zh: '| 控制网页 | 启用控制网页。可以通过[http://ip_address:port/web/ushare.html](http://ip_address:port/web/ushare.html)访问。这是一个基础的网页，允许您添加更多共享内容。它也是
    Windows 双击 FreeNAS UPnP 图标时显示的页面。 |'
- en: As a test client, we can use the GeexBox Linux distribution ( [http://geexbox.org](http://geexbox.org)).
    GeeXboX is a free Linux distribution that turns a computer into a Home Theater
    PC or Media Center. It is a standalone LiveCD-based distribution, meaning it boots
    from the CD and runs out of the box on any modern PC. It can even be used on a
    diskless computer, as the whole system is loaded in RAM. Much like FreeNAS, you
    need to download the `.ISO` image file and burn it onto a CD and then boot the
    PC from the CD.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 作为测试客户端，我们可以使用 GeexBox Linux 发行版（[http://geexbox.org](http://geexbox.org)）。GeeXboX
    是一个免费的 Linux 发行版，可以将计算机转变为家庭影院 PC 或媒体中心。它是一个独立的基于 LiveCD 的发行版，这意味着它可以从 CD 启动，并能在任何现代
    PC 上即刻运行。它甚至可以在无盘计算机上使用，因为整个系统是加载到内存中的。与 FreeNAS 类似，您需要下载 `.ISO` 镜像文件，将其刻录到 CD
    上，然后从 CD 启动 PC。
- en: Once booted, you can select **Open** from the main menu followed by **Open File...**
    and then choose the UPNP option and finally, the FreeNAS server. If you have copied
    any multimedia files on to the FreeNAS server, you can play them.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 启动后，您可以从主菜单选择**打开**，然后选择**打开文件...**，接着选择 UPNP 选项，最后选择 FreeNAS 服务器。如果您已经将任何多媒体文件复制到
    FreeNAS 服务器上，您可以播放它们。
- en: '![Streaming Media with UPnP](img/4688_04_10.jpg)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![使用 UPnP 流媒体](img/4688_04_10.jpg)'
- en: iSCSI Target
  id: totrans-258
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: iSCSI 目标
- en: iSCSI is an evolution of the SCSI protocol, which allows SCSI commands to be
    sent over a network. It allows two hosts to negotiate and then exchange SCSI commands
    using IP networks. The result is that a remote device with iSCSI capabilities
    can be seen to be a local disk drive but the commands and data for that device
    are being sent over the network rather than down a cable in the machine.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: iSCSI 是 SCSI 协议的演变，允许通过网络发送 SCSI 命令。它允许两个主机进行协商，然后使用 IP 网络交换 SCSI 命令。其结果是，具有
    iSCSI 功能的远程设备可以被视为本地磁盘驱动器，但该设备的命令和数据通过网络发送，而不是通过机器中的电缆传输。
- en: FreeNAS can be configured to be an iSCSI target, this means it acts as a remote
    SCSI disk and it can receive SCSI commands and apply them to a local disk. Once
    configured, an iSCSI initiator can connect to the FreeNAS iSCSI target and use
    the designated disk as a local disk.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: FreeNAS 可以配置为 iSCSI 目标，这意味着它充当一个远程 SCSI 磁盘，并可以接收 SCSI 命令并将其应用于本地磁盘。一旦配置好，iSCSI
    启动器可以连接到 FreeNAS 的 iSCSI 目标并将指定的磁盘用作本地磁盘。
- en: Note
  id: totrans-261
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To use the iSCSI functionality of FreeNAS, your server needs to have a minimum
    of 256MB of RAM.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 FreeNAS 的 iSCSI 功能，您的服务器至少需要 256MB 的内存。
- en: 'iSCSI configuration starts on the **Services: iSCSI Target** page. An iSCSI
    target is formed from one of two things: an extent (the actual storage file or
    hard disk) or a device (a combination of other extents or devices in a RAID 0
    or RAID 1 configuration). Therefore, there are a few steps to configuring a iSCSI
    target:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: iSCSI 配置从 **服务：iSCSI 目标** 页面开始。iSCSI 目标由以下两种之一组成：一个扩展（实际存储文件或硬盘）或一个设备（在 RAID
    0 或 RAID 1 配置中，由其他扩展或设备组合而成）。因此，配置 iSCSI 目标需要几个步骤：
- en: 1\. First, an extent needs to be created or defined.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1. 首先，需要创建或定义一个扩展。
- en: 2\. Optionally, a device can be configured.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2. 可选地，可以配置一个设备。
- en: 3\. Finally, the target needs to be defined using information about the extent
    or device.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3. 最后，需要使用有关扩展或设备的信息来定义目标。
- en: 'Extent in this context means the device or file that will ultimately act as
    the iSCSI device. From the iSCSI Target page, click the add circle for extent
    section. Here, you need to enter two things: the name which by default is **extent0**,
    and then the path to the extent. Here, you can choose a device like **/dev/ad0**
    or a file. For this example I will choose a file as this offers the greatest flexibility
    in that the same physical disk can be used to host several iSCSI targets (note
    however, that you get greater performance when using a whole device). The name
    for the file is in the format **/mnt/sharename/extentname** so in this example
    it will be **/mnt/store/extent0**. Finally, put in a size, in megabytes, for example
    2048 for 2 gigabytes.'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 在此上下文中，扩展是指最终充当 iSCSI 设备的设备或文件。从 iSCSI 目标页面，点击扩展部分的添加按钮。在这里，您需要输入两项内容：名称，默认情况下为
    **extent0**，然后是扩展的路径。在此，您可以选择一个设备，如 **/dev/ad0** 或一个文件。作为示例，我将选择一个文件，因为它提供了最大的灵活性，即同一物理磁盘可以用来托管多个
    iSCSI 目标（但请注意，使用整个设备时性能会更高）。文件的名称格式为 **/mnt/sharename/extentname**，因此在此示例中它将是
    **/mnt/store/extent0**。最后，输入大小，单位为兆字节，例如 2048，表示 2GB。
- en: If you wish to combine several extents or devices, then next, you can create
    a device. This is an optional step and isn't required if you are using a single
    extent (whether a file or hard disk). Click the add circle for the device section.
    You need to enter a device name which by default is **device0**. Next, select
    how you want to combine the extents (either with RAID 0 or RAID 1, see chapter
    3 for more information on RAID).
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望将多个扩展或设备结合在一起，接下来可以创建一个设备。这是一个可选步骤，如果您只使用一个扩展（无论是文件还是硬盘），则不需要此步骤。点击设备部分的添加按钮。您需要输入一个设备名称，默认情况下为
    **device0**。接下来，选择如何组合扩展（使用 RAID 0 或 RAID 1，更多关于 RAID 的信息请参见第 3 章）。
- en: Finally, you need to define the iSCSI target itself. Click on the add circle
    for the target section. Enter a target name, the default is **target0**. Then
    tick the extent that makes up the target, in this case **extent0**. You also need
    to configure the authorized networks that can access this iSCSI target. This is
    similar to the way in which NFS networks are authorized.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您需要定义 iSCSI 目标本身。点击目标部分的添加按钮。输入目标名称，默认值为 **target0**。然后勾选构成目标的扩展，在此例中为 **extent0**。您还需要配置可以访问此
    iSCSI 目标的授权网络。这类似于 NFS 网络授权的方式。
- en: iSCSI disks behave in exactly the same way as local disks in that you can only
    have one computer controlling that disk. Therefore, it is important to ensure
    that only one iSCSI initiator uses any particular iSCSI target. If two (or more)
    iSCSI initiators use an iSCSI target, there will be data corruption.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: iSCSI 磁盘的行为与本地磁盘完全相同，你只能有一台计算机控制该磁盘。因此，确保只有一个 iSCSI 发起程序使用特定的 iSCSI 目标非常重要。如果两个（或更多）iSCSI
    发起程序使用一个 iSCSI 目标，会导致数据损坏。
- en: One way to ensure that only one iSCSI initiator is using the iSCSI target is
    to limit the authorized network to just one IP address. If my iSCSI initiator
    has an IP address of 192.168.1.100, then entering that address along with 32 from
    the drop down box will limit iSCSI connections to just that IP address.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 确保只有一个 iSCSI 发起程序使用 iSCSI 目标的一种方法是将授权网络限制为仅一个 IP 地址。如果我的 iSCSI 发起程序的 IP 地址是
    192.168.1.100，那么输入该地址并选择下拉框中的 32，将会限制 iSCSI 连接只允许该 IP 地址。
- en: However, if your iSCSI initiator doesn't have a fixed IP address (and is using
    DHCP), then you won't be able to permanently set the IP address. In this case,
    you can only limit the IP address to a range of addresses on your network. Assuming
    your FreeNAS server has a netmask of 255.255.255.0, enter the first 3 numbers
    of the IP address of the FreeNAS server (with . in between) and then finish it
    with dot zero (.0). For example, if the IP address of the FreeNAS server is 192.168.1.250,
    then you would enter 192.168.1.0 for the authorized network. Finally, select 24
    (in other words 255.255.255.0) in the drop down box.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你的 iSCSI 发起程序没有固定的 IP 地址（而是使用 DHCP），那么你将无法永久设置 IP 地址。在这种情况下，你只能将 IP 地址限制在网络中的一个范围内。假设你的
    FreeNAS 服务器的子网掩码是 255.255.255.0，输入 FreeNAS 服务器 IP 地址的前三个数字（中间用点分隔），然后以点零（.0）结尾。例如，如果
    FreeNAS 服务器的 IP 地址是 192.168.1.250，那么你应该输入 192.168.1.0 作为授权网络。最后，在下拉框中选择 24（即 255.255.255.0）。
- en: Once you have done this, apply the changes. The FreeNAS server will now create
    the 2GB file **extent0 in /mnt/store** and make the iSCSI target available on
    the network.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 完成上述操作后，应用更改。FreeNAS 服务器将创建 2GB 的文件 **extent0 在 /mnt/store** 中，并将 iSCSI 目标提供到网络上。
- en: You will need to note the target name that is displayed as you will need this
    for the iSCSI initiator.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要记录下显示的目标名称，因为在 iSCSI 发起程序中将需要此信息。
- en: '![iSCSI Target](img/4688_04_12.jpg)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![iSCSI 目标](img/4688_04_12.jpg)'
- en: Testing the iSCSI Target with Another FreeNAS Server
  id: totrans-276
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用另一台 FreeNAS 服务器测试 iSCSI 目标
- en: To test the iSCSI target, we can get another FreeNAS server and connect it to
    the iSCSI disk on the iSCSI target FreeNAS server and see how the disk is used.
    To avoid confusion, I shall refer to the FreeNAS server where the iSCSI target
    is defined as the FreeNAS target server, and the server that will mount the remote
    iSCSI disk as the FreeNAS initiator server.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试 iSCSI 目标，我们可以使用另一台 FreeNAS 服务器，并将其连接到 iSCSI 目标 FreeNAS 服务器上的 iSCSI 磁盘，查看磁盘如何使用。为了避免混淆，我将把定义
    iSCSI 目标的 FreeNAS 服务器称为 FreeNAS 目标服务器，将挂载远程 iSCSI 磁盘的服务器称为 FreeNAS 发起服务器。
- en: Note
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Only One FreeNAS Server Available**'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '**只有一台 FreeNAS 服务器可用**'
- en: If you only have access to one FreeNAS server, you can still perform this test
    by using the same FreeNAS server. Here, the iSCSI initiator will loop back to
    the same FreeNAS server and use the defined iSCSI target. This isn't very practical
    but it proves that you have iSCSI working.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你只有一个 FreeNAS 服务器，也可以通过使用同一台 FreeNAS 服务器来执行此测试。在这种情况下，iSCSI 发起程序将回环到同一台 FreeNAS
    服务器并使用定义的 iSCSI 目标。虽然这不是很实用，但它证明了你的 iSCSI 已经工作。
- en: '1\. On the FreeNAS initiator server, go to the **Disks: Management** page and
    click on the iSCSI Initiator tab. Now click the add circle.'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1\. 在 FreeNAS 发起服务器上，进入 **磁盘：管理** 页面并点击 iSCSI 发起程序标签。然后点击添加按钮。
- en: 2\. Enter a name for the iSCSI disk, say iSCSI0\. It isn't too important as
    it for information only (it is not using during iSCSI negotiation).
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2\. 输入一个 iSCSI 磁盘的名称，比如 iSCSI0。这个名称不太重要，因为它仅供参考（在 iSCSI 协商过程中并未使用）。
- en: '3\. For the initiator name, enter: **iqn.1994-04.org.netbsd.iscsi-initiator:freenas**.'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3\. 对于发起程序名称，输入：**iqn.1994-04.org.netbsd.iscsi-initiator:freenas**。
- en: These names do have a special format (see below) but the most important aspect
    is that they are unique. For uniqueness, you can vary the part after the last
    colon, **freenas2** etc.
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些名称确实有一个特殊的格式（见下文），但最重要的方面是它们是唯一的。为了确保唯一性，你可以在最后一个冒号后改变部分内容，**freenas2** 等等。
- en: '4\. For the target name, enter: **iqn.1994-04.org.netbsd.iscsi-target:target0**,
    which should be the target name you noted down on the FreeNAS target server.'
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4\. 对于目标名称，输入：**iqn.1994-04.org.netbsd.iscsi-target:target0**，这应该是你在 FreeNAS
    目标服务器上记录下来的目标名称。
- en: 5\. Finally, enter the IP address of the FreeNAS target server. And then click
    **Add**.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5. 最后，输入 FreeNAS 目标服务器的 IP 地址，然后点击**添加**。
- en: Note
  id: totrans-287
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: iSCSI names may seem long and complicated but it is possible to understand them.
    They are technically called iSCSI Qualified Names or IQNs for short and they all
    start with the letters iqn.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: iSCSI 名称可能看起来很长且复杂，但它们是可以理解的。它们技术上被称为 iSCSI 合格名称（IQN），简而言之，它们都以 iqn 开头。
- en: 'Here is a reminder of the target name:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 这是目标名称的提醒：
- en: '**iqn.1994-04.org.netbsd.iscsi-initiator:freenas**'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '**iqn.1994-04.org.netbsd.iscsi-initiator:freenas**'
- en: After **iqn**. comes a date code specifying the year and month in which the
    organization registered the domain, here it is April 1994.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 在**iqn**之后，是一个日期代码，指定了组织注册域名的年份和月份，这里是 1994 年 4 月。
- en: 'Then comes the domain name which is backwards: **iscsi-initiator.netbsd.org**'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是域名，它是反向的：**iscsi-initiator.netbsd.org**
- en: NetBSD is a sister project to FreeBSD, and the iSCSI parts of FreeBSD come from
    NetBSD, so their domain name is used.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: NetBSD 是 FreeBSD 的姊妹项目，FreeBSD 的 iSCSI 部分来自 NetBSD，因此使用了他们的域名。
- en: Finally, there is a **:** and a local defined string to make sure the address
    is unique, in this case, **freenas**, which was the name of the target server.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，后面会有一个**:**和本地定义的字符串，确保地址唯一，在这种情况下是**freenas**，它是目标服务器的名称。
- en: If you have many iSCSI targets and initiators, you might consider using the
    last number of the IP address along with the word freenas to make unique names,
    e.g. freenas-250.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有多个 iSCSI 目标和发起器，可能需要考虑使用 IP 地址的最后一位数字以及单词 freenas 来创建唯一的名称，例如 freenas-250。
- en: 'If you get any errors, try looking at the logs pages for clues to what went
    wrong:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 如果出现任何错误，请尝试查看日志页面，寻找可能导致问题的线索：
- en: '**Diagnostics: Logs: System**'
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**诊断：日志：系统**'
- en: '**Diagnostics: Information: Disks**'
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**诊断：信息：磁盘**'
- en: '**Diagnostics: Information: iSCSI Initiator**'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**诊断：信息：iSCSI 发起器**'
- en: Also, there is more help in tracking down iSCSI problems in Chapter 9.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在第九章中有更多关于追踪 iSCSI 问题的帮助。
- en: '1\. Now back to the **Disks: Management** page. Click the add circle and select
    the iSCSI device from the Disk drop down menu. It should read something like:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1. 现在回到**磁盘：管理**页面。点击添加圆圈并从磁盘下拉菜单中选择iSCSI设备。它应该显示如下内容：
- en: '[PRE13]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 2\. Add the disk in the normal way and apply the changes.
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2. 以正常方式添加磁盘并应用更改。
- en: '3\. Now the disk can be formatted from the **Disks: Format** page and mounted
    on the **Disks: Mount Point: Management** page exactly as we have done previously
    in the quick start guide in chapter 2.'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3. 现在，磁盘可以通过**磁盘：格式化**页面进行格式化，并且可以像我们在第二章快速入门指南中所做的那样，挂载到**磁盘：挂载点：管理**页面。
- en: After that, you will be able to use the disk via any of the protocols of your
    choosing including CIFS, NFS, AFP, and FTP.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，你就可以通过你选择的任何协议使用该磁盘，包括 CIFS、NFS、AFP 和 FTP。
- en: Note
  id: totrans-306
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Did you notice that the iSCSI disk needs to be formatted and mounted just like
    a physical disk? This is because iSCSI disks are low level devices and the operating
    system that initiated the connection sees the iSCSI as if it were a normal hard
    disk in the system. This means it can be partitioned, formatted, and used like
    any local other disk.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 你注意到 iSCSI 磁盘需要像物理磁盘一样进行格式化和挂载吗？这是因为 iSCSI 磁盘是低级设备，发起连接的操作系统将 iSCSI 视为系统中的普通硬盘。这意味着它可以像其他本地磁盘一样进行分区、格式化和使用。
- en: '![Testing the iSCSI Target with Another FreeNAS Server](img/4688_04_Graphics.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![测试 iSCSI 目标与另一台 FreeNAS 服务器](img/4688_04_Graphics.jpg)'
- en: Testing the iSCSI Target with Windows Vista
  id: totrans-309
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 Windows Vista 中测试 iSCSI 目标
- en: Microsoft Windows Vista comes with some built-in iSCSI initiator software (and
    it is also available as a separate download for Windows XP from the Microsoft
    website). This allows Windows to connect to an iSCSI device and use it as a local
    hard disk.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Windows Vista 自带一些内置的 iSCSI 发起器软件（Windows XP 也可以从微软网站下载独立版）。这使得 Windows
    可以连接到 iSCSI 设备，并将其作为本地硬盘使用。
- en: '1\. Having defined an iSCSI target on your FreeNAS server, go to the Windows
    machine and launch the iSCSI Initiator tool. It can be found in the Administrative
    Tools area of the Control Panel. Specifically: **Control Panel | System and Maintenance
    | Administrative Tools | iSCSI Initiator**.'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1. 在 FreeNAS 服务器上定义了 iSCSI 目标后，转到 Windows 计算机并启动 iSCSI 发起器工具。它可以在控制面板的管理工具区域找到。具体位置为：**控制面板
    | 系统和维护 | 管理工具 | iSCSI 发起器**。
- en: 2\. Click on the **Discovery** tab and then click **Add Portal…** Enter the
    IP address of your FreeNAS sever in the **IP address or DNS name** field and leave
    the **Port** at the default of 3260\. Click **OK**. If the iSCSI component of
    the FreeNAS server is running correctly, you will be returned quickly to the **Discovery**
    tab. However, if a connection cannot be made to the iSCSI target, then an error
    dialog will appear. In the case of an error, go back and verify the FreeNAS iSCSI
    target.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2\. 点击 **发现** 标签页，然后点击 **添加门户...** 在 **IP 地址或 DNS 名称** 字段中输入您的 FreeNAS 服务器的
    IP 地址，并将 **端口** 保持为默认值 3260。点击 **确定**。如果 FreeNAS 服务器的 iSCSI 组件正常运行，您将很快返回到 **发现**
    标签页。如果无法连接到 iSCSI 目标，将会弹出错误对话框。如果发生错误，请返回并验证 FreeNAS iSCSI 目标设置。
- en: '3\. Now click the **Targets** tab. The FreeNAS iSCSI target will be listed
    as something like: **iqn.1994-04.org.netbsd.iscsi-target:target0**. Click it and
    then click on **Log on…**'
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3\. 现在点击 **目标** 标签页。FreeNAS iSCSI 目标会列出类似 **iqn.1994-04.org.netbsd.iscsi-target:target0**
    的内容。点击它，然后点击 **登录...**
- en: 4\. In the next dialog box, you have the chance to configure Windows to **automatically
    restore this connection when the computer starts**, which is useful if this is
    going to be a permanent storage option for this PC. Click **OK**. Windows will
    now connect to the iSCSI target and its **Status** will change to **Connected**.
    You can now click on **OK** to close the iSCSI initiator tool.
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4\. 在下一个对话框中，您有机会配置 Windows **在计算机启动时自动恢复此连接**，如果这将成为该 PC 的永久存储选项，这将非常有用。点击
    **确定**。Windows 现在将连接到 iSCSI 目标，并且其 **状态** 将变为 **已连接**。您现在可以点击 **确定** 以关闭 iSCSI
    启动工具。
- en: 5\. If you now open **Computer** you will see that nothing has changed. But
    don't be alarmed, this is as expected. The iSCSI connection is at the lowest level
    and it is similar to adding a new hard drive to your machine. Before that hard
    drive can be used, it needs to be formatted.
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5\. 如果您现在打开 **计算机**，您会发现没有任何变化。但不要担心，这是预期的。iSCSI 连接是最低级别的，它类似于在您的机器上添加一块新硬盘。在这块硬盘可以使用之前，必须先格式化。
- en: 6\. To initialize and format the drive, you need to use the Computer Management
    tool. To start it click the **Start** button, click **Control Panel, click System
    and Maintenance**, click **Administrative Tools**, and then double-click **Computer
    Management**. (If you are prompted for an administrator password or confirmation,
    type the password or provide confirmation). Finally, in the Navigation pane, under
    Storage, click **Disk Management**.
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 6\. 要初始化和格式化驱动器，您需要使用计算机管理工具。要启动它，点击 **开始** 按钮，点击 **控制面板**，然后点击 **系统和维护**，接着点击
    **管理工具**，然后双击 **计算机管理**。（如果系统提示需要管理员密码或确认，请输入密码或提供确认）。最后，在导航窗格中，点击 **磁盘管理**，位于存储下。
- en: 7\. The iSCSI disk will be listed as a disk and it will be marked as **Not Initialized**.
    To initialize the disk, right-click on the disk label (where it says **Not Initialized**)
    and click **Initialize Disk**. Accept the defaults on the dialog that appears
    and click **OK**. The status of the disk will now change from **Not Initialized**
    to **Online**.
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 7\. 该 iSCSI 硬盘将被列为一块磁盘，并标记为 **未初始化**。要初始化磁盘，右键点击磁盘标签（显示为 **未初始化** 的位置），然后点击
    **初始化磁盘**。在弹出的对话框中接受默认设置，然后点击 **确定**。磁盘的状态将从 **未初始化** 改为 **在线**。
- en: 8\. To format the drive, you need to create a partition and then format it.
    To do this, right-click on an unallocated region of the hard disk and then click
    **New Simple Volume**. In the **New Simple Volume** Wizard, click **Next**. Type
    the size of the volume you want to create in megabytes (the default is the maximum
    size) and then click **Next**. Choose a drive letter to identify the partition
    and then click **Next**. To format the volume with the default settings, click
    **Next**. Review your choices, and then click **Finish**.
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 8\. 要格式化驱动器，您需要先创建一个分区，然后对其进行格式化。右键点击硬盘上未分配的区域，然后点击 **新建简单卷**。在 **新建简单卷向导**
    中，点击 **下一步**。输入您要创建的卷的大小（默认是最大大小），然后点击 **下一步**。选择一个驱动器字母以标识该分区，然后点击 **下一步**。要使用默认设置格式化该卷，点击
    **下一步**。检查您的选择，然后点击 **完成**。
- en: 9\. You will now have a new hard disk on your computer. Whenever you use this
    hard disk, the commands to control, read and write to the disk will be sent using
    iSCSI to the FreeNAS server.
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 9\. 现在，您的计算机上将会有一块新的硬盘。每当您使用这块硬盘时，控制、读写硬盘的命令将通过 iSCSI 协议发送到 FreeNAS 服务器。
- en: Accessing Your Files Using HTTP and the Built-In Web Server
  id: totrans-320
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 HTTP 和内置 Web 服务器访问您的文件
- en: The web browser has become a ubiquitous tool on the desktop, and as such the
    ability to access files on the FreeNAS server while using a web browser has become
    an important file access method. Also, the protocol behind the web, HTTP (Hyper
    Text Transfer Protocol) is well understood by firewall devices. As such, using
    HTTP can mean that firewalls can be passed through, (of course, in a controlled
    manner and when desired) allowing you access to your firewalls when you find yourself
    on the other side of the firewall.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: Web 浏览器已经成为桌面上的普及工具，因此，使用 web 浏览器访问 FreeNAS 服务器上的文件已经成为一种重要的文件访问方式。此外，Web 背后的协议
    HTTP（超文本传输协议）是防火墙设备所熟知的。因此，使用 HTTP 可以使得防火墙通过（当然是在受控的方式下并且在需要时），让你在穿越防火墙后仍能访问它。
- en: Note
  id: totrans-322
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To use the built-in web server, you will need to use FreeNAS v0.69 or greater.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用内置的 web 服务器，你需要使用 FreeNAS v0.69 或更高版本。
- en: Having enabled a general-purpose web server in the FreeNAS server, the developers
    also added the ability to use PHP as well as HTML. However, the FreeNAS web server
    isn't intended to be a comprehensive web server. It does not support any type
    of database connectivity nor does it have advanced features such as URL re-writing
    or bandwidth quotas.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 启用了通用 web 服务器的 FreeNAS 服务器后，开发者还添加了使用 PHP 和 HTML 的功能。然而，FreeNAS 的 web 服务器并不打算成为一个全面的
    web 服务器。它不支持任何类型的数据库连接，也没有 URL 重写或带宽配额等高级功能。
- en: 'To enable the built-in web server, go to **Services: Webserver** and tick the
    enable box. The web server has 5 parameters:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用内置的 web 服务器，进入 **服务：Web 服务器** 并勾选启用框。Web 服务器有 5 个参数：
- en: '| Parameter | Meaning |'
  id: totrans-326
  prefs: []
  type: TYPE_TB
  zh: '| 参数 | 含义 |'
- en: '| --- | --- |'
  id: totrans-327
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Protocol | Choose HTTP or HTTPS as the connection protocol. If you choose
    HTTPS you will need to paste an X.509 certificate in the Certificate field. |'
  id: totrans-328
  prefs: []
  type: TYPE_TB
  zh: '| 协议 | 选择 HTTP 或 HTTPS 作为连接协议。如果选择 HTTPS，你需要在证书字段中粘贴一个 X.509 证书。 |'
- en: '| Port | TCP port for the server. Port 80 is the default for HTTP but it is
    used for the web administration interface. You need to choose another port here
    or move the web interface to another port (on the System: General Setup page)
    and use 80 here. Standard alternative ports include 81 and 8080. |'
  id: totrans-329
  prefs: []
  type: TYPE_TB
  zh: '| 端口 | 服务器的 TCP 端口。端口 80 是 HTTP 的默认端口，但它用于 Web 管理界面。你需要在这里选择另一个端口，或者将 web 界面移到另一个端口（在系统：常规设置页面上），并在此使用
    80。标准的备用端口包括 81 和 8080。 |'
- en: '| Document root | Document root of the web server. This is where the web server
    will look for the web pages and files it is asked to serve. |'
  id: totrans-330
  prefs: []
  type: TYPE_TB
  zh: '| 文档根目录 | Web 服务器的文档根目录。这里是 Web 服务器查找请求提供的网页和文件的地方。 |'
- en: '| Authentication | Give only local users access to the web server. You can
    define which directories need authorization to access them. Any locally defined
    user can then have access to that page. |'
  id: totrans-331
  prefs: []
  type: TYPE_TB
  zh: '| 认证 | 仅允许本地用户访问 web 服务器。你可以定义哪些目录需要授权才能访问。任何本地定义的用户都可以访问该页面。 |'
- en: '| Directory listing | A directory listing is generated if a directory is requested
    and no index-file (index.php, index.html, index.htm or default.htm) was found
    in that directory. This is useful if you just want to give access to some files
    without having to generate HTML or PHP files. |'
  id: totrans-332
  prefs: []
  type: TYPE_TB
  zh: '| 目录列表 | 如果请求某个目录并且该目录中没有找到索引文件（如 index.php、index.html、index.htm 或 default.htm），则会生成目录列表。如果你只想提供某些文件的访问权限，而不需要生成
    HTML 或 PHP 文件，这会很有用。 |'
- en: Once you have entered the parameters, you need to click **Save and Restart**.
    Some parameter changes will require the server to be rebooted before they take
    effect.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦输入了参数，你需要点击**保存并重启**。一些参数的更改将需要重启服务器才能生效。
- en: 'The simplest parameter set to test the web server is to use HTTP on port 8080
    with a document root of /mnt and with the directory listings enabled. To test
    the web server, enter the following URL in your web browser:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 测试 web 服务器的最简单参数集是使用端口 8080 的 HTTP，文档根目录为 /mnt，并启用目录列表。要测试 web 服务器，在你的 web 浏览器中输入以下
    URL：
- en: '[PRE14]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Where 192.168.1.250 is the IP address of your FreeNAS.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 192.168.1.250 是你的 FreeNAS 的 IP 地址。
- en: 'You will see a simple listing:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到一个简单的列表：
- en: '![Accessing Your Files Using HTTP and the Built-In Web Server](img/4688_04_14.jpg)'
  id: totrans-338
  prefs: []
  type: TYPE_IMG
  zh: '![使用 HTTP 和内置 Web 服务器访问你的文件](img/4688_04_14.jpg)'
- en: Summary
  id: totrans-339
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, we have looked at the different protocols that can be used
    to connect to the FreeNAS server from a variety of operating systems including
    Windows, Linux, and OS X.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已经研究了可以用于从各种操作系统（包括 Windows、Linux 和 OS X）连接到 FreeNAS 服务器的不同协议。
- en: We have seen that CIFS is available across the board and NFS is useful for Linux
    or OS X networks. Also, we looked at specialized protocols like RSYNC and UPnP,
    which allow the FreeNAS server to be used as a backup server or as a multimedia
    streaming server respectively.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到，CIFS 在各个平台上都可用，而 NFS 对于 Linux 或 OS X 网络非常有用。此外，我们还了解了像 RSYNC 和 UPnP 这样的专用协议，它们分别允许
    FreeNAS 服务器作为备份服务器或多媒体流媒体服务器使用。
- en: In the next chapter, we shall look at the various user and system administration
    tasks.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将讨论各种用户和系统管理任务。
