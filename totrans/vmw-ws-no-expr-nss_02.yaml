- en: Chapter 2. Installing Virtual Machines
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you'll read about how to install virtual machines. As the installation
    of a basic virtual machine can be very easy, we'll focus on advanced configuration
    options.
  prefs: []
  type: TYPE_NORMAL
- en: Before you start
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Before you start the actual installation of virtual machines, you should set
    the default location where the virtual machine disk files are going to be stored.
    If you don''t do this, they will get stored in the home directory of the user
    that uses VMware Workstation. There''s nothing wrong with that, but if you''re
    setting up an environment where many virtual machines are going to be used, you
    probably want to store all virtual machine disk files on a dedicated hard disk.
    To do this, navigate to **Edit** | **Preferences** and make sure the **Workspace**
    option is selected as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Before you start](img/9182EN_2_1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Now browse to the disk and folder where you want to store the virtual machine
    files. This default location will be applied to all the virtual machines you are
    going to create from this moment.
  prefs: []
  type: TYPE_NORMAL
- en: Starting the installation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To start the installation of virtual machines, you need to navigate to **File**
    | **New Virtual Machine**. This starts **New Virtual Machine Wizard**. The wizard
    proposes two different options: you can select **Typical** if you want to have
    your virtual machine up and running as fast as possible, or select **Custom**
    if you want maximum control over the options that you''ll use in the virtual machine.
    In this procedure, you''ll read about how to install a custom virtual machine.'
  prefs: []
  type: TYPE_NORMAL
- en: '![Starting the installation](img/9182EN_2_2.jpg)'
  prefs: []
  type: TYPE_IMG
- en: After selecting the custom installation type, you need to specify the virtual
    machine's hardware compatibility. By default, the VM will install as a VMware
    Workstation 9 virtual machine type, which is fine if you just want to use it on
    VMware Workstation 9\. However, this VM type won't work on previous versions of
    VMware Workstation. VMware Workstation 9 uses a new data format that cannot be
    used on any previous versions of VMware Workstation. For this reason, you can
    select the lowest version of VMware Workstation that you want the VM to be available
    on.
  prefs: []
  type: TYPE_NORMAL
- en: Note that you don't have to do anything for compatibility with VMware ESX—the
    enterprise level virtualization platform. Virtual machines that are compatible
    with VMware Workstation 6.x or later are automatically fit to run on ESX Server.
    If you select a compatibility version previous to VMware Workstation 6.x, you
    need to select ESX Server 5.x or ESX Server 4.x to make sure it will run on ESX.
  prefs: []
  type: TYPE_NORMAL
- en: While selecting the hardware compatibility version, you'll also be able to see
    which features are supported. On selecting a previous version of VMware Workstation,
    you'll immediately see which hardware features are unsupported. If, for instance,
    you select VMware Workstation 4.x, you'll notice that many hardware features are
    not available and also that the hardware you can use is rather limited with just
    3.5 GB of RAM and one CPU.
  prefs: []
  type: TYPE_NORMAL
- en: '![Starting the installation](img/9182EN_2_3.jpg)'
  prefs: []
  type: TYPE_IMG
- en: After specifying the hardware compatibility, you can select the installation
    media you want to use. You can start the installation either from an ISO image
    file or from a physical disk. Both of these options will launch an easy installation.
    In this installation type, you will specify a minimal amount of installation options;
    this means that there will be many choices that won't even be shown by the installation
    program. Although useful if you just want to get up and running as soon as possible,
    this kind of installation is not typically the installation that is fit for advanced
    users. For complete control over the installation processes, it's a good idea
    to select **I will install the operating system later**.
  prefs: []
  type: TYPE_NORMAL
- en: In the next window, you can indicate which operating system you're going to
    install. Selecting the operating system automatically sets some of the hardware
    settings that are needed in the virtual machine. Many different operating systems
    are supported; the only requirement is that they need to use the same CPU architecture.
    That is, you can install any Intel-based operating system in VMware Workstation,
    but it isn't possible to install operating systems that have been written for
    different hardware architecture, such as IBM System z.
  prefs: []
  type: TYPE_NORMAL
- en: '![Starting the installation](img/9182EN_2_4.jpg)'
  prefs: []
  type: TYPE_IMG
- en: After specifying the operating system, you'll need to select where you want
    to store the virtual machine disk file. Even if you did already select the default
    location for virtual machine files, you can still select a different directory
    for individual virtual machines.
  prefs: []
  type: TYPE_NORMAL
- en: RAM and CPU
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the next window, you'll select the amount of virtual CPUs and the amount
    of CPU cores that you want available in the virtual machine. Although it might
    seem tempting to go beyond the number of CPUs that are available in the hardware
    of your computer, this is not a good idea. For optimal performance in your virtual
    machine, one CPU with one core will perform best. If you do need multiple CPUs
    or CPU cores in the virtual machine, you shouldn't go beyond the number of CPUs
    and cores that are physically available in the host. If you do go beyond this
    amount, you will notice that the performance of the virtual machines is severely
    compromised.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next setting is rather easy: you''ll need to select the amount of RAM that
    is going to be used by the virtual machine. The software allows you to go beyond
    the amount of RAM that is physically installed on your computer. Avoid this because
    the virtual machine will eat up all memory on the host and you won''t be able
    to use your computer efficiently anymore.'
  prefs: []
  type: TYPE_NORMAL
- en: Networking
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'After specifying the amount of RAM you want to use, you''ll select how to deal
    with networking. You have four options:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Use bridged networking**: Use this option if you want the virtual machine
    to be directly available on the local network. To use this option, the virtual
    machine needs a dedicated IP address.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Use network address translation (NAT)**: This is the default option for networking.
    The virtual machine can access other computers on the network, but it won''t be
    accessible by itself as this access is prevented by the NAT firewall.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Use host-only networking**: Use this option if you want to set up a test
    network in which the computers don''t need to access anything on external networks.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In [Chapter 3](ch03.html "Chapter 3. Working with Virtual Machines"), *Working
    with Virtual Machines*, you''ll learn how to set up virtual networking in much
    more detail. If you''re not sure about what to do, select **Use network address
    translation (NAT)** and continue, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Networking](img/9182EN_2_6.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Selecting networking
  prefs: []
  type: TYPE_NORMAL
- en: Disk options
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Next, you'll specify which type of **SCSI controller** you want to be used by
    the virtual machine. By default, this will be an SAS controller, which offers
    the best performance, but if you know that your virtual machine doesn't support
    this controller type, you can select a regular **LSI Logic** controller.
  prefs: []
  type: TYPE_NORMAL
- en: '![Disk options](img/9182EN_2_7.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Selecting the SCSI disk controller
  prefs: []
  type: TYPE_NORMAL
- en: Now you'll indicate what type of disk you want to use. By default, VMware will
    create a disk image file in the location that you specified for this purpose earlier.
    You can, however, also select an existing disk file or install directly on a physical
    disk. Using a VMware disk file is the most flexible option as you can easily copy
    or move the disk to another computer that is using VMware and import it there.
    For optimum performance, you can use a physical disk. The advantage of this is
    that VMware doesn't have to go through a filesystem layer to access files that
    are on a physical disk and that makes it faster. However, it also makes your setup
    less flexible because physical disks are not easy to resize.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If you want to use physical disks as the storage backend of your virtual machines,
    consider using a Linux host operating system. On Linux, you can use LVM, which
    is a flexible way of addressing disk storage. In LVM, it becomes easy to resize
    the disk; this can be seen in VMware.
  prefs: []
  type: TYPE_NORMAL
- en: The option to use an existing disk is not something that you would use to create
    a new virtual machine, but to import an existing virtual machine that was made
    on another computer. In [Chapter 6](ch06.html "Chapter 6. Accessing Virtual Machines
    Remotely"), *Accessing Virtual Machines Remotely*, you'll learn how to import
    virtual machines.
  prefs: []
  type: TYPE_NORMAL
- en: After selecting what kind of disk you want to use, you need to select the disk
    type as well. You can choose between SCSI and IDE. For optimal performance, SCSI
    is the preferred disk type. Only if you want to work with a legacy operating system
    such as MS-DOS does it makes sense to select an IDE disk.
  prefs: []
  type: TYPE_NORMAL
- en: Next, you'll need to specify how you want to allocate disk space. VMware Workstation
    uses thin provisioning by default. This means that you'll need to specify the
    maximum amount of space that the disk can use, but not all of this disk space
    will be allocated immediately. If you want to use a minimum amount of available
    disk space to set up your virtual machines, this is a good option. If, however,
    you want the best possible performance, it's not so good. For maximum performance,
    better select **Allocate all disk space now**. This will create the virtual disk
    before starting the installation of the virtual machine—note that this may take
    a considerable amount of time.
  prefs: []
  type: TYPE_NORMAL
- en: You can also specify if you want to use either one disk file or multiple disk
    files. By default, VMware Workstation uses multiple disk files; this makes it
    easier to copy the files elsewhere. An important reason to do this is that some
    file systems don't support large disk files. For optimal performance, however,
    it is better to use one disk file only.
  prefs: []
  type: TYPE_NORMAL
- en: '![Disk options](img/9182EN_2_9.jpg)'
  prefs: []
  type: TYPE_IMG
- en: After specifying how the disk file must be created, you'll indicate the name
    of the disk file. By default, the name of the disk files is the same as the name
    of the virtual machine. The file uses the default extension `.vmdk`.
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you have specified all that VMware needs to know to start the
    installation of your virtual machine. You'll now see an overview window from which
    you can customize the hardware. Once you've done that, click on **Finish** to
    close the installer window. This will define the VMware machine. If you have selected
    to install later, the configuration will be written to the disk, after which you
    can start the installation.
  prefs: []
  type: TYPE_NORMAL
- en: Installing a Windows 8 virtual machine
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous section, you read about how to specify hardware settings for
    the virtual machines you want to install. Based on this, you can now install a
    virtual machine. In this section, you'll read about how to install a Windows 8
    virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: In the previous procedure, you have read about how to define the hardware settings
    for the virtual machine you want to create. After the hardware options have been
    defined, the virtual machine is added to the VMware dashboard. Before you can
    start the actual installation, you'll now first have to define the installation
    disk that you want to use. To do this, select **Virtual Machine** from the VMware
    dashboard and click on **Edit virtual machine settings**.
  prefs: []
  type: TYPE_NORMAL
- en: '![Installing a Windows 8 virtual machine](img/9182EN_2_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Click on Edit virtual machine settings to specify the installation medium
  prefs: []
  type: TYPE_NORMAL
- en: After clicking on **Edit virtual machine settings**, on the **Hardware** tab
    select **CD/DVD (IDE)**. If you want to install from an ISO file, click on **Use
    ISO image file** and browse to the file you want to use to start the installation.
  prefs: []
  type: TYPE_NORMAL
- en: '![Installing a Windows 8 virtual machine](img/9182EN_2_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Select the ISO file you want to use for the installation
  prefs: []
  type: TYPE_NORMAL
- en: Now click on the **OK** button to save the settings and click on the **Play**
    button to start the virtual machine. You'll now see the virtual machine starting,
    with the virtual machine startup windows shown in a window within the VMware Workstation
    console. In case the installation program doesn't fit, you can maximize this window.
    The easiest way to do this is using the buttons on top of the installer window.
    Hover the mouse over the buttons to see a description of each; you need to enter
    fullscreen mode to work conveniently from a fullscreen environment. To get back
    out of the fullscreen display, use the *Ctrl* + *Alt* keys simultaneously. Next,
    move the mouse button to the upper part of the screen to show the button bar.
    You can see that the fullscreen button is currently active; click on it again
    to deactivate it.
  prefs: []
  type: TYPE_NORMAL
- en: The installation procedure itself is the same as the way that you are familiar
    with it on a normal Windows installation. Complete all of the required steps to
    finish the installation. Note that you do need a valid registration key to install
    Windows 8\. If you want to set up a Windows 8 machine for testing purposes, you
    can request an evaluation key from [www.microsoft.com](http://www.microsoft.com).
    Even if it is just for testing purposes, you will need to register the virtual
    machine at [www.microsoft.com](http://www.microsoft.com); it is not possible to
    complete the installation procedure without registration.
  prefs: []
  type: TYPE_NORMAL
- en: Installing a Linux virtual machine
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Installing a Windows virtual machine is easy as Windows integrates very well
    in VMware. Installing a Linux virtual machine is a bit more difficult because
    you'll need to install the VMware Tools in the Linux operating system. In the
    following procedure, you can read about how to handle the VMware-specific parts
    of the installation on a Linux virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: The beginning of the installation procedure for a Linux virtual machine is very
    similar to the installation of a Windows virtual machine. With Linux, it is even
    more important to select the option **I will install the operating system later**
    to avoid an easy install. This is because Linux has so many options that can be
    modified to match the needs of the user, and if you use an easy install, all you
    get is default values.
  prefs: []
  type: TYPE_NORMAL
- en: Some Linux distributions don't show the graphical display as they should. To
    fix this, stop the installation and navigate to **Virtual Machine Settings** |
    **Hardware**. From there, navigate to **Display** | **Specify monitor settings**
    and manually set the display resolution you want to use. You can now restart the
    installation.
  prefs: []
  type: TYPE_NORMAL
- en: '![Installing a Linux virtual machine](img/9182EN_2_13.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Once the installation program has loaded, continue the installation as normal.
    While selecting the software you want to install, make sure to install the kernel-source
    package, as well as the GCC compiler, and get all the related tools. This will
    make installing VMware Tools a lot easier. Once completed, click on **I Finished
    Installing** in the lower part of the installation window.
  prefs: []
  type: TYPE_NORMAL
- en: The difficult part of installing a Linux virtual machine is to get VMware Tools
    in the virtual machine. VMware Tools ensures that the appropriate drivers for
    graphics, network, and disk are installed. Using VMware Tools really makes the
    performance of the virtual machine a lot better, but installing the tools in Linux
    is a bit difficult. The difficulty is that to install VMware Tools, you will need
    to mount an ISO of the VMware Tools image in the virtual machine. The VMware Tools
    installation files are copied from the image file to the disk in the virtual machine,
    but in order to do this, you'll need access to the installation disk on most Linux
    distributions at the same time.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Repositories**'
  prefs: []
  type: TYPE_NORMAL
- en: To install VMware Tools, additional software has to be copied from the installation
    sources, the so-called repositories, your Linux distribution uses. If you have
    registered your Linux VM online, you will use online repositories, so the only
    condition is that you need to have an active Internet connection. If your Linux
    distribution is not actually online, you need to make the installation files available
    locally. The easiest way to do this is to copy the installation image to the virtual
    machine and configure that as a repository. Consult the documentation for your
    distribution, as the exact procedure to be applied is different for each distribution.
  prefs: []
  type: TYPE_NORMAL
- en: To install VMware Tools, you first have to disconnect the installation disk.
    To do this, click on the CD icon in the lower right part of the screen and click
    on **Disconnect** (see the following screenshot).
  prefs: []
  type: TYPE_NORMAL
- en: '![Installing a Linux virtual machine](img/9182EN_2_14.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Before installing VMware Tools, disconnect the installation disk
  prefs: []
  type: TYPE_NORMAL
- en: After disconnecting the installation disk, in VMware Workstation open the VM
    menu and select **Install VMware tools**. This mounts the VMware Tools image in
    the guest operating system. Now open a root shell in the Linux virtual machine
    and type the mount command to find out where the VMware Tools disk has been mounted
    to. On a modern Fedora system, for instance, it will be mounted on `/run/media/user`.
    Use `cd` to go to the mount point of the CD-ROM in this directory.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Manually mounting the Tools image**'
  prefs: []
  type: TYPE_NORMAL
- en: If you can't find the VMware Tools image mounted anywhere, you can mount it
    manually. To do this, open a root terminal and use the command mount `/dev/sr0
    /mnt`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you''ve accessed the directory where the VMware Tools image is mounted,
    use `cp` to copy the installation file to the `/tmp` directory. For instance,
    use `cp VMware[Tab] /tmp` to copy the tools file. Next, enter the following commands
    to extract the tools file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: You'll now have a directory `/tmp/vmware-tools-distrib` that contains the installation
    files for VMware Tools. Use `cd` to enter that directory and next enter the `./vmware-install.pl`
    command to start the tools installation. This starts the interactive installation
    program. Press *Enter* to accept all the default answers to the questions that
    are asked at this moment. If you encounter error messages, follow the directions
    of the installation program to fix the errors. Once completely installed, the
    easiest way to activate the newly installed VMware Tools is to restart your Linux
    virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you have read about how to install virtual machines. The chapter
    started with an explanation of the virtual hardware that is used for the virtual
    machines; after this, you read about how to install a Windows virtual machine
    as well as a Linux virtual machine. In the next chapter, you'll read about the
    basics of virtual machine usage.
  prefs: []
  type: TYPE_NORMAL
