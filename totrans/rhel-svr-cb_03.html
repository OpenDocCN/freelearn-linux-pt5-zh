<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;3.&#xA0;Configuring Your Network" id="SJGS1-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03" class="calibre1"/>Chapter 3. Configuring Your Network</h1></div></div></div><p class="calibre7">The recipes we'll be covering in this chapter are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Creating a VLAN interface</li><li class="listitem">Creating a teamed interface</li><li class="listitem">Creating a bridge</li><li class="listitem">Configuring IPv4 settings</li><li class="listitem">Configuring your DNS resolvers</li><li class="listitem">Configuring static network routes</li></ul></div></div>

<div class="book" title="Chapter&#xA0;3.&#xA0;Configuring Your Network" id="SJGS1-501a83dd54944cb1bf060a2ce9fab11f">
<div class="book" title="Introduction"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch03lvl1sec24" class="calibre1"/>Introduction</h1></div></div></div><p class="calibre7">This chapter will attempt to explain how to use <code class="email">NetworkManager</code>, which is the default network configuration tool and daemon in RHEL 7. It is a set of tools that makes networking simple and straightforward.</p><p class="calibre7">Configuring your network can be hard at times, especially when using the more exotic configuration options in combination with well-known configuration scripts. The <code class="email">NetworkManager</code> allows you to easily configure your network without needing to edit the configuration files manually.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip04" class="calibre1"/>Tip</h3><p class="calibre7">You can still edit the network configuration files located in <code class="email">/etc/sysconfig/network-scripts</code> using your preferred editor; however, by default, <code class="email">NetworkManager</code> does not notice any changes you make. You'll need to execute the following after editing the files located in the preceding location:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection reload</strong></span>
</pre></div><p class="calibre7">This is not enough to apply the changes immediately. You'll need to bring down and up the connection or reboot the system.</p><p class="calibre7">Alternatively, you can edit <code class="email">/etc/NetworkManager/NetworkManager.conf</code> and add <code class="email">monitor-connection-files=yes</code> to the <code class="email">[main]</code> section. This will cause <code class="email">NetworkManager</code> to pick up the changes and apply them immediately.</p></div><p class="calibre7">Within these recipes, you will get an overview on how to configure your network using the <code class="email">NetworkManager</code> tools (<code class="email">nmcli</code> and <code class="email">nmtui</code>) and kickstart files.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating a VLAN interface"><div class="book" id="TI1E2-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec25" class="calibre1"/>Creating a VLAN interface</h1></div></div></div><p class="calibre7">VLANs are isolated <a id="id98" class="calibre1"/>broadcast domains that run over a single physical network. They allow you to segment a local network and also to "stretch" a LAN over multiple physical locations. Most enterprises implement this on their network switching environment, but in some cases, the tagged VLANs reach your server.</p></div>

<div class="book" title="Creating a VLAN interface">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec60" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">In order to configure a VLAN, we need an established network connection on the local network interface.</p></div></div>

<div class="book" title="Creating a VLAN interface">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec61" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre7">For the sake of ease, our physical network interface is called <code class="email">eth0</code>. The VLAN's ID is 1, and the IPv4 address is <code class="email">10.0.0.2</code>, with a subnet mask of <code class="email">255.0.0.0</code> and a default gateway of <code class="email">10.0.0.1</code>.</p><div class="book" title="Creating the VLAN connection with nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec17" class="calibre1"/>Creating the VLAN connection with nmcli</h3></div></div></div><p class="calibre7">With <code class="email">nmcli</code>, we need to first<a id="id99" class="calibre1"/> create the connection and then<a id="id100" class="calibre1"/> activate it. Perform the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Create a VLAN interface using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type vlan dev eth0 id 1 ip4 10.0.0.2/8 gw4 10.0.0.1</strong></span>
<span class="strong"><strong class="calibre8">Connection 'vlan' (4473572d-26c0-49b8-a1a4-c20b485dad0d) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="2">Now, via this command, activate the connection:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection up vlan</strong></span>
<span class="strong"><strong class="calibre8">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/7)</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="3">Check your network connection, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection show</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli device status</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli device show eth0.1</strong></span>
</pre></div><p class="calibre13">Here is <a id="id101" class="calibre1"/>an example output of<a id="id102" class="calibre1"/> the preceding commands:</p><div class="mediaobject"><img src="../images/00015.jpeg" alt="Creating the VLAN connection with nmcli" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Creating the VLAN connection with nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec18" class="calibre1"/>Creating the VLAN connection with nmtui</h3></div></div></div><p class="calibre7">The <code class="email">nmtui</code> tool is<a id="id103" class="calibre1"/> a text user interface to <code class="email">NetworkManager</code>
<a id="id104" class="calibre1"/> and is launched by executing the following in a terminal:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmtui</strong></span>
</pre></div><p class="calibre7">This will bring up the following text-based interface:</p><div class="mediaobject"><img src="../images/00016.jpeg" alt="Creating the VLAN connection with nmtui" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Navigation is <a id="id105" class="calibre1"/>done using the <span class="strong"><em class="calibre9">Tab</em></span> and arrow keys, and the <a id="id106" class="calibre1"/>selection is done by pressing the <span class="strong"><em class="calibre9">Enter</em></span> key. Now, you need to do the following:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Go to <span class="strong"><strong class="calibre8">Edit a connection</strong></span> and select <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span>. The following screen will appear:<div class="mediaobject"><img src="../images/00017.jpeg" alt="Creating the VLAN connection with nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="2">Next, select <span class="strong"><strong class="calibre8">&lt;Add&gt;</strong></span> and<a id="id107" class="calibre1"/> the <span class="strong"><strong class="calibre8">VLAN</strong></span> <a id="id108" class="calibre1"/>option. Confirm by Selecting <span class="strong"><strong class="calibre8">&lt;Create&gt;</strong></span>:<div class="mediaobject"><img src="../images/00018.jpeg" alt="Creating the VLAN connection with nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="3">Enter the<a id="id109" class="calibre1"/> requested information<a id="id110" class="calibre1"/> in the following form and commit by selecting <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span>:<div class="mediaobject"><img src="../images/00019.jpeg" alt="Creating the VLAN connection with nmtui" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div><p class="calibre7">Your <a id="id111" class="calibre1"/>new <span class="strong"><strong class="calibre8">VLAN</strong></span> <a id="id112" class="calibre1"/>interface will now be listed in the connections list:</p><div class="mediaobject"><img src="../images/00020.jpeg" alt="Creating the VLAN connection with nmtui" class="calibre10"/></div><p class="calibre11"> </p></div><div class="book" title="Creating the VLAN connection with kickstart"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec19" class="calibre1"/>Creating the VLAN connection with kickstart</h3></div></div></div><p class="calibre7">Let's explore<a id="id113" class="calibre1"/> what you need to add to your <code class="email">kickstart</code> script<a id="id114" class="calibre1"/> in order to achieve the same result as in the preceding section:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Look for the configuration parameters within your <code class="email">kickstart</code> file with the following command:<div class="informalexample"><pre class="programlisting">...
network --device=eth0
...</pre></div></li><li class="listitem" value="2">Replace it with the following configuration parameters:<div class="informalexample"><pre class="programlisting">network --device=eth0 --vlanid=1 --bootproto=static --ip=10.0.0.2 --netmask=255.0.0.0 --gateway=10.0.0.1</pre></div></li></ol><div class="calibre14"/></div></div></div></div>

<div class="book" title="Creating a VLAN interface">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch03lvl2sec62" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">The command line to create a VLAN with <code class="email">nmcli</code> is pretty basic as it uses default values for every piece of information that is missing. To make sure that everything is created to your wishes, it is wise to also use <code class="email">con-name</code> and <code class="email">ifname</code>. These will respectively name your connection and the device you're creating. Take a look at the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type vlan con-name vlan1 ifname eth0.1 dev eth0 id 1 ip4 10.0.0.2/8 gw4 10.0.0.1</strong></span>
</pre></div><p class="calibre7">This will create the <code class="email">vlan.1</code> connection with <code class="email">eth0</code> as the parent and <code class="email">eth0.1</code> as the target device.</p><p class="calibre7">As with <code class="email">nmcli</code> and <code class="email">nmtui</code>, you can name your VLAN connection in <code class="email">kickstart</code>; you only need to specify the <code class="email">--interfacename</code> option. If you cannot find any previous network configuration in your <code class="email">kickstart</code> file, just add the code to your <code class="email">kickstart</code> file.</p></div></div>

<div class="book" title="Creating a VLAN interface">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch03lvl2sec63" class="calibre1"/>See also</h2></div></div></div><p class="calibre7">The <code class="email">nmcli</code> tool lacks a man page, but execute the following command for for more options to create VLAN connections:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli con add help</strong></span>
</pre></div><p class="calibre7">For more <code class="email">kickstart</code> information <a id="id115" class="calibre1"/>on networks, check the following URL: <a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html</a>.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating a teamed interface"><div class="book" id="UGI02-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec26" class="calibre1"/>Creating a teamed interface</h1></div></div></div><p class="calibre7">Interface teaming, interface bonding, and link aggregation are all the same. It was already implemented in the kernel by way of the <code class="email">bonding</code> driver. The team driver provides a different mechanism (from bonding) to team multiple network interfaces into a single logical one.</p></div>

<div class="book" title="Creating a teamed interface">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec64" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">To set up a teamed <a id="id116" class="calibre1"/>interface, we'll need more than one network interface.</p></div></div>

<div class="book" title="Creating a teamed interface">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec65" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre7">For the sake of ease, our physical network interfaces are called <code class="email">eth1</code> and <code class="email">eth2</code>. The IPv4 address for the team interface is <code class="email">10.0.0.2</code>, with a subnet mask of <code class="email">255.0.0.0</code> and a default gateway of <code class="email">10.0.0.1</code>.</p><div class="book" title="Creating the teamed interface using nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec20" class="calibre1"/>Creating the teamed interface using nmcli</h3></div></div></div><p class="calibre7">Using this approach, we'll <a id="id117" class="calibre1"/>need to create the team connection and <a id="id118" class="calibre1"/>two team slaves and activate the connection, as follows:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Use the following command line to create the team connection:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type team ip4 10.0.0.2/8 gw4 10.0.0.1</strong></span>
<span class="strong"><strong class="calibre8">Connection 'team' (cfa46865-deb0-49f2-9156-4ca5461971b4) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="2">Add <code class="email">eth1</code> to the<a id="id119" class="calibre1"/> team by executing the<a id="id120" class="calibre1"/> following:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type team-slave ifname eth1 master team</strong></span>
<span class="strong"><strong class="calibre8">Connection 'team-slave-eth1' (01880e55-f9a5-477b-b194-73278ef3dce5) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="3">Now, add <code class="email">eth2</code> to the team by running the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type team-slave ifname eth2 master team</strong></span>
<span class="strong"><strong class="calibre8">Connection 'team-slave-eth2' (f9efd19a-905f-4538-939c-3ea7516c3567) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="4">Bring the team up, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection up team</strong></span>
<span class="strong"><strong class="calibre8">Connection successfully activated (master waiting for slaves) (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/12)</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="5">Finally, check your network connections through the following commands:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection show</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli device status</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli device show nm-team</strong></span>
</pre></div><p class="calibre13">Here's an example output of the preceding commands:</p><div class="mediaobject"><img src="../images/00021.jpeg" alt="Creating the teamed interface using nmcli" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Creating the teamed interface using nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec21" class="calibre1"/>Creating the teamed interface using nmtui</h3></div></div></div><p class="calibre7">Let's fire up <code class="email">nmtui</code> <a id="id121" class="calibre1"/>and add a connection through the following<a id="id122" class="calibre1"/> steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">First, create a team connection by selecting <span class="strong"><strong class="calibre8">&lt;Add&gt;</strong></span>:<div class="mediaobject"><img src="../images/00022.jpeg" alt="Creating the teamed interface using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="2">Enter the<a id="id123" class="calibre1"/> requested information<a id="id124" class="calibre1"/> in the following form and click on <span class="strong"><strong class="calibre8">&lt;Add&gt;</strong></span> for every interface to add:<div class="mediaobject"><img src="../images/00023.jpeg" alt="Creating the teamed interface using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="3">Next, select <span class="strong"><strong class="calibre8">&lt;Add&gt;</strong></span> within <a id="id125" class="calibre1"/>team slaves to add <a id="id126" class="calibre1"/>an interface by filling out the form and selecting <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span>. Repeat this for every physical interface:<div class="mediaobject"><img src="../images/00024.jpeg" alt="Creating the teamed interface using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="4">Now, select <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span> to<a id="id127" class="calibre1"/> create the team<a id="id128" class="calibre1"/> interface:<div class="mediaobject"><img src="../images/00025.jpeg" alt="Creating the teamed interface using nmtui" class="calibre10"/></div><p class="calibre15"> </p><p class="calibre13">Your new team<a id="id129" class="calibre1"/> interface will now be listed in the <a id="id130" class="calibre1"/>connections list, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00026.jpeg" alt="Creating the teamed interface using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Creating the teamed interface with kickstart"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec22" class="calibre1"/>Creating the teamed interface with kickstart</h3></div></div></div><p class="calibre7">Open your <code class="email">kickstart</code> file <a id="id131" class="calibre1"/>with your favorite editor and <a id="id132" class="calibre1"/>perform the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Look for the network configuration parameters within your <code class="email">kickstart</code> file by running the following command:<div class="informalexample"><pre class="programlisting">...
network --device=eth0
...</pre></div></li><li class="listitem" value="2">Next, add the following configuration parameters:<div class="informalexample"><pre class="programlisting">network --device=team0 --teamslaves="eth1,eth2" --bootproto=static --ip=10.0.0.2 --netmask=255.0.0.0 --gateway=10.0.0.1</pre></div></li></ol><div class="calibre14"/></div></div></div></div>

<div class="book" title="Creating a teamed interface">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch03lvl2sec66" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">Teaming comes with runners—a way of load-sharing backup methods that you can assign to your team:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre8">active-backup</strong></span>: In this, one<a id="id133" class="calibre1"/> physical interface is used, while the others are kept as backup</li><li class="listitem"><span class="strong"><strong class="calibre8">broadcast</strong></span>: In this, data <a id="id134" class="calibre1"/>is transmitted over all physical interfaces' selectors</li><li class="listitem"><span class="strong"><strong class="calibre8">LACP</strong></span>: This <a id="id135" class="calibre1"/>implements <code class="email">802.3ad</code> Link Aggregation Control Protocol</li><li class="listitem"><span class="strong"><strong class="calibre8">loadbalance</strong></span>: This <a id="id136" class="calibre1"/>performs active Tx load balancing and uses a BPF-based Tx port</li><li class="listitem"><span class="strong"><strong class="calibre8">round-robin</strong></span>: The <a id="id137" class="calibre1"/>data is transmitted over all physical interfaces in turn</li></ul></div><p class="calibre7">These can also be defined upon creation using either of the presented options here:</p><div class="book" title="nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec23" class="calibre1"/>nmcli</h3></div></div></div><p class="calibre7">Add <code class="email">team.config "{\"runner\":{\"name\": \"activebackup\"}}"</code> to your command to create<a id="id138" class="calibre1"/> your team interface, and substitute <code class="email">activebackup</code> with the runner that you wish to use.</p></div><div class="book" title="nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec24" class="calibre1"/>nmtui</h3></div></div></div><p class="calibre7">Fill out the JSON configuration<a id="id139" class="calibre1"/> field for the team interface with <code class="email">{"runner": {"name": "activebackup"}}</code>, and substitute <code class="email">activebackup</code> with the runner that you wish to use.</p><div class="mediaobject"><img src="../images/00027.jpeg" alt="nmtui" class="calibre10"/></div><p class="calibre11"> </p></div><div class="book" title="kickstart"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec25" class="calibre1"/>kickstart</h3></div></div></div><p class="calibre7">Add <code class="email">--teamconfig="{\"runner\":{\"name\": \"activebackup\"}}"</code> to your team device line, and<a id="id140" class="calibre1"/> substitute <code class="email">activebackup</code> with the runner that you wish to use.</p><p class="calibre7">The options provided to create the team interface are bare bones using <code class="email">nmcli</code>. If you wish to add a connection and interface name, use <code class="email">con-name</code> and <code class="email">ifname</code>, respectively, in this way:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type team con-name team0 ifname team0 ip4 10.0.0.2/8 gw4 10.0.0.1</strong></span>
<span class="strong"><strong class="calibre8">Connection 'team0' (e1856313-ecd4-420e-96d5-c76bc00794aa) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div><p class="calibre7">The same is true for adding the team slaves, except for <code class="email">ifname</code>, which is required to specify the correct interface:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~# nmcli connection add type team-slave con-name team0-slave0 ifname eth1 master team0</strong></span>
<span class="strong"><strong class="calibre8">Connection 'team0-slave0' (3cb2f603-1f73-41a0-b476-7a356d4b6274) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~# nmcli connection add type team-slave con-name team0-slave1 ifname eth2 master team0</strong></span>
<span class="strong"><strong class="calibre8">Connection 'team0-slave1' (074e4dd3-8a3a-4997-b444-a781114c58c9) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~#</strong></span>
</pre></div></div></div></div>

<div class="book" title="Creating a teamed interface">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch03lvl2sec67" class="calibre1"/>See also</h2></div></div></div><p class="calibre7">For more information on the <a id="id141" class="calibre1"/>networking team daemon and "runners", refer to the<a id="id142" class="calibre1"/> following URL:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Understanding_the_Network_Teaming_Daemon_and_the_Runners.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Understanding_the_Network_Teaming_Daemon_and_the_Runners.html</a>
</p><p class="calibre7">For more information on using <code class="email">nmcli</code> to <a id="id143" class="calibre1"/>create team interfaces, take a look at the following link:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Configure_a_Network_Team_Using-the_Command_Line.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Configure_a_Network_Team_Using-the_Command_Line.html</a>
</p><p class="calibre7">For more information on <a id="id144" class="calibre1"/>using <code class="email">nmtui</code> to create team interfaces, follow this link:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Configure_a_Network_Team_Using_the_Text_User_Interface_nmtui.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Configure_a_Network_Team_Using_the_Text_User_Interface_nmtui.html</a>
</p><p class="calibre7">For more information on creating team<a id="id145" class="calibre1"/> interfaces in kickstart scripts, the following link will be useful:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html</a>
</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating a bridge"><div class="book" id="VF2I2-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec27" class="calibre1"/>Creating a bridge</h1></div></div></div><p class="calibre7">A network bridge is a logical <a id="id146" class="calibre1"/>device that forwards traffic between connected physical interfaces based on MAC addresses. This kind of bridge can be used to emulate a hardware bridge in virtualization applications, such as KVM, to share the NIC with multiple virtual NICs.</p></div>

<div class="book" title="Creating a bridge">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec68" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">To bridge two physical networks, we need two network interfaces. Your physical interfaces should never be configured with any address as the bridge will be configured with the IP address(es).</p></div></div>

<div class="book" title="Creating a bridge">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec69" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre7">For the sake of ease, the physical network interfaces we will bridge are <code class="email">eth1</code> and <code class="email">eth2</code>. The IPv4 address will be <code class="email">10.0.0.2</code> with a subnet mask of <code class="email">255.0.0.0</code> and a default gateway of <code class="email">10.0.0.1</code>.</p><div class="book" title="Creating a bridge using nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec26" class="calibre1"/>Creating a bridge using nmcli</h3></div></div></div><p class="calibre7">Make sure that you<a id="id147" class="calibre1"/> activate the bridge after configuring the bridge and <a id="id148" class="calibre1"/>interfaces! Here are the steps that you need to perform for this:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">First, create the bridge connection via the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type bridge ip4 10.0.0.2/8 gw4 10.0.0.1</strong></span>
<span class="strong"><strong class="calibre8">Connection 'bridge' (36e40910-cf6a-4a6c-ae28-c0d6fb90954d) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="2">Add <code class="email">eth1</code> to the bridge, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type bridge-slave ifname eth1 master bridge</strong></span>
<span class="strong"><strong class="calibre8">Connection 'bridge-slave-eth1' (6821a067-f25c-46f6-89d4-a318fc4db683) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="3">Next, add <code class="email">eth2</code> to the bridge using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type bridge-slave ifname eth2 master bridge</strong></span>
<span class="strong"><strong class="calibre8">Connection 'bridge-slave-eth2' (f20d0a7b-da03-4338-8060-07a3775772f4) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="4">Activate the bridge by executing the following:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~# nmcli connection up bridge</strong></span>
<span class="strong"><strong class="calibre8">Connection successfully activated (master waiting for slaves) (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/30)</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></li><li class="listitem" value="5">Now, check your <a id="id149" class="calibre1"/>network connection by running the following<a id="id150" class="calibre1"/> commands:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection show</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli device status</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli device show bridge</strong></span>
</pre></div><p class="calibre13">Here is an example output of the preceding commands:</p><div class="mediaobject"><img src="../images/00028.jpeg" alt="Creating a bridge using nmcli" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Creating a bridge using nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec27" class="calibre1"/>Creating a bridge using nmtui</h3></div></div></div><p class="calibre7">Launch <code class="email">nmtui</code> and <a id="id151" class="calibre1"/>select <span class="strong"><strong class="calibre8">Edit a connection</strong></span>. After this, follow these steps <a id="id152" class="calibre1"/>to create a bridge using <code class="email">nmtui</code>:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Create a bridge connection by selecting <span class="strong"><strong class="calibre8">&lt;Add&gt;</strong></span> and <span class="strong"><strong class="calibre8">Bridge</strong></span> from the connection list and then click on <span class="strong"><strong class="calibre8">&lt;Create&gt;</strong></span>:<div class="mediaobject"><img src="../images/00029.jpeg" alt="Creating a bridge using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="2">Fill out the presented form with the required information:<div class="mediaobject"><img src="../images/00030.jpeg" alt="Creating a bridge using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="3">Next, add the two <a id="id153" class="calibre1"/>network interfaces by selecting <span class="strong"><strong class="calibre8">&lt;Add&gt;</strong></span> <a id="id154" class="calibre1"/>and providing the requested information for each interface:<div class="mediaobject"><img src="../images/00031.jpeg" alt="Creating a bridge using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="4">Finally, select <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span> to<a id="id155" class="calibre1"/> create <a id="id156" class="calibre1"/>the bridge:<div class="mediaobject"><img src="../images/00032.jpeg" alt="Creating a bridge using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div><p class="calibre7">Your new <a id="id157" class="calibre1"/>bridge <a id="id158" class="calibre1"/>will now be listed in the connections list:</p><div class="mediaobject"><img src="../images/00033.jpeg" alt="Creating a bridge using nmtui" class="calibre10"/></div><p class="calibre11"> </p></div><div class="book" title="Creating a bridge with kickstart"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec28" class="calibre1"/>Creating a bridge with kickstart</h3></div></div></div><p class="calibre7">Edit your <code class="email">kickstart</code> file with <a id="id159" class="calibre1"/>your favorite editor through the<a id="id160" class="calibre1"/> following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Look for the configuration parameters within your <code class="email">kickstart</code> file using this command line:<div class="informalexample"><pre class="programlisting">...
network --device=eth0
...</pre></div></li><li class="listitem" value="2">Now, add the following configuration parameters:<div class="informalexample"><pre class="programlisting">network --device=bridge0 --bridgeslaves="eth1,eth2" --bootproto=static --ip=10.0.0.2 --netmask=255.0.0.0 --gateway=10.0.0.1</pre></div></li></ol><div class="calibre14"/></div></div></div></div>

<div class="book" title="Creating a bridge">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch03lvl2sec70" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">The options provided to create the bridge are bare bones using <code class="email">nmcli</code>. If you wish to add a connection and interface name, use <code class="email">con-name</code> and <code class="email">ifname</code>, respectively, in this way:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~# nmcli connection add type bridge con-name bridge0 ifname bridge0 ip4 10.0.0.2/8 gw4 10.0.0.1</strong></span>
<span class="strong"><strong class="calibre8">Connection 'bridge0' (d04180be-3e80-4bd4-a0fe-b26d79d71c7d) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~#</strong></span>
</pre></div><p class="calibre7">The same is true for adding the bridge slaves, except for <code class="email">ifname</code>, which is required to specify the correct interface:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection add type bridge-slave con-name bridge0-slave0 ifname eth1 master bridge0</strong></span>
<span class="strong"><strong class="calibre8">Connection 'bridge0-slave0' (3a885ca5-6ffb-42a3-9044-83c6142f1967) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]# nmcli connection add type team-slave con-name team0-slave1 ifname eth2 master team0</strong></span>
<span class="strong"><strong class="calibre8">Connection 'bridge0-slave1' (f79716f1-7b7f-4462-87d9-6801eee1952f) successfully added.</strong></span>
<span class="strong"><strong class="calibre8">~]#</strong></span>
</pre></div></div></div>

<div class="book" title="Creating a bridge">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch03lvl2sec71" class="calibre1"/>See also</h2></div></div></div><p class="calibre7">For more information on creating <a id="id161" class="calibre1"/>network bridges using <code class="email">nmcli</code>, go to the following URL:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Network_Bridging_Using_the_NetworkManager_Command_Line_Tool_nmcli.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/sec-Network_Bridging_Using_the_NetworkManager_Command_Line_Tool_nmcli.html</a>
</p><p class="calibre7">For more information on creating <a id="id162" class="calibre1"/>network bridges using <code class="email">nmtui</code>, go to this website:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/ch-Configure_Network_Bridging.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/ch-Configure_Network_Bridging.html</a>
</p><p class="calibre7">For more information on <a id="id163" class="calibre1"/>kickstart and bridging, go to the following website:</p><p class="calibre7">
<a class="calibre1" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html</a>
</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Configuring IPv4 settings" id="10DJ41-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec28" class="calibre1"/>Configuring IPv4 settings</h1></div></div></div><p class="calibre7">Changing your IP addresses is <a id="id164" class="calibre1"/>pretty straightforward in the old <code class="email">ifcfg</code>-style files, and it's actually pretty simple using <code class="email">NetworkManager</code> tools as well.</p><p class="calibre7">As kickstart is only used to set up a system, it is not relevant to go in depth into this matter in this recipe.</p></div>

<div class="book" title="Configuring IPv4 settings" id="10DJ41-501a83dd54944cb1bf060a2ce9fab11f">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec72" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre7">Let's change our current IPv4 address and gateway for <code class="email">eth1</code> to <code class="email">10.0.0.3</code>/<code class="email">8</code>, with <code class="email">10.0.0.2</code> as the default gateway.</p><div class="book" title="Setting your IPv4 configuration using nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec29" class="calibre1"/>Setting your IPv4 configuration using nmcli</h3></div></div></div><p class="calibre7">Perform the <a id="id165" class="calibre1"/>following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Set the ipv4 information <a id="id166" class="calibre1"/>by executing the following command line:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection modify eth0 ipv4.addresses 10.0.0.3/8 ipv4.gateway 10.0.0.2</strong></span>
</pre></div></li><li class="listitem" value="2">Now, run the following to verify the information:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection show eth0</strong></span>
</pre></div><p class="calibre13">Here is an example output of the preceding commands:</p><div class="mediaobject"><img src="../images/00034.jpeg" alt="Setting your IPv4 configuration using nmcli" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Setting your IPv4 configuration using nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec30" class="calibre1"/>Setting your IPv4 configuration using nmtui</h3></div></div></div><p class="calibre7">The <code class="email">nmtui</code> tool takes a <a id="id167" class="calibre1"/>bit more work, but the end result <a id="id168" class="calibre1"/>remains the same. Perform the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Start <code class="email">nmtui</code>, select the interface that you wish to modify, and click on <span class="strong"><strong class="calibre8">&lt;Edit...&gt;</strong></span>:<div class="mediaobject"><img src="../images/00035.jpeg" alt="Setting your IPv4 configuration using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="2">Now, modify the IPv4 configuration to your liking and click on <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span>.</li></ol><div class="calibre14"/></div></div></div></div>

<div class="book" title="Configuring IPv4 settings" id="10DJ41-501a83dd54944cb1bf060a2ce9fab11f">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec73" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">Managing IPv6 ip addresses is as straightforward as configuring your IPv4 counterparts.</p><p class="calibre7">The options you need to use in kickstart to set your ip address and gateway are:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">--ip</code>: This is used to set the system's IPv4 address</li><li class="listitem"><code class="email">--netmask</code>: This is used for the subnet mask</li><li class="listitem"><code class="email">--gateway</code>: This is used to set the IPv4 gateway</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Configuring your DNS resolvers" id="11C3M1-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec29" class="calibre1"/>Configuring your DNS resolvers</h1></div></div></div><p class="calibre7">DNS servers are <a id="id169" class="calibre1"/>stored in <code class="email">/etc/resolv.conf</code>. You can also manage this file using <code class="email">NetworkManager</code>.</p><p class="calibre7">As with the previous recipe, and for the same reasons, this recipe won't go into the <code class="email">kickstart</code> options.</p></div>

<div class="book" title="Configuring your DNS resolvers" id="11C3M1-501a83dd54944cb1bf060a2ce9fab11f">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec74" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre7">Let's set the DNS resolvers for <code class="email">eth1</code> to point to Google's public DNS servers: <code class="email">8.8.8.8</code> and <code class="email">8.8.4.4</code>.</p><div class="book" title="Setting your DNS resolvers using nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec31" class="calibre1"/>Setting your DNS resolvers using nmcli</h3></div></div></div><p class="calibre7">Perform the<a id="id170" class="calibre1"/> following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Set the <a id="id171" class="calibre1"/>DNS servers via the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection modify System\ eth1 ipv4.dns "8.8.8.8,8.8.4.4"</strong></span>
</pre></div></li><li class="listitem" value="2">Now, use the following command to check your configuration:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection show System\ eth1</strong></span>
</pre></div><p class="calibre13">Here is an example output of the preceding commands:</p><div class="mediaobject"><img src="../images/00036.jpeg" alt="Setting your DNS resolvers using nmcli" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Setting your DNS resolvers using nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec32" class="calibre1"/>Setting your DNS resolvers using nmtui</h3></div></div></div><p class="calibre7">The <code class="email">nmtui</code> tool <a id="id172" class="calibre1"/>requires a bit more work to set the DNS <a id="id173" class="calibre1"/>resolvers, as follows:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Start <code class="email">nmtui</code>, select the interface that you wish to modify, and click on <span class="strong"><strong class="calibre8">&lt;Edit...&gt;</strong></span>:<div class="mediaobject"><img src="../images/00037.jpeg" alt="Setting your DNS resolvers using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div></div></div>

<div class="book" title="Configuring your DNS resolvers" id="11C3M1-501a83dd54944cb1bf060a2ce9fab11f">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec75" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">The <code class="email">nmcli</code> tool supports adding multiple DNS servers by separating them with a semicolon. Using a blank value (<code class="email">""</code>) will remove all the DNS servers for this connection.</p><p class="calibre7">Similarly, you can set the DNS search domains for your environment. When using <code class="email">nmcli</code>, you'll need to specify the <code class="email">ipv4.dns-search</code> property.</p><p class="calibre7">Kickstart will allow you to specify the DNS servers using the <code class="email">--nameserver</code> option for each DNS server. If you do not wish to specify any DNS servers, use <code class="email">--nodns</code>. Unfortunately, there is no native way to set the DNS domain search using <code class="email">kickstart</code>. You will have to use <code class="email">nmcli</code>, for example, in the <code class="email">%post</code> section of your <code class="email">kickstart</code> script.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip06" class="calibre1"/>Tip</h3><p class="calibre7">Be careful when setting DNS configurations for multiple network interfaces. <code class="email">NetworkManager</code> adds all your nameservers to your <code class="email">resolv.conf</code> file, but libc may not support more than six nameservers.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Configuring static network routes" id="12AK81-501a83dd54944cb1bf060a2ce9fab11f"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec30" class="calibre1"/>Configuring static network routes</h1></div></div></div><p class="calibre7">In some cases, it is required to<a id="id174" class="calibre1"/> set static routes on your system. As static routes are not natively supported in <code class="email">kickstart</code>, this is not covered in this recipe.</p></div>

<div class="book" title="Configuring static network routes" id="12AK81-501a83dd54944cb1bf060a2ce9fab11f">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec76" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre7">Add static routes to both the <code class="email">192.168.0.0</code>/<code class="email">24</code> and <code class="email">192.168.1.0</code>/<code class="email">24</code> networks via <code class="email">10.0.0.1</code>.</p><div class="book" title="Configuring static network routes using nmcli"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec33" class="calibre1"/>Configuring static network routes using nmcli</h3></div></div></div><p class="calibre7">Here's what <a id="id175" class="calibre1"/>you need to do:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Set <a id="id176" class="calibre1"/>the route using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection modify eth0 ipv4.routes "192.168.0.0/24 10.0.0.1,192.168.1.0/24 10.0.0.1"</strong></span>
</pre></div></li><li class="listitem" value="2">Now, execute the following command line to verify the configuration:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">~]# nmcli connection show eth0</strong></span>
</pre></div><p class="calibre13">Here is an example output of the preceding commands:</p><div class="mediaobject"><img src="../images/00038.jpeg" alt="Configuring static network routes using nmcli" class="calibre10"/></div><p class="calibre15"> </p></li></ol><div class="calibre14"/></div></div><div class="book" title="Configuring network routes using nmtui"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec34" class="calibre1"/>Configuring network routes using nmtui</h3></div></div></div><p class="calibre7">Here are<a id="id177" class="calibre1"/> the steps for this recipe:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Launch <code class="email">nmtui</code>, select <a id="id178" class="calibre1"/>the interface that you wish to modify the static routes for, and click on <span class="strong"><strong class="calibre8">&lt;Edit...&gt;</strong></span>:<div class="mediaobject"><img src="../images/00039.jpeg" alt="Configuring network routes using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="2">Now, select <span class="strong"><strong class="calibre8">&lt;Edit...&gt;</strong></span> next to the <span class="strong"><strong class="calibre8">IPv4 Configuration – Routing</strong></span> entry and enter your routes. Select <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span> to confirm:<div class="mediaobject"><img src="../images/00040.jpeg" alt="Configuring network routes using nmtui" class="calibre10"/></div><p class="calibre15"> </p></li><li class="listitem" value="3">Finally, click <a id="id179" class="calibre1"/>on <span class="strong"><strong class="calibre8">&lt;OK&gt;</strong></span> to confirm<a id="id180" class="calibre1"/> the changes and save them.</li></ol><div class="calibre14"/></div></div></div></div></body></html>