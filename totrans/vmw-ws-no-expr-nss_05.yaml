- en: Chapter 5. Networking VMware Workstation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you just want to do an easy installation of a virtual machine, you don't
    have to worry about VMware Workstation networking; every virtual machine you'll
    create will be able to reach other computers on the network. If you want to set
    up a test environment, networking does become important. In some cases you'll
    need the virtual machines to be on an isolated network, where in other cases you'll
    need to use multiple network interfaces in a virtual machine. In this chapter,
    you'll learn about the different scenarios for setting up VMware Workstation networks.
  prefs: []
  type: TYPE_NORMAL
- en: Using different networking modes
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'If you''re setting up a VMware Workstation environment as a test environment,
    you need to configure the appropriate networking. In some cases, you want virtual
    machines to be connected directly to the physical network, just like if it was
    a normal machine. In other cases, you might not have the IP addresses available
    that are needed to connect each virtual machine directly to the physical network.
    And yet in other situations, you may have to set up a completely isolated VMware
    network. In the following sections, you''ll learn how to accomplish these different
    scenarios in VMware Workstation. To match these different networking scenarios,
    VMware Workstation offers the following networking options:'
  prefs: []
  type: TYPE_NORMAL
- en: Bridged
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: NAT
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Host-only
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Custom
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can find these options on the network settings of a selected virtual machine,
    as well as in the **Network Preferences** menu. There is also an option, **Lan
    Segment**, that allows you to define specific segments in your Local Area Network
    (LAN). For advanced features, such as bandwidth management, you can use the **Advanced**
    option in the **Network Settings**.
  prefs: []
  type: TYPE_NORMAL
- en: 'An important point to recognize when setting up virtual networks is that each
    virtual network needs to be represented by a network interface at the host level.
    This host level network interface allows a virtual machine to communicate to external
    networks, other virtual machines, and if so required, the IP stack on the host
    itself. The following diagram shows a schematic overview of this configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Using different networking modes](img/9182EN_5_1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Virtual network schematic overview
  prefs: []
  type: TYPE_NORMAL
- en: Using bridged networking
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you want your virtual machine to be connected directly to the network, you
    need bridged networking. In bridged networking every virtual machine has its own
    IP address, and this should be an IP address that corresponds to the IP numbering
    plan in the physical network. This is because in bridged mode, you need to be
    able to address each node directly, from every other node in the network, no matter
    if this is a physical host or a virtual host.
  prefs: []
  type: TYPE_NORMAL
- en: In bridged networking, the VMware network adapter that is created at the host
    level doesn't do any filtering at all. It just works in bridged mode, which means
    that it arranges traffic to be sent over one physical interface by multiple virtual
    interfaces simultaneously. When setting up a virtual machine in a bridged mode,
    you need to make sure that the virtual machine's IP address matches the IP address
    that is in use in the physical network.
  prefs: []
  type: TYPE_NORMAL
- en: A special approach to the bridged networking option is replicate physical network
    connection. You can find this option on the network settings of a selected virtual
    machine. When using this option, the virtual machine replicates the exact state
    of the network adapter.
  prefs: []
  type: TYPE_NORMAL
- en: Using NATted networking
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The default networking mode, is NAT (Network Address Translation). In NAT mode,
    the virtual machines are using IP addresses from a different IP subnet to the
    one in use on the physical network. The VMware network adapter works as a NAT
    network adapter. This means that it translates all packages that go out from the
    virtual hosts and replaces their IP address by the IP address of the NAT network
    adapter. Also, the NAT network adapter keeps track of all outstanding connections
    so that if an answer comes in for one of the virtual hosts, the NAT network adapter
    can translate the IP address back to the IP address of the virtual host.
  prefs: []
  type: TYPE_NORMAL
- en: Using NAT networking is the easiest way to set up networking in VMware and therefore,
    this mode is used as the default mode. It does, however, have the drawback that
    virtual machines cannot be reached directly from the outside. At the same time,
    this drawback is a benefit, because it protects virtual machines from security
    risks. However, because of the NAT translation, virtual machines can reach the
    outside network and they can receive replies to the packages they send out.
  prefs: []
  type: TYPE_NORMAL
- en: Using host-only networking
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you want to set up a test network for demo purposes, the host-only network
    is a useful choice. This network type creates an isolated network that won't be
    routed to external networks on its own dedicated IP address. While creating a
    host-only network, you can have the host participating in the network, which is
    useful if you want the network to be completely isolated and, therefore, be portable
    to the maximal extent.
  prefs: []
  type: TYPE_NORMAL
- en: Another advantage of the host-only network is that it works at all times, even
    if the physical network adapter is not connected. Especially on Linux, you risk
    the entire bridged or NATted network to go down if the physical network adapter
    is disconnected. This will never happen if you're on a host-only network.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring virtual networks
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To configure networking in VMware Workstation, you''ll use the **Virtual Network
    Editor**. You can find this tool in the **Edit** menu of VMware Workstation (see
    the following screenshot). By default, it shows the three networks that are created
    at all times: a bridged network with the name `vmnet0`, a host-only network on
    `vmnet1`, and a NAT network on `vmnet8`. For each of the network types you can
    set some specific properties.'
  prefs: []
  type: TYPE_NORMAL
- en: '![Configuring virtual networks](img/9182EN_5_2.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Specifying Virtual Network Properties
  prefs: []
  type: TYPE_NORMAL
- en: Setting bridged network properties
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When using bridged network, you'll need to specify what network interface you
    want to bridge the virtual machines to. This is in particular important if you're
    on a laptop that has a LAN network interface as well as a Wi-Fi interface. The
    default setting is **Automatic**, which means that VMware Workstation tries to
    bridge VMs to the network interface that it detects as available. This doesn't
    always work well and therefore, you can specify that a virtual machine is always
    bridged to the same network interface, or that some interfaces are excluded from
    automatic bridging.
  prefs: []
  type: TYPE_NORMAL
- en: If you want to select a specific network interface to bridge the virtual machine
    to, you select this interface from the drop-down list that reads **Automatic**
    by default. Alternatively, click on **Automatic Settings** to deselect interfaces
    that you don't want to be used for automatic bridging.
  prefs: []
  type: TYPE_NORMAL
- en: For bridged networks, there is no need to specify the properties of a DHCP (Dynamic
    Host Configuration Protocol) server that hands out IP addresses automatically.
    Virtual machines on a bridged network will be able to communicate with the DHCP
    server on the physical network.
  prefs: []
  type: TYPE_NORMAL
- en: Setting host-only network properties
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When using host-only networking, you can set up a DHCP service. This service
    is configured to hand out a range of IP addresses to virtual machines that are
    configured to automatically request an IP address from a DHCP server. By default,
    a DHCP server is configured for the host-only network, and an IP address range
    is assigned automatically. You can change these settings if required.
  prefs: []
  type: TYPE_NORMAL
- en: For some host-only networks, you might want to use fixed IP addresses only.
    If that is the case, you can switch off the local DHCP server for that network.
    You should pay attention to the IP address that you set for the host-only subnet.
    By default, VMware Workstation assigns an IP address for you, but that might not
    meet your internal networking requirements, so make sure to change this IP address
    to match your internal network requirements.
  prefs: []
  type: TYPE_NORMAL
- en: Another option related to host-only networking is to connect a host virtual
    adapter to this network. By default, the host network adapter is a part of the
    host-only network. In some cases, there is no need to include the host, and if
    that is the case for your environment, switch off the host network adapter here.
  prefs: []
  type: TYPE_NORMAL
- en: Setting NAT network properties
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The properties that are assigned to a NAT network interface are similar to the
    host-only network configuration. What it comes down to is that you need to decide
    whether or not to run a DHCP service on the interface, and you can also select
    the subnet IP to be used. If you're not sure, it is fine to let VMware decide
    for you, it will make sure that an unused IP subnet is assigned so that you can
    connect virtual machines to external networks without any additional configuration.
  prefs: []
  type: TYPE_NORMAL
- en: To use networking in VMware Workstation, you'll get different new interfaces
    on your host. Every interface is assigned to the corresponding network in VMware.
    On a Linux host, you can use the command `ip addr show` to get a list of all the
    interfaces and the associated configuration.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Use this command to troubleshoot network configuration problems.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Interfaces down**'
  prefs: []
  type: TYPE_NORMAL
- en: When on a Linux host the physical network interface is down, you'll risk all
    VMware network interfaces being down as well. If you need to set up a test network
    in VMware Workstation in which just the connection between the different virtual
    machines is required and no external connections, use host-only networking. This
    type of networking will always work, irrespective of the actual state of the external
    network interfaces.
  prefs: []
  type: TYPE_NORMAL
- en: Creating your own virtual network
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: By default, VMware Workstation gives you three virtual networks, one for host-only,
    one for bridged, and one for NAT networking. In some cases, you'll need to add
    other networks as well. This is the case if, for instance, you want to configure
    one of the virtual machines with two network cards, so that you can create a network
    bonding configuration in which two network cards create an environment for redundant
    networking. If you have requirements like this, you'll need to set up an additional
    network.
  prefs: []
  type: TYPE_NORMAL
- en: 'To add an additional NAT or host-only network, there are no specific requirements.
    If you want to add an additional bridged network, you must have a network interface
    that isn''t used by a VMware bridged network adapter yet: you can only have one
    bridged network adapter per network card.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The following procedure shows how to do that:'
  prefs: []
  type: TYPE_NORMAL
- en: From VMware Workstation, open the **Edit** menu and select the Virtual Network
    Editor. Click on **Add Network** to add a new network.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Network name**. **vmnet0**, **vmnet1**, and **vmnet8** are in use by
    default, so select a number that isn't used yet. Also specify if you want to create
    a bridged, NAT, or host-only network. If you're creating this network to set up
    one of the virtual machines with a dual network interface, make sure that you
    select a network type that matches.![Creating your own virtual network](img/9182EN_5_3.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Creating a new VMware network
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: After adding the new interface, click on **Save** to write the configuration
    to the disk. The new interface is now ready for use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using advanced network properties on virtual machines
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: On virtual machines, you can specify how the network connection is to be used.
    In this section, you'll learn how to work with advanced properties of the network
    adapter, and you'll also read how to add multiple network cards to one virtual
    machine.
  prefs: []
  type: TYPE_NORMAL
- en: Setting advanced network properties on virtual machines
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To specify advanced settings for the network cards in virtual machines, you
    first select the virtual machine properties. Next, select **Network Adapter**
    that is in use for your virtual machine. This will show all the current configuration
    parameters. From this interface, you can see the type of network connection that
    is currently configured, and if needed, you can change the default type here.
  prefs: []
  type: TYPE_NORMAL
- en: 'You''ll notice that apart from the three default types, two additional types
    are available as well: **Custom** and **LAN segment**. You can use the custom
    network type to configure the virtual machine to use a network connection that
    you''ve created yourself. To select this network connection, make sure that the
    corresponding **vmnet** number is selected. Another option offered is **LAN segment**.
    This is a remainder of virtual machine teams, a feature that was offered from
    VMware Workstation 5.5 until 7.x that no longer exists. Don''t configure this
    option, in VMware Workstation 9 it is of no use anymore.'
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting advanced network properties on virtual machines](img/9182EN_5_4.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Selecting the virtual machine network connection
  prefs: []
  type: TYPE_NORMAL
- en: For each network adapter in a virtual machine, you can set some advanced properties
    as well. These are related to bandwidth that is offered on a virtual machine network
    interface, and acceptable packet loss rates. You can access these properties by
    clicking on the **Advanced** button.
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting advanced network properties on virtual machines](img/9182EN_5_5.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Network adapter advanced properties
  prefs: []
  type: TYPE_NORMAL
- en: To communicate efficiently with other computers and devices in the network,
    it makes sense to specify the available bandwidth on a network card. By default,
    the **Bandwidth** is set to **unlimited** and there is nothing wrong with that
    if you're on a fast Gigabit network. If, however, you're on a network that is
    not that fast, it makes sense to set the **Bandwidth** to the speed of your connection.
    This helps establishing a connection with machines that are significantly slower
    or faster. To specify the bandwidth in use, you can either select the appropriate
    **Bandwidth** from the drop-down list, or manually specify the **Bandwidth** in
    kilobits per second (kbps).
  prefs: []
  type: TYPE_NORMAL
- en: 'Another property that you might want to set is **Packet Loss**. Some operating
    systems while installed as a virtual machine in VMware Workstation will show you
    packet loss on the virtual network card in the operating system. If you''re using
    a Linux virtual machine, look at the error and dropped statistics, as shown by
    the `ifconfig` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: If you see a significant amount of erroneous or dropped packets, it makes sense
    to set **Packet Loss** on the virtual machine network card to approximately the
    percentage of lost packets. If VMware Workstation knows that a relatively large
    amount of dropped packets is to be expected, it helps if it can let the guest
    operating system know about that. If VMware Tools are installed in the guest operating
    system, the errors will be handled in a better way.
  prefs: []
  type: TYPE_NORMAL
- en: The last property that you can set on a network adapter in a virtual machine
    is **MAC Address**. By default, a random generated MAC address is used as the
    unique identifier for each network card. If you need the MAC address to be fixed
    to a specific address, you can do that here.
  prefs: []
  type: TYPE_NORMAL
- en: Using multiple network cards within a virtual machine
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If in your virtual configuration, you want to test installing a server, you
    might want to configure it with multiple network cards to experiment with advanced
    server features, such as DMZ configurations or network bonding. Before you''ll
    be able to configure the network cards from within the guest machine operating
    system, you''ll need to present the network cards to the virtual machine. This
    is not too hard to do, but before you begin, it makes sense to clarify exactly
    what it is that you need:'
  prefs: []
  type: TYPE_NORMAL
- en: If you need to test with advanced security settings, for instance, to configure
    a virtual machine as a host in a DMZ, the virtual machine should have one network
    interface that is connected to the outside world, preferably by using a bridged
    network card. The other network card should be presented to a host-only network
    that is shared with other virtual machines that represent the internal network.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you want to test bonding configurations, where different network cards are
    joined together, you need to make sure that both network interfaces that you want
    to join in the bond are in the same type of network. If you want to bond interfaces
    in a bridged configuration, you need one physical device for each virtual network
    card.![Using multiple network cards within a virtual machine](img/9182EN_5_6.jpg)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Virtual DMZ overview
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Of the configurations previously discussed, the bonding configuration is definitely
    the more difficult one. This is because bonding is never something isolated; if
    you want to set up bonding in a virtual machine, at least one other node in the
    virtual network needs to be set up for bonding as well. You can also set up bonding
    between a virtual machine and the host operating system. To do this, follow the
    instructions of the host operating system for setting up the bond device from
    there. VMware Workstation does not offer advanced options for virtual switch configuration,
    so you cannot define the bond itself from VMware Workstation.
  prefs: []
  type: TYPE_NORMAL
- en: If you're using VMware Workstation to create a test environment that you want
    to import in vSphere, you should be aware of the limitations of VMware Workstation.
    As just discussed, VMware Workstation does not offer any virtual switch configuration
    options, so you need to test these features once the virtual machine is imported
    in vSphere.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Networking is an important part of setting up a test environment in VMware Workstation.
    In this chapter, you have read how to set up a virtual network test environment,
    using bridged, host-only, and NATted virtual network interfaces. You've also read
    how to set advanced features of virtual network cards on the virtual machines
    that you've created. In the next chapter, you'll learn how to access VMware Workstation,
    and the virtual machines it is running remotely.
  prefs: []
  type: TYPE_NORMAL
