<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Persistent or Non-Persistent vDesktops</h1></div></div></div><p>One of the most fundamental decisions that must be made early in the design process is whether to use persistent or non-persistent vDesktops. This decision may impact many areas of the overall VDI, including storage, desktop pools, and management.</p><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Persistent desktops</li><li class="listitem" style="list-style-type: disc">Non-persistent desktops</li><li class="listitem" style="list-style-type: disc">Multisite solutions</li><li class="listitem" style="list-style-type: disc">How to choose for your organization</li></ul></div><p>A<strong> persistent desktop</strong> is a vDesktop that is assigned to a specific end user and whose state is saved after logoff:<a id="id139" class="indexterm"/>
</p><div><img src="img/1124EN_03_01.jpg" alt="Persistent or Non-Persistent vDesktops"/></div><p>For example, in the preceding diagram, if User_1 signs into a VMware View environment for the first time and is automatically assigned vDesktop_7, he would connect to vDesktop_7 today, tomorrow, and until the assignment is removed. If vDesktop_7 has an issue and is unavailable, User_1 will not have a functioning work environment and will be unable to be productive.<a id="id140" class="indexterm"/>
</p><p>When using persistent desktops, VMware View does not automatically reassign the end user to an available vDesktop if their assigned vDesktop is unavailable.</p><p>A persistent vDesktop has persistent data until:<a id="id141" class="indexterm"/>
</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The vDesktop is unassigned from the specific user</li><li class="listitem" style="list-style-type: disc">The desktop pool that the vDesktop is a member of is refreshed (linked clones)</li><li class="listitem" style="list-style-type: disc">The desktop pool that the vDesktop is a member of is recomposed (linked clones)</li></ul></div><p>A<strong> non-persistent desktop</strong> is a vDesktop that is not assigned to a specific end user and instead is made available to the end user population:<a id="id142" class="indexterm"/>
</p><div><img src="img/1124EN_03_02.jpg" alt="Persistent or Non-Persistent vDesktops"/></div><p>For example, in the preceding diagram, if User_1 signs into a VMware View environment, he is assigned one of the available vDesktops (for example, vDesktop_9). When he/she logs off and then logs back in to the VMware View environment, he/she is randomly assigned another available vDesktop from the pool.</p><p>A vDesktop may only have a maximum of one owner at any given time.</p><p>There are several settings that can be manipulated from the VMware View Admin console that dictate how fast a non-persistent vDesktop is unassigned from a user that executes a logoff.</p><div><div><div><div><h1 class="title"><a id="ch03lvl1sec01"/>Persistent desktops</h1></div></div></div><p>Historically, persistent vDesktops have been used in VDI implementations as persistent vDesktops most resemble the physical world and allows both end users and IT administrators to be able to relate to the virtual world. This 1:1 relationship (of end user to vDesktop) is likely the most simplified deployment option available, but its design and cost considerations should be properly understood.<a id="id143" class="indexterm"/>
</p><p>Persistent vDesktops are often the easier political sell to an organization, as each user still maintains possession of an individual (virtual) desktop asset. The following table explains areas related to the persistent vDesktops:<a id="id144" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Area</p>
</th><th style="text-align: left" valign="bottom">
<p>Implications</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Desktop pool sizing</p>
</td><td style="text-align: left" valign="top">
<p>It requires a vDesktop for every end user.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Availability</p>
</td><td style="text-align: left" valign="top">
<p>If a user's assigned vDesktop is unavailable, the user is unable to connect.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Recoverability OS failure</p>
</td><td style="text-align: left" valign="top">
<p>VMware HA can be used to monitor a vDesktop's response to a basic ping command. If a vDesktop does not respond, it can be automatically restarted by VMware vSphere.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Recoverability site failure</p>
</td><td style="text-align: left" valign="top">
<p>There is no easy way to recover from a site failure.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Cost</p>
</td><td style="text-align: left" valign="top">
<p>The VDI must support vDesktops for the entire target user population; this includes compute and storage requirements.</p>
</td></tr></tbody></table></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec01"/>Example scenario</h2></div></div></div><p>For this example, consider that Customer_A has 6,000 end users. They are targeting to move to a VMware View solution. Customer_A operates three shifts a day, with 2,000 end users working at any given time.<a id="id145" class="indexterm"/>
</p><p>The customer has asked for help in scoping the hardware required for the solution (for example, in the form of a bill of materials or list of materials).</p><p>The platform will be Windows 7, with 1 vCPU, 2 GB of RAM, and a 50 GB<code class="literal"> C:\</code> drive.</p><p>The hardware platform is determined to consist of 2U servers with two 6-core processors per server (a total of 12 cores per server).</p><p>Using an average and conservative estimate of 10 VMs per core, it yields 120 vDesktops per server. Using 2 GB of RAM per vDesktop, 240 GB of RAM would be required to support 120 vDesktops. Adding in RAM for overhead and for amounts that can be easily ordered from any vendor rounds 240 GB of RAM up to 256 GB of RAM per server.<a id="id146" class="indexterm"/>
</p><p>Therefore, the server specification used for this solution includes a 2U server with two 6-core processors and 256 GB of RAM. The following table explains about the server specifications and the costs related to the persistent vDesktop:<a id="id147" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Area</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Physical server specification</p>
</td><td style="text-align: left" valign="top">
<p>A 2U server with two 6-core processors and 256 GB of RAM</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Number of vDesktops/physical servers</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total end user population</p>
</td><td style="text-align: left" valign="top">
<p>6,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of end users that require a vDesktop at any given time</p>
</td><td style="text-align: left" valign="top">
<p>2,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of vDesktops that must be provisioned and available</p>
</td><td style="text-align: left" valign="top">
<p>6,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of physical servers required without<em> n</em> + 1 considerations</p>
</td><td style="text-align: left" valign="top">
<p>50</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Estimated number of racks required</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Cost per individual physical server</p>
</td><td style="text-align: left" valign="top">
<p>$40,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Subtotal for physical server costs</p>
</td><td style="text-align: left" valign="top">
<p>$2,000,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of processors</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Estimated VMware vSphere View Premier per vDesktop</p>
</td><td style="text-align: left" valign="top">
<p>$250</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Subtotal for VMware View licensing</p>
</td><td style="text-align: left" valign="top">
<p>$1,500,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Total cost</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>
<strong>$3,500,000</strong>
</p>
</td></tr></tbody></table></div><p>Even though Customer_A only has 2,000 end users online at any given time, the fact that Customer_A has 6,000 unique end users means that to support this environment with persistent vDesktops, the VDI must have 6,000 vDesktops. It is possible to use extremely strict timeout values and logoff parameters to decrease the total number of supported vDesktops (perhaps from 6,000 to 5,000), but it does add risk to the overall solution and may or may not be feasible in a given environment.<a id="id148" class="indexterm"/>
</p><p>Using rough estimates of $40,000 per physical server, the estimated total cost, including server costs and rough estimates for VMware vSphere and VMware View Premiere (excluding bundle or add-on pricing), is $3,500,000.</p><p>This estimate does not include financial considerations for port costs. For example, if each server only required two network connections (for example, using 10GbE), then an additional 99 switch ports would be required for the production network connections and a single out-of-band management connection (for example, HP ILO).</p><p>This estimate does not include financial considerations for additional quantities of VMware vCenter Server Heartbeat, used to protect the VMware vCenter Servers in a VMware View environment. As a large VMware View solution will require additional VMware vCenter Servers likely protected by VMware vCenter Server Heartbeat (approximately $15,000 per vCenter Server).</p><p>This estimate also does not include financial considerations for cooling and power costs associated with the servers.</p><p>Operationally, it's also harder to manage from a human resources perspective. As people leave and enter the company, vDesktop sprawl could potentially eat up resources, as there is no easy way to track and maintain the User Data Disks in conjunction with user accounts.</p><p>A final consideration is the amount of physical U-space the persistent solution requires. For environments that require minimal footprint (for example, tactical installation), every U is of significance.</p><p>In summary, persistent desktops are likely to be an inefficient solution for most environments, especially those of significant scale.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec02"/>Non-persistent desktops</h1></div></div></div><p>Non-persistent vDesktop solutions are starting to become more commonplace as VDI is not only adopted more within the industry but also implemented at a larger scale. As persistent vDesktops often require vast amounts of additional resources, that is, both technical, human, and financial, this book will focus primarily on solutions leveraging non-persistent vDesktops.<a id="id149" class="indexterm"/>
</p><p>While persistent vDesktops are still what most people think of when they think of VDI, it's important to demonstrate the advantages and cost savings realized by leveraging a non-persistent solution in certain situations.</p><p>VDI is less about ownership of a particular virtual machine in the data centre and more about the availability of a desktop resource when needed, which is customized for the user (via that user's specific profile). While there are plenty of solutions that do not require customization of the vDesktop (for example, kiosk solution in a hotel), a large percentage of VDI implementations will be for unique users with potentially unique desktops at an organization. The following table explains about the areas related to the non-persistent vDesktops:<a id="id150" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Area</p>
</th><th style="text-align: left" valign="bottom">
<p>Implications</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Desktop pool sizing</p>
</td><td style="text-align: left" valign="top">
<p>It requires a vDesktop for the maximum number of concurrent users.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Availability</p>
</td><td style="text-align: left" valign="top">
<p>A user will be able to connect to a vDesktop as long as there is an available vDesktop in the pool.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Recoverability OS failure</p>
</td><td style="text-align: left" valign="top">
<p>A user will be able to connect to a vDesktop as long as there is an available vDesktop in the pool.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Recoverability site failure</p>
</td><td style="text-align: left" valign="top">
<p>While it still isn't out of the box to recover from a site failure, a non-persistent vDesktop forces the user's persona to live outside the vDesktop, thereby making the replication and recovery of a viable vDesktop environment much easier.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Cost</p>
</td><td style="text-align: left" valign="top">
<p>The VDI must support vDesktops for the target maximum concurrent users; this includes compute and storage requirements for peak load and not for theoretical maximum, based on the total number of users.</p>
</td></tr></tbody></table></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec02"/>Example scenario</h2></div></div></div><p>To continue from the example earlier in this chapter, Customer_A has 6,000 end users. They are targeting to move to a VMware View solution. Customer_A operates three shifts a day, with 2,000 end users working at any given time. The following table explains about the server specifications and the costs related to the non-persistent vDesktops:<a id="id151" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Area</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Physical server specification</p>
</td><td style="text-align: left" valign="top">
<p>A 2U server with two 6-core processors and 256 GB of RAM</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Number of vDesktops per physical server</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total end user population</p>
</td><td style="text-align: left" valign="top">
<p>6,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of end users that require a vDesktop at any given time</p>
</td><td style="text-align: left" valign="top">
<p>2,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Recoverability site failure</p>
</td><td style="text-align: left" valign="top">
<p>2,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of physical servers required without<em> n</em> + 1 considerations</p>
</td><td style="text-align: left" valign="top">
<p>17</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Estimated number of racks required</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Cost per individual physical server</p>
</td><td style="text-align: left" valign="top">
<p>$40,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Subtotal for physical server costs</p>
</td><td style="text-align: left" valign="top">
<p>$680,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Total number of processors</p>
</td><td style="text-align: left" valign="top">
<p>34</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Estimated VMware vSphere View Premier per vDesktop</p>
</td><td style="text-align: left" valign="top">
<p>$250</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Subtotal for VMware View licensing</p>
</td><td style="text-align: left" valign="top">
<p>$500,000</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Total cost</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>
<strong>$1,180,000</strong>
</p>
</td></tr></tbody></table></div><p>The advantages of a non-persistent solution are clearly evident. For example, in a persistent solution, 50 physical servers were required (versus 17 in a non-persistent solution) to meet the demands of the user load. By saving a significant number of physical servers from being procured (and the associated software licensing), the overall VDI solution requires one third less funding. These savings come from having to support only the maximum concurrent user load instead of having a named vDesktop for every user that will connect to the VDI.<a id="id152" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec03"/>Other non-persistent notes and considerations</h1></div></div></div><p>A non-persistent vDesktop solution should be viewed as volatile. It means that when a user logs off, anything written to the local disk of the vDesktop will be inaccessible, or even destroyed.</p><p>As such, for solutions requiring a user to maintain a profile, custom applications, unique device mappings, and so on, a persona management solution will need to be used as part of the overall VDI. Persona management is covered later in this book.</p><p>Another potential benefit of non-persistent vDesktops, if designed correctly, is that they can potentially reduce the number of help desk calls. This is because the solution focuses less on the availability of an individual's vDesktop, but instead focuses on the availability of a set number of vDesktop resources available in a pool. With an emphasis placed on desktop pool health (and likely user persona health), there's less worrying about a specific user's vDesktop as resources are assigned randomly at login for each end user.<a id="id153" class="indexterm"/>
</p><p>The potential drawback is that there could be an increase in supporting the persona management layer, depending on the solution chosen, its design, and its implementation.<a id="id154" class="indexterm"/>
</p></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec04"/>Multisite solutions</h1></div></div></div><p>A VMware View solution that spans multiple sites is not extremely atypical. College campuses, large corporations, and even small businesses, may have requirements to deliver vDesktops from more than one physical locations.</p><p>In these scenarios, there are a few qualifying questions to ask the organization. They are as follows:<a id="id155" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Should the desktop experience be unique for each end user?<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Essentially, should end user personas be saved to include changes to the desktop environment, customizations to applications, and so on?</li></ul></div></li><li class="listitem">If the answer to the preceding question is yes, should the user persona be consistent across all the sites?<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">For example, if Liliana logs into Site_A and makes modifications to her desktop, should those settings be reflected if Liliana were to log in to the VDI at Site_B?</li></ul></div><div><img src="img/1124EN_03_03.jpg" alt="Multisite solutions"/></div></li></ol></div><p>The preceding diagram shows a multisite VDI with VMware View persistent vDesktops and it is based on a real-world scenario. In this example, Site_A and Site_B are owned by the same organization, Acme Corp. Acme must support worker mobility as two of their locations (Site_A and Site_B) are used by their entire workforce.<a id="id156" class="indexterm"/>
</p><p>A user could be working at Site_A in the morning and then at Site_B in the afternoon for meetings.</p><p>The user, as shown in the preceding diagram, connects to the VDI in Site_A in the morning and as persistent vDesktops are being used, he gets his assigned vDesktop. Remember, when using persistent vDesktops, a user is assigned a specific vDesktop and will keep this assignment until unassigned by the VMware View Administrator.</p><p>When the user leaves Site_A and drives over to Site_B, the following two cases are possible:</p><div><ol class="orderedlist"><li class="listitem">He does not have a vDesktop assigned.</li><li class="listitem">He has a second vDesktop assigned in the completely independent VDI running at Site_B.</li></ol></div><p>Why is the user's vDesktop in Site_A not copied to Site_B?</p><p>This is because VMware View persistent vDesktops are independent virtual machines assigned to an individual user.</p><p>If using VMware View persistent vDesktops, replicating the changes to a peer persistent vDesktop in one site (for example, Site_A) to another site (for example, Site_B) is not an out of the box supported use case. Making persistent VMware View vDesktops behave in such a manner would require significant scripting, a deep understanding of the underlying storage platform, a deep understanding of the VMware View ADAM database, and likely an understanding of how to manipulate objects using PowerCLI.<a id="id157" class="indexterm"/>
</p><p>It would also add too many variables to make it a sustainable VDI model to properly support.</p><p>The authors' experience is that almost anything is possible with VMware View, given enough time, deep knowledge of VMware vSphere and VMware View, and ample time to test. However, VMware View was not designed to support multisite persistent vDesktops.</p><p>Third-party add-on solutions (for example, Unidesk) are potentially helpful in these scenarios.<a id="id158" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec03"/>Why is a non-persistent vDesktop best for a multisite?</h2></div></div></div><p>The following diagram shows a multisite VDI with VMware View non-persistent vDesktops and persona replication:<a id="id159" class="indexterm"/>
</p><div><img src="img/1124EN_03_04.jpg" alt="Why is a non-persistent vDesktop best for a multisite?"/></div><p>Imagine the same aforementioned scenario. An organization has two sites, Site_A and Site_B. A user works at Site_A in the morning, connects to his/her vDesktop running on the VDI in Site_A, and then heads to Site_B for afternoon meetings. When at Site_B, the user connects to the VDI local to that site.<a id="id160" class="indexterm"/>
</p><p>How can the VDI architect make the VDI experience consistent across both the sites?</p><p>By using non-persistent vDesktops, the user's persona is naturally separated from the underlying desktop operating environment. By using VMware View profile management, or a third-party solution such as AppSense or Liquidware Labs ProfileUnity, a non-persistent vDesktop can have the same look and feel of a persistent desktop (for example, customizations are retained) yet offer the advantages of non-persistent vDesktops (for example, greater flexibility).</p><p>In the preceding diagram, the user profiles are stored on a file share that is replicated between the two sites.</p><p>It does not matter which site's VDI the end user connects to as long as his/her profile has been replicated. If a non-persistent vDesktop solution with replicated profiles is implemented, it is important to ensure that there are no unnecessary files in the user persona. Proper filtering techniques can ensure that gigabytes of MP3s or downloaded movies are not considered as part of the user's persona, and prevent them from congesting the replication transmission.<a id="id161" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec04"/>Why distance matters</h2></div></div></div><p>Replication is a function of physics. The size (throughput), speed (latency), and integrity (dropped packets) of the connection between sites as well as the amount of data that needs to be replicated help determine the total time required to replicate a set of profiles. If the goal is for users to not notice a difference whether they log in to Site_A or Site_B, the replicated copy of a given user's persona will have to be ensured.</p><p>This guarantee can only be provided if the underlying network, storage, and replication solution can meet the requirements.</p><p>Typically, the closer the two sites and the smaller the replication data set, the easier it is to meet these requirements.</p><p>Nevertheless, if a multisite VDI solution is to be implemented, it is important to perform a basic network survey to recognize any potential hurdles before actual implementation begins.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec05"/>Profiles in the cloud</h2></div></div></div><p>Multisite VDI solutions with local copies of the user profiles is likely the most common type of multisite VDI solution. This is because the technologies are likely already known by the VDI architect, and the supporting technical personnel are also familiar with similar solutions, even if not related to VDI in the least.<a id="id162" class="indexterm"/>
</p><p>However, should there be a disruption or congestion in replication, it is possible for a user to log in at a site and not have their latest user persona. Even worse, it is possible to end up in a split brain scenario, where changes are lost or corrupted because two master copies of the user persona now exist.</p><p>While this is rare and can be combatted by proper replication design and monitoring of replication health, it is still possible.</p><p>Another type of multisite VDI solution still leverages non-persistent VMware View vDesktops and persona management, but instead of storing local replicated copies of the user personas, they are stored in the cloud.</p><p>The following diagram shows a multisite VDI with the VMware View non-persistent vDesktops and the cloud-based Persona storage:<a id="id163" class="indexterm"/>
</p><div><img src="img/1124EN_03_05.jpg" alt="Profiles in the cloud"/></div><p>The<strong> cloud</strong>, in this sense, is any external storage platform that maintains the user profiles. This could be an Amazon-based solution, a local cloud provider, or a peer's community cloud offering, just to name a few.<a id="id164" class="indexterm"/>
</p><p>In this scenario, there is no cross-site replication because the user profiles are always read and written to the cloud-based storage platform.</p><p>The advantage is that replication issues are no longer a concern, but the drawback is that a connection to the cloud (internet, VPN, and so on) is required to load a user's profile. A lack of connectivity to the cloud storage means that user profiles cannot be read or saved.</p><p>In addition, most cloud providers charge a fee for inbound and/or outbound traffic. Exceptions to this rule (for example, Amazon Direct Connect) do exist however, and may come into play if deciding on a hosting partner.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec05"/>Hybrid: persistent mixed with non-persistent</h1></div></div></div><p>While oftentimes, the first VDI use case at an organization will be clearly persistent or non-persistent, as the VDI adoption increases, so does the amount of use cases that need to be supported.<a id="id165" class="indexterm"/>
</p><p>For example, an organization can initially implement a VMware View solution to support their 250-seat classroom environment. This is likely a non-persistent solution. However, after seeing the benefits of VMware View for their classroom, the organization may decide to roll out VDI on a larger scale. Now instead of just supporting classrooms, the executive team has decided to adopt VDI to support their mobile lifestyle. In addition, the CEO has demanded that he needs to be able to use VDI from his Apple iPad.</p><p>In these types of situations, persistent vDesktops can make life a bit easier. There aren't any user profiles to worry about, per se, and the application distribution is conceptually the same as it is in the physical world. It may also be the easiest to troubleshoot for the executive team, as you know which executive has which desktop quite easily.</p><p>VMware View natively supports the ability to have both persistent and non-persistent desktop pools side by side. There are no real design considerations to be made other than those found in their respective solutions. Profile management can be applied across non-persistent and persistent vDesktops uniformly. One point of consideration is that in the above preceding example of a classroom and an executive team, there may be different support personnel responsible for each group. If that is indeed the case, then the appropriate permissions will need to be defined in the VMware View Admin console.</p></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec06"/>How to choose</h1></div></div></div><p>Fortunately, with VMware View, both persistent and non-persistent vDesktops can be tested side by side to see which works best with an organization's requirements. However, when designing a solution for an organization, some guidelines can be followed to help choose between persistent or non-persistent vDesktops. The following are some questions with their suggested (not necessarily only) solution type. The suggestions assume that the reader will answer<em> yes</em> to the question:<a id="id166" class="indexterm"/>
</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Will users be installing their own native applications? Persistent.</li><li class="listitem" style="list-style-type: disc">Does the environment support a large percentage of shift workers? Non-persistent.</li><li class="listitem" style="list-style-type: disc">Will application virtualization be used? Non-persistent.</li><li class="listitem" style="list-style-type: disc">Will a roaming profile solution be used? Non-persistent.</li><li class="listitem" style="list-style-type: disc">Will the solution support a disaster recovery event? Non-persistent.</li><li class="listitem" style="list-style-type: disc">Will users be assigned their own specific desktop for application or operating system licensing restrictions? Persistent.</li></ul></div><p>These high-level questions will help the architect steer the solution in the proper direction. It is important to keep in mind that that preceding suggestions are not steadfast answers. Finally, it is important to remember that persistent and non-persistent solutions can cohabit in the same VMware View environment.<a id="id167" class="indexterm"/>
</p></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec07"/>Summary</h1></div></div></div><p>The question of persistence is one of the cornerstone decisions of any VDI design. Persistence defines how volatile the vDesktops may be, how applications may be distributed, and the amount of underlying hardware required. For VDI architects, it is important to build a portfolio of proven designs. VDI is a complicated technology as there are a lot of moving parts. Reducing the number of variables for each project is important and this can be done by building some loose parameters. The following is an example mission statement taken from a real-world scenario:</p><p>"I'm the Director of IT for Acme and I have a 2,000-seat classroom environment I need to support, with frequent turnover."</p><p>A VDI architect's formula in this scenario may be:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">VMware View non-persistent vDesktops + VMware ThinApp + zero clients</li></ul></div><p>By already having an idea of what the solution should look like, the architect can focus on some of the key variables as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How large is the desktop image?</li><li class="listitem" style="list-style-type: disc">How will the applications be managed?</li></ul></div><p>Building a VMware View solution from scratch for every project is not efficient and more error-prone than building a stable one from a few solid VMware View designs.</p><p>The next chapter discusses the end devices used to connect into the VMware View solution. End devices are another important part in a VDI solution as choosing the right end device can drastically improve the probability of success. Understanding the limitations of each end device type is important in choosing the right device for a given organization, and this will be discussed in the next chapter.</p></div></body></html>