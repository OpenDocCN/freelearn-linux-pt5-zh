<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;VMware Workstation behind the Scenes"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. VMware Workstation behind the Scenes</h1></div></div></div><p>In the previous chapters, you have learned how to install and use VMware Workstation. In this chapter, you'll take a look behind the scenes and see what has happened on the VMware host computer while the virtual machines were being created. You'll have a look at the configuration files that have been created and the associated disk files. You'll also learn what you need to do when moving VMware disk files to other computers. Also, we'll discuss the different kinds of storage that you can use in a VMware Workstation environment.</p><div class="section" title="Understanding VMware Workstation files"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec25"/>Understanding VMware Workstation files</h1></div></div></div><p>You will change <a id="id114" class="indexterm"/>most of the configuration parameters that your virtual machines are using by hand. However, there are situations where it can be very useful to understand the files that are used behind the virtual machine. A few different file types are used as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">VMware Workstation program files</li><li class="listitem" style="list-style-type: disc">VMware Workstation virtual machine definition files</li><li class="listitem" style="list-style-type: disc">VMware Workstation disk files</li></ul></div><p>In the following sections, these different files will be discussed.</p><div class="section" title="VMware Workstation program files and services"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec18"/>VMware Workstation program files and services</h2></div></div></div><p>After the installation of VMware Workstation, some program files get copied to your computer. Also, the host computer runs some services that allow you to use VMware Workstation and associated services such as networking. This section gives an overview of the most important program files and services.</p><div class="section" title="Program files on Windows hosts"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec02"/>Program files on Windows hosts</h3></div></div></div><p>Most times, you won't do <a id="id115" class="indexterm"/>much with the VMware <a id="id116" class="indexterm"/>Workstation program files that you find at <code class="literal">directory \Program Files (x86)\VMware \VMware Workstation on a Windows host</code>. In this directory, you'll find the different binaries that make up VMware Workstation as well as the ISO files that are used in virtual machines when you're installing VMware Tools.</p><p>Some helper programs have also been installed in this directory; these include the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">vmware</code>: This is the <a id="id117" class="indexterm"/>VMware Workstation binary. This is the program that you'll launch to get access to VMware Workstation.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vmplayer</code>: This is the<a id="id118" class="indexterm"/> free "light" version of VMware Workstation. You'll miss some of the advanced features, but it does allow you to create and run virtual machines.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vmnetconfig</code>: This is the <a id="id119" class="indexterm"/>tool that is used to create networks in VMware. You'll read more about this in <a class="link" href="ch05.html" title="Chapter 5. Networking VMware Workstation">Chapter 5</a>, <span class="emphasis"><em>Networking VMware Workstation</em></span>, of this book.</li></ul></div></div><div class="section" title="Program files on Linux hosts"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec03"/>Program files on Linux hosts</h3></div></div></div><p>If you're using VMware <a id="id120" class="indexterm"/>Workstation on Linux, there <a id="id121" class="indexterm"/>are many more utilities that you can use. To get an overview of all of them, open a Linux root shell prompt and type <code class="literal">vmware[Tab][Tab]</code>. This gives you an overview of all the VMware utilities that are available.</p><div class="mediaobject"><img src="graphics/9182EN_4_1.jpg" alt="Program files on Linux hosts"/><div class="caption"><p>Showing VMware management utilities on Linux</p></div></div><p>A list of all the useful VMware command-line utilities and a short description of what you can do with the command is as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">vmware-hostd</code>: This command interfaces<a id="id122" class="indexterm"/> with the VMware service that runs on your Linux machine. Use this command to automatically start all virtual machines that should be started automatically (<code class="literal">-a</code>) or to automatically upgrade all legacy virtual machines.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vmware-mount</code>: This is a<a id="id123" class="indexterm"/> very useful command that helps you mount virtual disk image files and get information directly out of the virtual disk. This command is helpful if for some reason you cannot start the related virtual machine anymore.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vmware-networks</code>: This<a id="id124" class="indexterm"/> command is used to manage VMware networks from the command line. In <a class="link" href="ch05.html" title="Chapter 5. Networking VMware Workstation">Chapter 5</a>, <span class="emphasis"><em>Networking VMware Workstation</em></span>, which covers networking in detail, you can read more about using this command.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vmware-usbarbitrator</code>: This<a id="id125" class="indexterm"/> command helps you analyze the way that USB keys are managed in a VMware environment. Use this command to troubleshoot USB keys that won't work in a virtual machine. Particularly useful is the (<code class="literal">-info</code>) option that shows log messages about USB keys that are attached to the host and the virtual machines that are used on it.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vmware-vdiskmanaager</code>: This <a id="id126" class="indexterm"/>command-line utility allows you to manage VMware virtual disks outside of a virtual machine. Later in this chapter, you can read about how to use this command to manipulate virtual disk properties.</li></ul></div></div><div class="section" title="VMware services"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec04"/>VMware services</h3></div></div></div><p>After the installation of <a id="id127" class="indexterm"/>VMware Workstation, the host computer will also run several VMware services. An overview and short description of all the services is as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>VMware-hostd service</strong></span>: This is the <a id="id128" class="indexterm"/>VMware <a id="id129" class="indexterm"/>Workstation service. It allows VMware Workstation to run on your computer and also makes it possible to establish remote connections to your instance of VMware Workstation.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>VMware Authorization Service</strong></span>: This<a id="id130" class="indexterm"/> service helps <a id="id131" class="indexterm"/>virtual machines get the appropriate permissions to the host operating system. If the service isn't running, virtual machines will complain about that when they're starting up. If the service is running, you'll be fine.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>VMware NAT Service</strong></span>: This <a id="id132" class="indexterm"/>service is used in the VMware<a id="id133" class="indexterm"/> network to make virtual machines reachable over NAT. Make sure it is running if you're using virtual networks with NAT.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>VMware USB Arbitration Service</strong></span>: USB <a id="id134" class="indexterm"/>devices cannot<a id="id135" class="indexterm"/> be used in the virtual machine and on the host operating system simultaneously. That is why the VMware USB Arbitration Service is used; it makes sure that a USB device is available either in the virtual machine or in the host, but not in both at the same time.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>VMware VMnet DHCP Service</strong></span>: This <a id="id136" class="indexterm"/>service runs<a id="id137" class="indexterm"/> DHCP on the virtual network. Make sure it is running if your virtual machines are configured to get an IP address from a DHCP service.</li></ul></div></div></div></div></div>
<div class="section" title="Working with VMware Workstation files"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec26"/>Working with VMware Workstation files</h1></div></div></div><p>After a virtual machine <a id="id138" class="indexterm"/>has been installed, different files are copied to the host computer. On Linux, by default these files are stored in the folder <code class="literal">vmware</code> that is created in the home folder of the user who creates the files. On Windows, a folder with the name <code class="literal">Virtual Machines</code> is created in the <code class="literal">Documents</code> folder. This folder contains the complete virtual machine configuration.</p><p>The main configuration file of the virtual machine is in the <code class="literal">.vmx</code> file. Associated with that is a <code class="literal">.vmxf</code> file in which the version of virtual hardware used is listed. Then there is the <code class="literal">.log</code> file containing log messages related to the virtual machine, and as the last part of the virtual machine files, there are the <code class="literal">.vmdk</code> files that are used as a virtual disk in the virtual machine. Associated files will be present as well; these are used to represent the current state of a virtual machine and they are not as important as the other files.</p><p>One file type that might be relevant however is the <code class="literal">.lck</code> file. This is the lock file that indicates that a virtual machine is in use. On some occasions, after the shutdown of a virtual machine, it may happen that the lock file is not properly removed. If this is the case (which shows clearly as the machine will refuse to boot, complaining about the <code class="literal">.lck</code> file), you can remove the <code class="literal">.lck</code> files to enable the startup of the virtual machine again.</p><div class="section" title="VMware Workstation virtual machine definition files"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec19"/>VMware Workstation virtual machine definition files</h2></div></div></div><p>For every virtual <a id="id139" class="indexterm"/>machine that you create, a <code class="literal">.vmx</code> file is created. The settings of the virtual machine are stored in this file, <a id="id140" class="indexterm"/>and on some occasions, you'll have to change the settings in the <code class="literal">.vmx</code> file as they won't be available in the graphical management interface. In the following code listing, you can see the <code class="literal">.vmx</code> file of a virtual machine that was created on a Linux host (for better readability, some lines have been removed):</p><div class="informalexample"><pre class="programlisting">vmwarehost:/home/user/vmware/OpenSUSE 64-bit # cat OpenSUSE\ 64-bit.vmx
#!/usr/bin/vmware
.encoding = "UTF-8"
config.version = "8"
virtualHW.version = "9"
vcpu.hotadd = "TRUE"
scsi0.present = "TRUE"
scsi0.virtualDev = "lsilogic"
memsize = "768"
mem.hotadd = "TRUE"
scsi0:0.present = "TRUE"
scsi0:0.fileName = "OpenSUSE 64-bit.vmdk"
ide0:0.present = "TRUE"
ide0:0.fileName = "auto detect"
ide0:0.deviceType = "cdrom-raw"
ethernet0.present = "TRUE"
ethernet0.connectionType = "nat"
ethernet0.virtualDev = "e1000"
ethernet0.wakeOnPcktRcv = "FALSE"
ethernet0.addressType = "generated"
usb.present = "TRUE"
ehci.present = "TRUE"
ehci.pciSlotNumber = "35"
sound.present = "TRUE"
sound.startConnected = "FALSE"
sound.fileName = "-1"
sound.autodetect = "TRUE"
usb.vbluetooth.startConnected = "TRUE"
displayName = "OpenSUSE 64-bit"
guestOS = "opensuse-64"
nvram = "OpenSUSE 64-bit.nvram"
scsi0.pciSlotNumber = "16"
ethernet0.generatedAddress = "00:0c:29:f6:5e:ae"
ethernet0.pciSlotNumber = "33"
ethernet0.generatedAddressOffset = "0"
tools.remindInstall = "FALSE"
vmotion.checkpointFBSize = "134217728"
softPowerOff = "FALSE"
usb:0.deviceType = "hid"
usb:0.port = "0"
usb:0.parent = "-1"
usb:1.speed = "2"
usb:1.deviceType = "hub"
usb:1.port = "1"
usb:1.parent = "-1"
vmx.onpoweronkeys = "1"
floppy0.autodetect = "TRUE"
vmx.onpoweron0.key = "ide0:0.present"
vmx.onpoweron0.value = "FALSE"
ide0:0.autodetect = "TRUE"
ide1:0.autodetect = "TRUE"
vmwarehost:/home/user/vmware/OpenSUSE 64-bit #</pre></div><p>As you can see, the entire configuration of the virtual machine is specified in the <code class="literal">.vmx</code> file. You can also see that it includes some hardware settings that are not easily accessible from the VMware graphical management interface. You can change settings in this file using an editor as long as you make sure that you use the correct syntax.</p><p>An example of a <a id="id141" class="indexterm"/>situation when you might <a id="id142" class="indexterm"/>want to change the <code class="literal">.vmx</code> file's contents is after copying a virtual machine to another host. If you do this, the same MAC address will be used on the other host. To change the MAC address, just open the <code class="literal">.vmx</code> file in an editor and select the value for the <code class="literal">ethernet0.generatedAddress</code> parameter. If you do so, make sure though that the virtual machine is not currently running, or else the settings will be overwritten when you shut down the virtual machines.</p></div><div class="section" title="VMware Workstation disk files"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec20"/>VMware Workstation disk files</h2></div></div></div><p>In VMware Workstation, <a id="id143" class="indexterm"/>files are used to <a id="id144" class="indexterm"/>represent disks in the virtual machine by default. You can find these files in the virtual machine directory and easily recognize them by the <code class="literal">.vmdk</code> extension.</p><p>By default, when creating a virtual machine, several disk files are created. For virtual machines that use large disks, you may find dozens of disk files. This is to ensure that the virtual machine files can be used on any filesystem, even limited filesystems such as FAT32, where the maximal disk size is limited. As discussed before, if you know beforehand that the virtual machines will never be used on a limited filesystem, you're better off creating one big disk file per virtual machine.</p><p>When loading the disk of a virtual machine that uses many virtual machine disk files, the <code class="literal">.vmdk</code> file that doesn't include a <a id="id145" class="indexterm"/>number (such as <code class="literal">s0001.vmdk</code>) is read first. This file contains a list of all the other <code class="literal">.vmdk</code> files that the virtual machine uses, and some other metadata as well. The <a id="id146" class="indexterm"/>following code listing shows a part of the contents of the master <code class="literal">.vmdk</code> file:</p><div class="informalexample"><pre class="programlisting">vmwarehost:/home/user/vmware/OpenSUSE 64-bit # cat OpenSUSE\ 64-bit.vmdk
# Disk DescriptorFile
version=1
encoding="UTF-8"
CID=bb3b482f
parentCID=ffffffff
isNativeSnapshot="no"
createType="twoGbMaxExtentSparse"

# Extent description
RW 4192256 SPARSE "OpenSUSE 64-bit-s001.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s002.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s003.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s004.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s005.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s006.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s007.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s008.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s009.vmdk"
RW 4192256 SPARSE "OpenSUSE 64-bit-s010.vmdk"
RW 20480 SPARSE "OpenSUSE 64-bit-s011.vmdk"

# The Disk Data Base
#DDB

ddb.toolsVersion = "9282"
ddb.adapterType = "lsilogic"
ddb.geometry.sectors = "63"
ddb.geometry.heads = "255"
ddb.geometry.cylinders = "2610"
ddb.uuid = "60 00 C2 97 7d 00 44 2b-53 6d e1 38 f2 fd fc 4b"
ddb.longContentID = "454b171cf307254b174a0264bb3b482f"
ddb.virtualHWVersion = "9"
vmwarehost:/home/user/vmware/OpenSUSE 64-bit #</pre></div><p>As you can see, the disk geometry is included in the master <code class="literal">.vmdk</code> file as well; this makes it possible for any tool that understands VMDK files to read the contents of the disk file and access its data. This is useful in a migration scenario where you might want to import a VMware-created virtual machine to some other virtualization platform.</p></div></div>
<div class="section" title="Configuring advanced storage"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec27"/>Configuring advanced storage</h1></div></div></div><p>In VMware Workstation <a id="id147" class="indexterm"/>virtual machines, you have lots of options to work with virtual machine disks. Some of the most common advanced scenarios will be discussed in the following sections. You'll read about using raw devices as disks in a virtual machine, mounting virtual machine disk files from a Linux host operating system, and changing some properties of virtual disks.</p><div class="section" title="Using devices as virtual machine disks"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec21"/>Using devices as virtual machine disks</h2></div></div></div><p>When a<a id="id148" class="indexterm"/> virtual machine is being created, the virtual machine <a id="id149" class="indexterm"/>will use a virtual machine disk file by default. In some situations, it may be preferable to use a raw device instead of a virtual machine disk file, particularly if the performance matters. As VMware Workstation always uses a filesystem on a host operating system, some delay will be caused as a result of this. When the virtual machine writes directly on a raw device, this delay is avoided. But using a raw device means that you will need to prepare this device before starting the installation.</p><p>If you're using Windows as the host operating system, it means that you'll need to prepare the hard disk of the host in a way that unallocated disk space is available after the installation of the host operating system. Alternatively, you could connect a new dedicated disk to the host computer and use that as a disk in the virtual machine.</p><p>If you're using Linux as the host operating system, you can use Logical Volumes (LVM). On an LVM-based Linux system, it is relatively easy to create an LVM logical volume for each virtual machine. Consult the Linux documentation for advice on how to create LVM logical volumes; an in-depth discussion on LVM is beyond the scope of this book.</p><p>Before starting to work on raw devices as the storage backend for VM disk files, you should realize that you'll lose flexibility. Unless you're using a SAN or NAS, raw devices are always associated to the physical computer that hosts the device. This means that it is hard to move virtual machines that are installed on a physical device to another host computer.</p></div><div class="section" title="Mounting virtual disk files"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec22"/>Mounting virtual disk files</h2></div></div></div><p>Because of the <a id="id150" class="indexterm"/>flexibility of the Linux operating system, some tools are available on Linux hosts only. The <code class="literal">vmware-mount</code> command is one of these tools. Using <code class="literal">vmware-mount</code> allows you to mount individual partitions from a VMware disk, irrespective of whether the disk resides in a <code class="literal">.vmdk</code> file or on a raw device. Because the Linux operating system has support for many filesystems (including Windows filesystems), you'll be able to mount virtually anything using <code class="literal">vmware-mount</code>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip11"/>Tip</h3><p>Never use <code class="literal">vmware-mount</code> to access the disk of a virtual machine that is currently in use. If you do so, you risk making the virtual machine disk file inaccessible. So be sure to shut down the virtual machine before applying the following procedure.</p></div></div><p>The following procedure describes the approach for mounting partitions in a VMware disk file:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To start with, you need to find out which partitions exist within a disk. To find this out, use <code class="literal">vmware-mount -p your-vmdkfile.vmdk</code>. The following code listing shows what the result could look like. As you can see, you'll use <code class="literal">vmware-mount</code> on the master VMDK file as follows:<div class="informalexample"><pre class="programlisting">vmwarehost:/home/user/vmware/OpenSUSE 64-bit # ls *vmdk
OpenSUSE 64-bit-s001.vmdk  …s005.vmdk  OpenSUSE 64-bit-s009.vmdk
OpenSUSE 64-bit-s002.vmdk  …s006.vmdk  OpenSUSE 64-bit-s010.vmdk
OpenSUSE 64-bit-s003.vmdk  …s007.vmdk  OpenSUSE 64-bit-s011.vmdk
OpenSUSE 64-bit-s004.vmdk  …s008.vmdk  OpenSUSE 64-bit.vmdk
vmwarehost:/home/user/vmware/OpenSUSE 64-bit # vmware-mount -p OpenSUSE\ 64-bit.vmdk
Nr      Start       Size Type Id Sytem
-- ---------- ---------- ---- -- ------------------------
 1       2048    2263040 BIOS 82 Linux swap
 2    2265088   39677952 BIOS 83 Linux
vmwarehost:/home/user/vmware/OpenSUSE 64-bit #</pre></div></li><li class="listitem">In the previous code listing, you can see that two partitions exist within the virtual disk. Note the partition number because you'll need it to mount the partition. As in the previous code listing, only partition number 2 contains a Linux filesystem; this is the partition that should be mounted. Mounting the partition means that you have to make it accessible in the filesystem of the Linux host. In Linux this means that you'll have to connect it to a directory. To do this, you need to specify a couple of arguments to <code class="literal">vmware-mount</code>: the path to the disk file, the partition number, and the mount point in the Linux host's filesystem. For instance, this could be a command, such as <code class="literal">vmware-mount OpenSUSE\ 64-bit.vmdk 2 /mnt</code>.</li><li class="listitem">After mounting the partition on the Linux host, you can access its files from the mount point and apply any changes that you would like to make to the file.</li><li class="listitem">Once you have finished with the mounted disk file, you should unmount it as well. The easiest way to do this is using the <code class="literal">-k</code> option with <code class="literal">vmware-mount</code>, followed by the disk ID, as in <code class="literal">vmware-mount -k /OpenSUSE\ 64-bit.vmdk</code>. Note that this will only work if there are no open files in the mounted directory. If you get a warning stating "target is busy", you can also use <code class="literal">vmware-mount -K</code> on the VMDK disk file. This will force the disk file to unmount.</li></ol></div><p>You can also <a id="id151" class="indexterm"/>mount virtual disks from the graphical menu. Select the virtual machine and navigate to <span class="strong"><strong>Settings</strong></span> | <span class="strong"><strong>Harddisk</strong></span> | <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Mounting</strong></span> for a graphical interface that will allow you to mount the disks.</p></div><div class="section" title="Managing VMware virtual disks"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec23"/>Managing VMware virtual disks</h2></div></div></div><p>Another offline<a id="id152" class="indexterm"/> disk manipulation utility that VMware Workstation has to offer is <code class="literal">vmware-vdiskmanager</code>. You can use this option to perform different tasks, including resizing the disk, defragmenting the disk, or checking it for errors.</p><p>Apart from using <code class="literal">vmware-diskmanager</code>, you can also use an option from the graphical VMware Workstation menu by selecting the virtual machine and navigating to <span class="strong"><strong>Settings</strong></span> | <span class="strong"><strong>Harddisk</strong></span> | <span class="strong"><strong>Utilities</strong></span>. You will find the defragment, expand, and compact utilities to perform the tasks discussed here from a graphical environment.</p><p>When using <code class="literal">vmware-vdiskmanager</code>, it's a good idea to tell VMware what kind of disk it is using the <code class="literal">-t n</code> option. The following disk types can be managed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">0</code>: A single growable disk</li><li class="listitem" style="list-style-type: disc"><code class="literal">1</code>: A growable disk that consists of several 2 GB disk files</li><li class="listitem" style="list-style-type: disc"><code class="literal">2</code>: A preallocated disk file</li><li class="listitem" style="list-style-type: disc"><code class="literal">3</code>: A preallocated disk file that is split into several 2 GB files</li><li class="listitem" style="list-style-type: disc"><code class="literal">4</code>: A preallocated ESX-type disk file</li><li class="listitem" style="list-style-type: disc"><code class="literal">5</code>: A compressed disk file</li><li class="listitem" style="list-style-type: disc"><code class="literal">6</code>: A thin provisioned virtual disk as is used in ESX 3.x and later</li></ul></div><p>If you don't know which disk type you need, you probably need type <code class="literal">0</code>, which is the default type that is used by VMware Workstation.</p><p>A nice command to start with is <code class="literal">vmware-vdiskmanager -e</code>; it checks the disk for inconsistencies. You should use this command before performing any action on a virtual disk file; the following command would check a regular VMware Workstation disk file:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>vmware-vdiskmanager -e -t 0 mydisk.vmdk</strong></span>
</pre></div><p>If the virtual disk is a local disk, you occasionally have to defragment it as well. To do this, use the <code class="literal">-d</code> option as in the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>vmware-vdiskmanager -d -t 0 mydisk.vmdk</strong></span>
</pre></div><p>Another useful <a id="id153" class="indexterm"/>command is the one used to expand a virtual disk so you'll have more usable disk space within the virtual operating system. Note that expanding a disk on the host level won't expand the filesystem in the virtual machine, so you will also need to apply instructions specific to the virtual machine's filesystem to expand the disk at that level. To expand a virtual disk, you need to use the <code class="literal">-x</code> file, as in the following command where the size of a preallocated disk file has been expanded to 40 gigabytes:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>vmware-vdiskmanager -x 40G -t 2 mydisk.vmdk</strong></span>
</pre></div><p>Some other options are available with <code class="literal">vmware-vdiskmanager</code>; the type <code class="literal">vmware-vdiskmanager</code> helps you with a complete list of all options.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec28"/>Summary</h1></div></div></div><p>In this chapter, you've read about the way VMware Workstation is organized on the host operating system. You've learned about which services are used and which configuration files are created, and you've also read about some useful management tasks with regard to virtual disks. In the next chapter, you'll learn how to set up virtual networking on VMware Workstation.</p></div></body></html>