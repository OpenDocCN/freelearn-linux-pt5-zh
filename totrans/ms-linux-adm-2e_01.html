<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-15"><a id="_idTextAnchor030"/>1</h1>
<h1 id="_idParaDest-16"><a id="_idTextAnchor031"/>Installing Linux</h1>
<p>Recent years have been marked by a significant rise in the adoption <a id="_idIndexMarker000"/>of <strong class="bold">Linux</strong> as the operating system of choice for both server and desktop computing platforms. From enterprise-grade servers and large-scale cloud infrastructures to individual workstations and small-factor home appliances, Linux has become an ever-present platform for a wide range of applications.</p>
<p>The prevalence of Linux, perhaps now more than ever, brings into the spotlight much-needed administration skills for a growing community of system administrators and developers. In this book, we take a practical approach to Linux administration essentials, with the modern-day system administrator, DevOps team member, and developer in mind.</p>
<p>In this second edition, we will adopt a slightly different approach to installing Linux. As this is a book meant for more advanced readers, we will no longer discuss the basic aspects of installing the operating system in such detail as in the first edition. The information has been updated to the most relevant aspects available as of the beginning of 2023 with regard to operating system versioning.</p>
<p>In this first chapter, we’ll guide you through the Linux installation process, either on physical hardware (bare metal) or using a <strong class="bold">Virtual </strong><strong class="bold">Machine</strong> (<strong class="bold">VM</strong>).</p>
<p>Here are the topics we cover in this chapter:</p>
<ul>
<li>Introducing the Linux operating system</li>
<li>Installing Linux – the basics</li>
<li>Enabling the Windows Subsystem for Linux</li>
<li>Installing Linux – the advanced stages</li>
<li>Linux distributions – a practical guide</li>
</ul>
<h1 id="_idParaDest-17"><a id="_idTextAnchor032"/>Technical requirements</h1>
<p>We will use the following platforms and technologies in this chapter:</p>
<ul>
<li>Linux distributions: Ubuntu</li>
<li>VM hypervisors: Oracle VM VirtualBox, VMware Workstation Player, and Hyper-V</li>
<li>VM host platforms: Windows 11 (equally applicable on macOS)</li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor033"/>Introducing the Linux operating system</h1>
<p>Linux is a relatively modern <a id="_idIndexMarker001"/>operating system created in 1991 by Linus Torvalds, a Finnish computer science student from Helsinki. Originally released as a free and open source platform prohibiting commercial redistribution, Linux eventually adopted the GNU <strong class="bold">General Public Licensing</strong> (<strong class="bold">GPL</strong>) model in 1992. This move played a significant role in <a id="_idIndexMarker002"/>its wide adoption by the developer community and commercial enterprises alike. It is important to note that the Free Software Foundation community distinctly refers to Linux operating systems (or distributions) as <strong class="bold">GNU/Linux</strong> to <a id="_idIndexMarker003"/>emphasize the importance of GNU for free software.</p>
<p>Initially made for Intel x86 processor-based computer architectures, Linux has since been ported to a wide variety of platforms, becoming one of the most popular operating systems currently in use. The genesis of Linux could be considered the origin of an open source alternative to its mighty predecessor, Unix. This system was a commercial-grade operating system developed at the AT&amp;T Bell Labs research center by Ken Thompson and Dennis Ritchie in 1969.</p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor034"/>Exploring Linux distributions</h2>
<p>A Linux operating system<a id="_idIndexMarker004"/> is typically <a id="_idIndexMarker005"/>referred to as a <strong class="bold">distribution</strong>. A Linux distribution, or <strong class="bold">distro</strong>, is <a id="_idIndexMarker006"/>the installation bundle (usually an ISO image) of an operating system that has a collection of tools, libraries, and additional software packages installed on top of the Linux <strong class="bold">kernel</strong>. A<a id="_idIndexMarker007"/> kernel is the core interface between a computer’s hardware and its processes, controlling the communication between the two and managing the underlying resources as efficiently as possible.</p>
<p>The software collection bundled with the Linux kernel typically consists of a bootloader, shell, package management<a id="_idIndexMarker008"/> system, graphical user interface, and various software utilities and applications.</p>
<p>The following diagram is a simplified illustration of a generic Linux distribution architecture:</p>
<div><div><img alt="Figure 1.1 – Simplified view of a generic Linux architecture" src="img/Figure_01.01_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – Simplified view of a generic Linux architecture</p>
<p>There are hundreds of Linux distributions currently available. Among the oldest and arguably most popular <a id="_idIndexMarker009"/>ones are <strong class="bold">Debian</strong>, <strong class="bold">Fedora</strong>, <strong class="bold">openSUSE</strong>, <strong class="bold">Arch Linux</strong>, and <strong class="bold">Slackware</strong>, with<a id="_idIndexMarker010"/> many other Linux distributions either <a id="_idIndexMarker011"/>based upon<a id="_idIndexMarker012"/> or <a id="_idIndexMarker013"/>derived from them. Some of these distros are divided into commercial and community-supported platforms.</p>
<p class="callout-heading">Important note</p>
<p class="callout">As writing this second edition, CentOS became a rolling release and is the base from which<a id="_idIndexMarker014"/> future <strong class="bold">Red Hat Enterprise Linux</strong> (<strong class="bold">RHEL</strong>) versions are derived. Its place was taken by other free community distributions that use the RHEL binaries. Among those, <strong class="bold">Rocky Linux</strong> is a<a id="_idIndexMarker015"/> good example, and we will reference it throughout this book. One other community distribution based on<a id="_idIndexMarker016"/> RHEL is <strong class="bold">AlmaLinux</strong>.</p>
<p>One of the key differences among Linux distributions is the package management system they use and the related Linux package format. We’ll get into more detail on this topic in <a href="B19682_03.xhtml#_idTextAnchor075"><em class="italic">Chapter 3</em></a>. For now, the focus is on choosing the right Linux distribution based on our needs. But before being able to decide, you should first know a little about some of the most widely used distributions. Therefore, in the next section, we will briefly present to you some Linux distros.</p>
<h3>Common Linux distributions</h3>
<p>This section <a id="_idIndexMarker017"/>summarizes the most popular and common Linux distributions at the time of writing this edition, with emphasis on their package manager type. Most of these distros are free and open source platforms. Their commercial-grade variations, if any, are noted:</p>
<ul>
<li><strong class="bold">Fedora, CentOS Stream and RHEL</strong>: CentOS <a id="_idIndexMarker018"/>and its derivatives <a id="_idIndexMarker019"/>use <strong class="bold">Red Hat Package Manager</strong> (<strong class="bold">RPM</strong>) as their <a id="_idIndexMarker020"/>package manager. <strong class="bold">CentOS Stream</strong>, now <a id="_idIndexMarker021"/>a rolling <a id="_idIndexMarker022"/>release distribution, is based on the open source Fedora project. It is suited to both servers and workstations. RHEL <a id="_idIndexMarker023"/>is a<a id="_idIndexMarker024"/> commercial-grade version derived from CentOS Stream, designed to be a stable platform with long-term support. The community distribution that uses RHEL binaries is Rocky Linux.</li>
<li><strong class="bold">Debian</strong>: The<a id="_idIndexMarker025"/> package <a id="_idIndexMarker026"/>manager for Debian and most of its derivatives<a id="_idIndexMarker027"/> is <strong class="bold">Debian Package</strong> (<strong class="bold">DPKG</strong>). Debian is releasing at a much slower pace than other Linux distributions, such as Linux Mint or Ubuntu, for example, but it’s relatively more stable.</li>
<li><strong class="bold">Ubuntu</strong>: Ubuntu<a id="_idIndexMarker028"/> uses <strong class="bold">Advanced Package Tool</strong> (<strong class="bold">APT</strong>) and <a id="_idIndexMarker029"/>DKPG <a id="_idIndexMarker030"/>as package managers. Ubuntu is one of the most popular Linux distributions, releasing every 6 months, with <a id="_idIndexMarker031"/>more stable <strong class="bold">Long Term Support</strong> (<strong class="bold">LTS</strong>) releases every other year.</li>
<li><strong class="bold">Linux Mint</strong>: Linux Mint <a id="_idIndexMarker032"/>also uses APT as its package<a id="_idIndexMarker033"/> manager. Built on top of Ubuntu, Linux Mint is mostly suitable for desktop use, with a lower memory usage than Ubuntu (with the Cinnamon desktop environment, compared to Ubuntu’s GNOME). There’s also a version of Linux Mint built <a id="_idIndexMarker034"/>directly on top of Debian, called <strong class="bold">Linux Mint Debian </strong><strong class="bold">Edition</strong> (<strong class="bold">LMDE</strong>).</li>
<li><strong class="bold">openSUSE</strong>: openSUSE<a id="_idIndexMarker035"/> uses <strong class="bold">RPM</strong>, <strong class="bold">Yet another Setup Tool</strong> (<strong class="bold">YaST</strong>), and <strong class="bold">Zypper</strong> as <a id="_idIndexMarker036"/>package managers. openSUSE has<a id="_idIndexMarker037"/> two versions<a id="_idIndexMarker038"/> available: one is called Tumbleweed and is a rolling release, a leading-edge Linux distribution; the other is Leap, a regular release version, which uses the same code base as SUSE Linux Enterprise. Both versions are suited to desktop and server environments. SUSE Linux Enterprise Server is a commercial-grade platform. openSUSE was regarded as one of the most user-friendly desktop Linux distributions before the days of Ubuntu.</li>
</ul>
<p class="callout-heading">Important note</p>
<p class="callout">In this book, our focus is mainly on the Linux distributions that are widely used in both community and commercial deployments, such as <strong class="bold">Ubuntu</strong>, <strong class="bold">Fedora/Rocky Linux</strong>, and <strong class="bold">openSUSE</strong>. Most of the examples in this book are equally appliable to any Linux distro. We will specify which one we use for given examples or scenarios.</p>
<p>Now that you know a fair amount of information about the most common Linux distros, in the next section we will give you some hints on how to choose a Linux distribution.</p>
<h2 id="_idParaDest-20"><a id="_idTextAnchor035"/>Choosing a Linux distribution</h2>
<p>There are many aspects<a id="_idIndexMarker039"/> involved in selecting a Linux distribution, based on various functional requirements. A comprehensive analysis would be far beyond the scope of this chapter. However, considering a few essential points may help with making the <a id="_idIndexMarker040"/>right decision:</p>
<ul>
<li><strong class="bold">Platform</strong>: The choice between a server, a desktop, or an embedded platform is probably one of the top decisions in selecting a Linux distribution. Linux server platforms and embedded systems are usually configured with the core operating system services and essential components required for specific applications (such as networking, HTTP, FTP, SSH, and email), mainly for performance and optimization considerations. On the other hand, Linux desktop workstations are loaded (or pre-loaded) with a relatively large number of software packages, including a <a id="_idIndexMarker041"/>graphical user interface for a more user-friendly experience. Some Linux distributions come with server and desktop flavors (such as <strong class="bold">Ubuntu</strong>, <strong class="bold">Fedora</strong>, and <strong class="bold">openSUSE</strong>), but most distros have a minimal operating system, with further configuration needed (such as <strong class="bold">Rocky Linux</strong>, and <strong class="bold">Debian</strong>). Usually, such distributions would be good candidates for Linux server platforms. There are also Linux distributions specifically designed for desktop use, such<a id="_idIndexMarker042"/> as <strong class="bold">elementary OS</strong>, <strong class="bold">Pop!_OS</strong>, or <strong class="bold">Deepin</strong>. For <a id="_idIndexMarker043"/>embedded systems, we have highly optimized <a id="_idIndexMarker044"/>Linux distros, such <a id="_idIndexMarker045"/>as <strong class="bold">Raspbian</strong> and <strong class="bold">OpenWRT</strong>, to <a id="_idIndexMarker046"/>accommodate small-form factor devices with limited hardware resources.</li>
<li><strong class="bold">Infrastructure</strong>: Today we see a vast array of application and server platform deployments spanning from hardware and local (on-premises) data centers to hypervisors, containers, and cloud infrastructures. Weighing a Linux distribution against any of these types of deployments should take into consideration the resources and costs involved. For example, a multi-CPU, large-memory, and generally high-footprint Linux instance may cost more to run in the cloud or a <strong class="bold">Virtual Private Server</strong> (<strong class="bold">VPS</strong>) hosting <a id="_idIndexMarker047"/>infrastructure. Lightweight Linux distributions take fewer resources and are easier to scale in environments with containerized workloads and services (for instance, with Kubernetes and Docker). Most Linux distributions now have their cloud images available for all major public cloud providers (for instance, Amazon AWS, Microsoft Azure, and Google Compute Engine). Docker container images for various Linux distributions are available for download on Docker Hub (<a href="https://hub.docker.com">https://hub.docker.com</a>). Some Docker images are larger (heavier) than others. For example, the <strong class="bold">Ubuntu Server</strong> Docker image<a id="_idIndexMarker048"/> outweighs the <strong class="bold">Alpine Linux</strong> Docker image<a id="_idIndexMarker049"/> considerably, and this may tip the balance when choosing one distribution over the other. Also, to address the relatively new shift to containerized workflows and services, some Linux distributions offer a streamlined or more optimized version of their operating<a id="_idIndexMarker050"/> system to support the underlying application infrastructure. For example, Fedora features <a id="_idIndexMarker051"/>the <strong class="bold">Fedora CoreOS</strong> (for containerized workflows) and <strong class="bold">Fedora IoT</strong> (for Internet of Things ecosystems).</li>
<li><strong class="bold">Performance</strong>: Arguably, all <a id="_idIndexMarker052"/>Linux distributions can be tweaked to high-performance benchmarks in terms of CPU, GPU, memory, and storage. Performance should be considered very closely with the platform and the application of choice. An email backend won’t perform very well on a Raspberry Pi, while a media streaming server would do just fine (with some external storage attached). The configuration effort for tuning the performance should also be taken into<a id="_idIndexMarker053"/> consideration. <strong class="bold">Rocky Linux</strong>, <strong class="bold">Debian</strong>, <strong class="bold">openSUSE</strong>, <strong class="bold">Fedora</strong> and <strong class="bold">Ubuntu</strong> all come with server and <a id="_idIndexMarker054"/>desktop <a id="_idIndexMarker055"/>versions <a id="_idIndexMarker056"/>reasonably optimized for their<a id="_idIndexMarker057"/> use. The server versions can be easily customized for a particular application or service, by only limiting the software packages to those that are essential for the application. To further boost performance, some would go to the extent of recompiling a lightweight Linux distro (for instance, <strong class="bold">Gentoo</strong>) to<a id="_idIndexMarker058"/> benefit from compiler-level optimizations in the kernel for specific subsystems (for instance, the networking stack or user permissions). As with any other criteria, choosing a Linux distribution based on some application or platform performance is a balancing act, and most of the time, common Linux distros will perform exceptionally well.</li>
<li><strong class="bold">Security</strong>: When considering security, we have to keep in mind that a system is only as secure as its weakest link. An insecure application or system component would put the entire system at risk. Therefore, the security of a Linux distribution should be scrutinized as it pertains to the related application and platform environment. We can talk about <em class="italic">desktop security</em> for a Linux distro serving as a desktop workstation, for example, with the user browsing the internet, downloading media, installing various software packages, and running different applications. The safe handling of all these operations (against malware, viruses, and intrusions) would make for a good indicator of how secure a system can be. There are Linux distros <a id="_idIndexMarker059"/>that are highly <a id="_idIndexMarker060"/>specialized <a id="_idIndexMarker061"/>in application security and isolation and <a id="_idIndexMarker062"/>are well suited for desktop use: <strong class="bold">Qubes OS</strong>, <strong class="bold">Kali Linux</strong>, <strong class="bold">Whonix</strong>, <strong class="bold">Tails</strong>, and <strong class="bold">Parrot Security OS</strong>. Some <a id="_idIndexMarker063"/>of these <a id="_idIndexMarker064"/>distributions have been developed for penetration testing and security research.</li>
</ul>
<p>On the other hand, we may consider the <em class="italic">server security</em> aspect of Linux server distributions. In this case, regular operating system updates with the latest repositories, packages, and components would go a long way to securing the system. Removing unused network-facing services and configuring stricter firewall rules are further steps for reducing the possible attack surface. Most Linux distributions are well equipped with the required tools and services to accommodate this reconfiguration. Opting for a distro with <em class="italic">frequent</em> and <em class="italic">stable</em> upgrades or release cycles is <a id="_idIndexMarker065"/>generally <a id="_idIndexMarker066"/>the first <a id="_idIndexMarker067"/>prerequisite <a id="_idIndexMarker068"/>for a secure platform (for instance, <strong class="bold">Rocky Linux</strong>, <strong class="bold">RHEL</strong>, <strong class="bold">Ubuntu LTS</strong>, or <strong class="bold">SUSE </strong><strong class="bold">Enterprise Linux</strong>).</p>
<ul>
<li><strong class="bold">Reliability</strong>: Linux distributions with aggressive release cycles and a relatively large amount of new code added in each release are usually less stable. For such distros, it’s essential to choose a <em class="italic">stable</em> version. <strong class="bold">Fedora</strong>, for <a id="_idIndexMarker069"/>example, has rapid releases, being one of the fastest-progressing Linux platforms. Yet, we should not heed the myths claiming that Fedora or other similar fast-evolving Linux distros, such as openSUSE Tumbleweed, are less reliable. Don’t forget, some of the most reliable Linux distributions <a id="_idIndexMarker070"/>out there, <strong class="bold">RHEL</strong> and <strong class="bold">SUSE Linux Enterprise (SLE)</strong>, are <a id="_idIndexMarker071"/>derived from Fedora and openSUSE, respectively.</li>
</ul>
<p>There’s no magic formula for <a id="_idIndexMarker072"/>deciding on a Linux distribution. In most cases, the choice of platform (be it server, desktop or IoT) combined with your own personal preferences is what determines the Linux distribution to go for. With production-grade environments, most of the previously enumerated criteria become critical, and the available options for our Linux platform of choice would be reduced to a few industry-proven solutions.</p>
<p class="callout-heading">Important note</p>
<p class="callout">In this book, our focus is mainly on the Linux distributions that are widely used in both community and commercial deployments, such as <strong class="bold">Ubuntu</strong>, <strong class="bold">Fedora/Rocky Linux</strong>, and <strong class="bold">openSUSE</strong>. That said, most of the examples in this book are equally applicable to any Linux distro. We will specify which one we use for given examples or scenarios. </p>
<p> Now that you know a bit about what a Linux distribution is, along with the most commonly used ones and their use cases, in the following two sections we will present the basic and advanced aspects of Linux installation.</p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor036"/>Installing Linux – the basics</h1>
<p>This <a id="_idIndexMarker073"/>section serves as a quick guide for the basic installation of an arbitrary Linux distribution. For hands-on examples and specific guidelines, we use Ubuntu. We also take a brief look at different environments hosting a Linux installation. There is an emerging trend of hybrid cloud infrastructures, with a mix of on-premises data center and public cloud deployments, where a Linux host can either be a bare-metal system, a hypervisor, a VM, or a Docker container.</p>
<p>In most of these cases, the same principles apply when performing a Linux installation. For detail on Docker-containerized Linux deployments, see <a href="B19682_13.xhtml#_idTextAnchor276"><em class="italic">Chapter 13</em></a>.</p>
<p>In the following sections, we will show you how to install Linux on bare metal and on a Windows 11 host using different VM hypervisors, and using WSL. Installing on a macOS host is basically the same as installing on Windows using a VM hypervisor, and we will not cover that.</p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor037"/>How to install Linux on bare metal</h2>
<p>This section describes <a id="_idIndexMarker074"/>the essential steps required for a<a id="_idIndexMarker075"/> Linux installation on <strong class="bold">bare metal</strong>. We use this term when referring to hardware such as laptops, desktops, workstations, and servers. In a nutshell, the main steps are downloading the ISO image, creating bootable media, trying out the live mode, and finally, doing the installation.</p>
<p>The steps used here are equally applicable to virtual machine installations, as you will see in the following sections.</p>
<h3>Step 1 – Download</h3>
<p>We start by <a id="_idIndexMarker076"/>downloading our Linux distribution of choice. Most distributions are typically available in ISO format on the distribution’s website. For example, we can download Ubuntu Desktop at <a href="https://ubuntu.com/download/desktop">https://ubuntu.com/download/desktop</a>.</p>
<p>Using the ISO image, in the next step we can create the bootable media required for the Linux installation. We can also use the ISO image to install Linux in a VM, as shown in the next section.</p>
<h3>Step 2 – Create the bootable media</h3>
<p>As <a id="_idIndexMarker077"/>we install Linux on a PC desktop or workstation (<em class="italic">bare-metal</em>) system, the bootable Linux media is generally a CD/DVD or a USB device. With a DVD-writable optical drive at hand, we can simply burn a DVD with our Linux distribution ISO. But because modern-day computers, especially laptops, rarely come equipped with a CD or a DVD unit of any kind, the more common choice for bootable media is a USB drive.</p>
<p class="callout-heading">Important note</p>
<p class="callout">There’s also a third<a id="_idIndexMarker078"/> possibility of using a <strong class="bold">Preboot eXecution Environment</strong> (<strong class="bold">PXE</strong>) boot server. PXE (pronounced <em class="italic">pixie</em>) is a client-server environment where a PXE-enabled client (PC/BIOS) loads and boots a software package over a local or wide area network from a PXE-enabled server. PXE eliminates the need for physical boot devices (CD/DVD, USB) and reduces the installation overhead, especially for a large number of clients and operating systems. Probing the depths of PXE internals is beyond the scope of this chapter, but we will give you a short introduction on how it works for Linux installations by the end of this chapter. A good starting point to learn more about PXE is <a href="https://en.wikipedia.org/wiki/Preboot_Execution_Environment">https://en.wikipedia.org/wiki/Preboot_Execution_Environment</a>.</p>
<p>A relatively <a id="_idIndexMarker079"/>straightforward way to produce a bootable USB drive with a Linux distribution of our choice is via using tools such<a id="_idIndexMarker080"/> a <strong class="bold">UNetbootin</strong> (<a href="https://unetbootin.github.io">https://unetbootin.github.io</a>) or <strong class="bold">Balena Etcher</strong> (<a href="https://www.balena.io/etcher">https://www.balena.io/etcher</a>). Both<a id="_idIndexMarker081"/> UNetbootin and Etcher are cross-platform utilities, running on Windows, Linux, and macOS.</p>
<p>We will use Balena Etcher for this example of creating a bootable USB drive in Windows:</p>
<div><div><img alt="Figure 1.2 – Create a bootable USB drive with Balena Etcher" src="img/Figure_01.02_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Create a bootable USB drive with Balena Etcher</p>
<p>Here are the basic steps for creating a bootable USB drive with Ubuntu Desktop using Balena Etcher. We assume the Ubuntu Desktop ISO image has been downloaded and Etcher is installed (in our case on Windows 11):</p>
<ol>
<li>Choose the ISO file with your Linux distribution of choice.</li>
<li>Select the USB target destination disk.</li>
<li>Flash the previously selected disk with the ISO of your choice.</li>
</ol>
<p>The process <a id="_idIndexMarker082"/>should take a couple of minutes and the USB drive will be ready. Now, let’s look at how we can take the bootable media for a spin.</p>
<h3>Step 3 – Try it out in live mode</h3>
<p>This step is optional.</p>
<p>Most Linux distributions <a id="_idIndexMarker083"/>have their ISO image available for download as <em class="italic">live</em> media. We say most because not all of them offer this option, at least not by default. Nevertheless, among those who do offer live media by default are <strong class="bold">Ubuntu</strong> and <strong class="bold">Fedora</strong>.</p>
<p>Once we have the bootable media created with our Linux distribution of choice, we can run a live environment of our Linux platform without actually installing it. In other words, we can evaluate and test the Linux distribution before deciding whether we want to install it or not. The live Linux operating system is loaded in the system memory (RAM) of our PC, without using any disk storage. We should make sure the PC has enough RAM to accommodate the minimum required memory of our Linux distribution.</p>
<p>When booting the PC from a bootable media, we need to make sure the boot order in the BIOS is set to read our drive with the highest priority. On a Mac, we need to press the <em class="italic">Option</em> key immediately after the reboot start-up chime and select our USB drive to boot from. When on a PC, make sure you access your BIOS interface and select the appropriate device for boot. Depending on your system, you will either have to press one of the <em class="italic">F2</em>, <em class="italic">F10</em>, <em class="italic">F12</em>, or <em class="italic">F1</em> keys after hitting <em class="italic">Enter</em>, or the <em class="italic">Delete</em> key, as a general rule. In some specific cases, there could be another <em class="italic">Function</em> key assigned for this. The keys that you need to press are usually specified at the bottom of the initial bootup screen.</p>
<p>Upon reboot, the first splash screen of our Linux distribution should give us the option of running in live mode, as seen in the following illustration for Ubuntu Desktop (<strong class="bold">Try Ubuntu</strong>):</p>
<div><div><img alt="Figure 1.3 – Choosing live mode for Ubuntu Desktop" src="img/Figure_01.03_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – Choosing live mode for Ubuntu Desktop</p>
<p>Next, let’s take a look at <a id="_idIndexMarker084"/>the installation procedure of our Linux distro, using the bootable media.</p>
<h3>Step 4 – Perform the installation</h3>
<p>We start the <a id="_idIndexMarker085"/>installation of our Linux distribution by booting the PC from the bootable media created in <em class="italic">step 2</em>. To ensure the system can boot from our external device, we are sometimes required to change the boot order in the BIOS, especially if we boot from a USB drive. Do as specified in the previous paragraph to select the right boot drive.</p>
<p>In the following sections, we showcase the installation process of Ubuntu using its ISO images. We choose the Desktop and Server versions for Ubuntu and highlight the main differences between them. As a comparison, Rocky Linux and CentOS Stream come in a single flavor, in essence, a server platform with an optional graphical user interface. Similar to those, openSUSE offers one installation medium for both desktop and server installs. Fedora, on <a id="_idIndexMarker086"/>the other hand, has different installation mediums for desktop and server.</p>
<p>We will now walk you through the process of installing Linux inside a VM.</p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor038"/>Linux in a VM</h2>
<p>In each of <a id="_idIndexMarker087"/>the subsections in the <em class="italic">Installing Linux</em> section, we will also provide a brief guide on how to prepare a VM environment for the related Linux platform.</p>
<p>A VM is an isolated software abstraction of a physical machine. VMs are deployed on top of a <strong class="bold">hypervisor</strong>. A hypervisor <a id="_idIndexMarker088"/>provides the runtime provisioning and resource management of VMs. A <a id="_idIndexMarker089"/>couple of general-purpose hypervisors <a id="_idIndexMarker090"/>used are the following:</p>
<ul>
<li><strong class="bold">Oracle VM </strong><strong class="bold">VirtualBox</strong> (<a href="https://www.virtualbox.org">https://www.virtualbox.org</a>)</li>
<li><strong class="bold">VMware </strong><strong class="bold">Workstation</strong> (<a href="https://www.vmware.com/products/workstation-pro.html">https://www.vmware.com/products/workstation-pro.html</a>)</li>
<li><strong class="bold">Hyper-V</strong> (available only in Windows Pro, Enterprise, or Education)</li>
</ul>
<p>The first two of <a id="_idIndexMarker091"/>these hypervisors are cross-platform virtualization applications and run on both Intel and AMD processor architectures on Windows, macOS, and Linux. The latter is only available on Windows Pro, versions 10 and 11.</p>
<p class="callout-heading">Important note</p>
<p class="callout">At the time of writing this book, hypervisors for the Apple silicon Macs are provided only by VMware Player and Parallels. Oracle VirtualBox is still in preview for the <strong class="bold">Advanced RISC Machines</strong> (<strong class="bold">ARM</strong>) architecture. Both <a id="_idIndexMarker092"/>solutions from VMware and Parallels are paid-for software on macOS, so you will need to purchase them in order to use them.</p>
<p>The difference between installing Linux on a VM compared to a physical machine is minor. The notable distinction is related to the VM sizing and configuration steps, making sure the minimum system requirements of the Linux distribution are met. Thus, in the following sections we will install Ubuntu on VMware Workstation under Windows.</p>
<p>Please take into account that installing Linux on VMware Player under macOS is very similar, and we will not duplicate the process in this edition of the book. macOS functionality was discussed in the first edition of the book, but given the limited availability of hypervisors for the Apple silicon platform, we have decided to skip it in this edition. Regarding<a id="_idIndexMarker093"/> Linux availability on bare-metal Apple silicon Macs, you could visit Asahi Linux, a project that aims to bring a fully functional Linux distribution to Apple silicon computers. Asahi Linux <a id="_idIndexMarker094"/>is available at <a href="https://asahilinux.org/">https://asahilinux.org/</a>.</p>
<p>In the next section, we briefly illustrate the installation of Ubuntu Server LTS. If we plan to install Ubuntu in a VM, there are some preliminary steps required for provisioning the VM environment. Otherwise, we proceed directly to the <em class="italic">Installation</em> section.</p>
<h3>VM provisioning using VMware Workstation</h3>
<p>In the<a id="_idIndexMarker095"/> following steps, we will create a VM based on Ubuntu Server using VMware Workstation on Windows 11. At the time of writing, version 17 of the software is available for both free and commercial use.</p>
<ol>
<li>The first step after initializing the hypervisor is to click on <strong class="bold">Create a New Virtual Machine</strong>. This will open a new window with the new virtual machine wizard, where you can select the ISO image for the Linux distribution you want to install.</li>
<li>Click <strong class="bold">Browse</strong> and then open the image from your hard drive or download destination.</li>
<li>Click <code>Ubuntu </code><code>Server 22.04.1</code>.</li>
<li>Click <strong class="bold">Next</strong>. In the following window that appears, you have to give the maximum disk size for the VM. By default, it is set to 20 GB as the recommended size for Ubuntu Server. We will leave it as is.</li>
<li>By clicking <strong class="bold">Next</strong> once more, a window with the VM settings is provided. By default, the hypervisor provides 2 CPU cores and 4 GB of RAM to the VM. You can click on the <strong class="bold">Customize hardware</strong> button to change the defaults, depending on your hardware availability. As a rule, we recommend having at least 16 GB of RAM on your system and an 8-core CPU to be able to create reasonable-sized VMs. When everything is set up as you want, click on the <strong class="bold">Close</strong> button on the lower right side of the window. You are now back to the main wizard window.</li>
<li>Click <strong class="bold">Finish</strong> to complete <a id="_idIndexMarker096"/>the setup and create and initialize the VM. In the following screenshot you can see the newly created VM, running inside VMware</li>
</ol>
<div><div><img alt="Figure 1.4 – Power-up and Linux installation on a new VM" src="img/Figure_01.04_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – Power-up and Linux installation on a new VM</p>
<h3>Installation process</h3>
<p>Here’s the<a id="_idIndexMarker097"/> normal installation process for Ubuntu Server LTS, following the initial boot into setup mode:</p>
<ol>
<li>The initial welcome screen prompts for<a id="_idIndexMarker098"/> the <strong class="bold">language</strong> of your choice. Select the one you prefer and press <em class="italic">Enter</em> on your keyboard.</li>
<li>You might be prompted to apply an <em class="italic">installer update </em>if available. You have the options to update the installer or continue without updating. We choose to update the installer if prompted.</li>
<li>If there is<a id="_idIndexMarker099"/> no update available, the next screen prompts you to select <a id="_idIndexMarker100"/>your <strong class="bold">keyboard layout</strong>. Select accordingly. In our case, it is English. Select <strong class="bold">Done</strong> and press <em class="italic">Enter</em>.</li>
<li>The next prompt asks you to choose <a id="_idIndexMarker101"/>the <strong class="bold">base for the installation</strong> from the following options: <strong class="bold">Ubuntu Server</strong> and <strong class="bold">Ubuntu Server (minimized)</strong>. You also have the option to search for <strong class="bold">third-party drivers</strong>. We<a id="_idIndexMarker102"/> choose <strong class="bold">Ubuntu Server</strong> and select the third-party driver option. You can make your way around the options on the screen using either <em class="italic">Tab</em> or the <em class="italic">Arrow</em> keys. To select an option, press the <em class="italic">Space</em> key. Select <strong class="bold">Done</strong> and press <em class="italic">Enter</em>.</li>
<li>The next screen will show you<a id="_idIndexMarker103"/> the <strong class="bold">network connections</strong>. If the defaults work for you, hit <em class="italic">Enter</em> to go to the next setup screen.</li>
<li>You will be asked <a id="_idIndexMarker104"/>about <strong class="bold">proxy configuration</strong>. If you don’t require this, just hit <em class="italic">Enter</em> to go to the next screen.</li>
<li>You will now be asked to configure the default <a id="_idIndexMarker105"/>Ubuntu <strong class="bold">mirror</strong> for the repository archives. Edit this according to your location, or just leave the defaults provided by the installer. Press <em class="italic">Enter</em>.</li>
<li>The next screen prompts you to <a id="_idIndexMarker106"/>configure <strong class="bold">storage</strong> and <strong class="bold">partitioning</strong>. We will just use the entire 20 GB disk with the default settings, so select <strong class="bold">Done</strong> and press <em class="italic">Enter</em>.</li>
<li>A storage <strong class="bold">configuration summary</strong> is <a id="_idIndexMarker107"/>provided. If everything is according to your requirements, just hit <em class="italic">Enter</em>.</li>
<li>A <strong class="bold">warning</strong> will <a id="_idIndexMarker108"/>pop up, asking whether you are definitely happy with the settings and willing to continue with the installation. Hit <em class="italic">Enter</em>.</li>
<li>The next screen asks for <a id="_idIndexMarker109"/>your <strong class="bold">profile information</strong>, including your name, the server’s name, the username, and password. Set those up and go to the next screen.</li>
<li>You will be asked to choose <a id="_idIndexMarker110"/>whether to <strong class="bold">install an openSSH</strong> <strong class="bold">server</strong> or not. Select the option to install openSSH. If you have any SSH key(s) you would like to import, you can provide them here. Once finished, go to the next screen.</li>
<li>You will be <a id="_idIndexMarker111"/>prompted to select and install <code>docker</code>, <code>microk8s</code>, <code>powershell</code>, <code>nextcloud</code>, and <code>livepatch</code>. Select what you need to meet your requirements and continue to the next screen.</li>
<li>The <strong class="bold">installation process</strong> begins. This <a id="_idIndexMarker113"/>could take a couple of minutes. Be patient and wait for the reboot option to appear once the operating system is installed.</li>
</ol>
<p>After you reboot, the login screen appears and you will be able to use your new Ubuntu Server VM from inside Windows 11 using VMware Workstation. We have now completed the Ubuntu Server installation.</p>
<p>Installing any other distribution is very similar to installing Ubuntu. When installing desktop variants, a graphical user interface will be available. In the preceding example, as we installed a server-specific operating system, the graphical user interface was missing, having just a minimal text-based interface.</p>
<p>We will not walk you through the installation process of any other distribution, but we will show you the <a id="_idIndexMarker114"/>Rocky Linux installation interface:</p>
<div><div><img alt="Figure 1.5 – The Rocky Linux installation GUI" src="img/Figure_01.05_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – The Rocky Linux installation GUI</p>
<p>So far, we<a id="_idIndexMarker115"/> have learned how to perform a basic installation of Linux. Along the way, we created a bootable USB flash drive for our installation media, most commonly used for Linux PC platform installations. We briefly covered VM-specific Linux environments using the VMware Workstation hypervisor for Windows 11.</p>
<p>In the following section, we’ll learn how to install and run a Linux distribution on the Windows platform without the use of a standalone hypervisor by using the Windows Subsystem for Linux.</p>
<h2 id="_idParaDest-24"><a id="_idTextAnchor039"/>VM provisioning using Hyper-V</h2>
<p>In the following<a id="_idIndexMarker116"/> steps, we will create a VM based on Ubuntu Server, using Microsoft’s Hyper-V solution available on Windows 11 Pro.</p>
<p>The first step is to activate the Hyper-V hypervisor, as it is not activated by default. For this, we will need to go to <strong class="bold">Windows Features</strong> and select the <strong class="bold">Hyper-V</strong> checkbox, as shown in the<a id="_idIndexMarker117"/> following figure. After activation, a restart is required.</p>
<div><div><img alt="Figure 1.6 – Activating Hyper-V on Windows 11 Pro" src="img/Figure_01.06_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6 – Activating Hyper-V on Windows 11 Pro</p>
<p>To create a new VM, you will have to start <strong class="bold">Hyper-V Manager</strong>. The application has a three-pane interface. In the <strong class="bold">Actions</strong> pane on the right, you should see the <strong class="bold">New</strong> option. Click on it and select the <strong class="bold">Virtual Machine…</strong> option. This will open a new window where you can configure the new VM with the following steps:</p>
<ol>
<li>Set the name and location; we will give it the name <code>Ubuntu</code> and leave the default location as is. Click <strong class="bold">Next</strong>.</li>
<li>Set the generation of the VM. You have two options, <strong class="bold">Generation 1</strong> and <strong class="bold">Generation 2</strong>. The second option will be suitable for UEFI-based BIOS and Network installation (PXE). We will select <strong class="bold">Generation 1</strong> and click <strong class="bold">Next</strong>.</li>
<li>Specify<a id="_idIndexMarker118"/> the amount of RAM. By default, this is set to 4 GB minimum, with the option of dynamic memory selected. We will leave the default as is. Click <strong class="bold">Next</strong>.</li>
<li>Configure networking by selecting the appropriate option from the dropdown. You have three options: <strong class="bold">Not Connected</strong>, <strong class="bold">Default Switch</strong>, <strong class="bold">WSL</strong>; we will select <strong class="bold">Default Switch</strong> and click <strong class="bold">Next</strong>.</li>
<li>Configure a virtual hard drive by setting the size and location. Click <strong class="bold">Next</strong>.</li>
<li>In the following window, you have the option to install an operating system now or at a later time. We will select the Ubuntu Desktop ISO image from our location of choice and click <strong class="bold">Next</strong>.</li>
<li>The following window shows the summary of the VM’s configuration. You can change any of it by going back from here. Once done, click the <strong class="bold">Finish</strong> button and the VM will be created.</li>
</ol>
<p>The following screenshot shows the new Ubuntu VM running inside Hyper-V:</p>
<div><div><img alt="Figure 1.7 – New Ubuntu VM using Hyper-V" src="img/Figure_01.07_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.7 – New Ubuntu VM using Hyper-V</p>
<p>The installation process<a id="_idIndexMarker119"/> is similar to the one shown in the previous section, thus we will not reproduce it here again. In the next section, we will use another hypervisor, this time from Oracle.</p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor040"/>VM provisioning using Oracle’s VirtualBox</h2>
<p>Oracle’s <strong class="bold">VirtualBox</strong> is a <a id="_idIndexMarker120"/>free-to-use piece of software <a id="_idIndexMarker121"/>that is multi-platform, available on Windows, macOS and Linux. We will show you how to create a Linux VM from Windows 11. We assume that you have VirtualBox already installed. Once you start it, a user-friendly interface is available. The following steps are used to create a new VM. We will use Fedora <a id="_idIndexMarker122"/>Workstation for our example:</p>
<ol>
<li>Click on the <strong class="bold">New</strong> icon to start the process of creating a new VM. This will open a new window where information about the VM’s name and operating system type and ISO location need to be provided. This new window is in <strong class="bold">Guided Mode</strong> by default. You have the option on the lower right side of the window to choose the <strong class="bold">Expert Mode</strong>. This will give you more control over the creation process.</li>
<li>Provide <a id="_idIndexMarker123"/>all the needed information. In our case, we will use Fedora, so we will give it the name <code>Fedora</code>. Point to the ISO file’s location and the type of the operating system will change automatically. If you are in <strong class="bold">Expert Mode</strong>, you will have some more auto-hidden sections for <strong class="bold">Unattended Install</strong>, <strong class="bold">Hardware</strong>, and <strong class="bold">Hard </strong><strong class="bold">Disk</strong> options.</li>
<li>Because we are <a id="_idIndexMarker124"/>installing Fedora, the <strong class="bold">Unattended Install</strong> section is grayed out (see <em class="italic">Figure 1</em><em class="italic">.11</em>). This option is supported by only a few operating systems (Ubuntu, RHEL, Oracle Linux, and Windows).</li>
<li>In the <strong class="bold">Hardware</strong> section, we will provide the amount of system memory and processors we want the new VM to have. Choose according to your hardware resources, but keep in mind that each operating system has specific system requirements. In our case, we will choose 4 GB of RAM and 2 vCPUs.</li>
<li>The <strong class="bold">Hard Disk</strong> section is where you choose the amount of disk space for the VM’s hard disk. Again, choose according to your resources, but keep in mind that a minimal amount is required to meet specific system requirements. In our opinion, a minimum of 20 GB of hard disk space should be provided. Choose the location of the virtual hard drive and click <strong class="bold">Finish</strong>.</li>
<li>The VM will be created and the window will close, bringing you back to the initial VirtualBox window. Here, you will see all the relevant information about the VM. To power it on, just click on the <strong class="bold">Start</strong> button (the one with a big green right arrow).</li>
<li>A new window with the VM will appear.</li>
</ol>
<p>The following screenshot shows the VM creation window inside VirtualBox:</p>
<div><div><img alt="Figure 1.8 – VirtualBox interface" src="img/Figure_01.08_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.8 – VirtualBox interface</p>
<p>As you can see, creating <a id="_idIndexMarker125"/>Linux VMs with all three major hypervisors available (from VMware, Oracle, and Microsoft) is very straightforward and relatively easy to do. No matter which solution you use, the process of installing Linux in a VM is the same.</p>
<p>Aside from VM provisioning, Microsoft Windows offers a relatively new way to run Linux, and this is by using the Windows Subsystem for Linux. We will show you how in the next section.</p>
<h1 id="_idParaDest-26"><a id="_idTextAnchor041"/>Enabling Windows Subsystem for Linux</h1>
<p>Software <a id="_idIndexMarker126"/>developers and system administrators often face a tough decision in choosing the appropriate hardware and operating system platform for <a id="_idIndexMarker127"/>the specific requirements of their work or environment. In the past, Windows professionals frequently discovered that some standard development tools, frameworks, or server components were available on the Linux or macOS platforms while lacking native support on Windows. <strong class="bold">Windows Subsystem for Linux</strong> (<strong class="bold">WSL</strong>) attempts to close this gap.</p>
<p>WSL is a <a id="_idIndexMarker128"/>Windows platform<a id="_idIndexMarker129"/> feature that provides a native GNU/Linux runtime along with the Windows desktop environment available for both versions 10 and 11 of Windows. WSL enables the seamless deployment and integration<a id="_idIndexMarker130"/> of select Linux distributions on top of the Windows kernel, without the need for a dedicated hypervisor. With WSL enabled, you can easily install and run Linux as a native Windows application.</p>
<p class="callout-heading">Important note</p>
<p class="callout">Without WSL, we could only deploy and run a Linux distribution on a Windows platform by using a standalone hypervisor, such as Hyper-V, Oracle VM VirtualBox, or VMware Workstation. WSL eliminates the need for a dedicated hypervisor. At the time of writing, WSL is a Windows kernel extension with a hypervisor embedded.</p>
<p>In this section, we provide the steps required to enable WSL and run an Ubuntu distribution on Windows. Since Windows 11 version 21H2 and Windows 10 versions 21H2 and 22H2, WSL is available by default from the Windows Store, so there is no need to use the command line to install and set it up. Go to the Microsoft Store and search for <code>WSL</code>. From the list shown, select the application shown in the following figure:</p>
<div><div><img alt="Figure 1.9 – WSL application from the Windows Store" src="img/Figure_01.09_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.9 – WSL application from the Windows Store</p>
<p>After installing WSL, all you need to do is to install any Linux distributions available for it. If you attempt to open the freshly installed WSL application, you will get a terminal message saying that the WSL has no distribution installed. This means that you will need to install a distro by going back to Microsoft Store and searching for one. For example, if you search for <code>Linux</code> inside Microsoft Store, you will get results including SUSE Linux Enterprise Server, Oracle Linux, Kali Linux, Ubuntu LTS, Debian, and openSUSE Leap, among others.</p>
<p class="callout-heading">Important note</p>
<p class="callout">Make sure you have Hyper-V enabled in Windows, as it is the service responsible for running WSL. To enable it, go to <strong class="bold">Windows Features</strong>, and select <strong class="bold">Hyper-V</strong> from the list, then click on <strong class="bold">OK</strong>. After installing the necessary components, a restart is required. Hyper-V is available by default on Windows 11 Pro, Enterprise and Education, but <em class="italic">NOT</em> on Home edition.</p>
<p>Now you<a id="_idIndexMarker131"/> can install a <a id="_idIndexMarker132"/>Linux distribution from Microsoft Store. We will try doing this with Ubuntu for our demonstration. After installation, you can open the application, create a user, and start using it inside the command line – it is that easy. To open the new Linux distribution, enter its name in the search bar, hit <em class="italic">Enter</em>, and a new terminal window with the Linux distribution is opened directly in Windows Terminal application, as shown in the following screenshot:</p>
<div><div><img alt="Figure 1.10 – Ubuntu inside a Windows Terminal window using WSL" src="img/Figure_01.10_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.10 – Ubuntu inside a Windows Terminal window using WSL</p>
<p>Furthermore, you will have access to the distribution’s filesystem directly from <strong class="bold">File Explorer</strong> inside Windows. The following screenshot shows the Ubuntu filesystem accessible from <strong class="bold">File Explorer</strong>:</p>
<div><div><img alt="Figure 1.11 – The Ubuntu filesystem in the File Explorer in Windows 11" src="img/Figure_01.11_B19682.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.11 – The Ubuntu filesystem in the File Explorer in Windows 11</p>
<p>WSL enables a <a id="_idIndexMarker133"/>swift adoption of Linux for a growing number of Windows professionals. As shown in this section, WSL is relatively easy to configure, and with WSL, there’s no need for a dedicated hypervisor to run a Linux instance.</p>
<p>By now, you <a id="_idIndexMarker134"/>have learned how to install Linux on a VM inside Windows using three different hypervisors, the VMware Workstation, Microsoft’s own Hyper-V, and Oracle’s VirtualBox. As we stated earlier, the installation process on macOS is very similar and there is no need for us to spend any more space covering it, as it would only duplicate the output. The interface of VMware Fusion on macOS is similar to the one used in Windows, with minor changes.</p>
<p>Installing on bare metal is similar; the only difference is that you require physical access to the destination machines. As stated at the beginning of this chapter, there is one more way to install Linux, and this is over the network. This is a more advanced task that requires more attention to detail along with basic networking knowledge. Also, understanding the Linux boot process is mandatory.</p>
<p>In the next section, we will provide some details about the network installation process.</p>
<h1 id="_idParaDest-27"><a id="_idTextAnchor042"/>Installing Linux – the advanced stages</h1>
<p>In this<a id="_idIndexMarker135"/> section, we will cover the more advanced aspects of installing Linux. As we saw in the previous sections, installation on bare metal and VM requires direct access to the given machines. But what if we do not have access to the location? Or there are so many machines that need to be set up, that completing the task manually would be tedious at best, and infeasible at worst?</p>
<p>Installing Linux in an enterprise environment with tens or hundreds of machines in use can be done using an automated environment by booting through the network. As we stated earlier, a detailed overview of the network boot technique is out of the scope of this book; nevertheless, we will describe the process and show you the most important aspects of it, as none of the prominent books out there discuss this.</p>
<p>But first, to better understand how network booting works, let us take a short look at the Linux boot process.</p>
<h2 id="_idParaDest-28"><a id="_idTextAnchor043"/>The Linux boot process</h2>
<p>How does Linux boot? We will <a id="_idIndexMarker136"/>give you a comprehensive view of the process without getting into too many details.</p>
<p>When you first start your Linux-powered computer or virtual machine, the <strong class="bold">BIOS</strong> (or boot firmware) starts <a id="_idIndexMarker137"/>loading and initiates a bootloader. The BIOS has a specific configuration and is loaded by the manufacturer onto a memory chip on the motherboard (in the case of physical computers, not VMs). The BIOS has information about the hardware and capabilities of controlling peripherals such as keyboards and monitors. It also has information about the operating system and the location of the bootloader. Some of this information is user controlled and can be changed according to the user’s needs, such as the boot sequence for example, or password protection. The BIOS also has control <a id="_idIndexMarker138"/>over the <strong class="bold">network interface controllers</strong> (<strong class="bold">NICs</strong>) and all the external ports, including USB and display ports. But this is about all it can do, as it requires a bootloader to further initiate any operating system existing on the disk.</p>
<p>A<a id="_idIndexMarker139"/> newer version of the BIOS is the <strong class="bold">Unified Extensible Firmware Interface</strong> (<strong class="bold">UEFI</strong>). It has the same advantages as the older BIOS, but offers more interactive interfaces and better support for newer operating systems. The drawback, however, is the lack of software support from third-party vendors.</p>
<p>There is also <strong class="bold">Secure Boot</strong>, a <a id="_idIndexMarker140"/>feature introduced to offer an extra layer of security for the operating system and the software that runs. Some Linux distributions support it, but not all of them. Secure Boot uses a digital signature that proves the authenticity of the operating system. In order to support Secure Boot, the operating system developer must obtain a valid certificate for the software that can be verified on boot to prove that the system is valid and has not been tampered with.</p>
<p>Now that <a id="_idIndexMarker141"/>we know what the BIOS, UEFI and Secure Boot are, let us learn about the bootloader. Once <strong class="bold">Power-On Self Test</strong> (<strong class="bold">POST</strong>) is finished, the <strong class="bold">bootloader</strong> is <a id="_idIndexMarker142"/>accessed to load the operating system. POST is a series<a id="_idIndexMarker143"/> of tests that are conducted upon startup to ensure that the hardware is fully functional. What is a bootloader? It is the bridge between the hardware and the operating system. It is stored in the boot sector of the bootable storage. It can be either a partition or the very first block of the storage medium.</p>
<p>The bootloader used on<a id="_idIndexMarker144"/> Linux is the <strong class="bold">Grand Unified Bootloader</strong> (<strong class="bold">GRUB</strong>). It is responsible for loading the kernel of the operating system. The kernel is the central component of Linux, responsible for all the software components, drivers, services, and hardware integration. All of this forms what we call user space. It is the GRUB that has the capacity to support network booting.</p>
<p>The information provided in this section is sufficient to get a grasp of the Linux boot process. We will now detail the use of network boot to install Linux in the following section.</p>
<h2 id="_idParaDest-29"><a id="_idTextAnchor044"/>PXE network boot explained</h2>
<p>Earlier in this <a id="_idIndexMarker145"/>chapter we mentioned the <strong class="bold">PXE</strong> (pronounced <em class="italic">pixie</em>) boot option. What exactly is PXE? It is a service that uses different networking protocols for booting over the network. It is based on different protocols and standards that were introduced forty years ago to define the much-needed network boot interoperability, also<a id="_idIndexMarker146"/> known as the <strong class="bold">Network Bootstrap </strong><strong class="bold">Program</strong> (<strong class="bold">NBP</strong>).</p>
<p>The protocols that PXE is based on <a id="_idIndexMarker147"/>are <strong class="bold">Trivial File Transfer Protocol</strong> (<strong class="bold">TFTP</strong>), <strong class="bold">Dynamic Host Configuration Protocol</strong> (<strong class="bold">DHCP</strong>), and<a id="_idIndexMarker148"/> the UDP/IP stack using the <strong class="bold">Hyper Text Transfer Protocol</strong> (<strong class="bold">HTTP</strong>). These <a id="_idIndexMarker149"/>three are the base for PXE’s application programming interface. Nowadays, most network cards available on the market already have the PXE firmware installed. This makes PXE the standard for network boot on many architectures. For more information on the latest PXE version 2.1, visit the following link: <a href="https://web.archive.org/web/20110524083740/http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf">https://web.archive.org/web/20110524083740/http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf</a>.</p>
<p>For PXE to work, we need to have a PXE server on the network. This machine will provide the necessary bootable files in response to client requests on the network. For this, at least a DHCP and a TFTP server need to be installed on the PXE server. In addition, a <strong class="bold">Network File System</strong> (<strong class="bold">NFS</strong>) server<a id="_idIndexMarker150"/> must also be installed, as this protocol is required for network file sharing and is used in modern Linux operating systems.</p>
<p>But before<a id="_idIndexMarker151"/> we go into further detail, let us discuss how network boot works. PXE relies on a client/server environment where different machines are equipped with PXE-enabled NICs. The network configuration of the PXE environment was developed so that it does not interfere with the existing network configuration. As DHCP and TFTP are needed, the PXE environment makes sure that it does not interfere with the existing DHCP configuration of the non-PXE router from the local network. This is a well-thought-out design for corporate environments.</p>
<p>In a basic scenario, after all clients are set up for PXE boot (an option available from the BIOS on almost every computer), the NICs send DHCP requests over the network in order to find the local PXE server. In order to be able to correctly respond to those requests, PXE uses a sort of proxy DHCP that sends IP and mask information of the TFTP server back to the PXE-enabled clients. This way, it does not interfere with the local network’s DHCP server.</p>
<p>Setting up a PXE server is beyond the scope of this chapter, but useful information about what this is and how it works is relevant and can be found at <a href="https://ubuntu.com/server/docs/install/netboot-amd64">https://ubuntu.com/server/docs/install/netboot-amd64</a> and <a href="https://www.redhat.com/sysadmin/pxe-boot-uefi">https://www.redhat.com/sysadmin/pxe-boot-uefi</a>. However, further details, such as how to practically set up a DHCP server, will be found in <a href="B19682_13.xhtml#_idTextAnchor276"><em class="italic">Chapter 13</em></a>.</p>
<p>For a PXE server to work, there are some specific steps to take, depending on the installation root you follow. There are several options available, as you can use iPXE (an open source network boot firmware), <code>cloud-init</code> (specific to Ubuntu), or kickstart (for Fedora-based systems). Nonetheless, setting up DHCP, TFTP, and NFS servers is required, with the DNS server being optional (details on setting up these servers are available in <a href="B19682_13.xhtml#_idTextAnchor276"><em class="italic">Chapter 13</em></a>).</p>
<p>As you’ll see these details later, we will not include them here. This is the introductory chapter, intended to make you comfortable with different ways to install Linux, and we will slowly build upon <a id="_idIndexMarker152"/>this foundation throughout the book to get you ready for the more advanced stuff as you go through the chapters.</p>
<p>In the next section, we will give you some scenarios of using certain Linux flavors depending on specific needs. We will present to you what we consider to be the appropriate distributions and applications to use in different case studies. Please keep in mind that installing applications and working with package managers will be discussed in more detail in <a href="B19682_03.xhtml#_idTextAnchor075"><em class="italic">Chapter 3</em></a>.</p>
<h1 id="_idParaDest-30"><a id="_idTextAnchor045"/>Linux distributions – a practical guide</h1>
<p>The following <a id="_idIndexMarker153"/>use cases are inspired by real-world problems, taken mostly from the authors’ own experience in the system administration and software engineering field. Each of these scenarios presents the challenge of choosing the right Linux distribution for the job.</p>
<h2 id="_idParaDest-31"><a id="_idTextAnchor046"/>Case study – development workstation</h2>
<p>This case <a id="_idIndexMarker154"/>study is <a id="_idIndexMarker155"/>based on the following scenario made from the perspective of a software developer:</p>
<p class="author-quote">I’m a backend/frontend developer, writing mostly in Java, Node.js, Python, and Golang, and using mostly IntelliJ and VS Code as my primary IDE. My development environment makes heavy use of Docker containers (both building and deploying) and I occasionally use VMs (with VirtualBox) to deploy and test my code locally. I need a robust and versatile development platform.</p>
<p>Let’s look at the functional and system requirements before deciding which Linux distribution is fit for the job:</p>
<ul>
<li><strong class="bold">Functional requirements</strong>: The requirements suggest a relatively powerful day-to-day development platform, either a PC/desktop or a laptop computer. The developer relies on local resources to deploy and test the code (for instance, Docker containers and VMs), perhaps frequently in an offline (airplane mode) environment if on the go.</li>
<li><strong class="bold">System requirements</strong>: The system will primarily be using the Linux desktop environment and window manager, with frequent context switching between the <strong class="bold">Integrated Development Environment</strong> (<strong class="bold">IDE</strong>) and Terminal windows. The required software packages for the IDE, Docker, hypervisor (VirtualBox), and tools <a id="_idIndexMarker156"/>should be readily available from open source or commercial vendors, ideally always being up to date and requiring minimal installation and customization effort.</li>
</ul>
<h3>Choosing the Linux distribution</h3>
<p>The choice of Linux distribution here would be the <strong class="bold">Ubuntu Desktop Long Term Support</strong> (<strong class="bold">LTS</strong>) platform. Ubuntu LTS is relatively stable, runs on virtually any hardware platform, and is mostly up to date with hardware drivers. Software packages for the required applications and tools are generally available and stable, with frequent updates. Ubuntu LTS is an enterprise-grade, cost-effective, and secure operating system suitable for organizations and home users alike.</p>
<p>Besides Ubuntu, <strong class="bold">Fedora</strong> and <strong class="bold">openSUSE</strong> are equally suitable for a developer’s workstation. Choosing between them depends on whether you need a <strong class="bold">Debian-</strong> or <strong class="bold">Red Hat</strong>/<strong class="bold">SUSE</strong>-based ecosystem, and whether you need more up-to-date packages or not.</p>
<h2 id="_idParaDest-32"><a id="_idTextAnchor047"/>Case study – secure web server</h2>
<p>This <a id="_idIndexMarker157"/>case study is<a id="_idIndexMarker158"/> based on the following scenario made from the perspective of a DevOps engineer:</p>
<p class="author-quote">I’m looking for a robust platform running a secure, relatively lightweight, and enterprise-grade web server. This web server handles HTTP/SSL requests, offloading SSL before routing requests to other backend web servers, websites, and API endpoints. No load-balancing features are needed.</p>
<p>Let’s look at the <strong class="bold">functional requirements</strong> in this case study. When it comes to open source, secure, and enterprise-grade web servers, the top choices are usually NGINX, Apache HTTP Server, Node.js, Apache Tomcat, and lighttpd. Without going into the details of selecting <a id="_idIndexMarker159"/>one web server over another, let’s just assume we pick Apache HTTP Server. It has state-of-the-art SSL/TLS support, excellent performance, and is relatively easy to configure.</p>
<p>We can deploy this web server in VPS environments, in local (<em class="italic">on-premises</em>) data centers, or the public cloud. The deployment form factor is either a VM or a Docker container. We are looking for a relatively low-footprint, enterprise-grade Linux platform.</p>
<h3>Choosing the Linux distribution</h3>
<p>Our choice of Linux distribution is <strong class="bold">Rocky Linux</strong> or <strong class="bold">AlmaLinux</strong>. Most of the time, those two distributions are a perfect match for Apache HTTP Server. They are relatively lightweight, coming only with bare-bones server components and an operating system networking stack. Both Rocky and Alma are widely available as VPS deployment template from both private and public cloud vendors. Our Apache HTTP Server can run as a Docker container on top of Rocky Linux or AlmaLinux, as we may need to horizontally scale to multiple web server instances. More details on setting up a web server are provided in <a href="B19682_13.xhtml#_idTextAnchor276"><em class="italic">Chapter 13</em></a>.</p>
<h2 id="_idParaDest-33"><a id="_idTextAnchor048"/>Use case – personal blog</h2>
<p>This<a id="_idIndexMarker160"/> case study<a id="_idIndexMarker161"/> is based on the following scenario made from the perspective of a software engineer and blogger:</p>
<p class="author-quote">I want to create a software engineering blog. I’ll be using the Ghost blogging platform, running on top of Node.js, with MySQL as the backend database. I’m looking for a hosted Virtual Private Server (VPS) solution by one of the major cloud providers. I’ll be installing, maintaining, and managing the related platform myself. Which Linux distribution should I use?</p>
<p>Let’s discuss the <strong class="bold">functional requirements</strong> for this use case. We are looking for a self-managed publicly hosted <strong class="bold">Virtual Private Server</strong> (<strong class="bold">VPS</strong>) solution. The related hosting cost is a sensitive matter. Also, the maintenance of the required software packages should be relatively easy. We foresee frequent updates, including the Linux platform itself.</p>
<h3>Choosing the Linux distribution</h3>
<p>Our picks for the Linux distribution in this scenario would be either <strong class="bold">Debian Stable</strong> or <strong class="bold">Ubuntu Server LTS</strong>. As previously highlighted, Ubuntu is a robust, secure, and enterprise-class Linux distribution. <strong class="bold">Debian</strong> is equally stable and offers good options for applications. The platform maintenance and administration efforts are not demanding. The required <a id="_idIndexMarker162"/>software packages – Node.js, Ghost, and MySQL – are easily available and are well maintained. Ubuntu Server has a relatively small footprint. We can run our required software stack for blogging easily within the Ubuntu system requirements so the hosting costs would be reasonable.</p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor049"/>Use case – media server</h2>
<p>This<a id="_idIndexMarker163"/> case study is<a id="_idIndexMarker164"/> based on the following scenario made from the perspective of a home theater aficionado:</p>
<p class="author-quote">I have a moderately large collection of movies (personal DVD/Blu-ray backups), videos, photos, and other media, stored on Network Attached Storage (NAS). The NAS has its own media server incorporated, but the streaming performance is rather poor. I’m using Plex as a media player system, with Plex Media Server as the backend. What Linux platform should I use?</p>
<p>Based on this description, let’s identify the <strong class="bold">system requirements</strong> for this use case. The critical system requirements of a media server are speed (for a high-quality and smooth streaming experience), security, and stability. The related software packages and streaming codecs are subject to frequent updates, so platform maintenance tasks and upgrades are quite frequent. The platform is hosted locally, on a PC desktop system, with plenty of memory and computing power in general. The media is being streamed from the NAS, over the in-house <strong class="bold">Local Area Network</strong> (<strong class="bold">LAN</strong>), where the content is available via an NFS share.</p>
<h3>Choosing the Linux distribution</h3>
<p>Both <strong class="bold">Debian</strong> and <strong class="bold">Ubuntu</strong> would be excellent choices for a good media server platform. Debian’s <em class="italic">stable</em> release is regarded as rock solid and very reliable by the Linux community, although it’s somewhat outdated. Both feature advanced networking and security, but what may come as a decisive factor in choosing between the two is that Plex Media Server has an ARM-compatible package for Debian. The media server package for Ubuntu is only available for Intel/AMD platforms. If we owned a small-factor ARM-processor-based appliance, Debian would be the right choice. Otherwise, <strong class="bold">Ubuntu LTS</strong> would meet <a id="_idIndexMarker165"/>our needs here just as well.</p>
<p>Now that you know about different use cases, it is time to pick your Linux distribution and start playing with it. In this chapter, we provided you with a plethora of information that will prove invaluable as you start your journey with Linux.</p>
<h1 id="_idParaDest-35"><a id="_idTextAnchor050"/>Summary</h1>
<p>In this chapter, we learned about Linux distributions, with a practical emphasis on choosing the right platform for our needs and performing the related installation procedures.</p>
<p>Throughout the chapter, the main emphasis was on the Ubuntu distribution. In the spirit of a practical approach, we covered VM environments running Linux. We also took a short route through the Windows realm, where we touched upon WSL, a modern-day abstraction of Linux as a native Windows application.</p>
<p>With the skills learned in this chapter, we hope you’ll have a better understanding of how to choose different flavors of Linux distros based on your needs. You’ve learned how to install and configure Linux on a variety of platforms. You will use some of these skills throughout the rest of the book, but most importantly, you’ll now be comfortable quickly deploying the Linux distribution of your choice and testing with it.</p>
<p>Starting with the next chapter, we’ll take a closer look at the various Linux subsystems, components, services, and applications. <a href="B19682_02.xhtml#_idTextAnchor053"><em class="italic">Chapter 2</em></a>,<em class="italic"> The </em><em class="italic">Linux Shell and</em><em class="italic"> Filesystem</em>, will familiarize you with the Linux filesystem internals and related tools.</p>
<h1 id="_idParaDest-36"><a id="_idTextAnchor051"/>Questions</h1>
<p>Here are a few questions and thought experiments that you may ponder, some based on the skills you learned in this chapter, and others revealed in later parts of the book:</p>
<ol>
<li>If we have a relatively large number of Linux VM instances or distros deployed and running at the same time, how could we make it easier to manage them?</li>
</ol>
<p><strong class="bold">Hint</strong>: Use <strong class="bold">Vagrant</strong>, a tool for building and managing VM environments.</p>
<ol>
<li value="2">Can we run multiple Linux instances in WSL?</li>
</ol>
<p><strong class="bold">Hint</strong>: We can.</p>
<h1 id="_idParaDest-37"><a id="_idTextAnchor052"/>Further reading</h1>
<p>Here are a few Packt titles that can help you with the task of Linux installation:</p>
<ul>
<li><em class="italic">Fundamentals of Linux</em>, by Oliver Pelz</li>
<li><em class="italic">Mastering Ubuntu Server – Fourth Edition</em>, by Jay LaCroix</li>
<li><em class="italic">Mastering Linux Administration – First Edition</em>, by Alexandru Calcatinge and Julian Balog</li>
</ul>
</div>
</body></html>