<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Accessing Virtual Machines Remotely</h1></div></div></div><p>When setting up a serious test environment, it may be useful to make the machines accessible from a distance. Even if you're using VMware Workstation on your own computer, there are different ways in which you can accomplish this. In this chapter, you'll read how to use VNC, the VMware web service, and VNC on individual machines to access virtual machines remotely.</p><p>If you're running a big test environment with multiple virtual machines, it can be useful to enable remote access. Generically speaking, there are three different methods to do this:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The first method is by using the VMware web service. This approach allows you to enable access to all virtual machines that you're hosting in an easy way.</li><li class="listitem" style="list-style-type: disc">The second method is by enabling VNC remote access on individual virtual machines.</li><li class="listitem" style="list-style-type: disc">The third method is by using an external solution such as TeamViewer, which allows remote access to the host computer and everything running on it. This is great if the host computer doesn't run anything but VMware.</li></ul></div><div><div><div><div><h1 class="title"><a id="ch06lvl1sec33"/>Setting up shared machines with the VMware Web Service</h1></div></div></div><p>The VMware<a id="id181" class="indexterm"/> Web Service is an easy and <a id="id182" class="indexterm"/>convenient way to share machines with other users. To use this solution, you need to set up shared machines, but it's also a good idea to create a dedicated user account to share the virtual machines so that you can prevent remote users from getting access to the files on your computer. Be aware however that normal user accounts without administrator privileges won't be able to get access to other users' virtual machines. An administrator user can at least browse through virtual machines that other users have created. It is a lot easier to set up <a id="id183" class="indexterm"/>a dedicated account for the use of VMware Workstation, and from that account, share all virtual machines. This prevents you from the need to give too much access <a id="id184" class="indexterm"/>privileges to other users.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec33"/>Shared virtual machines and user accounts</h2></div></div></div><p>To use<a id="id185" class="indexterm"/> VMware shared virtual machines, you'll need a user account on the computer where the shared virtual machine resides. This means that before setting up the shared virtual machine, you'll have to create these user accounts—unless you want the remote user to connect with your own username and password.</p><div><div><div><div><h3 class="title"><a id="ch06lvl3sec05"/>Creating a Windows user account</h3></div></div></div><p>If you're working in a<a id="id186" class="indexterm"/> corporate environment with Active Directory, all user accounts are probably already available. If you're running VMware Workstation on a Windows 8 computer, you'll need to set up a user account yourself. To do this, start the PC Settings application and click on <strong>Users</strong>. From here, select <strong>Add a user</strong> and follow the wizard to proceed through all of the required steps to create the user. You don't have to grant administrator privileges to the user, just create the user account and assign a password.</p></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec06"/>Creating a Linux user account</h3></div></div></div><p>To create a <a id="id187" class="indexterm"/>Linux user account, open a shell window and make sure that you have root permissions. To escalate your permissions to the root level, use the <code class="literal">sudo so</code> command and enter the root password. Next, type <code class="literal">useradd -m username</code>. This adds the new user account to your computer. To set a password for this user, still as root, enter the <code class="literal">passwd</code> command and enter the new password twice.</p></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec34"/>Sharing a virtual machine</h2></div></div></div><p>Probably the <a id="id188" class="indexterm"/>easiest way to enable shared VMs is by using the VMware integrated feature. This allows you to run a web service on the host's operating system, which gives access to all virtual machines on that host. Enabling the VMware Workstation Server starts at the virtual machines that you want to provide access to. You'll first have to share the virtual machine, after which the workstation's server properties can be set. The procedure described as follows shows how this works:</p><div><ol class="orderedlist arabic"><li class="listitem">Right-click on the virtual machine that you want to share. Select the <strong>Manage</strong> menu, and click on <strong>Share</strong>.</li><li class="listitem">To enable sharing for the selected virtual machine, you need to make it available in the shared VM's directory. You can do this by either moving the virtual machine, or making a full clone of it. If you choose the latter option, you will basically make a full copy of the virtual machine, which means that the cloned virtual machine is going to be an independent machine. This choice is useful if you want to be able to do different things in the share machines than what you're doing in the original machine. If you move the virtual machine, it's just the physical location that is moved. You won't experience it from the VMware Workstation interface; it's just a protection issue. The benefit of moving the virtual machine rather than cloning it is that you will work on the same virtual machine.<div><img src="img/9182EN_6_1.jpg" alt="Sharing a virtual machine"/><div><p>To share a virtual machine you must make it accessible remotely</p></div></div></li><li class="listitem">After sharing it, you'll <a id="id189" class="indexterm"/>see a new folder with the name <strong>Shared VMs</strong> in VMware Workstation. You'll also notice that the virtual machine is still accessible from the <code class="literal">My Computer</code> folder as well.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec35"/>Accessing a shared virtual machine</h2></div></div></div><p>Accessing a shared virtual<a id="id190" class="indexterm"/> machine from a remote computer that runs VMware isn't difficult. The following procedure describes how you can do it:</p><div><ol class="orderedlist arabic"><li class="listitem">To access a shared virtual machine from another computer that's running VMware Workstation 9, you'll use the <strong>Connect to Server</strong> option from the <strong>File</strong> menu. Enter the name or IP address of the computer that shares the virtual machine, and enter a name and password to access the shared virtual machine.</li><li class="listitem">It is likely that at this point you'll get a security certificate warning. This warning is generated because probably the remote virtual machine isn't registered in<a id="id191" class="indexterm"/> a corporate network, and that is fine; just ignore the warning and click on <strong>Connect Anyway</strong>. To prevent this warning from popping up again, select the <strong>Always trust this host with this certificate</strong> option as well.<div><img src="img/9182EN_6_2.jpg" alt="Accessing a shared virtual machine"/></div></li><li class="listitem">After successful authentication to the remote computer, it will be added to your VMware Workstation view, including all the shared virtual machines that are running on it. If you are planning to use the shared virtual machines on a frequent basis, it's a good idea to click on <strong>Remember</strong> in the dialog that asks if you want to remember the login information for the remote computer, so that you'll see the virtual machines the next time after starting VMware Workstation (provided that the remote machine is available).<div><img src="img/9182EN_6_3.jpg" alt="Accessing a shared virtual machine"/><div><p>Accessing remote shared virtual machines</p></div></div></li></ol></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec34"/>Using VNC for remote virtual machine access</h1></div></div></div><p>In the previous section, you<a id="id192" class="indexterm"/> have learned how to create shared<a id="id193" class="indexterm"/> virtual machines within VMware. This option is useful if you want to share virtual machines with other users who are also using VMware. On the other hand, to access shared virtual machines from a remote computer that doesn't run VMware, this approach doesn't work and you will need something else. <strong>VNC</strong> might be a good solution.</p><p>VNC is a generic protocol that you can use on any operating system to provide remote access. It works from physical computers as well as virtual machines. To open a virtual machine for VNC access, you can use the setup procedure for your specific operating system. Alternatively, you can also use the VMware Workstation virtual machine options to enable VNC access. In this section, you'll learn how to configure the VMware Workstation using VNC.</p><p>Before starting to configure VNC on your virtual machines, you should consider the alternatives. VNC is great if you want to connect to a remote graphical desktop but if you want to access a virtual machine that runs in the console-only mode, you don't need it. In that case, use SSH or any other console-based virtual machine access method. It's easier to set up and is also more secure.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec36"/>Enabling VNC access on a virtual machine</h2></div></div></div><p>To enable VNC <a id="id194" class="indexterm"/>access on a virtual machine, you<a id="id195" class="indexterm"/> should open the virtual machine's properties. To do this, select the virtual machine and navigate to <strong>VM</strong> | <strong>Settings</strong>. Next, open the <strong>Option</strong> tab. On this tab, click on <strong>VNC Connections</strong>. The current status should be set to <strong>Disabled</strong>. Click on <strong>Enable</strong> to open VNC access for the virtual machine and select the port you want to use. Every virtual machine needs a dedicated port assignment. For the first VM that you'll share with VNC, the default port 5900 will do fine. All subsequent virtual machines need a dedicated port however, so choose port 5901 for the second virtual machine, 5902 for the third, and so on. To add some extra protection, you can add a password as well. Next, click on <strong>OK</strong> to save the settings.</p><div><img src="img/9182EN_6_4.jpg" alt="Enabling VNC access on a virtual machine"/><div><p>Enabling VNC access to virtual machines</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec37"/>Connecting remotely to virtual machines using VNC</h2></div></div></div><p>To establish a remote<a id="id196" class="indexterm"/> connection to a virtual machine that is<a id="id197" class="indexterm"/> shared with VNC, you need a<a id="id198" class="indexterm"/> VNC Viewer. You can download a free VNC Viewer at <a class="ulink" href="http://www.tightvnc.com/download.php">www.tightvnc.com/download.php</a>. After downloading it, run the setup procedure. There is no need to do anything difficult, just select the default settings. The installation program gives you a VNC Viewer as well as a VNC Service. You can use the VNC service to provide remote access to your computer's desktop. You don't need it to connect to individual virtual machines on remote computers, but make sure to provide a password to the service to prevent unauthorized use.</p><p>After installation, you need the <a id="id199" class="indexterm"/>TightVNC Viewer to get access to VNC-enabled virtual machines. In the remote host box, enter the IP address of the computer that hosts the VNC shared virtual machine. Next, enter the port assignment as well. For the first virtual machine you want to connect to, you can use the default port assignment 5900; if you want to connect to any other virtual machine, you need to specify the port to the IP address, as in <code class="literal">192.168.1.117:5901</code>, and click on <strong>Connect</strong>. If you have protected VNC access with a password, enter the password now and click on <strong>OK</strong>. You'll now be connected to the virtual machine.</p><div><img src="img/9182EN_6_5.jpg" alt="Connecting remotely to virtual machines using VNC"/><div><p>Connecting to a VNC enabled virtual machine</p></div></div><p>Once you've established a remote connection with the VNC enabled virtual machine, there may be specific buttons or key sequences that you need. At the top of the VNC Viewer window, you'll<a id="id200" class="indexterm"/> see a button bar. In this bar, you'll find access to<a id="id201" class="indexterm"/> commonly used function keys for use within the virtual machine. These include all keys that have a special function both in the virtual machine and in the host operating system, such as <em>Ctrl</em>, <em>Alt</em>, and <em>Ctrl + Alt + Del</em>. Use the buttons if you need to use these keys within the virtual machine.</p><p>Once you've finished working in the VNC session, you can just close the VNC Viewer window. As the remote machine is running somewhere else, the only thing you have to do is just disconnect the session.</p><div><img src="img/9182EN_6_6.jpg" alt="Connecting remotely to virtual machines using VNC"/></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec35"/>Using TeamViewer for remote access through a firewall</h1></div></div></div><p>The solutions discussed so <a id="id202" class="indexterm"/>far are provided by VMware Workstation, and they work fine as long as you're not behind a NAT router. NAT routers typically protect machines on the internal network, which means that no one from outside can reach them. If you want to share virtual machines or their content with users on external networks, TeamViewer provides a nice solution.</p><p>TeamViewer (<a class="ulink" href="http://www.teamviewer.com">www.teamviewer.com</a>) consists <a id="id203" class="indexterm"/>of an agent that you'll run on the machine to which <a id="id204" class="indexterm"/>you want to give access, as well as a client program. As long as it is for personal use, both components are available for free. In a VMware environment, you can run the TeamViewer agent both on the virtual machine and in the host operating system.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec38"/>Installing the TeamViewer agent</h2></div></div></div><p>The most flexible way to <a id="id205" class="indexterm"/>work with TeamViewer is by installing the <a id="id206" class="indexterm"/>TeamViewer agent on the host computer. This means that remote users get complete access to the entire host so that they can start VMware Workstation and run virtual machines from within VMware Workstation. If that scenario seems a bit too insecure for you, you can also install the TeamViewer agent in one or more virtual machines to provide access to those specific virtual machines. The following procedure describes how it works:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to <a class="ulink" href="http://www.teamviewer.com/en/download">www.teamviewer.com/en/download</a> and download the TeamViewer host.</li><li class="listitem">Run the<a id="id207" class="indexterm"/> installation wizard and follow all prompts. Once<a id="id208" class="indexterm"/> completed, the TeamViewer host program shows a user ID. Give this ID to anyone who needs remote access to your host or virtual machine.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec39"/>Using the TeamViewer client</h2></div></div></div><p>On the remote client<a id="id209" class="indexterm"/> that needs to access the virtual machines, you'll need to install the TeamViewer full version. You can download this version for free from <a class="ulink" href="http://www.teamviewer.com">www.teamviewer.com</a>. Install the TeamViewer full version on your computer and accept the default values as proposed by the installation wizard.</p><p>Once installed, TeamViewer shows an option to access a remote computer. To use this option, you need to enter the remote session's ID that is provided by the TeamViewer host agent. Enter it and click on <strong>Connect</strong> to partner to establish the session. You'll now have complete access to the remote machine.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec36"/>Accessing VMware Workstation from tablets and mobile devices</h1></div></div></div><p>Unlike VMware ESXi, there<a id="id210" class="indexterm"/> is no application for either iPad, Android, or Windows to access VMware Workstation remote machines in an easy way <a id="id211" class="indexterm"/>remotely. This doesn't mean that you're without any options though; there are VNC clients for tablets, and there's also a TeamViewer client that allows you to access a VMware Workstation virtual machine or host remotely. So accessing a VMware Workstation virtual machine from a tablet is not much different from accessing a virtual machine from a regular computer. Just install the VNC client or TeamViewer client and follow the procedures described earlier in this chapter.</p></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec37"/>Summary</h1></div></div></div><p>In this chapter, you have learned how to share virtual machines and enable remote access. You have learned that there are many ways to access virtual machines from a distance, including VNC Viewer, TeamViewer, and the VMware Workstation shared virtual machines feature.</p><p>In the next chapter you'll learn how to convert and import virtual machines.</p></div></body></html>